(window.webpackJsonp=window.webpackJsonp||[]).push([[2],[function(t,e,n){"use strict";n.r(e),n.d(e,"__extends",function(){return i}),n.d(e,"__assign",function(){return o}),n.d(e,"__rest",function(){return a}),n.d(e,"__decorate",function(){return s}),n.d(e,"__param",function(){return u}),n.d(e,"__metadata",function(){return c}),n.d(e,"__awaiter",function(){return l}),n.d(e,"__generator",function(){return h}),n.d(e,"__exportStar",function(){return f}),n.d(e,"__values",function(){return p}),n.d(e,"__read",function(){return d}),n.d(e,"__spread",function(){return m}),n.d(e,"__await",function(){return y}),n.d(e,"__asyncGenerator",function(){return g}),n.d(e,"__asyncDelegator",function(){return v}),n.d(e,"__asyncValues",function(){return b}),n.d(e,"__makeTemplateObject",function(){return _}),n.d(e,"__importStar",function(){return w}),n.d(e,"__importDefault",function(){return E});var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};function i(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var o=function(){return(o=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function a(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&(n[r[i]]=t[r[i]])}return n}function s(t,e,n,r){var i,o=arguments.length,a=o<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(o<3?i(a):o>3?i(e,n,a):i(e,n))||a);return o>3&&a&&Object.defineProperty(e,n,a),a}function u(t,e){return function(n,r){e(n,r,t)}}function c(t,e){if("object"===typeof Reflect&&"function"===typeof Reflect.metadata)return Reflect.metadata(t,e)}function l(t,e,n,r){return new(n||(n=Promise))(function(i,o){function a(t){try{u(r.next(t))}catch(e){o(e)}}function s(t){try{u(r.throw(t))}catch(e){o(e)}}function u(t){t.done?i(t.value):new n(function(e){e(t.value)}).then(a,s)}u((r=r.apply(t,e||[])).next())})}function h(t,e){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=e.call(t,a)}catch(s){o=[6,s],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}}function f(t,e){for(var n in t)e.hasOwnProperty(n)||(e[n]=t[n])}function p(t){var e="function"===typeof Symbol&&t[Symbol.iterator],n=0;return e?e.call(t):{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}}}function d(t,e){var n="function"===typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(r=o.next()).done;)a.push(r.value)}catch(s){i={error:s}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a}function m(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(d(arguments[e]));return t}function y(t){return this instanceof y?(this.v=t,this):new y(t)}function g(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r,i=n.apply(t,e||[]),o=[];return r={},a("next"),a("throw"),a("return"),r[Symbol.asyncIterator]=function(){return this},r;function a(t){i[t]&&(r[t]=function(e){return new Promise(function(n,r){o.push([t,e,n,r])>1||s(t,e)})})}function s(t,e){try{(n=i[t](e)).value instanceof y?Promise.resolve(n.value.v).then(u,c):l(o[0][2],n)}catch(r){l(o[0][3],r)}var n}function u(t){s("next",t)}function c(t){s("throw",t)}function l(t,e){t(e),o.shift(),o.length&&s(o[0][0],o[0][1])}}function v(t){var e,n;return e={},r("next"),r("throw",function(t){throw t}),r("return"),e[Symbol.iterator]=function(){return this},e;function r(r,i){e[r]=t[r]?function(e){return(n=!n)?{value:y(t[r](e)),done:"return"===r}:i?i(e):e}:i}}function b(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e,n=t[Symbol.asyncIterator];return n?n.call(t):(t=p(t),e={},r("next"),r("throw"),r("return"),e[Symbol.asyncIterator]=function(){return this},e);function r(n){e[n]=t[n]&&function(e){return new Promise(function(r,i){(function(t,e,n,r){Promise.resolve(r).then(function(e){t({value:e,done:n})},e)})(r,i,(e=t[n](e)).done,e.value)})}}}function _(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}function w(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function E(t){return t&&t.__esModule?t:{default:t}}},function(t,e,n){"use strict";t.exports=n(76)},function(t,e,n){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0});var r,i=n(20),o=((r={})["no-app"]="No Firebase App '{$name}' has been created - call Firebase App.initializeApp()",r["bad-app-name"]="Illegal App name: '{$name}",r["duplicate-app"]="Firebase App named '{$name}' already exists",r["app-deleted"]="Firebase App named '{$name}' already deleted",r["duplicate-service"]="Firebase service named '{$name}' already registered",r["invalid-app-argument"]="firebase.{$name}() takes either no argument or a Firebase App instance.",r),a=new i.ErrorFactory("app","Firebase",o);function s(t,e){throw a.create(t,e)}var u="[DEFAULT]",c=[],l=function(){function t(t,e,n){this.firebase_=n,this.isDeleted_=!1,this.services_={},this.name_=e.name,this._automaticDataCollectionEnabled=e.automaticDataCollectionEnabled||!1,this.options_=i.deepCopy(t),this.INTERNAL={getUid:function(){return null},getToken:function(){return Promise.resolve(null)},addAuthTokenListener:function(t){c.push(t),setTimeout(function(){return t(null)},0)},removeAuthTokenListener:function(t){c=c.filter(function(e){return e!==t})}}}return Object.defineProperty(t.prototype,"automaticDataCollectionEnabled",{get:function(){return this.checkDestroyed_(),this._automaticDataCollectionEnabled},set:function(t){this.checkDestroyed_(),this._automaticDataCollectionEnabled=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return this.checkDestroyed_(),this.name_},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"options",{get:function(){return this.checkDestroyed_(),this.options_},enumerable:!0,configurable:!0}),t.prototype.delete=function(){var t=this;return new Promise(function(e){t.checkDestroyed_(),e()}).then(function(){t.firebase_.INTERNAL.removeApp(t.name_);var e=[];return Object.keys(t.services_).forEach(function(n){Object.keys(t.services_[n]).forEach(function(r){e.push(t.services_[n][r])})}),Promise.all(e.map(function(t){return t.INTERNAL.delete()}))}).then(function(){t.isDeleted_=!0,t.services_={}})},t.prototype._getService=function(t,e){if(void 0===e&&(e=u),this.checkDestroyed_(),this.services_[t]||(this.services_[t]={}),!this.services_[t][e]){var n=e!==u?e:void 0,r=this.firebase_.INTERNAL.factories[t](this,this.extendApp.bind(this),n);this.services_[t][e]=r}return this.services_[t][e]},t.prototype.extendApp=function(t){var e=this;i.deepExtend(this,t),t.INTERNAL&&t.INTERNAL.addAuthTokenListener&&(c.forEach(function(t){e.INTERNAL.addAuthTokenListener(t)}),c=[])},t.prototype.checkDestroyed_=function(){this.isDeleted_&&s("app-deleted",{name:this.name_})},t}();l.prototype.name&&l.prototype.options||l.prototype.delete||console.log("dc");var h=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)};var f=!1;try{f="[object process]"===Object.prototype.toString.call(t.process)}catch(d){}f&&console.warn('\nWarning: This is a browser-targeted Firebase bundle but it appears it is being\nrun in a Node environment.  If running in a Node environment, make sure you\nare using the bundle specified by the "main" field in package.json.\n\nIf you are using Webpack, you can specify "main" as the first item in\n"resolve.mainFields":\nhttps://webpack.js.org/configuration/resolve/#resolvemainfields\n\nIf using Rollup, use the rollup-plugin-node-resolve plugin and set "module"\nto false and "main" to true:\nhttps://github.com/rollup/rollup-plugin-node-resolve\n');var p=function t(){var e={},n={},r={},o={__esModule:!0,initializeApp:function(t,n){if(void 0===n&&(n={}),"object"!==typeof n||null===n){var r=n;n={name:r}}var i=n;void 0===i.name&&(i.name=u);var a=i.name;"string"===typeof a&&a||s("bad-app-name",{name:a+""}),h(e,a)&&s("duplicate-app",{name:a});var c=new l(t,i,o);return e[a]=c,f(c,"create"),c},app:a,apps:null,Promise:Promise,SDK_VERSION:"5.10.0",INTERNAL:{registerService:function(t,e,u,h,f){n[t]&&s("duplicate-service",{name:t}),n[t]=e,h&&(r[t]=h,c().forEach(function(t){h("create",t)}));var p=function(e){return void 0===e&&(e=a()),"function"!==typeof e[t]&&s("invalid-app-argument",{name:t}),e[t]()};return void 0!==u&&i.deepExtend(p,u),o[t]=p,l.prototype[t]=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return this._getService.bind(this,t).apply(this,f?e:[])},p},createFirebaseNamespace:t,extendNamespace:function(t){i.deepExtend(o,t)},createSubscribe:i.createSubscribe,ErrorFactory:i.ErrorFactory,removeApp:function(t){f(e[t],"delete"),delete e[t]},factories:n,useAsService:p,Promise:Promise,deepExtend:i.deepExtend}};function a(t){return h(e,t=t||u)||s("no-app",{name:t}),e[t]}function c(){return Object.keys(e).map(function(t){return e[t]})}function f(t,e){Object.keys(n).forEach(function(n){var i=p(t,n);null!==i&&r[i]&&r[i](e,t)})}function p(t,e){if("serverAuth"===e)return null;var n=e;return t.options,n}return i.patchProperty(o,"default",o),Object.defineProperty(o,"apps",{get:c}),i.patchProperty(a,"App",l),o}();e.default=p,e.firebase=p}).call(this,n(18))},function(t,e){t.exports="object"==typeof window&&window&&window.Math==Math?window:"object"==typeof self&&self&&self.Math==Math?self:Function("return this")()},function(t,e,n){var r=n(51),i=n(7),o=n(52),a=n(12).f;t.exports=function(t){var e=r.Symbol||(r.Symbol={});i(e,t)||a(e,t,{value:o.f(t)})}},function(t,e,n){t.exports=n(169)()},function(t,e,n){var r=n(24)("wks"),i=n(45),o=n(3).Symbol,a=n(62);t.exports=function(t){return r[t]||(r[t]=a&&o[t]||(a?o:i)("Symbol."+t))}},function(t,e){var n={}.hasOwnProperty;t.exports=function(t,e){return n.call(t,e)}},function(t,e){t.exports=function(t){try{return!!t()}catch(e){return!0}}},function(t,e){t.exports=function(t){return"object"===typeof t?null!==t:"function"===typeof t}},function(t,e,n){var r=n(12),i=n(25);t.exports=n(19)?function(t,e,n){return r.f(t,e,i(1,n))}:function(t,e,n){return t[e]=n,t}},function(t,e,n){var r=n(3),i=n(46).f,o=n(10),a=n(35),s=n(44),u=n(64),c=n(103);t.exports=function(t,e){var n,l,h,f,p,d=t.target,m=t.global,y=t.stat;if(n=m?r:y?r[d]||s(d,{}):(r[d]||{}).prototype)for(l in e){if(f=e[l],h=t.noTargetGet?(p=i(n,l))&&p.value:n[l],!c(m?l:d+(y?".":"#")+l,t.forced)&&void 0!==h){if(typeof f===typeof h)continue;u(f,h)}(t.sham||h&&h.sham)&&o(f,"sham",!0),a(n,l,f,t)}}},function(t,e,n){var r=n(19),i=n(60),o=n(21),a=n(32),s=Object.defineProperty;e.f=r?s:function(t,e,n){if(o(t),e=a(e,!0),o(n),i)try{return s(t,e,n)}catch(r){}if("get"in n||"set"in n)throw TypeError("Accessors not supported");return"value"in n&&(t[e]=n.value),t}},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}n.d(e,"a",function(){return r})},function(t,e,n){"use strict";function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function i(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),t}n.d(e,"a",function(){return i})},function(t,e,n){"use strict";function r(t){return(r=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}n.d(e,"a",function(){return r})},function(t,e,n){"use strict";function r(t){return(r="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function i(t){return(i="function"===typeof Symbol&&"symbol"===r(Symbol.iterator)?function(t){return r(t)}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":r(t)})(t)}function o(t,e){return!e||"object"!==i(e)&&"function"!==typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}n.d(e,"a",function(){return o})},function(t,e,n){"use strict";function r(t,e){return(r=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function i(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&r(t,e)}n.d(e,"a",function(){return i})},function(t,e){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(r){"object"===typeof window&&(n=window)}t.exports=n},function(t,e,n){t.exports=!n(8)(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"},i=function(t,e){if(!t)throw o(e)},o=function(t){return new Error("Firebase Database ("+r.SDK_VERSION+") INTERNAL ASSERT FAILED: "+t)},a=function(t){for(var e=[],n=0,r=0;r<t.length;r++){var i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=63&i|128):55296==(64512&i)&&r+1<t.length&&56320==(64512&t.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&t.charCodeAt(++r)),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=63&i|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=63&i|128)}return e},s={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray:function(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<t.length;i+=3){var o=t[i],a=i+1<t.length,s=a?t[i+1]:0,u=i+2<t.length,c=u?t[i+2]:0,l=o>>2,h=(3&o)<<4|s>>4,f=(15&s)<<2|c>>6,p=63&c;u||(p=64,a||(f=64)),r.push(n[l],n[h],n[f],n[p])}return r.join("")},encodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(a(t),e)},decodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):function(t){for(var e=[],n=0,r=0;n<t.length;){var i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){var o=t[n++];e[r++]=String.fromCharCode((31&i)<<6|63&o)}else if(i>239&&i<365){var a=((7&i)<<18|(63&(o=t[n++]))<<12|(63&(s=t[n++]))<<6|63&t[n++])-65536;e[r++]=String.fromCharCode(55296+(a>>10)),e[r++]=String.fromCharCode(56320+(1023&a))}else{o=t[n++];var s=t[n++];e[r++]=String.fromCharCode((15&i)<<12|(63&o)<<6|63&s)}}return e.join("")}(this.decodeStringToByteArray(t,e))},decodeStringToByteArray:function(t,e){this.init_();for(var n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<t.length;){var o=n[t.charAt(i++)],a=i<t.length?n[t.charAt(i)]:0,s=++i<t.length?n[t.charAt(i)]:64,u=++i<t.length?n[t.charAt(i)]:64;if(++i,null==o||null==a||null==s||null==u)throw Error();var c=o<<2|a>>4;if(r.push(c),64!=s){var l=a<<4&240|s>>2;if(r.push(l),64!=u){var h=s<<6&192|u;r.push(h)}}}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}},u=function(t){try{return s.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function c(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:return new Date(e.getTime());case Object:void 0===t&&(t={});break;case Array:t=[];break;default:return e}for(var n in e)e.hasOwnProperty(n)&&(t[n]=c(t[n],e[n]));return t}var l=function(){function t(){var t=this;this.promise=new Promise(function(e,n){t.resolve=e,t.reject=n})}return t.prototype.wrapCallback=function(t){var e=this;return function(n,r){n?e.reject(n):e.resolve(r),"function"===typeof t&&(e.promise.catch(function(){}),1===t.length?t(n):t(n,r))}},t}(),h=function(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""},f="FirebaseError",p=Error.captureStackTrace;var d=function(){return function(t,e){if(this.code=t,this.message=e,p)p(this,m.prototype.create);else try{throw Error.apply(this,arguments)}catch(n){this.name=f,Object.defineProperty(this,"stack",{get:function(){return n.stack}})}}}();d.prototype=Object.create(Error.prototype),d.prototype.constructor=d,d.prototype.name=f;var m=function(){function t(t,e,n){this.service=t,this.serviceName=e,this.errors=n,this.pattern=/\{\$([^}]+)}/g}return t.prototype.create=function(t,e){void 0===e&&(e={});var n,r=this.errors[t],i=this.service+"/"+t;n=void 0===r?"Error":r.replace(this.pattern,function(t,n){var r=e[n];return void 0!==r?r.toString():"<"+n+"?>"}),n=this.serviceName+": "+n+" ("+i+").";var o=new d(i,n);for(var a in e)e.hasOwnProperty(a)&&"_"!==a.slice(-1)&&(o[a]=e[a]);return o},t}();function y(t){return JSON.parse(t)}var g=function(t){var e={},n={},r={},i="";try{var o=t.split(".");e=y(u(o[0])||""),n=y(u(o[1])||""),i=o[2],r=n.d||{},delete n.d}catch(a){}return{header:e,claims:n,data:r,signature:i}},v=function(t,e){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])},b=function(t,e){return v(e,function(e,n){t[e]=n}),t},_=function(t,e,n){for(var r in t)if(e.call(n,t[r],r,t))return r},w=function(){function t(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(var t=1;t<this.blockSize;++t)this.pad_[t]=0;this.reset()}return t.prototype.reset=function(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0},t.prototype.compress_=function(t,e){e||(e=0);var n=this.W_;if("string"===typeof t)for(var r=0;r<16;r++)n[r]=t.charCodeAt(e)<<24|t.charCodeAt(e+1)<<16|t.charCodeAt(e+2)<<8|t.charCodeAt(e+3),e+=4;else for(r=0;r<16;r++)n[r]=t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3],e+=4;for(r=16;r<80;r++){var i=n[r-3]^n[r-8]^n[r-14]^n[r-16];n[r]=4294967295&(i<<1|i>>>31)}var o,a,s=this.chain_[0],u=this.chain_[1],c=this.chain_[2],l=this.chain_[3],h=this.chain_[4];for(r=0;r<80;r++){r<40?r<20?(o=l^u&(c^l),a=1518500249):(o=u^c^l,a=1859775393):r<60?(o=u&c|l&(u|c),a=2400959708):(o=u^c^l,a=3395469782);i=(s<<5|s>>>27)+o+h+a+n[r]&4294967295;h=l,l=c,c=4294967295&(u<<30|u>>>2),u=s,s=i}this.chain_[0]=this.chain_[0]+s&4294967295,this.chain_[1]=this.chain_[1]+u&4294967295,this.chain_[2]=this.chain_[2]+c&4294967295,this.chain_[3]=this.chain_[3]+l&4294967295,this.chain_[4]=this.chain_[4]+h&4294967295},t.prototype.update=function(t,e){if(null!=t){void 0===e&&(e=t.length);for(var n=e-this.blockSize,r=0,i=this.buf_,o=this.inbuf_;r<e;){if(0==o)for(;r<=n;)this.compress_(t,r),r+=this.blockSize;if("string"===typeof t){for(;r<e;)if(i[o]=t.charCodeAt(r),++r,++o==this.blockSize){this.compress_(i),o=0;break}}else for(;r<e;)if(i[o]=t[r],++r,++o==this.blockSize){this.compress_(i),o=0;break}}this.inbuf_=o,this.total_+=e}},t.prototype.digest=function(){var t=[],e=8*this.total_;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(var n=this.blockSize-1;n>=56;n--)this.buf_[n]=255&e,e/=256;this.compress_(this.buf_);var r=0;for(n=0;n<5;n++)for(var i=24;i>=0;i-=8)t[r]=this.chain_[n]>>i&255,++r;return t},t}();var E=function(){function t(t,e){var n=this;this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=e,this.task.then(function(){t(n)}).catch(function(t){n.error(t)})}return t.prototype.next=function(t){this.forEachObserver(function(e){e.next(t)})},t.prototype.error=function(t){this.forEachObserver(function(e){e.error(t)}),this.close(t)},t.prototype.complete=function(){this.forEachObserver(function(t){t.complete()}),this.close()},t.prototype.subscribe=function(t,e,n){var r,i=this;if(void 0===t&&void 0===e&&void 0===n)throw new Error("Missing Observer.");void 0===(r=function(t,e){if("object"!==typeof t||null===t)return!1;for(var n=0,r=e;n<r.length;n++){var i=r[n];if(i in t&&"function"===typeof t[i])return!0}return!1}(t,["next","error","complete"])?t:{next:t,error:e,complete:n}).next&&(r.next=S),void 0===r.error&&(r.error=S),void 0===r.complete&&(r.complete=S);var o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(t){}}),this.observers.push(r),o},t.prototype.unsubscribeOne=function(t){void 0!==this.observers&&void 0!==this.observers[t]&&(delete this.observers[t],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))},t.prototype.forEachObserver=function(t){if(!this.finalized)for(var e=0;e<this.observers.length;e++)this.sendOne(e,t)},t.prototype.sendOne=function(t,e){var n=this;this.task.then(function(){if(void 0!==n.observers&&void 0!==n.observers[t])try{e(n.observers[t])}catch(r){"undefined"!==typeof console&&console.error&&console.error(r)}})},t.prototype.close=function(t){var e=this;this.finalized||(this.finalized=!0,void 0!==t&&(this.finalError=t),this.task.then(function(){e.observers=void 0,e.onNoObservers=void 0}))},t}();function S(){}function T(t,e,n){var r="";switch(e){case 1:r=n?"first":"First";break;case 2:r=n?"second":"Second";break;case 3:r=n?"third":"Third";break;case 4:r=n?"fourth":"Fourth";break;default:throw new Error("errorPrefix called with argumentNumber > 4.  Need to update it?")}var i=t+" failed: ";return i+=r+" argument "}e.CONSTANTS=r,e.Deferred=l,e.ErrorFactory=m,e.FirebaseError=d,e.Sha1=w,e.assert=i,e.assertionError=o,e.async=function(t,e){return function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];Promise.resolve(!0).then(function(){t.apply(void 0,n)}).catch(function(t){e&&e(t)})}},e.base64=s,e.base64Decode=u,e.base64Encode=function(t){var e=a(t);return s.encodeByteArray(e,!0)},e.clone=function(t){return b({},t)},e.contains=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.createSubscribe=function(t,e){var n=new E(t,e);return n.subscribe.bind(n)},e.decode=g,e.deepCopy=function(t){return c(void 0,t)},e.deepExtend=c,e.errorPrefix=T,e.every=function(t,e){for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)&&!e(n,t[n]))return!1;return!0},e.extend=b,e.findKey=_,e.findValue=function(t,e,n){var r=_(t,e,n);return r&&t[r]},e.forEach=v,e.getAnyKey=function(t){for(var e in t)return e},e.getCount=function(t){var e=0;for(var n in t)e++;return e},e.getUA=h,e.getValues=function(t){var e=[],n=0;for(var r in t)e[n++]=t[r];return e},e.isAdmin=function(t){var e=g(t).claims;return"object"===typeof e&&!0===e.admin},e.isEmpty=function(t){for(var e in t)return!1;return!0},e.isMobileCordova=function(){return"undefined"!==typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(h())},e.isNodeSdk=function(){return!0===r.NODE_CLIENT||!0===r.NODE_ADMIN},e.isNonNullObject=function(t){return"object"===typeof t&&null!==t},e.isReactNative=function(){return"object"===typeof navigator&&"ReactNative"===navigator.product},e.isValidFormat=function(t){var e=g(t).claims;return!!e&&"object"===typeof e&&e.hasOwnProperty("iat")},e.isValidTimestamp=function(t){var e,n,r=g(t).claims,i=Math.floor((new Date).getTime()/1e3);return"object"===typeof r&&(r.hasOwnProperty("nbf")?e=r.nbf:r.hasOwnProperty("iat")&&(e=r.iat),n=r.hasOwnProperty("exp")?r.exp:e+86400),i&&e&&n&&i>=e&&i<=n},e.issuedAtTime=function(t){var e=g(t).claims;return"object"===typeof e&&e.hasOwnProperty("iat")?e.iat:null},e.jsonEval=y,e.map=function(t,e,n){var r={};for(var i in t)r[i]=e.call(n,t[i],i,t);return r},e.patchCapture=function(t){var e=p;return p=t,e},e.patchProperty=function(t,e,n){t[e]=n},e.querystring=function(t){var e=[];return v(t,function(t,n){Array.isArray(n)?n.forEach(function(n){e.push(encodeURIComponent(t)+"="+encodeURIComponent(n))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(n))}),e.length?"&"+e.join("&"):""},e.querystringDecode=function(t){var e={};return t.replace(/^\?/,"").split("&").forEach(function(t){if(t){var n=t.split("=");e[n[0]]=n[1]}}),e},e.safeGet=function(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]},e.stringLength=function(t){for(var e=0,n=0;n<t.length;n++){var r=t.charCodeAt(n);r<128?e++:r<2048?e+=2:r>=55296&&r<=56319?(e+=4,n++):e+=3}return e},e.stringToByteArray=function(t){for(var e=[],n=0,r=0;r<t.length;r++){var o=t.charCodeAt(r);if(o>=55296&&o<=56319){var a=o-55296;i(++r<t.length,"Surrogate pair missing trail surrogate."),o=65536+(a<<10)+(t.charCodeAt(r)-56320)}o<128?e[n++]=o:o<2048?(e[n++]=o>>6|192,e[n++]=63&o|128):o<65536?(e[n++]=o>>12|224,e[n++]=o>>6&63|128,e[n++]=63&o|128):(e[n++]=o>>18|240,e[n++]=o>>12&63|128,e[n++]=o>>6&63|128,e[n++]=63&o|128)}return e},e.stringify=function(t){return JSON.stringify(t)},e.validateArgCount=function(t,e,n,r){var i;if(r<e?i="at least "+e:r>n&&(i=0===n?"none":"no more than "+n),i)throw new Error(t+" failed: Was called with "+r+(1===r?" argument.":" arguments.")+" Expects "+i+".")},e.validateCallback=function(t,e,n,r){if((!r||n)&&"function"!==typeof n)throw new Error(T(t,e,r)+"must be a valid function.")},e.validateContextObject=function(t,e,n,r){if((!r||n)&&("object"!==typeof n||null===n))throw new Error(T(t,e,r)+"must be a valid context object.")},e.validateNamespace=function(t,e,n,r){if((!r||n)&&"string"!==typeof n)throw new Error(T(t,e,r)+"must be a valid firebase namespace.")}},function(t,e,n){var r=n(9);t.exports=function(t){if(!r(t))throw TypeError(String(t)+" is not an object");return t}},function(t,e,n){var r=n(42),i=n(23);t.exports=function(t){return r(i(t))}},function(t,e){t.exports=function(t){if(void 0==t)throw TypeError("Can't call method on "+t);return t}},function(t,e,n){var r=n(3),i=n(44),o=r["__core-js_shared__"]||i("__core-js_shared__",{});(t.exports=function(t,e){return o[t]||(o[t]=void 0!==e?e:{})})("versions",[]).push({version:"3.0.1",mode:n(33)?"pure":"global",copyright:"\xa9 2019 Denis Pushkarev (zloirock.ru)"})},function(t,e){t.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},function(t,e,n){var r=n(12).f,i=n(7),o=n(6)("toStringTag");t.exports=function(t,e,n){t&&!i(t=n?t:t.prototype,o)&&r(t,o,{configurable:!0,value:e})}},function(t,e,n){"use strict";n(90);var r,i=(r=n(2))&&"object"===typeof r&&"default"in r?r.default:r;n(162),n(163),n(164),n(166),n(167),n(168),console.warn("\nIt looks like you're using the development build of the Firebase JS SDK.\nWhen deploying Firebase apps to production, it is advisable to only import\nthe individual SDK components you intend to use.\n\nFor the module builds, these are available in the following manner\n(replace <PACKAGE> with the name of a component - i.e. auth, database, etc):\n\nCommonJS Modules:\nconst firebase = require('firebase/app');\nrequire('firebase/<PACKAGE>');\n\nES Modules:\nimport firebase from 'firebase/app';\nimport 'firebase/<PACKAGE>';\n\nTypescript:\nimport * as firebase from 'firebase/app';\nimport 'firebase/<PACKAGE>';\n"),t.exports=i},function(t,e){var n={}.toString;t.exports=function(t){return n.call(t).slice(8,-1)}},function(t,e,n){var r=n(23);t.exports=function(t){return Object(r(t))}},function(t,e,n){var r=n(31),i=Math.min;t.exports=function(t){return t>0?i(r(t),9007199254740991):0}},function(t,e){var n=Math.ceil,r=Math.floor;t.exports=function(t){return isNaN(t=+t)?0:(t>0?r:n)(t)}},function(t,e,n){var r=n(9);t.exports=function(t,e){if(!r(t))return t;var n,i;if(e&&"function"==typeof(n=t.toString)&&!r(i=n.call(t)))return i;if("function"==typeof(n=t.valueOf)&&!r(i=n.call(t)))return i;if(!e&&"function"==typeof(n=t.toString)&&!r(i=n.call(t)))return i;throw TypeError("Can't convert object to primitive value")}},function(t,e){t.exports=!1},function(t,e,n){"use strict";var r={}.propertyIsEnumerable,i=Object.getOwnPropertyDescriptor,o=i&&!r.call({1:2},1);e.f=o?function(t){var e=i(this,t);return!!e&&e.enumerable}:r},function(t,e,n){var r=n(3),i=n(10),o=n(7),a=n(44),s=n(63),u=n(36),c=u.get,l=u.enforce,h=String(s).split("toString");n(24)("inspectSource",function(t){return s.call(t)}),(t.exports=function(t,e,n,s){var u=!!s&&!!s.unsafe,c=!!s&&!!s.enumerable,f=!!s&&!!s.noTargetGet;"function"==typeof n&&("string"!=typeof e||o(n,"name")||i(n,"name",e),l(n).source=h.join("string"==typeof e?e:"")),t!==r?(u?!f&&t[e]&&(c=!0):delete t[e],c?t[e]=n:i(t,e,n)):c?t[e]=n:a(e,n)})(Function.prototype,"toString",function(){return"function"==typeof this&&c(this).source||s.call(this)})},function(t,e,n){var r,i,o,a=n(99),s=n(9),u=n(10),c=n(7),l=n(37),h=n(38),f=n(3).WeakMap;if(a){var p=new f,d=p.get,m=p.has,y=p.set;r=function(t,e){return y.call(p,t,e),e},i=function(t){return d.call(p,t)||{}},o=function(t){return m.call(p,t)}}else{var g=l("state");h[g]=!0,r=function(t,e){return u(t,g,e),e},i=function(t){return c(t,g)?t[g]:{}},o=function(t){return c(t,g)}}t.exports={set:r,get:i,has:o,enforce:function(t){return o(t)?i(t):r(t,{})},getterFor:function(t){return function(e){var n;if(!s(e)||(n=i(e)).type!==t)throw TypeError("Incompatible receiver, "+t+" required");return n}}}},function(t,e,n){var r=n(24)("keys"),i=n(45);t.exports=function(t){return r[t]||(r[t]=i(t))}},function(t,e){t.exports={}},function(t,e){e.f=Object.getOwnPropertySymbols},function(t,e,n){var r=n(65),i=n(48);t.exports=Object.keys||function(t){return r(t,i)}},function(t,e,n){var r=n(3),i=n(58),o=Function.call;t.exports=function(t,e,n){return i(o,r[t].prototype[e],n)}},function(t,e,n){var r=n(8),i=n(28),o="".split;t.exports=r(function(){return!Object("z").propertyIsEnumerable(0)})?function(t){return"String"==i(t)?o.call(t,""):Object(t)}:Object},function(t,e,n){var r=n(28);t.exports=Array.isArray||function(t){return"Array"==r(t)}},function(t,e,n){var r=n(3),i=n(10);t.exports=function(t,e){try{i(r,t,e)}catch(n){r[t]=e}return e}},function(t,e){var n=0,r=Math.random();t.exports=function(t){return"Symbol(".concat(void 0===t?"":t,")_",(++n+r).toString(36))}},function(t,e,n){var r=n(19),i=n(34),o=n(25),a=n(22),s=n(32),u=n(7),c=n(60),l=Object.getOwnPropertyDescriptor;e.f=r?l:function(t,e){if(t=a(t),e=s(e,!0),c)try{return l(t,e)}catch(n){}if(u(t,e))return o(!i.f.call(t,e),t[e])}},function(t,e,n){var r=n(65),i=n(48).concat("length","prototype");e.f=Object.getOwnPropertyNames||function(t){return r(t,i)}},function(t,e){t.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},function(t,e,n){var r=n(6)("unscopables"),i=n(50),o=n(10),a=Array.prototype;void 0==a[r]&&o(a,r,i(null)),t.exports=function(t){a[r][t]=!0}},function(t,e,n){var r=n(21),i=n(104),o=n(48),a=n(105),s=n(61),u=n(37)("IE_PROTO"),c=function(){},l=function(){var t,e=s("iframe"),n=o.length;for(e.style.display="none",a.appendChild(e),e.src=String("javascript:"),(t=e.contentWindow.document).open(),t.write("<script>document.F=Object<\/script>"),t.close(),l=t.F;n--;)delete l.prototype[o[n]];return l()};t.exports=Object.create||function(t,e){var n;return null!==t?(c.prototype=r(t),n=new c,c.prototype=null,n[u]=t):n=l(),void 0===e?n:i(n,e)},n(38)[u]=!0},function(t,e,n){t.exports=n(3)},function(t,e,n){e.f=n(6)},function(t,e){t.exports={}},function(t,e,n){"use strict";var r=Object.getOwnPropertySymbols,i=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable;t.exports=function(){try{if(!Object.assign)return!1;var t=new String("abc");if(t[5]="de","5"===Object.getOwnPropertyNames(t)[0])return!1;for(var e={},n=0;n<10;n++)e["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(e).map(function(t){return e[t]}).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach(function(t){r[t]=t}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(i){return!1}}()?Object.assign:function(t,e){for(var n,a,s=function(t){if(null===t||void 0===t)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(t)}(t),u=1;u<arguments.length;u++){for(var c in n=Object(arguments[u]))i.call(n,c)&&(s[c]=n[c]);if(r){a=r(n);for(var l=0;l<a.length;l++)o.call(n,a[l])&&(s[a[l]]=n[a[l]])}}return s}},function(t,e){t.exports=function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}},function(t,e){var n,r,i=t.exports={};function o(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function s(t){if(n===setTimeout)return setTimeout(t,0);if((n===o||!n)&&setTimeout)return n=setTimeout,setTimeout(t,0);try{return n(t,0)}catch(e){try{return n.call(null,t,0)}catch(e){return n.call(this,t,0)}}}!function(){try{n="function"===typeof setTimeout?setTimeout:o}catch(t){n=o}try{r="function"===typeof clearTimeout?clearTimeout:a}catch(t){r=a}}();var u,c=[],l=!1,h=-1;function f(){l&&u&&(l=!1,u.length?c=u.concat(c):h=-1,c.length&&p())}function p(){if(!l){var t=s(f);l=!0;for(var e=c.length;e;){for(u=c,c=[];++h<e;)u&&u[h].run();h=-1,e=c.length}u=null,l=!1,function(t){if(r===clearTimeout)return clearTimeout(t);if((r===a||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(t);try{r(t)}catch(e){try{return r.call(null,t)}catch(e){return r.call(this,t)}}}(t)}}function d(t,e){this.fun=t,this.array=e}function m(){}i.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];c.push(new d(t,e)),1!==c.length||l||s(p)},d.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=m,i.addListener=m,i.once=m,i.off=m,i.removeListener=m,i.removeAllListeners=m,i.emit=m,i.prependListener=m,i.prependOnceListener=m,i.listeners=function(t){return[]},i.binding=function(t){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(t){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},function(t,e,n){var r=n(58),i=n(42),o=n(29),a=n(30),s=n(59);t.exports=function(t,e){var n=1==t,u=2==t,c=3==t,l=4==t,h=6==t,f=5==t||h,p=e||s;return function(e,s,d){for(var m,y,g=o(e),v=i(g),b=r(s,d,3),_=a(v.length),w=0,E=n?p(e,_):u?p(e,0):void 0;_>w;w++)if((f||w in v)&&(y=b(m=v[w],w,g),t))if(n)E[w]=y;else if(y)switch(t){case 3:return!0;case 5:return m;case 6:return w;case 2:E.push(m)}else if(l)return!1;return h?-1:c||l?l:E}}},function(t,e,n){var r=n(98);t.exports=function(t,e,n){if(r(t),void 0===e)return t;switch(n){case 0:return function(){return t.call(e)};case 1:return function(n){return t.call(e,n)};case 2:return function(n,r){return t.call(e,n,r)};case 3:return function(n,r,i){return t.call(e,n,r,i)}}return function(){return t.apply(e,arguments)}}},function(t,e,n){var r=n(9),i=n(43),o=n(6)("species");t.exports=function(t,e){var n;return i(t)&&("function"!=typeof(n=t.constructor)||n!==Array&&!i(n.prototype)?r(n)&&null===(n=n[o])&&(n=void 0):n=void 0),new(void 0===n?Array:n)(0===e?0:e)}},function(t,e,n){t.exports=!n(19)&&!n(8)(function(){return 7!=Object.defineProperty(n(61)("div"),"a",{get:function(){return 7}}).a})},function(t,e,n){var r=n(9),i=n(3).document,o=r(i)&&r(i.createElement);t.exports=function(t){return o?i.createElement(t):{}}},function(t,e,n){t.exports=!n(8)(function(){return!String(Symbol())})},function(t,e,n){t.exports=n(24)("native-function-to-string",Function.toString)},function(t,e,n){var r=n(7),i=n(100),o=n(46),a=n(12);t.exports=function(t,e){for(var n=i(e),s=a.f,u=o.f,c=0;c<n.length;c++){var l=n[c];r(t,l)||s(t,l,u(e,l))}}},function(t,e,n){var r=n(7),i=n(22),o=n(101)(!1),a=n(38);t.exports=function(t,e){var n,s=i(t),u=0,c=[];for(n in s)!r(a,n)&&r(s,n)&&c.push(n);for(;e.length>u;)r(s,n=e[u++])&&(~o(c,n)||c.push(n));return c}},function(t,e,n){n(4)("iterator")},function(t,e,n){"use strict";var r=n(11),i=n(155),o=n(69),a=n(157),s=n(26),u=n(10),c=n(35),l=n(33),h=n(6)("iterator"),f=n(53),p=n(68),d=p.IteratorPrototype,m=p.BUGGY_SAFARI_ITERATORS,y=function(){return this};t.exports=function(t,e,n,p,g,v,b){i(n,e,p);var _,w,E,S=function(t){if(t===g&&I)return I;if(!m&&t in k)return k[t];switch(t){case"keys":case"values":case"entries":return function(){return new n(this,t)}}return function(){return new n(this)}},T=e+" Iterator",C=!1,k=t.prototype,x=k[h]||k["@@iterator"]||g&&k[g],I=!m&&x||S(g),A="Array"==e&&k.entries||x;if(A&&(_=o(A.call(new t)),d!==Object.prototype&&_.next&&(l||o(_)===d||(a?a(_,d):"function"!=typeof _[h]&&u(_,h,y)),s(_,T,!0,!0),l&&(f[T]=y))),"values"==g&&x&&"values"!==x.name&&(C=!0,I=function(){return x.call(this)}),l&&!b||k[h]===I||u(k,h,I),f[e]=I,g)if(w={values:S("values"),keys:v?I:S("keys"),entries:S("entries")},b)for(E in w)!m&&!C&&E in k||c(k,E,w[E]);else r({target:e,proto:!0,forced:m||C},w);return w}},function(t,e,n){"use strict";var r,i,o,a=n(69),s=n(10),u=n(7),c=n(33),l=n(6)("iterator"),h=!1;[].keys&&("next"in(o=[].keys())?(i=a(a(o)))!==Object.prototype&&(r=i):h=!0),void 0==r&&(r={}),c||u(r,l)||s(r,l,function(){return this}),t.exports={IteratorPrototype:r,BUGGY_SAFARI_ITERATORS:h}},function(t,e,n){var r=n(7),i=n(29),o=n(37)("IE_PROTO"),a=n(156),s=Object.prototype;t.exports=a?Object.getPrototypeOf:function(t){return t=i(t),r(t,o)?t[o]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?s:null}},function(t,e,n){"use strict";n.r(e),n.d(e,"LogLevel",function(){return r}),n.d(e,"Logger",function(){return s}),n.d(e,"setLogLevel",function(){return u});var r,i=[];!function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"}(r||(r={}));var o=r.INFO,a=function(t,e){for(var n=[],i=2;i<arguments.length;i++)n[i-2]=arguments[i];if(!(e<t.logLevel)){var o=(new Date).toISOString();switch(e){case r.DEBUG:case r.VERBOSE:console.log.apply(console,["["+o+"]  "+t.name+":"].concat(n));break;case r.INFO:console.info.apply(console,["["+o+"]  "+t.name+":"].concat(n));break;case r.WARN:console.warn.apply(console,["["+o+"]  "+t.name+":"].concat(n));break;case r.ERROR:console.error.apply(console,["["+o+"]  "+t.name+":"].concat(n));break;default:throw new Error("Attempted to log a message with an invalid logType (value: "+e+")")}}},s=function(){function t(t){this.name=t,this._logLevel=o,this._logHandler=a,i.push(this)}return Object.defineProperty(t.prototype,"logLevel",{get:function(){return this._logLevel},set:function(t){if(!(t in r))throw new TypeError("Invalid value assigned to `logLevel`");this._logLevel=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"logHandler",{get:function(){return this._logHandler},set:function(t){if("function"!==typeof t)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t},enumerable:!0,configurable:!0}),t.prototype.debug=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._logHandler.apply(this,[this,r.DEBUG].concat(t))},t.prototype.log=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._logHandler.apply(this,[this,r.VERBOSE].concat(t))},t.prototype.info=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._logHandler.apply(this,[this,r.INFO].concat(t))},t.prototype.warn=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._logHandler.apply(this,[this,r.WARN].concat(t))},t.prototype.error=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._logHandler.apply(this,[this,r.ERROR].concat(t))},t}();function u(t){i.forEach(function(e){e.logLevel=t})}},function(t,e,n){"use strict";!function t(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}(),t.exports=n(77)},function(t,e,n){var r=n(82),i=n(83),o=n(84),a=n(86),s=n(87),u=n(55);"undefined"==typeof self||self,t.exports=function(){var t=Math.sin,e=Math.cos,c=Math.PI;return function(t){function e(r){if(n[r])return n[r].exports;var i=n[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,e),i.l=!0,i.exports}var n={};return e.m=t,e.c=n,e.d=function(t,n,r){e.o(t,n)||Object.defineProperty(t,n,{configurable:!1,enumerable:!0,get:r})},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="./",e(e.s=13)}([function(n,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var i=c,o=["#A45BF1","#25C6F6","#72F753","#F76C88","#F5F770"],a=function(t){return t*(i/180)},s=function(t,e,n,r){var o=a(t),s=a(e);return{x:0,y:0,wobble:10*r(),velocity:.5*n+r()*n,angle2D:-o+(.5*s-r()*s),angle3D:-i/4+r()*(i/2),tiltAngle:r()*i}},u=function(n,r,i){n.physics.x+=e(n.physics.angle2D)*n.physics.velocity,n.physics.y+=t(n.physics.angle2D)*n.physics.velocity,n.physics.z+=t(n.physics.angle3D)*n.physics.velocity,n.physics.wobble+=.1,n.physics.velocity*=i,n.physics.y+=3,n.physics.tiltAngle+=.1;var o=n.physics,a=o.x,s=o.y,u=o.tiltAngle,c=o.wobble,l=a+10*e(c),h=s+10*t(c),f="translate3d(".concat(l,"px, ").concat(h,"px, 0) rotate3d(1, 1, 1, ").concat(u,"rad)");n.element.style.transform=f,n.element.style.opacity=1-r},l=function(t,e,n,r){var i=r,o=0;requestAnimationFrame(function r(){e.forEach(function(t){return u(t,o/i,n)}),(o+=1)<i?requestAnimationFrame(r):e.forEach(function(e){if(e.element.parentNode===t)return t.removeChild(e.element)})})};r.default=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.elementCount,r=void 0===n?50:n,i=e.elementSize,a=void 0===i?8:i,u=e.colors,c=void 0===u?o:u,h=e.angle,f=void 0===h?90:h,p=e.spread,d=void 0===p?45:p,m=e.decay,y=void 0===m?.9:m,g=e.lifetime,v=void 0===g?200:g,b=e.startVelocity,_=void 0===b?35:b,w=e.zIndex,E=void 0===w?0:w,S=e.random,T=void 0===S?Math.random:S,C=function(t,e,n,r,i){return Array.from({length:e}).map(function(e,o){var a=document.createElement("span"),s=i[o%i.length];return a.style["background-color"]=s,a.style.width="".concat(n,"px"),a.style.height="".concat(n,"px"),a.style.position="absolute",a.style.zIndex=r,t.appendChild(a),a})}(t,r,a,E,c),k=C.map(function(t){return{element:t,physics:s(f,d,_,T)}});l(t,k,y,v)}},function(n,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var i=c,o=["\ud83d\udc4d","\ud83d\ude0a","\ud83c\udf89"],a=function(t){return t*(i/180)},s=function(t,e,n,r){var o=a(t),s=a(e);return{x:0,y:0,wobble:10*r(),velocity:.5*n+r()*n,angle2D:-o+(.5*s-r()*s),angle3D:-i/4+r()*(i/2),tiltAngle:r()*i}},u=function(n,r,i){n.physics.x+=e(n.physics.angle2D)*n.physics.velocity,n.physics.y+=t(n.physics.angle2D)*n.physics.velocity,n.physics.wobble+=0,n.physics.velocity*=i,n.physics.y+=5,n.physics.tiltAngle+=.1;var o=n.physics,a=o.x,s=o.y,u=o.tiltAngle,c="translate3d(".concat(a+0,"px, ").concat(s+0,"px, 0) rotate(").concat(u,"rad)");n.element.style.transform=c,n.element.style.opacity=1-r},l=function(t,e,n,r){var i=r,o=0;requestAnimationFrame(function r(){e.forEach(function(t){return u(t,o/i,n)}),(o+=1)<i?requestAnimationFrame(r):e.forEach(function(e){if(e.element.parentNode===t)return t.removeChild(e.element)})})};r.default=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.angle,r=void 0===n?90:n,i=e.decay,a=void 0===i?.9:i,u=e.spread,c=void 0===u?45:u,h=e.startVelocity,f=void 0===h?35:h,p=e.elementCount,d=void 0===p?50:p,m=e.elementSize,y=void 0===m?25:m,g=e.lifetime,v=void 0===g?200:g,b=e.zIndex,_=void 0===b?0:b,w=e.emoji,E=void 0===w?o:w,S=e.random,T=void 0===S?Math.random:S,C=function(t,e,n,r,i){return Array.from({length:e}).map(function(e,o){var a=document.createElement("span"),s=i[o%i.length];return a.innerHTML=s,a.style.fontSize="".concat(n,"px"),a.style.position="absolute",a.style.zIndex=r,t.appendChild(a),a})}(t,d,y,_,E),k=C.map(function(t){return{element:t,physics:s(r,c,f,T)}});l(t,k,a,v)}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(3),i=n.n(r),o=n(4),a=n.n(o),s=n(5);n.n(s),e.default=function(t){i.a.loadAnimation({container:t,renderer:"svg",rendererSettings:{className:"absolutePlayer"},loop:!1,autoplay:!0,animationData:a.a,onComplete:i.a.destroy()})}},function(t){t.exports=n(89)},function(t){t.exports={v:"5.4.1",fr:29.9700012207031,ip:0,op:75.0000030548126,w:1280,h:800,nm:"Confetti",ddd:0,assets:[{id:"comp_0",layers:[{ddd:0,ind:1,ty:4,nm:"elems Outlines",sr:1,ks:{o:{a:0,k:100,ix:11},r:{a:0,k:0,ix:10},p:{a:0,k:[648,408,0],ix:2},a:{a:0,k:[640,400,0],ix:1},s:{a:0,k:[55,55,100],ix:6}},ao:0,shapes:[{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[0,0],[0,0],[0,0]],o:[[0,0],[0,0],[0,0]],v:[[0,-56.517],[65.259,56.517],[-65.26,56.517]],c:!0},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"st",c:{a:1,k:[{i:{x:[.833],y:[.833]},o:{x:[.167],y:[.167]},n:["0p833_0p833_0p167_0p167"],t:0,s:[.96862745098,.423529411765,.533333333333,1],e:[.701960802078,.070588238537,.090196080506,1]},{t:45.0000018328876}],ix:3},o:{a:0,k:100,ix:4},w:{a:0,k:25,ix:5},lc:1,lj:1,ml:10,ml2:{a:0,k:10,ix:8},nm:"Stroke 1",mn:"ADBE Vector Graphic - Stroke",hd:!1},{ty:"tr",p:{a:1,k:[{i:{x:.196,y:1},o:{x:0,y:0},n:"0p196_1_0_0",t:0,s:[632.987,391.08],e:[285.686,74.119],to:[-57.8834648132324,-52.8268241882324],ti:[57.8834648132324,52.8268241882324]},{t:60.0000024438501}],ix:2},a:{a:0,k:[0,18],ix:1},s:{a:1,k:[{i:{x:[.833,.833],y:[.833,.833]},o:{x:[1,1],y:[0,0]},n:["0p833_0p833_1_0","0p833_0p833_1_0"],t:0,s:[33.246,33.246],e:[0,0]},{t:60.0000024438501}],ix:3},r:{a:1,k:[{i:{x:[.529],y:[1]},o:{x:[.054],y:[.039]},n:["0p529_1_0p054_0p039"],t:0,s:[0],e:[720]},{t:60.0000024438501}],ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Group 1",np:2,cix:2,ix:1,mn:"ADBE Vector Group",hd:!1},{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[0,0],[0,0],[0,0],[0,0]],o:[[0,0],[0,0],[0,0],[0,0]],v:[[-78.593,0],[.001,-78.593],[78.594,0],[.001,78.593]],c:!0},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"st",c:{a:1,k:[{i:{x:[.833],y:[.833]},o:{x:[.167],y:[.167]},n:["0p833_0p833_0p167_0p167"],t:0,s:[.643137276173,.35686275363,.945098042488,1],e:[.61960786581,.243137255311,.996078431606,1]},{t:45.0000018328876}],ix:3},o:{a:0,k:100,ix:4},w:{a:0,k:25,ix:5},lc:1,lj:1,ml:10,ml2:{a:0,k:10,ix:8},nm:"Stroke 1",mn:"ADBE Vector Graphic - Stroke",hd:!1},{ty:"tr",p:{a:1,k:[{i:{x:.196,y:1},o:{x:0,y:0},n:"0p196_1_0_0",t:0,s:[632.987,391.08],e:[629.686,746.119],to:[-.55013018846512,59.1731758117676],ti:[.55013018846512,-59.1731758117676]},{t:60.0000024438501}],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:1,k:[{i:{x:[.833,.833],y:[.833,.833]},o:{x:[1,1],y:[0,0]},n:["0p833_0p833_1_0","0p833_0p833_1_0"],t:0,s:[33.246,33.246],e:[0,0]},{t:60.0000024438501}],ix:3},r:{a:1,k:[{i:{x:[.529],y:[1]},o:{x:[.054],y:[.039]},n:["0p529_1_0p054_0p039"],t:0,s:[0],e:[720]},{t:60.0000024438501}],ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Group 3",np:2,cix:2,ix:2,mn:"ADBE Vector Group",hd:!1},{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0]],o:[[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0]],v:[[24.5,-23.5],[24.5,-81.5],[-23.5,-81.5],[-23.5,-23.5],[-81.5,-23.5],[-81.5,23.5],[-23.5,23.5],[-23.5,81.5],[24.5,81.5],[24.5,23.5],[81.5,23.5],[81.5,-23.5]],c:!0},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"st",c:{a:1,k:[{i:{x:[.833],y:[.833]},o:{x:[.167],y:[.167]},n:["0p833_0p833_0p167_0p167"],t:0,s:[.960784313725,.96862745098,.439215686275,1],e:[.96928614378,.919638156891,.541258990765,1]},{t:45.0000018328876}],ix:3},o:{a:0,k:100,ix:4},w:{a:0,k:25,ix:5},lc:1,lj:1,ml:10,ml2:{a:0,k:10,ix:8},nm:"Stroke 1",mn:"ADBE Vector Graphic - Stroke",hd:!1},{ty:"tr",p:{a:1,k:[{i:{x:.196,y:1},o:{x:0,y:0},n:"0p196_1_0_0",t:0,s:[632.987,391.08],e:[1013.686,133.119],to:[63.4498710632324,-42.9934883117676],ti:[-63.4498710632324,42.9934883117676]},{t:60.0000024438501}],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:1,k:[{i:{x:[.833,.833],y:[.833,.833]},o:{x:[1,1],y:[0,0]},n:["0p833_0p833_1_0","0p833_0p833_1_0"],t:0,s:[33.246,33.246],e:[0,0]},{t:60.0000024438501}],ix:3},r:{a:1,k:[{i:{x:[.529],y:[1]},o:{x:[.054],y:[.039]},n:["0p529_1_0p054_0p039"],t:0,s:[0],e:[720]},{t:60.0000024438501}],ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Group 5",np:2,cix:2,ix:3,mn:"ADBE Vector Group",hd:!1},{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[-43.406,0],[0,-43.406],[43.406,0],[0,43.406]],o:[[43.406,0],[0,43.406],[-43.406,0],[0,-43.406]],v:[[0,-78.593],[78.593,0],[0,78.593],[-78.593,0]],c:!0},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"st",c:{a:1,k:[{i:{x:[.833],y:[.833]},o:{x:[.167],y:[.167]},n:["0p833_0p833_0p167_0p167"],t:0,s:[.145098039216,.776470588235,.964705882353,1],e:[.196078434587,.745098054409,.996078431606,1]},{t:45.0000018328876}],ix:3},o:{a:0,k:100,ix:4},w:{a:0,k:25,ix:5},lc:1,lj:1,ml:10,ml2:{a:0,k:10,ix:8},nm:"Stroke 1",mn:"ADBE Vector Graphic - Stroke",hd:!1},{ty:"tr",p:{a:1,k:[{i:{x:.196,y:1},o:{x:0,y:0},n:"0p196_1_0_0",t:0,s:[632.987,391.08],e:[137.686,622.119],to:[-82.5501327514648,38.5065116882324],ti:[82.5501327514648,-38.5065116882324]},{t:60.0000024438501}],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:1,k:[{i:{x:[.833,.833],y:[.833,.833]},o:{x:[1,1],y:[0,0]},n:["0p833_0p833_1_0","0p833_0p833_1_0"],t:0,s:[33.246,33.246],e:[0,0]},{t:60.0000024438501}],ix:3},r:{a:1,k:[{i:{x:[.529],y:[1]},o:{x:[.054],y:[.039]},n:["0p529_1_0p054_0p039"],t:0,s:[0],e:[720]},{t:60.0000024438501}],ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Group 7",np:2,cix:2,ix:4,mn:"ADBE Vector Group",hd:!1}],ip:0,op:300.00001221925,st:0,bm:0},{ddd:0,ind:2,ty:4,nm:"elems greys",sr:1,ks:{o:{a:0,k:50,ix:11},r:{a:0,k:0,ix:10},p:{a:0,k:[653,411,0],ix:2},a:{a:0,k:[640,400,0],ix:1},s:{a:0,k:[55,55,100],ix:6}},ao:0,shapes:[{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[0,0],[0,0],[0,0]],o:[[0,0],[0,0],[0,0]],v:[[0,-56.517],[65.259,56.517],[-65.26,56.517]],c:!0},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"st",c:{a:0,k:[.903109669685,.903109669685,.903109669685,1],ix:3},o:{a:0,k:100,ix:4},w:{a:0,k:25,ix:5},lc:1,lj:1,ml:10,ml2:{a:0,k:10,ix:8},nm:"Stroke 1",mn:"ADBE Vector Graphic - Stroke",hd:!1},{ty:"tr",p:{a:1,k:[{i:{x:.196,y:1},o:{x:0,y:0},n:"0p196_1_0_0",t:0,s:[632.987,391.08],e:[277.686,123.119],to:[-59.216796875,-44.66015625],ti:[59.216796875,44.66015625]},{t:60.0000024438501}],ix:2},a:{a:0,k:[0,18],ix:1},s:{a:1,k:[{i:{x:[.833,.833],y:[.833,.833]},o:{x:[1,1],y:[0,0]},n:["0p833_0p833_1_0","0p833_0p833_1_0"],t:0,s:[33.246,33.246],e:[0,0]},{t:60.0000024438501}],ix:3},r:{a:1,k:[{i:{x:[.529],y:[1]},o:{x:[.054],y:[.039]},n:["0p529_1_0p054_0p039"],t:0,s:[0],e:[720]},{t:60.0000024438501}],ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Group 1",np:2,cix:2,ix:1,mn:"ADBE Vector Group",hd:!1},{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[0,0],[0,0],[0,0],[0,0]],o:[[0,0],[0,0],[0,0],[0,0]],v:[[-78.593,0],[.001,-78.593],[78.594,0],[.001,78.593]],c:!0},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"st",c:{a:0,k:[.901960790157,.901960790157,.901960790157,1],ix:3},o:{a:0,k:100,ix:4},w:{a:0,k:25,ix:5},lc:1,lj:1,ml:10,ml2:{a:0,k:10,ix:8},nm:"Stroke 1",mn:"ADBE Vector Graphic - Stroke",hd:!1},{ty:"tr",p:{a:1,k:[{i:{x:.196,y:1},o:{x:0,y:0},n:"0p196_1_0_0",t:0,s:[632.987,391.08],e:[648.686,706.119],to:[2.61653637886047,52.5065116882324],ti:[-2.61653637886047,-52.5065116882324]},{t:60.0000024438501}],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:1,k:[{i:{x:[.833,.833],y:[.833,.833]},o:{x:[1,1],y:[0,0]},n:["0p833_0p833_1_0","0p833_0p833_1_0"],t:0,s:[33.246,33.246],e:[0,0]},{t:60.0000024438501}],ix:3},r:{a:1,k:[{i:{x:[.529],y:[1]},o:{x:[.054],y:[.039]},n:["0p529_1_0p054_0p039"],t:0,s:[0],e:[720]},{t:60.0000024438501}],ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Group 3",np:2,cix:2,ix:2,mn:"ADBE Vector Group",hd:!1},{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0]],o:[[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0]],v:[[24.5,-23.5],[24.5,-81.5],[-23.5,-81.5],[-23.5,-23.5],[-81.5,-23.5],[-81.5,23.5],[-23.5,23.5],[-23.5,81.5],[24.5,81.5],[24.5,23.5],[81.5,23.5],[81.5,-23.5]],c:!0},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"st",c:{a:0,k:[.901960790157,.901960790157,.901960790157,1],ix:3},o:{a:0,k:100,ix:4},w:{a:0,k:25,ix:5},lc:1,lj:1,ml:10,ml2:{a:0,k:10,ix:8},nm:"Stroke 1",mn:"ADBE Vector Graphic - Stroke",hd:!1},{ty:"tr",p:{a:1,k:[{i:{x:.196,y:1},o:{x:0,y:0},n:"0p196_1_0_0",t:0,s:[632.987,391.08],e:[992.686,193.119],to:[59.9498710632324,-32.9934883117676],ti:[-59.9498710632324,32.9934883117676]},{t:60.0000024438501}],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:1,k:[{i:{x:[.833,.833],y:[.833,.833]},o:{x:[1,1],y:[0,0]},n:["0p833_0p833_1_0","0p833_0p833_1_0"],t:0,s:[33.246,33.246],e:[0,0]},{t:60.0000024438501}],ix:3},r:{a:1,k:[{i:{x:[.529],y:[1]},o:{x:[.054],y:[.039]},n:["0p529_1_0p054_0p039"],t:0,s:[0],e:[720]},{t:60.0000024438501}],ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Group 5",np:2,cix:2,ix:3,mn:"ADBE Vector Group",hd:!1},{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[-43.406,0],[0,-43.406],[43.406,0],[0,43.406]],o:[[43.406,0],[0,43.406],[-43.406,0],[0,-43.406]],v:[[0,-78.593],[78.593,0],[0,78.593],[-78.593,0]],c:!0},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"st",c:{a:0,k:[.901960790157,.901960790157,.901960790157,1],ix:3},o:{a:0,k:100,ix:4},w:{a:0,k:25,ix:5},lc:1,lj:1,ml:10,ml2:{a:0,k:10,ix:8},nm:"Stroke 1",mn:"ADBE Vector Graphic - Stroke",hd:!1},{ty:"tr",p:{a:1,k:[{i:{x:.196,y:1},o:{x:0,y:0},n:"0p196_1_0_0",t:0,s:[632.987,391.08],e:[171.686,618.119],to:[-76.8834609985352,37.83984375],ti:[76.8834609985352,-37.83984375]},{t:60.0000024438501}],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:1,k:[{i:{x:[.833,.833],y:[.833,.833]},o:{x:[1,1],y:[0,0]},n:["0p833_0p833_1_0","0p833_0p833_1_0"],t:0,s:[33.246,33.246],e:[0,0]},{t:60.0000024438501}],ix:3},r:{a:1,k:[{i:{x:[.529],y:[1]},o:{x:[.054],y:[.039]},n:["0p529_1_0p054_0p039"],t:0,s:[0],e:[720]},{t:60.0000024438501}],ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Group 7",np:2,cix:2,ix:4,mn:"ADBE Vector Group",hd:!1}],ip:0,op:300.00001221925,st:0,bm:0}]},{id:"comp_1",layers:[{ddd:0,ind:1,ty:4,nm:"twiggle Outlines 10",sr:1,ks:{o:{a:0,k:100,ix:11},r:{a:0,k:20,ix:10},p:{a:0,k:[640,399,0],ix:2},a:{a:0,k:[545,457,0],ix:1},s:{a:0,k:[74.124,74.124,100],ix:6}},ao:0,shapes:[{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[0,0],[-54.167,-22.916],[-31.25,25],[-17.709,23.959],[-17.709,37.5],[0,0]],o:[[0,0],[54.166,22.917],[31.25,-25],[17.708,-23.958],[17.708,-37.5],[0,0]],v:[[-141.771,120.599],[-86.354,90.057],[-33.229,21.307],[48.021,-3.693],[60.281,-83.099],[141.771,-118.996]],c:!1},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"st",c:{a:0,k:[.901960790157,.901960790157,.901960790157,1],ix:3},o:{a:0,k:50,ix:4},w:{a:0,k:8,ix:5},lc:1,lj:1,ml:10,ml2:{a:0,k:10,ix:8},nm:"Stroke 1",mn:"ADBE Vector Graphic - Stroke",hd:!1},{ty:"fl",c:{a:0,k:[1,1,1,1],ix:4},o:{a:0,k:100,ix:5},r:1,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tr",p:{a:0,k:[788.771,279.401],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Group 1",np:3,cix:2,ix:1,mn:"ADBE Vector Group",hd:!1},{ty:"tm",s:{a:1,k:[{i:{x:[.833],y:[.833]},o:{x:[.167],y:[.167]},n:["0p833_0p833_0p167_0p167"],t:25,s:[0],e:[100]},{t:38.0000015477717}],ix:1},e:{a:1,k:[{i:{x:[.833],y:[.833]},o:{x:[.167],y:[.167]},n:["0p833_0p833_0p167_0p167"],t:12,s:[0],e:[100]},{t:38.0000015477717}],ix:2},o:{a:0,k:0,ix:3},m:1,ix:2,nm:"Trim Paths 1",mn:"ADBE Vector Filter - Trim",hd:!1}],ip:0,op:300.00001221925,st:0,bm:0},{ddd:0,ind:2,ty:4,nm:"twiggle Outlines 9",sr:1,ks:{o:{a:0,k:100,ix:11},r:{a:0,k:308,ix:10},p:{a:0,k:[640,399,0],ix:2},a:{a:0,k:[545,457,0],ix:1},s:{a:0,k:[74.124,74.124,100],ix:6}},ao:0,shapes:[{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[0,0],[-54.167,-22.916],[-31.25,25],[-17.709,23.959],[-17.709,37.5],[0,0]],o:[[0,0],[54.166,22.917],[31.25,-25],[17.708,-23.958],[17.708,-37.5],[0,0]],v:[[-141.771,120.599],[-86.354,90.057],[-33.229,21.307],[48.021,-3.693],[60.281,-83.099],[141.771,-118.996]],c:!1},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"st",c:{a:0,k:[.901960790157,.901960790157,.901960790157,1],ix:3},o:{a:0,k:50,ix:4},w:{a:0,k:8,ix:5},lc:1,lj:1,ml:10,ml2:{a:0,k:10,ix:8},nm:"Stroke 1",mn:"ADBE Vector Graphic - Stroke",hd:!1},{ty:"fl",c:{a:0,k:[1,1,1,1],ix:4},o:{a:0,k:100,ix:5},r:1,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tr",p:{a:0,k:[788.771,279.401],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Group 1",np:3,cix:2,ix:1,mn:"ADBE Vector Group",hd:!1},{ty:"tm",s:{a:1,k:[{i:{x:[.833],y:[.833]},o:{x:[.167],y:[.167]},n:["0p833_0p833_0p167_0p167"],t:25,s:[0],e:[100]},{t:38.0000015477717}],ix:1},e:{a:1,k:[{i:{x:[.833],y:[.833]},o:{x:[.167],y:[.167]},n:["0p833_0p833_0p167_0p167"],t:12,s:[0],e:[100]},{t:38.0000015477717}],ix:2},o:{a:0,k:0,ix:3},m:1,ix:2,nm:"Trim Paths 1",mn:"ADBE Vector Filter - Trim",hd:!1}],ip:0,op:300.00001221925,st:0,bm:0},{ddd:0,ind:3,ty:4,nm:"twiggle Outlines 8",sr:1,ks:{o:{a:0,k:100,ix:11},r:{a:0,k:236,ix:10},p:{a:0,k:[640,399,0],ix:2},a:{a:0,k:[545,457,0],ix:1},s:{a:0,k:[74.124,74.124,100],ix:6}},ao:0,shapes:[{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[0,0],[-54.167,-22.916],[-31.25,25],[-17.709,23.959],[-17.709,37.5],[0,0]],o:[[0,0],[54.166,22.917],[31.25,-25],[17.708,-23.958],[17.708,-37.5],[0,0]],v:[[-141.771,120.599],[-86.354,90.057],[-33.229,21.307],[48.021,-3.693],[60.281,-83.099],[141.771,-118.996]],c:!1},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"st",c:{a:0,k:[.901960790157,.901960790157,.901960790157,1],ix:3},o:{a:0,k:50,ix:4},w:{a:0,k:8,ix:5},lc:1,lj:1,ml:10,ml2:{a:0,k:10,ix:8},nm:"Stroke 1",mn:"ADBE Vector Graphic - Stroke",hd:!1},{ty:"fl",c:{a:0,k:[1,1,1,1],ix:4},o:{a:0,k:100,ix:5},r:1,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tr",p:{a:0,k:[788.771,279.401],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Group 1",np:3,cix:2,ix:1,mn:"ADBE Vector Group",hd:!1},{ty:"tm",s:{a:1,k:[{i:{x:[.833],y:[.833]},o:{x:[.167],y:[.167]},n:["0p833_0p833_0p167_0p167"],t:25,s:[0],e:[100]},{t:38.0000015477717}],ix:1},e:{a:1,k:[{i:{x:[.833],y:[.833]},o:{x:[.167],y:[.167]},n:["0p833_0p833_0p167_0p167"],t:12,s:[0],e:[100]},{t:38.0000015477717}],ix:2},o:{a:0,k:0,ix:3},m:1,ix:2,nm:"Trim Paths 1",mn:"ADBE Vector Filter - Trim",hd:!1}],ip:0,op:300.00001221925,st:0,bm:0},{ddd:0,ind:4,ty:4,nm:"twiggle Outlines 7",sr:1,ks:{o:{a:0,k:100,ix:11},r:{a:0,k:164,ix:10},p:{a:0,k:[640,399,0],ix:2},a:{a:0,k:[545,457,0],ix:1},s:{a:0,k:[74.124,74.124,100],ix:6}},ao:0,shapes:[{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[0,0],[-54.167,-22.916],[-31.25,25],[-17.709,23.959],[-17.709,37.5],[0,0]],o:[[0,0],[54.166,22.917],[31.25,-25],[17.708,-23.958],[17.708,-37.5],[0,0]],v:[[-141.771,120.599],[-86.354,90.057],[-33.229,21.307],[48.021,-3.693],[60.281,-83.099],[141.771,-118.996]],c:!1},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"st",c:{a:0,k:[.901960790157,.901960790157,.901960790157,1],ix:3},o:{a:0,k:50,ix:4},w:{a:0,k:8,ix:5},lc:1,lj:1,ml:10,ml2:{a:0,k:10,ix:8},nm:"Stroke 1",mn:"ADBE Vector Graphic - Stroke",hd:!1},{ty:"fl",c:{a:0,k:[1,1,1,1],ix:4},o:{a:0,k:100,ix:5},r:1,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tr",p:{a:0,k:[788.771,279.401],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Group 1",np:3,cix:2,ix:1,mn:"ADBE Vector Group",hd:!1},{ty:"tm",s:{a:1,k:[{i:{x:[.833],y:[.833]},o:{x:[.167],y:[.167]},n:["0p833_0p833_0p167_0p167"],t:25,s:[0],e:[100]},{t:38.0000015477717}],ix:1},e:{a:1,k:[{i:{x:[.833],y:[.833]},o:{x:[.167],y:[.167]},n:["0p833_0p833_0p167_0p167"],t:12,s:[0],e:[100]},{t:38.0000015477717}],ix:2},o:{a:0,k:0,ix:3},m:1,ix:2,nm:"Trim Paths 1",mn:"ADBE Vector Filter - Trim",hd:!1}],ip:0,op:300.00001221925,st:0,bm:0},{ddd:0,ind:5,ty:4,nm:"twiggle Outlines 6",sr:1,ks:{o:{a:0,k:100,ix:11},r:{a:0,k:92,ix:10},p:{a:0,k:[640,399,0],ix:2},a:{a:0,k:[545,457,0],ix:1},s:{a:0,k:[74.124,74.124,100],ix:6}},ao:0,shapes:[{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[0,0],[-54.167,-22.916],[-31.25,25],[-17.709,23.959],[-17.709,37.5],[0,0]],o:[[0,0],[54.166,22.917],[31.25,-25],[17.708,-23.958],[17.708,-37.5],[0,0]],v:[[-141.771,120.599],[-86.354,90.057],[-33.229,21.307],[48.021,-3.693],[60.281,-83.099],[141.771,-118.996]],c:!1},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"st",c:{a:0,k:[.901960790157,.901960790157,.901960790157,1],ix:3},o:{a:0,k:50,ix:4},w:{a:0,k:8,ix:5},lc:1,lj:1,ml:10,ml2:{a:0,k:10,ix:8},nm:"Stroke 1",mn:"ADBE Vector Graphic - Stroke",hd:!1},{ty:"fl",c:{a:0,k:[1,1,1,1],ix:4},o:{a:0,k:100,ix:5},r:1,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tr",p:{a:0,k:[788.771,279.401],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Group 1",np:3,cix:2,ix:1,mn:"ADBE Vector Group",hd:!1},{ty:"tm",s:{a:1,k:[{i:{x:[.833],y:[.833]},o:{x:[.167],y:[.167]},n:["0p833_0p833_0p167_0p167"],t:25,s:[0],e:[100]},{t:38.0000015477717}],ix:1},e:{a:1,k:[{i:{x:[.833],y:[.833]},o:{x:[.167],y:[.167]},n:["0p833_0p833_0p167_0p167"],t:12,s:[0],e:[100]},{t:38.0000015477717}],ix:2},o:{a:0,k:0,ix:3},m:1,ix:2,nm:"Trim Paths 1",mn:"ADBE Vector Filter - Trim",hd:!1}],ip:0,op:300.00001221925,st:0,bm:0},{ddd:0,ind:6,ty:4,nm:"twiggle Outlines 5",sr:1,ks:{o:{a:0,k:100,ix:11},r:{a:0,k:360,ix:10},p:{a:0,k:[640,400,0],ix:2},a:{a:0,k:[640,400,0],ix:1},s:{a:0,k:[74.124,74.124,100],ix:6}},ao:0,shapes:[{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[0,0],[-54.167,-22.916],[-31.25,25],[-17.709,23.959],[-17.709,37.5],[0,0]],o:[[0,0],[54.166,22.917],[31.25,-25],[17.708,-23.958],[17.708,-37.5],[0,0]],v:[[-141.771,120.599],[-86.354,90.057],[-33.229,21.307],[48.021,-3.693],[60.281,-83.099],[141.771,-118.996]],c:!1},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"st",c:{a:0,k:[.96862745285,.423529416323,.533333361149,1],ix:3},o:{a:0,k:100,ix:4},w:{a:0,k:8,ix:5},lc:1,lj:1,ml:10,ml2:{a:0,k:10,ix:8},nm:"Stroke 1",mn:"ADBE Vector Graphic - Stroke",hd:!1},{ty:"fl",c:{a:0,k:[1,1,1,1],ix:4},o:{a:0,k:100,ix:5},r:1,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tr",p:{a:0,k:[788.771,279.401],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Group 1",np:3,cix:2,ix:1,mn:"ADBE Vector Group",hd:!1},{ty:"tm",s:{a:1,k:[{i:{x:[.833],y:[.833]},o:{x:[.167],y:[.167]},n:["0p833_0p833_0p167_0p167"],t:13,s:[0],e:[100]},{t:30.0000012219251}],ix:1},e:{a:1,k:[{i:{x:[.833],y:[.833]},o:{x:[.167],y:[.167]},n:["0p833_0p833_0p167_0p167"],t:0,s:[0],e:[100]},{t:30.0000012219251}],ix:2},o:{a:0,k:0,ix:3},m:1,ix:2,nm:"Trim Paths 1",mn:"ADBE Vector Filter - Trim",hd:!1}],ip:0,op:300.00001221925,st:0,bm:0},{ddd:0,ind:7,ty:4,nm:"twiggle Outlines 4",sr:1,ks:{o:{a:0,k:100,ix:11},r:{a:0,k:288,ix:10},p:{a:0,k:[640,400,0],ix:2},a:{a:0,k:[640,400,0],ix:1},s:{a:0,k:[74.124,74.124,100],ix:6}},ao:0,shapes:[{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[0,0],[-54.167,-22.916],[-31.25,25],[-17.709,23.959],[-17.709,37.5],[0,0]],o:[[0,0],[54.166,22.917],[31.25,-25],[17.708,-23.958],[17.708,-37.5],[0,0]],v:[[-141.771,120.599],[-86.354,90.057],[-33.229,21.307],[48.021,-3.693],[60.281,-83.099],[141.771,-118.996]],c:!1},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"st",c:{a:0,k:[.643137276173,.35686275363,.945098042488,1],ix:3},o:{a:0,k:100,ix:4},w:{a:0,k:8,ix:5},lc:1,lj:1,ml:10,ml2:{a:0,k:10,ix:8},nm:"Stroke 1",mn:"ADBE Vector Graphic - Stroke",hd:!1},{ty:"fl",c:{a:0,k:[1,1,1,1],ix:4},o:{a:0,k:100,ix:5},r:1,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tr",p:{a:0,k:[788.771,279.401],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Group 1",np:3,cix:2,ix:1,mn:"ADBE Vector Group",hd:!1},{ty:"tm",s:{a:1,k:[{i:{x:[.833],y:[.833]},o:{x:[.167],y:[.167]},n:["0p833_0p833_0p167_0p167"],t:13,s:[0],e:[100]},{t:30.0000012219251}],ix:1},e:{a:1,k:[{i:{x:[.833],y:[.833]},o:{x:[.167],y:[.167]},n:["0p833_0p833_0p167_0p167"],t:0,s:[0],e:[100]},{t:30.0000012219251}],ix:2},o:{a:0,k:0,ix:3},m:1,ix:2,nm:"Trim Paths 1",mn:"ADBE Vector Filter - Trim",hd:!1}],ip:0,op:300.00001221925,st:0,bm:0},{ddd:0,ind:8,ty:4,nm:"twiggle Outlines 3",sr:1,ks:{o:{a:0,k:100,ix:11},r:{a:0,k:216,ix:10},p:{a:0,k:[640,400,0],ix:2},a:{a:0,k:[640,400,0],ix:1},s:{a:0,k:[74.124,74.124,100],ix:6}},ao:0,shapes:[{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[0,0],[-54.167,-22.916],[-31.25,25],[-17.709,23.959],[-17.709,37.5],[0,0]],o:[[0,0],[54.166,22.917],[31.25,-25],[17.708,-23.958],[17.708,-37.5],[0,0]],v:[[-141.771,120.599],[-86.354,90.057],[-33.229,21.307],[48.021,-3.693],[60.281,-83.099],[141.771,-118.996]],c:!1},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"st",c:{a:0,k:[.447058826685,.96862745285,.32549020648,1],ix:3},o:{a:0,k:100,ix:4},w:{a:0,k:8,ix:5},lc:1,lj:1,ml:10,ml2:{a:0,k:10,ix:8},nm:"Stroke 1",mn:"ADBE Vector Graphic - Stroke",hd:!1},{ty:"fl",c:{a:0,k:[1,1,1,1],ix:4},o:{a:0,k:100,ix:5},r:1,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tr",p:{a:0,k:[788.771,279.401],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Group 1",np:3,cix:2,ix:1,mn:"ADBE Vector Group",hd:!1},{ty:"tm",s:{a:1,k:[{i:{x:[.833],y:[.833]},o:{x:[.167],y:[.167]},n:["0p833_0p833_0p167_0p167"],t:13,s:[0],e:[100]},{t:30.0000012219251}],ix:1},e:{a:1,k:[{i:{x:[.833],y:[.833]},o:{x:[.167],y:[.167]},n:["0p833_0p833_0p167_0p167"],t:0,s:[0],e:[100]},{t:30.0000012219251}],ix:2},o:{a:0,k:0,ix:3},m:1,ix:2,nm:"Trim Paths 1",mn:"ADBE Vector Filter - Trim",hd:!1}],ip:0,op:300.00001221925,st:0,bm:0},{ddd:0,ind:9,ty:4,nm:"twiggle Outlines 2",sr:1,ks:{o:{a:0,k:100,ix:11},r:{a:0,k:144,ix:10},p:{a:0,k:[640,400,0],ix:2},a:{a:0,k:[640,400,0],ix:1},s:{a:0,k:[74.124,74.124,100],ix:6}},ao:0,shapes:[{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[0,0],[-54.167,-22.916],[-31.25,25],[-17.709,23.959],[-17.709,37.5],[0,0]],o:[[0,0],[54.166,22.917],[31.25,-25],[17.708,-23.958],[17.708,-37.5],[0,0]],v:[[-141.771,120.599],[-86.354,90.057],[-33.229,21.307],[48.021,-3.693],[60.281,-83.099],[141.771,-118.996]],c:!1},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"st",c:{a:0,k:[.145098039216,.776470588235,.964705882353,1],ix:3},o:{a:0,k:100,ix:4},w:{a:0,k:8,ix:5},lc:1,lj:1,ml:10,ml2:{a:0,k:10,ix:8},nm:"Stroke 1",mn:"ADBE Vector Graphic - Stroke",hd:!1},{ty:"fl",c:{a:0,k:[1,1,1,1],ix:4},o:{a:0,k:100,ix:5},r:1,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tr",p:{a:0,k:[788.771,279.401],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Group 1",np:3,cix:2,ix:1,mn:"ADBE Vector Group",hd:!1},{ty:"tm",s:{a:1,k:[{i:{x:[.833],y:[.833]},o:{x:[.167],y:[.167]},n:["0p833_0p833_0p167_0p167"],t:13,s:[0],e:[100]},{t:30.0000012219251}],ix:1},e:{a:1,k:[{i:{x:[.833],y:[.833]},o:{x:[.167],y:[.167]},n:["0p833_0p833_0p167_0p167"],t:0,s:[0],e:[100]},{t:30.0000012219251}],ix:2},o:{a:0,k:0,ix:3},m:1,ix:2,nm:"Trim Paths 1",mn:"ADBE Vector Filter - Trim",hd:!1}],ip:0,op:300.00001221925,st:0,bm:0},{ddd:0,ind:10,ty:4,nm:"twiggle Outlines",sr:1,ks:{o:{a:0,k:100,ix:11},r:{a:0,k:72,ix:10},p:{a:0,k:[640,400,0],ix:2},a:{a:0,k:[640,400,0],ix:1},s:{a:0,k:[74.124,74.124,100],ix:6}},ao:0,shapes:[{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[0,0],[-54.167,-22.916],[-31.25,25],[-17.709,23.959],[-17.709,37.5],[0,0]],o:[[0,0],[54.166,22.917],[31.25,-25],[17.708,-23.958],[17.708,-37.5],[0,0]],v:[[-141.771,120.599],[-86.354,90.057],[-33.229,21.307],[48.021,-3.693],[60.281,-83.099],[141.771,-118.996]],c:!1},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"st",c:{a:0,k:[.960784316063,.96862745285,.439215689898,1],ix:3},o:{a:0,k:100,ix:4},w:{a:0,k:8,ix:5},lc:1,lj:1,ml:10,ml2:{a:0,k:10,ix:8},nm:"Stroke 1",mn:"ADBE Vector Graphic - Stroke",hd:!1},{ty:"fl",c:{a:0,k:[1,1,1,1],ix:4},o:{a:0,k:100,ix:5},r:1,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tr",p:{a:0,k:[788.771,279.401],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Group 1",np:3,cix:2,ix:1,mn:"ADBE Vector Group",hd:!1},{ty:"tm",s:{a:1,k:[{i:{x:[.833],y:[.833]},o:{x:[.167],y:[.167]},n:["0p833_0p833_0p167_0p167"],t:13,s:[0],e:[100]},{t:30.0000012219251}],ix:1},e:{a:1,k:[{i:{x:[.833],y:[.833]},o:{x:[.167],y:[.167]},n:["0p833_0p833_0p167_0p167"],t:0,s:[0],e:[100]},{t:30.0000012219251}],ix:2},o:{a:0,k:0,ix:3},m:1,ix:2,nm:"Trim Paths 1",mn:"ADBE Vector Filter - Trim",hd:!1}],ip:0,op:300.00001221925,st:0,bm:0}]}],layers:[{ddd:0,ind:2,ty:0,nm:"layer 1",refId:"comp_0",sr:1,ks:{o:{a:0,k:100,ix:11},r:{a:0,k:0,ix:10},p:{a:0,k:[660,420,0],ix:2},a:{a:0,k:[640,400,0],ix:1},s:{a:0,k:[67.505,67.505,100],ix:6}},ao:0,w:1280,h:800,ip:0,op:300.00001221925,st:0,bm:0},{ddd:0,ind:3,ty:0,nm:"layer 1",refId:"comp_0",sr:1,ks:{o:{a:0,k:100,ix:11},r:{a:0,k:215,ix:10},p:{a:0,k:[660,420,0],ix:2},a:{a:0,k:[640,400,0],ix:1},s:{a:0,k:[67.505,67.505,100],ix:6}},ao:0,w:1280,h:800,ip:4.00000016292334,op:304.000012382174,st:4.00000016292334,bm:0},{ddd:0,ind:4,ty:0,nm:"layer 1",refId:"comp_0",sr:1,ks:{o:{a:0,k:100,ix:11},r:{a:0,k:58,ix:10},p:{a:0,k:[660,420,0],ix:2},a:{a:0,k:[640,400,0],ix:1},s:{a:0,k:[82.5,82.5,100],ix:6}},ao:0,w:1280,h:800,ip:9.00000036657752,op:309.000012585828,st:9.00000036657752,bm:0},{ddd:0,ind:6,ty:0,nm:"Twiggles",refId:"comp_1",sr:1,ks:{o:{a:0,k:100,ix:11},r:{a:0,k:0,ix:10},p:{a:0,k:[660,420,0],ix:2},a:{a:0,k:[640,400,0],ix:1},s:{a:0,k:[67.505,67.505,100],ix:6}},ao:0,w:1280,h:800,ip:6.00000024438501,op:306.000012463636,st:6.00000024438501,bm:0}],markers:[]}},function(){},function(t){t.exports=n(1)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),n.d(e,"default",function(){return v});var c=n(6),l=(n.n(c),n(8)),h=n.n(l),f=n(0),p=n(1),d=n(2),m=Object.assign||function(t){for(var e,n=1;n<arguments.length;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t},y={type:"spring",stiffness:200,damping:2},g=h.a.div({confetti:{y:5,transition:m({},y)},emoji:{y:5,transition:m({},y)},memphis:{scale:1.1,transition:m({},y)},punished:{x:5,transition:m({},y)},resting:{y:0,x:0,scale:1,transition:m({},y)}}),v=function(t){function e(){var t,n,i;r(this,e);for(var s=arguments.length,c=new Array(s),l=0;l<s;l++)c[l]=arguments[l];return o(n,(i=n=o(this,(t=a(e)).call.apply(t,[this].concat(c))),Object.defineProperty(u(u(n)),"state",{enumerable:!0,writable:!0,value:{state:"resting"}}),Object.defineProperty(u(u(n)),"rewardMe",{enumerable:!0,writable:!0,value:function(){var t=n.props,e=t.type,r=t.config,i=[n.container,r];switch(e){case"confetti":n.handleAnimation(e),Object(f.default).apply(void 0,i);break;case"emoji":n.handleAnimation(e),Object(p.default).apply(void 0,i);break;case"memphis":n.handleAnimation(e),Object(d.default).apply(void 0,i)}}}),Object.defineProperty(u(u(n)),"punishMe",{enumerable:!0,writable:!0,value:function(){n.handlePunishAnimation()}}),Object.defineProperty(u(u(n)),"rest",{enumerable:!0,writable:!0,value:function(){setTimeout(function(){n.setState({state:"resting"})},100)}}),Object.defineProperty(u(u(n)),"handleAnimation",{enumerable:!0,writable:!0,value:function(t){n.setState({state:t},function(){n.rest()})}}),Object.defineProperty(u(u(n)),"handlePunishAnimation",{enumerable:!0,writable:!0,value:function(){n.setState({state:"punished"},function(){n.rest()})}}),i))}return s(e,t),i(e,[{key:"render",value:function(){var t=this,e=this.props,n=e.config,r=void 0===n?{}:n,i=e.children,o=r.springAnimation,a=this.state.state;return Object(c.createElement)("span",null,Object(c.createElement)("div",{ref:function(e){t.container=e}}),Object(c.createElement)(g,{pose:(!(void 0!==o)||o)&&a},i))}}]),e}(c.Component)},function(t){t.exports=n(172)},,,,,function(t,e,n){t.exports=n(14)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(7);e.default=r.default}])}()},function(t,e,n){"use strict";var r=n(1),i=n.n(r),o=n(5),a=n.n(o),s=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},u=function(t){var e=t.value,n=t.min,r=t.max,i=t.scaleMin,o=void 0===i?0:i,a=t.scaleMax;return n===r?o:o+(e-n)*((void 0===a?1:a)-o)/(r-n)},c=function(t,e,n){var r=t.x-e.x,i=t.y-e.y,o=Math.sqrt(r*r+i*i),a=r/o,s=i/o;return{x:e.x+a*n,y:e.y+s*n}},l=function(t,e){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))},h=void 0,f=function(){return Math.round(Math.random()*Math.pow(10,16))},p=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t};var d={data:a.a.arrayOf(a.a.oneOfType([a.a.number,a.a.shape({value:a.a.number})]).isRequired).isRequired,smooth:a.a.bool,autoDraw:a.a.bool,autoDrawDuration:a.a.number,autoDrawEasing:a.a.string,width:a.a.number,height:a.a.number,padding:a.a.number,radius:a.a.number,gradient:a.a.arrayOf(a.a.string)},m=function(t){function e(n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var r=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==typeof e&&"function"!==typeof e?t:e}(this,t.call(this,n));return r.trendId=f(),r.gradientId="react-trend-vertical-gradient-"+r.trendId,r}return function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.componentDidMount=function(){var t=this.props,e=t.autoDraw,n=t.autoDrawDuration,r=t.autoDrawEasing;e&&(this.lineLength=this.path.getTotalLength(),function(t){if(null==h&&null==(h=document.querySelector("style[data-react-trend]"))){var e=document.head||document.getElementsByTagName("head")[0];(h=document.createElement("style")).type="text/css",h.setAttribute("data-react-trend",""),e.appendChild(h)}h.appendChild(document.createTextNode(t))}(function(t){var e=t.id,n=t.lineLength,r=t.duration;return"\n    \n    @keyframes react-trend-autodraw-"+e+" {\n      0% {\n        stroke-dasharray: "+n+";\n        stroke-dashoffset: "+n+"\n      }\n      100% {\n        stroke-dasharray: "+n+";\n        stroke-dashoffset: 0;\n      }\n      100% {\n        stroke-dashoffset: '';\n        stroke-dasharray: '';\n      }\n    }\n  \n\n    \n    @keyframes react-trend-autodraw-cleanup-"+e+" {\n      to {\n        stroke-dasharray: '';\n        stroke-dashoffset: '';\n      }\n    }\n  \n\n    #react-trend-"+e+" {\n      animation:\n        react-trend-autodraw-"+e+" "+r+"ms "+t.easing+",\n        react-trend-autodraw-cleanup-"+e+" 1ms "+r+"ms\n      ;\n    }\n  "}({id:this.trendId,lineLength:this.lineLength,duration:n,easing:r})))},e.prototype.getDelegatedProps=function(){return t=this.props,e=Object.keys(d),Object.keys(t).reduce(function(n,r){var i;return-1!==e.indexOf(r)?n:s({},n,((i={})[r]=t[r],i))},{});var t,e},e.prototype.renderGradientDefinition=function(){var t=this.props.gradient;return i.a.createElement("defs",null,i.a.createElement("linearGradient",{id:this.gradientId,x1:"0%",y1:"0%",x2:"0%",y2:"100%"},t.slice().reverse().map(function(e,n){return i.a.createElement("stop",{key:n,offset:u({value:n,min:0,max:t.length-1||1}),stopColor:e})})))},e.prototype.render=function(){var t=this,e=this.props,n=e.data,r=e.smooth,o=e.width,a=e.height,s=e.padding,h=e.radius,f=e.gradient;if(!n||n.length<2)return null;var d=o||300,m=a||75,y=o||"100%",g=a||"25%",v=function(t,e){var n=e.minX,r=e.maxX,i=e.minY,o=e.maxY,a={min:0,max:t.length-1},s={min:Math.min.apply(Math,t),max:Math.max.apply(Math,t)},c=t.map(function(t,e){return{x:u({value:e,min:a.min,max:a.max,scaleMin:n,scaleMax:r}),y:u({value:t,min:s.min,max:s.max,scaleMin:i,scaleMax:o})}});return s.min===s.max&&(c[0].y+=1e-4),c}(n.map(function(t){return"number"===typeof t?t:t.value}),{minX:s,maxX:d-s,minY:m-s,maxY:s}),b=r?function(t,e){var n=e.radius,r=t[0],i=t.slice(1);return i.reduce(function(t,e,o){var a,s,u,h=i[o+1],f=i[o-1]||r,p=h&&(s=e,u=h,((a=f).y-s.y)*(a.x-u.x)===(a.y-u.y)*(a.x-s.x));if(!h||p)return t+"\nL "+e.x+","+e.y;var d=l(f,e),m=l(h,e),y=Math.min(d,m),g=y/2<n?y/2:n,v=c(f,e,g),b=c(h,e,g);return[t,"L "+v.x+","+v.y,"S "+e.x+","+e.y+" "+b.x+","+b.y].join("\n")},"M "+r.x+","+r.y)}(v,{radius:h}):function(t){return t.reduce(function(t,e,n){return t+(0===n?"M":"L")+" "+e.x+","+e.y+"\n"},"")}(v);return i.a.createElement("svg",p({width:y,height:g,viewBox:"0 0 "+d+" "+m},this.getDelegatedProps()),f&&this.renderGradientDefinition(),i.a.createElement("path",{ref:function(e){t.path=e},id:"react-trend-"+this.trendId,d:b,fill:"none",stroke:f?"url(#"+this.gradientId+")":void 0}))},e}(r.Component);m.defaultProps={radius:10,stroke:"black",padding:8,strokeWidth:1,autoDraw:!1,autoDrawDuration:2e3,autoDrawEasing:"ease"};var y=m;n.d(e,"a",function(){return y})},function(t,e,n){"use strict";function r(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function i(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},i=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(n).filter(function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),i.forEach(function(e){r(t,e,n[e])})}return t}n.d(e,"a",function(){return i})},,function(t,e,n){"use strict";var r=n(54),i="function"===typeof Symbol&&Symbol.for,o=i?Symbol.for("react.element"):60103,a=i?Symbol.for("react.portal"):60106,s=i?Symbol.for("react.fragment"):60107,u=i?Symbol.for("react.strict_mode"):60108,c=i?Symbol.for("react.profiler"):60114,l=i?Symbol.for("react.provider"):60109,h=i?Symbol.for("react.context"):60110,f=i?Symbol.for("react.concurrent_mode"):60111,p=i?Symbol.for("react.forward_ref"):60112,d=i?Symbol.for("react.suspense"):60113,m=i?Symbol.for("react.memo"):60115,y=i?Symbol.for("react.lazy"):60116,g="function"===typeof Symbol&&Symbol.iterator;function v(t){for(var e=arguments.length-1,n="https://reactjs.org/docs/error-decoder.html?invariant="+t,r=0;r<e;r++)n+="&args[]="+encodeURIComponent(arguments[r+1]);!function(t,e,n,r,i,o,a,s){if(!t){if(t=void 0,void 0===e)t=Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var u=[n,r,i,o,a,s],c=0;(t=Error(e.replace(/%s/g,function(){return u[c++]}))).name="Invariant Violation"}throw t.framesToPop=1,t}}(!1,"Minified React error #"+t+"; visit %s for the full message or use the non-minified dev environment for full errors and additional helpful warnings. ",n)}var b={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},_={};function w(t,e,n){this.props=t,this.context=e,this.refs=_,this.updater=n||b}function E(){}function S(t,e,n){this.props=t,this.context=e,this.refs=_,this.updater=n||b}w.prototype.isReactComponent={},w.prototype.setState=function(t,e){"object"!==typeof t&&"function"!==typeof t&&null!=t&&v("85"),this.updater.enqueueSetState(this,t,e,"setState")},w.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")},E.prototype=w.prototype;var T=S.prototype=new E;T.constructor=S,r(T,w.prototype),T.isPureReactComponent=!0;var C={current:null},k={current:null},x=Object.prototype.hasOwnProperty,I={key:!0,ref:!0,__self:!0,__source:!0};function A(t,e,n){var r=void 0,i={},a=null,s=null;if(null!=e)for(r in void 0!==e.ref&&(s=e.ref),void 0!==e.key&&(a=""+e.key),e)x.call(e,r)&&!I.hasOwnProperty(r)&&(i[r]=e[r]);var u=arguments.length-2;if(1===u)i.children=n;else if(1<u){for(var c=Array(u),l=0;l<u;l++)c[l]=arguments[l+2];i.children=c}if(t&&t.defaultProps)for(r in u=t.defaultProps)void 0===i[r]&&(i[r]=u[r]);return{$$typeof:o,type:t,key:a,ref:s,props:i,_owner:k.current}}function P(t){return"object"===typeof t&&null!==t&&t.$$typeof===o}var D=/\/+/g,N=[];function R(t,e,n,r){if(N.length){var i=N.pop();return i.result=t,i.keyPrefix=e,i.func=n,i.context=r,i.count=0,i}return{result:t,keyPrefix:e,func:n,context:r,count:0}}function O(t){t.result=null,t.keyPrefix=null,t.func=null,t.context=null,t.count=0,10>N.length&&N.push(t)}function M(t,e,n){return null==t?0:function t(e,n,r,i){var s=typeof e;"undefined"!==s&&"boolean"!==s||(e=null);var u=!1;if(null===e)u=!0;else switch(s){case"string":case"number":u=!0;break;case"object":switch(e.$$typeof){case o:case a:u=!0}}if(u)return r(i,e,""===n?"."+F(e,0):n),1;if(u=0,n=""===n?".":n+":",Array.isArray(e))for(var c=0;c<e.length;c++){var l=n+F(s=e[c],c);u+=t(s,l,r,i)}else if(l=null===e||"object"!==typeof e?null:"function"===typeof(l=g&&e[g]||e["@@iterator"])?l:null,"function"===typeof l)for(e=l.call(e),c=0;!(s=e.next()).done;)u+=t(s=s.value,l=n+F(s,c++),r,i);else"object"===s&&v("31","[object Object]"===(r=""+e)?"object with keys {"+Object.keys(e).join(", ")+"}":r,"");return u}(t,"",e,n)}function F(t,e){return"object"===typeof t&&null!==t&&null!=t.key?function(t){var e={"=":"=0",":":"=2"};return"$"+(""+t).replace(/[=:]/g,function(t){return e[t]})}(t.key):e.toString(36)}function L(t,e){t.func.call(t.context,e,t.count++)}function V(t,e,n){var r=t.result,i=t.keyPrefix;t=t.func.call(t.context,e,t.count++),Array.isArray(t)?B(t,r,n,function(t){return t}):null!=t&&(P(t)&&(t=function(t,e){return{$$typeof:o,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}(t,i+(!t.key||e&&e.key===t.key?"":(""+t.key).replace(D,"$&/")+"/")+n)),r.push(t))}function B(t,e,n,r,i){var o="";null!=n&&(o=(""+n).replace(D,"$&/")+"/"),M(t,V,e=R(e,o,r,i)),O(e)}function U(){var t=C.current;return null===t&&v("321"),t}var j={Children:{map:function(t,e,n){if(null==t)return t;var r=[];return B(t,r,null,e,n),r},forEach:function(t,e,n){if(null==t)return t;M(t,L,e=R(null,null,e,n)),O(e)},count:function(t){return M(t,function(){return null},null)},toArray:function(t){var e=[];return B(t,e,null,function(t){return t}),e},only:function(t){return P(t)||v("143"),t}},createRef:function(){return{current:null}},Component:w,PureComponent:S,createContext:function(t,e){return void 0===e&&(e=null),(t={$$typeof:h,_calculateChangedBits:e,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null}).Provider={$$typeof:l,_context:t},t.Consumer=t},forwardRef:function(t){return{$$typeof:p,render:t}},lazy:function(t){return{$$typeof:y,_ctor:t,_status:-1,_result:null}},memo:function(t,e){return{$$typeof:m,type:t,compare:void 0===e?null:e}},useCallback:function(t,e){return U().useCallback(t,e)},useContext:function(t,e){return U().useContext(t,e)},useEffect:function(t,e){return U().useEffect(t,e)},useImperativeHandle:function(t,e,n){return U().useImperativeHandle(t,e,n)},useDebugValue:function(){},useLayoutEffect:function(t,e){return U().useLayoutEffect(t,e)},useMemo:function(t,e){return U().useMemo(t,e)},useReducer:function(t,e,n){return U().useReducer(t,e,n)},useRef:function(t){return U().useRef(t)},useState:function(t){return U().useState(t)},Fragment:s,StrictMode:u,Suspense:d,createElement:A,cloneElement:function(t,e,n){(null===t||void 0===t)&&v("267",t);var i=void 0,a=r({},t.props),s=t.key,u=t.ref,c=t._owner;if(null!=e){void 0!==e.ref&&(u=e.ref,c=k.current),void 0!==e.key&&(s=""+e.key);var l=void 0;for(i in t.type&&t.type.defaultProps&&(l=t.type.defaultProps),e)x.call(e,i)&&!I.hasOwnProperty(i)&&(a[i]=void 0===e[i]&&void 0!==l?l[i]:e[i])}if(1===(i=arguments.length-2))a.children=n;else if(1<i){l=Array(i);for(var h=0;h<i;h++)l[h]=arguments[h+2];a.children=l}return{$$typeof:o,type:t.type,key:s,ref:u,props:a,_owner:c}},createFactory:function(t){var e=A.bind(null,t);return e.type=t,e},isValidElement:P,version:"16.8.6",unstable_ConcurrentMode:f,unstable_Profiler:c,__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED:{ReactCurrentDispatcher:C,ReactCurrentOwner:k,assign:r}},q={default:j},G=q&&j||q;t.exports=G.default||G},function(t,e,n){"use strict";var r=n(1),i=n(54),o=n(78);function a(t){for(var e=arguments.length-1,n="https://reactjs.org/docs/error-decoder.html?invariant="+t,r=0;r<e;r++)n+="&args[]="+encodeURIComponent(arguments[r+1]);!function(t,e,n,r,i,o,a,s){if(!t){if(t=void 0,void 0===e)t=Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var u=[n,r,i,o,a,s],c=0;(t=Error(e.replace(/%s/g,function(){return u[c++]}))).name="Invariant Violation"}throw t.framesToPop=1,t}}(!1,"Minified React error #"+t+"; visit %s for the full message or use the non-minified dev environment for full errors and additional helpful warnings. ",n)}r||a("227");var s=!1,u=null,c=!1,l=null,h={onError:function(t){s=!0,u=t}};function f(t,e,n,r,i,o,a,c,l){s=!1,u=null,function(t,e,n,r,i,o,a,s,u){var c=Array.prototype.slice.call(arguments,3);try{e.apply(n,c)}catch(l){this.onError(l)}}.apply(h,arguments)}var p=null,d={};function m(){if(p)for(var t in d){var e=d[t],n=p.indexOf(t);if(-1<n||a("96",t),!g[n])for(var r in e.extractEvents||a("97",t),g[n]=e,n=e.eventTypes){var i=void 0,o=n[r],s=e,u=r;v.hasOwnProperty(u)&&a("99",u),v[u]=o;var c=o.phasedRegistrationNames;if(c){for(i in c)c.hasOwnProperty(i)&&y(c[i],s,u);i=!0}else o.registrationName?(y(o.registrationName,s,u),i=!0):i=!1;i||a("98",r,t)}}}function y(t,e,n){b[t]&&a("100",t),b[t]=e,_[t]=e.eventTypes[n].dependencies}var g=[],v={},b={},_={},w=null,E=null,S=null;function T(t,e,n){var r=t.type||"unknown-event";t.currentTarget=S(n),function(t,e,n,r,i,o,h,p,d){if(f.apply(this,arguments),s){if(s){var m=u;s=!1,u=null}else a("198"),m=void 0;c||(c=!0,l=m)}}(r,e,void 0,t),t.currentTarget=null}function C(t,e){return null==e&&a("30"),null==t?e:Array.isArray(t)?Array.isArray(e)?(t.push.apply(t,e),t):(t.push(e),t):Array.isArray(e)?[t].concat(e):[t,e]}function k(t,e,n){Array.isArray(t)?t.forEach(e,n):t&&e.call(n,t)}var x=null;function I(t){if(t){var e=t._dispatchListeners,n=t._dispatchInstances;if(Array.isArray(e))for(var r=0;r<e.length&&!t.isPropagationStopped();r++)T(t,e[r],n[r]);else e&&T(t,e,n);t._dispatchListeners=null,t._dispatchInstances=null,t.isPersistent()||t.constructor.release(t)}}var A={injectEventPluginOrder:function(t){p&&a("101"),p=Array.prototype.slice.call(t),m()},injectEventPluginsByName:function(t){var e,n=!1;for(e in t)if(t.hasOwnProperty(e)){var r=t[e];d.hasOwnProperty(e)&&d[e]===r||(d[e]&&a("102",e),d[e]=r,n=!0)}n&&m()}};function P(t,e){var n=t.stateNode;if(!n)return null;var r=w(n);if(!r)return null;n=r[e];t:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":(r=!r.disabled)||(r=!("button"===(t=t.type)||"input"===t||"select"===t||"textarea"===t)),t=!r;break t;default:t=!1}return t?null:(n&&"function"!==typeof n&&a("231",e,typeof n),n)}function D(t){if(null!==t&&(x=C(x,t)),t=x,x=null,t&&(k(t,I),x&&a("95"),c))throw t=l,c=!1,l=null,t}var N=Math.random().toString(36).slice(2),R="__reactInternalInstance$"+N,O="__reactEventHandlers$"+N;function M(t){if(t[R])return t[R];for(;!t[R];){if(!t.parentNode)return null;t=t.parentNode}return 5===(t=t[R]).tag||6===t.tag?t:null}function F(t){return!(t=t[R])||5!==t.tag&&6!==t.tag?null:t}function L(t){if(5===t.tag||6===t.tag)return t.stateNode;a("33")}function V(t){return t[O]||null}function B(t){do{t=t.return}while(t&&5!==t.tag);return t||null}function U(t,e,n){(e=P(t,n.dispatchConfig.phasedRegistrationNames[e]))&&(n._dispatchListeners=C(n._dispatchListeners,e),n._dispatchInstances=C(n._dispatchInstances,t))}function j(t){if(t&&t.dispatchConfig.phasedRegistrationNames){for(var e=t._targetInst,n=[];e;)n.push(e),e=B(e);for(e=n.length;0<e--;)U(n[e],"captured",t);for(e=0;e<n.length;e++)U(n[e],"bubbled",t)}}function q(t,e,n){t&&n&&n.dispatchConfig.registrationName&&(e=P(t,n.dispatchConfig.registrationName))&&(n._dispatchListeners=C(n._dispatchListeners,e),n._dispatchInstances=C(n._dispatchInstances,t))}function G(t){t&&t.dispatchConfig.registrationName&&q(t._targetInst,null,t)}function W(t){k(t,j)}var z=!("undefined"===typeof window||!window.document||!window.document.createElement);function H(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var K={animationend:H("Animation","AnimationEnd"),animationiteration:H("Animation","AnimationIteration"),animationstart:H("Animation","AnimationStart"),transitionend:H("Transition","TransitionEnd")},Q={},Y={};function X(t){if(Q[t])return Q[t];if(!K[t])return t;var e,n=K[t];for(e in n)if(n.hasOwnProperty(e)&&e in Y)return Q[t]=n[e];return t}z&&(Y=document.createElement("div").style,"AnimationEvent"in window||(delete K.animationend.animation,delete K.animationiteration.animation,delete K.animationstart.animation),"TransitionEvent"in window||delete K.transitionend.transition);var $=X("animationend"),J=X("animationiteration"),Z=X("animationstart"),tt=X("transitionend"),et="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),nt=null,rt=null,it=null;function ot(){if(it)return it;var t,e,n=rt,r=n.length,i="value"in nt?nt.value:nt.textContent,o=i.length;for(t=0;t<r&&n[t]===i[t];t++);var a=r-t;for(e=1;e<=a&&n[r-e]===i[o-e];e++);return it=i.slice(t,1<e?1-e:void 0)}function at(){return!0}function st(){return!1}function ut(t,e,n,r){for(var i in this.dispatchConfig=t,this._targetInst=e,this.nativeEvent=n,t=this.constructor.Interface)t.hasOwnProperty(i)&&((e=t[i])?this[i]=e(n):"target"===i?this.target=r:this[i]=n[i]);return this.isDefaultPrevented=(null!=n.defaultPrevented?n.defaultPrevented:!1===n.returnValue)?at:st,this.isPropagationStopped=st,this}function ct(t,e,n,r){if(this.eventPool.length){var i=this.eventPool.pop();return this.call(i,t,e,n,r),i}return new this(t,e,n,r)}function lt(t){t instanceof this||a("279"),t.destructor(),10>this.eventPool.length&&this.eventPool.push(t)}function ht(t){t.eventPool=[],t.getPooled=ct,t.release=lt}i(ut.prototype,{preventDefault:function(){this.defaultPrevented=!0;var t=this.nativeEvent;t&&(t.preventDefault?t.preventDefault():"unknown"!==typeof t.returnValue&&(t.returnValue=!1),this.isDefaultPrevented=at)},stopPropagation:function(){var t=this.nativeEvent;t&&(t.stopPropagation?t.stopPropagation():"unknown"!==typeof t.cancelBubble&&(t.cancelBubble=!0),this.isPropagationStopped=at)},persist:function(){this.isPersistent=at},isPersistent:st,destructor:function(){var t,e=this.constructor.Interface;for(t in e)this[t]=null;this.nativeEvent=this._targetInst=this.dispatchConfig=null,this.isPropagationStopped=this.isDefaultPrevented=st,this._dispatchInstances=this._dispatchListeners=null}}),ut.Interface={type:null,target:null,currentTarget:function(){return null},eventPhase:null,bubbles:null,cancelable:null,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:null,isTrusted:null},ut.extend=function(t){function e(){}function n(){return r.apply(this,arguments)}var r=this;e.prototype=r.prototype;var o=new e;return i(o,n.prototype),n.prototype=o,n.prototype.constructor=n,n.Interface=i({},r.Interface,t),n.extend=r.extend,ht(n),n},ht(ut);var ft=ut.extend({data:null}),pt=ut.extend({data:null}),dt=[9,13,27,32],mt=z&&"CompositionEvent"in window,yt=null;z&&"documentMode"in document&&(yt=document.documentMode);var gt=z&&"TextEvent"in window&&!yt,vt=z&&(!mt||yt&&8<yt&&11>=yt),bt=String.fromCharCode(32),_t={beforeInput:{phasedRegistrationNames:{bubbled:"onBeforeInput",captured:"onBeforeInputCapture"},dependencies:["compositionend","keypress","textInput","paste"]},compositionEnd:{phasedRegistrationNames:{bubbled:"onCompositionEnd",captured:"onCompositionEndCapture"},dependencies:"blur compositionend keydown keypress keyup mousedown".split(" ")},compositionStart:{phasedRegistrationNames:{bubbled:"onCompositionStart",captured:"onCompositionStartCapture"},dependencies:"blur compositionstart keydown keypress keyup mousedown".split(" ")},compositionUpdate:{phasedRegistrationNames:{bubbled:"onCompositionUpdate",captured:"onCompositionUpdateCapture"},dependencies:"blur compositionupdate keydown keypress keyup mousedown".split(" ")}},wt=!1;function Et(t,e){switch(t){case"keyup":return-1!==dt.indexOf(e.keyCode);case"keydown":return 229!==e.keyCode;case"keypress":case"mousedown":case"blur":return!0;default:return!1}}function St(t){return"object"===typeof(t=t.detail)&&"data"in t?t.data:null}var Tt=!1;var Ct={eventTypes:_t,extractEvents:function(t,e,n,r){var i=void 0,o=void 0;if(mt)t:{switch(t){case"compositionstart":i=_t.compositionStart;break t;case"compositionend":i=_t.compositionEnd;break t;case"compositionupdate":i=_t.compositionUpdate;break t}i=void 0}else Tt?Et(t,n)&&(i=_t.compositionEnd):"keydown"===t&&229===n.keyCode&&(i=_t.compositionStart);return i?(vt&&"ko"!==n.locale&&(Tt||i!==_t.compositionStart?i===_t.compositionEnd&&Tt&&(o=ot()):(rt="value"in(nt=r)?nt.value:nt.textContent,Tt=!0)),i=ft.getPooled(i,e,n,r),o?i.data=o:null!==(o=St(n))&&(i.data=o),W(i),o=i):o=null,(t=gt?function(t,e){switch(t){case"compositionend":return St(e);case"keypress":return 32!==e.which?null:(wt=!0,bt);case"textInput":return(t=e.data)===bt&&wt?null:t;default:return null}}(t,n):function(t,e){if(Tt)return"compositionend"===t||!mt&&Et(t,e)?(t=ot(),it=rt=nt=null,Tt=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return vt&&"ko"!==e.locale?null:e.data;default:return null}}(t,n))?((e=pt.getPooled(_t.beforeInput,e,n,r)).data=t,W(e)):e=null,null===o?e:null===e?o:[o,e]}},kt=null,xt=null,It=null;function At(t){if(t=E(t)){"function"!==typeof kt&&a("280");var e=w(t.stateNode);kt(t.stateNode,t.type,e)}}function Pt(t){xt?It?It.push(t):It=[t]:xt=t}function Dt(){if(xt){var t=xt,e=It;if(It=xt=null,At(t),e)for(t=0;t<e.length;t++)At(e[t])}}function Nt(t,e){return t(e)}function Rt(t,e,n){return t(e,n)}function Ot(){}var Mt=!1;function Ft(t,e){if(Mt)return t(e);Mt=!0;try{return Nt(t,e)}finally{Mt=!1,(null!==xt||null!==It)&&(Ot(),Dt())}}var Lt={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Vt(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return"input"===e?!!Lt[t.type]:"textarea"===e}function Bt(t){return(t=t.target||t.srcElement||window).correspondingUseElement&&(t=t.correspondingUseElement),3===t.nodeType?t.parentNode:t}function Ut(t){if(!z)return!1;var e=(t="on"+t)in document;return e||((e=document.createElement("div")).setAttribute(t,"return;"),e="function"===typeof e[t]),e}function jt(t){var e=t.type;return(t=t.nodeName)&&"input"===t.toLowerCase()&&("checkbox"===e||"radio"===e)}function qt(t){t._valueTracker||(t._valueTracker=function(t){var e=jt(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var i=n.get,o=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(t){r=""+t,o.call(this,t)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(t){r=""+t},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}(t))}function Gt(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=jt(t)?t.checked?"true":"false":t.value),(t=r)!==n&&(e.setValue(t),!0)}var Wt=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;Wt.hasOwnProperty("ReactCurrentDispatcher")||(Wt.ReactCurrentDispatcher={current:null});var zt=/^(.*)[\\\/]/,Ht="function"===typeof Symbol&&Symbol.for,Kt=Ht?Symbol.for("react.element"):60103,Qt=Ht?Symbol.for("react.portal"):60106,Yt=Ht?Symbol.for("react.fragment"):60107,Xt=Ht?Symbol.for("react.strict_mode"):60108,$t=Ht?Symbol.for("react.profiler"):60114,Jt=Ht?Symbol.for("react.provider"):60109,Zt=Ht?Symbol.for("react.context"):60110,te=Ht?Symbol.for("react.concurrent_mode"):60111,ee=Ht?Symbol.for("react.forward_ref"):60112,ne=Ht?Symbol.for("react.suspense"):60113,re=Ht?Symbol.for("react.memo"):60115,ie=Ht?Symbol.for("react.lazy"):60116,oe="function"===typeof Symbol&&Symbol.iterator;function ae(t){return null===t||"object"!==typeof t?null:"function"===typeof(t=oe&&t[oe]||t["@@iterator"])?t:null}function se(t){if(null==t)return null;if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t;switch(t){case te:return"ConcurrentMode";case Yt:return"Fragment";case Qt:return"Portal";case $t:return"Profiler";case Xt:return"StrictMode";case ne:return"Suspense"}if("object"===typeof t)switch(t.$$typeof){case Zt:return"Context.Consumer";case Jt:return"Context.Provider";case ee:var e=t.render;return e=e.displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case re:return se(t.type);case ie:if(t=1===t._status?t._result:null)return se(t)}return null}function ue(t){var e="";do{t:switch(t.tag){case 3:case 4:case 6:case 7:case 10:case 9:var n="";break t;default:var r=t._debugOwner,i=t._debugSource,o=se(t.type);n=null,r&&(n=se(r.type)),r=o,o="",i?o=" (at "+i.fileName.replace(zt,"")+":"+i.lineNumber+")":n&&(o=" (created by "+n+")"),n="\n    in "+(r||"Unknown")+o}e+=n,t=t.return}while(t);return e}var ce=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,le=Object.prototype.hasOwnProperty,he={},fe={};function pe(t,e,n,r,i){this.acceptsBooleans=2===e||3===e||4===e,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e}var de={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){de[t]=new pe(t,0,!1,t,null)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];de[e]=new pe(e,1,!1,t[1],null)}),["contentEditable","draggable","spellCheck","value"].forEach(function(t){de[t]=new pe(t,2,!1,t.toLowerCase(),null)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){de[t]=new pe(t,2,!1,t,null)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){de[t]=new pe(t,3,!1,t.toLowerCase(),null)}),["checked","multiple","muted","selected"].forEach(function(t){de[t]=new pe(t,3,!0,t,null)}),["capture","download"].forEach(function(t){de[t]=new pe(t,4,!1,t,null)}),["cols","rows","size","span"].forEach(function(t){de[t]=new pe(t,6,!1,t,null)}),["rowSpan","start"].forEach(function(t){de[t]=new pe(t,5,!1,t.toLowerCase(),null)});var me=/[\-:]([a-z])/g;function ye(t){return t[1].toUpperCase()}function ge(t,e,n,r){var i=de.hasOwnProperty(e)?de[e]:null;(null!==i?0===i.type:!r&&(2<e.length&&("o"===e[0]||"O"===e[0])&&("n"===e[1]||"N"===e[1])))||(function(t,e,n,r){if(null===e||"undefined"===typeof e||function(t,e,n,r){if(null!==n&&0===n.type)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(t=t.toLowerCase().slice(0,5))&&"aria-"!==t);default:return!1}}(t,e,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!e;case 4:return!1===e;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}(e,n,i,r)&&(n=null),r||null===i?function(t){return!!le.call(fe,t)||!le.call(he,t)&&(ce.test(t)?fe[t]=!0:(he[t]=!0,!1))}(e)&&(null===n?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=null===n?3!==i.type&&"":n:(e=i.attributeName,r=i.attributeNamespace,null===n?t.removeAttribute(e):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}function ve(t){switch(typeof t){case"boolean":case"number":case"object":case"string":case"undefined":return t;default:return""}}function be(t,e){var n=e.checked;return i({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:t._wrapperState.initialChecked})}function _e(t,e){var n=null==e.defaultValue?"":e.defaultValue,r=null!=e.checked?e.checked:e.defaultChecked;n=ve(null!=e.value?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===e.type||"radio"===e.type?null!=e.checked:null!=e.value}}function we(t,e){null!=(e=e.checked)&&ge(t,"checked",e,!1)}function Ee(t,e){we(t,e);var n=ve(e.value),r=e.type;if(null!=n)"number"===r?(0===n&&""===t.value||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if("submit"===r||"reset"===r)return void t.removeAttribute("value");e.hasOwnProperty("value")?Te(t,e.type,n):e.hasOwnProperty("defaultValue")&&Te(t,e.type,ve(e.defaultValue)),null==e.checked&&null!=e.defaultChecked&&(t.defaultChecked=!!e.defaultChecked)}function Se(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!("submit"!==r&&"reset"!==r||void 0!==e.value&&null!==e.value))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}""!==(n=t.name)&&(t.name=""),t.defaultChecked=!t.defaultChecked,t.defaultChecked=!!t._wrapperState.initialChecked,""!==n&&(t.name=n)}function Te(t,e,n){"number"===e&&t.ownerDocument.activeElement===t||(null==n?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(me,ye);de[e]=new pe(e,1,!1,t,null)}),"xlink:actuate xlink:arcrole xlink:href xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(me,ye);de[e]=new pe(e,1,!1,t,"http://www.w3.org/1999/xlink")}),["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(me,ye);de[e]=new pe(e,1,!1,t,"http://www.w3.org/XML/1998/namespace")}),["tabIndex","crossOrigin"].forEach(function(t){de[t]=new pe(t,1,!1,t.toLowerCase(),null)});var Ce={change:{phasedRegistrationNames:{bubbled:"onChange",captured:"onChangeCapture"},dependencies:"blur change click focus input keydown keyup selectionchange".split(" ")}};function ke(t,e,n){return(t=ut.getPooled(Ce.change,t,e,n)).type="change",Pt(n),W(t),t}var xe=null,Ie=null;function Ae(t){D(t)}function Pe(t){if(Gt(L(t)))return t}function De(t,e){if("change"===t)return e}var Ne=!1;function Re(){xe&&(xe.detachEvent("onpropertychange",Oe),Ie=xe=null)}function Oe(t){"value"===t.propertyName&&Pe(Ie)&&Ft(Ae,t=ke(Ie,t,Bt(t)))}function Me(t,e,n){"focus"===t?(Re(),Ie=n,(xe=e).attachEvent("onpropertychange",Oe)):"blur"===t&&Re()}function Fe(t){if("selectionchange"===t||"keyup"===t||"keydown"===t)return Pe(Ie)}function Le(t,e){if("click"===t)return Pe(e)}function Ve(t,e){if("input"===t||"change"===t)return Pe(e)}z&&(Ne=Ut("input")&&(!document.documentMode||9<document.documentMode));var Be={eventTypes:Ce,_isInputEventSupported:Ne,extractEvents:function(t,e,n,r){var i=e?L(e):window,o=void 0,a=void 0,s=i.nodeName&&i.nodeName.toLowerCase();if("select"===s||"input"===s&&"file"===i.type?o=De:Vt(i)?Ne?o=Ve:(o=Fe,a=Me):(s=i.nodeName)&&"input"===s.toLowerCase()&&("checkbox"===i.type||"radio"===i.type)&&(o=Le),o&&(o=o(t,e)))return ke(o,n,r);a&&a(t,i,e),"blur"===t&&(t=i._wrapperState)&&t.controlled&&"number"===i.type&&Te(i,"number",i.value)}},Ue=ut.extend({view:null,detail:null}),je={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function qe(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):!!(t=je[t])&&!!e[t]}function Ge(){return qe}var We=0,ze=0,He=!1,Ke=!1,Qe=Ue.extend({screenX:null,screenY:null,clientX:null,clientY:null,pageX:null,pageY:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,getModifierState:Ge,button:null,buttons:null,relatedTarget:function(t){return t.relatedTarget||(t.fromElement===t.srcElement?t.toElement:t.fromElement)},movementX:function(t){if("movementX"in t)return t.movementX;var e=We;return We=t.screenX,He?"mousemove"===t.type?t.screenX-e:0:(He=!0,0)},movementY:function(t){if("movementY"in t)return t.movementY;var e=ze;return ze=t.screenY,Ke?"mousemove"===t.type?t.screenY-e:0:(Ke=!0,0)}}),Ye=Qe.extend({pointerId:null,width:null,height:null,pressure:null,tangentialPressure:null,tiltX:null,tiltY:null,twist:null,pointerType:null,isPrimary:null}),Xe={mouseEnter:{registrationName:"onMouseEnter",dependencies:["mouseout","mouseover"]},mouseLeave:{registrationName:"onMouseLeave",dependencies:["mouseout","mouseover"]},pointerEnter:{registrationName:"onPointerEnter",dependencies:["pointerout","pointerover"]},pointerLeave:{registrationName:"onPointerLeave",dependencies:["pointerout","pointerover"]}},$e={eventTypes:Xe,extractEvents:function(t,e,n,r){var i="mouseover"===t||"pointerover"===t,o="mouseout"===t||"pointerout"===t;if(i&&(n.relatedTarget||n.fromElement)||!o&&!i)return null;if(i=r.window===r?r:(i=r.ownerDocument)?i.defaultView||i.parentWindow:window,o?(o=e,e=(e=n.relatedTarget||n.toElement)?M(e):null):o=null,o===e)return null;var a=void 0,s=void 0,u=void 0,c=void 0;"mouseout"===t||"mouseover"===t?(a=Qe,s=Xe.mouseLeave,u=Xe.mouseEnter,c="mouse"):"pointerout"!==t&&"pointerover"!==t||(a=Ye,s=Xe.pointerLeave,u=Xe.pointerEnter,c="pointer");var l=null==o?i:L(o);if(i=null==e?i:L(e),(t=a.getPooled(s,o,n,r)).type=c+"leave",t.target=l,t.relatedTarget=i,(n=a.getPooled(u,e,n,r)).type=c+"enter",n.target=i,n.relatedTarget=l,r=e,o&&r)t:{for(i=r,c=0,a=e=o;a;a=B(a))c++;for(a=0,u=i;u;u=B(u))a++;for(;0<c-a;)e=B(e),c--;for(;0<a-c;)i=B(i),a--;for(;c--;){if(e===i||e===i.alternate)break t;e=B(e),i=B(i)}e=null}else e=null;for(i=e,e=[];o&&o!==i&&(null===(c=o.alternate)||c!==i);)e.push(o),o=B(o);for(o=[];r&&r!==i&&(null===(c=r.alternate)||c!==i);)o.push(r),r=B(r);for(r=0;r<e.length;r++)q(e[r],"bubbled",t);for(r=o.length;0<r--;)q(o[r],"captured",n);return[t,n]}};function Je(t,e){return t===e&&(0!==t||1/t===1/e)||t!==t&&e!==e}var Ze=Object.prototype.hasOwnProperty;function tn(t,e){if(Je(t,e))return!0;if("object"!==typeof t||null===t||"object"!==typeof e||null===e)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++)if(!Ze.call(e,n[r])||!Je(t[n[r]],e[n[r]]))return!1;return!0}function en(t){var e=t;if(t.alternate)for(;e.return;)e=e.return;else{if(0!==(2&e.effectTag))return 1;for(;e.return;)if(0!==(2&(e=e.return).effectTag))return 1}return 3===e.tag?2:3}function nn(t){2!==en(t)&&a("188")}function rn(t){if(!(t=function(t){var e=t.alternate;if(!e)return 3===(e=en(t))&&a("188"),1===e?null:t;for(var n=t,r=e;;){var i=n.return,o=i?i.alternate:null;if(!i||!o)break;if(i.child===o.child){for(var s=i.child;s;){if(s===n)return nn(i),t;if(s===r)return nn(i),e;s=s.sibling}a("188")}if(n.return!==r.return)n=i,r=o;else{s=!1;for(var u=i.child;u;){if(u===n){s=!0,n=i,r=o;break}if(u===r){s=!0,r=i,n=o;break}u=u.sibling}if(!s){for(u=o.child;u;){if(u===n){s=!0,n=o,r=i;break}if(u===r){s=!0,r=o,n=i;break}u=u.sibling}s||a("189")}}n.alternate!==r&&a("190")}return 3!==n.tag&&a("188"),n.stateNode.current===n?t:e}(t)))return null;for(var e=t;;){if(5===e.tag||6===e.tag)return e;if(e.child)e.child.return=e,e=e.child;else{if(e===t)break;for(;!e.sibling;){if(!e.return||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}}return null}var on=ut.extend({animationName:null,elapsedTime:null,pseudoElement:null}),an=ut.extend({clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),sn=Ue.extend({relatedTarget:null});function un(t){var e=t.keyCode;return"charCode"in t?0===(t=t.charCode)&&13===e&&(t=13):t=e,10===t&&(t=13),32<=t||13===t?t:0}var cn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},ln={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},hn=Ue.extend({key:function(t){if(t.key){var e=cn[t.key]||t.key;if("Unidentified"!==e)return e}return"keypress"===t.type?13===(t=un(t))?"Enter":String.fromCharCode(t):"keydown"===t.type||"keyup"===t.type?ln[t.keyCode]||"Unidentified":""},location:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,repeat:null,locale:null,getModifierState:Ge,charCode:function(t){return"keypress"===t.type?un(t):0},keyCode:function(t){return"keydown"===t.type||"keyup"===t.type?t.keyCode:0},which:function(t){return"keypress"===t.type?un(t):"keydown"===t.type||"keyup"===t.type?t.keyCode:0}}),fn=Qe.extend({dataTransfer:null}),pn=Ue.extend({touches:null,targetTouches:null,changedTouches:null,altKey:null,metaKey:null,ctrlKey:null,shiftKey:null,getModifierState:Ge}),dn=ut.extend({propertyName:null,elapsedTime:null,pseudoElement:null}),mn=Qe.extend({deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:null,deltaMode:null}),yn=[["abort","abort"],[$,"animationEnd"],[J,"animationIteration"],[Z,"animationStart"],["canplay","canPlay"],["canplaythrough","canPlayThrough"],["drag","drag"],["dragenter","dragEnter"],["dragexit","dragExit"],["dragleave","dragLeave"],["dragover","dragOver"],["durationchange","durationChange"],["emptied","emptied"],["encrypted","encrypted"],["ended","ended"],["error","error"],["gotpointercapture","gotPointerCapture"],["load","load"],["loadeddata","loadedData"],["loadedmetadata","loadedMetadata"],["loadstart","loadStart"],["lostpointercapture","lostPointerCapture"],["mousemove","mouseMove"],["mouseout","mouseOut"],["mouseover","mouseOver"],["playing","playing"],["pointermove","pointerMove"],["pointerout","pointerOut"],["pointerover","pointerOver"],["progress","progress"],["scroll","scroll"],["seeking","seeking"],["stalled","stalled"],["suspend","suspend"],["timeupdate","timeUpdate"],["toggle","toggle"],["touchmove","touchMove"],[tt,"transitionEnd"],["waiting","waiting"],["wheel","wheel"]],gn={},vn={};function bn(t,e){var n=t[0],r="on"+((t=t[1])[0].toUpperCase()+t.slice(1));e={phasedRegistrationNames:{bubbled:r,captured:r+"Capture"},dependencies:[n],isInteractive:e},gn[t]=e,vn[n]=e}[["blur","blur"],["cancel","cancel"],["click","click"],["close","close"],["contextmenu","contextMenu"],["copy","copy"],["cut","cut"],["auxclick","auxClick"],["dblclick","doubleClick"],["dragend","dragEnd"],["dragstart","dragStart"],["drop","drop"],["focus","focus"],["input","input"],["invalid","invalid"],["keydown","keyDown"],["keypress","keyPress"],["keyup","keyUp"],["mousedown","mouseDown"],["mouseup","mouseUp"],["paste","paste"],["pause","pause"],["play","play"],["pointercancel","pointerCancel"],["pointerdown","pointerDown"],["pointerup","pointerUp"],["ratechange","rateChange"],["reset","reset"],["seeked","seeked"],["submit","submit"],["touchcancel","touchCancel"],["touchend","touchEnd"],["touchstart","touchStart"],["volumechange","volumeChange"]].forEach(function(t){bn(t,!0)}),yn.forEach(function(t){bn(t,!1)});var _n={eventTypes:gn,isInteractiveTopLevelEventType:function(t){return void 0!==(t=vn[t])&&!0===t.isInteractive},extractEvents:function(t,e,n,r){var i=vn[t];if(!i)return null;switch(t){case"keypress":if(0===un(n))return null;case"keydown":case"keyup":t=hn;break;case"blur":case"focus":t=sn;break;case"click":if(2===n.button)return null;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":t=Qe;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":t=fn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":t=pn;break;case $:case J:case Z:t=on;break;case tt:t=dn;break;case"scroll":t=Ue;break;case"wheel":t=mn;break;case"copy":case"cut":case"paste":t=an;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":t=Ye;break;default:t=ut}return W(e=t.getPooled(i,e,n,r)),e}},wn=_n.isInteractiveTopLevelEventType,En=[];function Sn(t){var e=t.targetInst,n=e;do{if(!n){t.ancestors.push(n);break}var r;for(r=n;r.return;)r=r.return;if(!(r=3!==r.tag?null:r.stateNode.containerInfo))break;t.ancestors.push(n),n=M(r)}while(n);for(n=0;n<t.ancestors.length;n++){e=t.ancestors[n];var i=Bt(t.nativeEvent);r=t.topLevelType;for(var o=t.nativeEvent,a=null,s=0;s<g.length;s++){var u=g[s];u&&(u=u.extractEvents(r,e,o,i))&&(a=C(a,u))}D(a)}}var Tn=!0;function Cn(t,e){if(!e)return null;var n=(wn(t)?xn:In).bind(null,t);e.addEventListener(t,n,!1)}function kn(t,e){if(!e)return null;var n=(wn(t)?xn:In).bind(null,t);e.addEventListener(t,n,!0)}function xn(t,e){Rt(In,t,e)}function In(t,e){if(Tn){var n=Bt(e);if(null===(n=M(n))||"number"!==typeof n.tag||2===en(n)||(n=null),En.length){var r=En.pop();r.topLevelType=t,r.nativeEvent=e,r.targetInst=n,t=r}else t={topLevelType:t,nativeEvent:e,targetInst:n,ancestors:[]};try{Ft(Sn,t)}finally{t.topLevelType=null,t.nativeEvent=null,t.targetInst=null,t.ancestors.length=0,10>En.length&&En.push(t)}}}var An={},Pn=0,Dn="_reactListenersID"+(""+Math.random()).slice(2);function Nn(t){return Object.prototype.hasOwnProperty.call(t,Dn)||(t[Dn]=Pn++,An[t[Dn]]={}),An[t[Dn]]}function Rn(t){if("undefined"===typeof(t=t||("undefined"!==typeof document?document:void 0)))return null;try{return t.activeElement||t.body}catch(e){return t.body}}function On(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Mn(t,e){var n,r=On(t);for(t=0;r;){if(3===r.nodeType){if(n=t+r.textContent.length,t<=e&&n>=e)return{node:r,offset:e-t};t=n}t:{for(;r;){if(r.nextSibling){r=r.nextSibling;break t}r=r.parentNode}r=void 0}r=On(r)}}function Fn(){for(var t=window,e=Rn();e instanceof t.HTMLIFrameElement;){try{var n="string"===typeof e.contentWindow.location.href}catch(r){n=!1}if(!n)break;e=Rn((t=e.contentWindow).document)}return e}function Ln(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&("input"===e&&("text"===t.type||"search"===t.type||"tel"===t.type||"url"===t.type||"password"===t.type)||"textarea"===e||"true"===t.contentEditable)}function Vn(t){var e=Fn(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&function t(e,n){return!(!e||!n)&&(e===n||(!e||3!==e.nodeType)&&(n&&3===n.nodeType?t(e,n.parentNode):"contains"in e?e.contains(n):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(n))))}(n.ownerDocument.documentElement,n)){if(null!==r&&Ln(n))if(e=r.start,void 0===(t=r.end)&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if((t=(e=n.ownerDocument||document)&&e.defaultView||window).getSelection){t=t.getSelection();var i=n.textContent.length,o=Math.min(r.start,i);r=void 0===r.end?o:Math.min(r.end,i),!t.extend&&o>r&&(i=r,r=o,o=i),i=Mn(n,o);var a=Mn(n,r);i&&a&&(1!==t.rangeCount||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==a.node||t.focusOffset!==a.offset)&&((e=e.createRange()).setStart(i.node,i.offset),t.removeAllRanges(),o>r?(t.addRange(e),t.extend(a.node,a.offset)):(e.setEnd(a.node,a.offset),t.addRange(e)))}for(e=[],t=n;t=t.parentNode;)1===t.nodeType&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<e.length;n++)(t=e[n]).element.scrollLeft=t.left,t.element.scrollTop=t.top}}var Bn=z&&"documentMode"in document&&11>=document.documentMode,Un={select:{phasedRegistrationNames:{bubbled:"onSelect",captured:"onSelectCapture"},dependencies:"blur contextmenu dragend focus keydown keyup mousedown mouseup selectionchange".split(" ")}},jn=null,qn=null,Gn=null,Wn=!1;function zn(t,e){var n=e.window===e?e.document:9===e.nodeType?e:e.ownerDocument;return Wn||null==jn||jn!==Rn(n)?null:("selectionStart"in(n=jn)&&Ln(n)?n={start:n.selectionStart,end:n.selectionEnd}:n={anchorNode:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset},Gn&&tn(Gn,n)?null:(Gn=n,(t=ut.getPooled(Un.select,qn,t,e)).type="select",t.target=jn,W(t),t))}var Hn={eventTypes:Un,extractEvents:function(t,e,n,r){var i,o=r.window===r?r.document:9===r.nodeType?r:r.ownerDocument;if(!(i=!o)){t:{o=Nn(o),i=_.onSelect;for(var a=0;a<i.length;a++){var s=i[a];if(!o.hasOwnProperty(s)||!o[s]){o=!1;break t}}o=!0}i=!o}if(i)return null;switch(o=e?L(e):window,t){case"focus":(Vt(o)||"true"===o.contentEditable)&&(jn=o,qn=e,Gn=null);break;case"blur":Gn=qn=jn=null;break;case"mousedown":Wn=!0;break;case"contextmenu":case"mouseup":case"dragend":return Wn=!1,zn(n,r);case"selectionchange":if(Bn)break;case"keydown":case"keyup":return zn(n,r)}return null}};function Kn(t,e){return t=i({children:void 0},e),(e=function(t){var e="";return r.Children.forEach(t,function(t){null!=t&&(e+=t)}),e}(e.children))&&(t.children=e),t}function Qn(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+ve(n),e=null,i=0;i<t.length;i++){if(t[i].value===n)return t[i].selected=!0,void(r&&(t[i].defaultSelected=!0));null!==e||t[i].disabled||(e=t[i])}null!==e&&(e.selected=!0)}}function Yn(t,e){return null!=e.dangerouslySetInnerHTML&&a("91"),i({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Xn(t,e){var n=e.value;null==n&&(n=e.defaultValue,null!=(e=e.children)&&(null!=n&&a("92"),Array.isArray(e)&&(1>=e.length||a("93"),e=e[0]),n=e),null==n&&(n="")),t._wrapperState={initialValue:ve(n)}}function $n(t,e){var n=ve(e.value),r=ve(e.defaultValue);null!=n&&((n=""+n)!==t.value&&(t.value=n),null==e.defaultValue&&t.defaultValue!==n&&(t.defaultValue=n)),null!=r&&(t.defaultValue=""+r)}function Jn(t){var e=t.textContent;e===t._wrapperState.initialValue&&(t.value=e)}A.injectEventPluginOrder("ResponderEventPlugin SimpleEventPlugin EnterLeaveEventPlugin ChangeEventPlugin SelectEventPlugin BeforeInputEventPlugin".split(" ")),w=V,E=F,S=L,A.injectEventPluginsByName({SimpleEventPlugin:_n,EnterLeaveEventPlugin:$e,ChangeEventPlugin:Be,SelectEventPlugin:Hn,BeforeInputEventPlugin:Ct});var Zn={html:"http://www.w3.org/1999/xhtml",mathml:"http://www.w3.org/1998/Math/MathML",svg:"http://www.w3.org/2000/svg"};function tr(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function er(t,e){return null==t||"http://www.w3.org/1999/xhtml"===t?tr(e):"http://www.w3.org/2000/svg"===t&&"foreignObject"===e?"http://www.w3.org/1999/xhtml":t}var nr,rr=void 0,ir=(nr=function(t,e){if(t.namespaceURI!==Zn.svg||"innerHTML"in t)t.innerHTML=e;else{for((rr=rr||document.createElement("div")).innerHTML="<svg>"+e+"</svg>",e=rr.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(t,e,n,r){MSApp.execUnsafeLocalFunction(function(){return nr(t,e)})}:nr);function or(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&3===n.nodeType)return void(n.nodeValue=e)}t.textContent=e}var ar={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},sr=["Webkit","ms","Moz","O"];function ur(t,e,n){return null==e||"boolean"===typeof e||""===e?"":n||"number"!==typeof e||0===e||ar.hasOwnProperty(t)&&ar[t]?(""+e).trim():e+"px"}function cr(t,e){for(var n in t=t.style,e)if(e.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=ur(n,e[n],r);"float"===n&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}Object.keys(ar).forEach(function(t){sr.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),ar[e]=ar[t]})});var lr=i({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function hr(t,e){e&&(lr[t]&&(null!=e.children||null!=e.dangerouslySetInnerHTML)&&a("137",t,""),null!=e.dangerouslySetInnerHTML&&(null!=e.children&&a("60"),"object"===typeof e.dangerouslySetInnerHTML&&"__html"in e.dangerouslySetInnerHTML||a("61")),null!=e.style&&"object"!==typeof e.style&&a("62",""))}function fr(t,e){if(-1===t.indexOf("-"))return"string"===typeof e.is;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}function pr(t,e){var n=Nn(t=9===t.nodeType||11===t.nodeType?t:t.ownerDocument);e=_[e];for(var r=0;r<e.length;r++){var i=e[r];if(!n.hasOwnProperty(i)||!n[i]){switch(i){case"scroll":kn("scroll",t);break;case"focus":case"blur":kn("focus",t),kn("blur",t),n.blur=!0,n.focus=!0;break;case"cancel":case"close":Ut(i)&&kn(i,t);break;case"invalid":case"submit":case"reset":break;default:-1===et.indexOf(i)&&Cn(i,t)}n[i]=!0}}}function dr(){}var mr=null,yr=null;function gr(t,e){switch(t){case"button":case"input":case"select":case"textarea":return!!e.autoFocus}return!1}function vr(t,e){return"textarea"===t||"option"===t||"noscript"===t||"string"===typeof e.children||"number"===typeof e.children||"object"===typeof e.dangerouslySetInnerHTML&&null!==e.dangerouslySetInnerHTML&&null!=e.dangerouslySetInnerHTML.__html}var br="function"===typeof setTimeout?setTimeout:void 0,_r="function"===typeof clearTimeout?clearTimeout:void 0,wr=o.unstable_scheduleCallback,Er=o.unstable_cancelCallback;function Sr(t){for(t=t.nextSibling;t&&1!==t.nodeType&&3!==t.nodeType;)t=t.nextSibling;return t}function Tr(t){for(t=t.firstChild;t&&1!==t.nodeType&&3!==t.nodeType;)t=t.nextSibling;return t}new Set;var Cr=[],kr=-1;function xr(t){0>kr||(t.current=Cr[kr],Cr[kr]=null,kr--)}function Ir(t,e){Cr[++kr]=t.current,t.current=e}var Ar={},Pr={current:Ar},Dr={current:!1},Nr=Ar;function Rr(t,e){var n=t.type.contextTypes;if(!n)return Ar;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i,o={};for(i in n)o[i]=e[i];return r&&((t=t.stateNode).__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=o),o}function Or(t){return null!==(t=t.childContextTypes)&&void 0!==t}function Mr(t){xr(Dr),xr(Pr)}function Fr(t){xr(Dr),xr(Pr)}function Lr(t,e,n){Pr.current!==Ar&&a("168"),Ir(Pr,e),Ir(Dr,n)}function Vr(t,e,n){var r=t.stateNode;if(t=e.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var o in r=r.getChildContext())o in t||a("108",se(e)||"Unknown",o);return i({},n,r)}function Br(t){var e=t.stateNode;return e=e&&e.__reactInternalMemoizedMergedChildContext||Ar,Nr=Pr.current,Ir(Pr,e),Ir(Dr,Dr.current),!0}function Ur(t,e,n){var r=t.stateNode;r||a("169"),n?(e=Vr(t,e,Nr),r.__reactInternalMemoizedMergedChildContext=e,xr(Dr),xr(Pr),Ir(Pr,e)):xr(Dr),Ir(Dr,n)}var jr=null,qr=null;function Gr(t){return function(e){try{return t(e)}catch(n){}}}function Wr(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.contextDependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.effectTag=0,this.lastEffect=this.firstEffect=this.nextEffect=null,this.childExpirationTime=this.expirationTime=0,this.alternate=null}function zr(t,e,n,r){return new Wr(t,e,n,r)}function Hr(t){return!(!(t=t.prototype)||!t.isReactComponent)}function Kr(t,e){var n=t.alternate;return null===n?((n=zr(t.tag,e,t.key,t.mode)).elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.effectTag=0,n.nextEffect=null,n.firstEffect=null,n.lastEffect=null),n.childExpirationTime=t.childExpirationTime,n.expirationTime=t.expirationTime,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,n.contextDependencies=t.contextDependencies,n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Qr(t,e,n,r,i,o){var s=2;if(r=t,"function"===typeof t)Hr(t)&&(s=1);else if("string"===typeof t)s=5;else t:switch(t){case Yt:return Yr(n.children,i,o,e);case te:return Xr(n,3|i,o,e);case Xt:return Xr(n,2|i,o,e);case $t:return(t=zr(12,n,e,4|i)).elementType=$t,t.type=$t,t.expirationTime=o,t;case ne:return(t=zr(13,n,e,i)).elementType=ne,t.type=ne,t.expirationTime=o,t;default:if("object"===typeof t&&null!==t)switch(t.$$typeof){case Jt:s=10;break t;case Zt:s=9;break t;case ee:s=11;break t;case re:s=14;break t;case ie:s=16,r=null;break t}a("130",null==t?t:typeof t,"")}return(e=zr(s,n,e,i)).elementType=t,e.type=r,e.expirationTime=o,e}function Yr(t,e,n,r){return(t=zr(7,t,r,e)).expirationTime=n,t}function Xr(t,e,n,r){return t=zr(8,t,r,e),e=0===(1&e)?Xt:te,t.elementType=e,t.type=e,t.expirationTime=n,t}function $r(t,e,n){return(t=zr(6,t,null,e)).expirationTime=n,t}function Jr(t,e,n){return(e=zr(4,null!==t.children?t.children:[],t.key,e)).expirationTime=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function Zr(t,e){t.didError=!1;var n=t.earliestPendingTime;0===n?t.earliestPendingTime=t.latestPendingTime=e:n<e?t.earliestPendingTime=e:t.latestPendingTime>e&&(t.latestPendingTime=e),ni(e,t)}function ti(t,e){t.didError=!1,t.latestPingedTime>=e&&(t.latestPingedTime=0);var n=t.earliestPendingTime,r=t.latestPendingTime;n===e?t.earliestPendingTime=r===e?t.latestPendingTime=0:r:r===e&&(t.latestPendingTime=n),n=t.earliestSuspendedTime,r=t.latestSuspendedTime,0===n?t.earliestSuspendedTime=t.latestSuspendedTime=e:n<e?t.earliestSuspendedTime=e:r>e&&(t.latestSuspendedTime=e),ni(e,t)}function ei(t,e){var n=t.earliestPendingTime;return n>e&&(e=n),(t=t.earliestSuspendedTime)>e&&(e=t),e}function ni(t,e){var n=e.earliestSuspendedTime,r=e.latestSuspendedTime,i=e.earliestPendingTime,o=e.latestPingedTime;0===(i=0!==i?i:o)&&(0===t||r<t)&&(i=r),0!==(t=i)&&n>t&&(t=n),e.nextExpirationTimeToWorkOn=i,e.expirationTime=t}function ri(t,e){if(t&&t.defaultProps)for(var n in e=i({},e),t=t.defaultProps)void 0===e[n]&&(e[n]=t[n]);return e}var ii=(new r.Component).refs;function oi(t,e,n,r){n=null===(n=n(r,e=t.memoizedState))||void 0===n?e:i({},e,n),t.memoizedState=n,null!==(r=t.updateQueue)&&0===t.expirationTime&&(r.baseState=n)}var ai={isMounted:function(t){return!!(t=t._reactInternalFiber)&&2===en(t)},enqueueSetState:function(t,e,n){t=t._reactInternalFiber;var r=Es(),i=Xo(r=Ya(r,t));i.payload=e,void 0!==n&&null!==n&&(i.callback=n),Ga(),Jo(t,i),Ja(t,r)},enqueueReplaceState:function(t,e,n){t=t._reactInternalFiber;var r=Es(),i=Xo(r=Ya(r,t));i.tag=Wo,i.payload=e,void 0!==n&&null!==n&&(i.callback=n),Ga(),Jo(t,i),Ja(t,r)},enqueueForceUpdate:function(t,e){t=t._reactInternalFiber;var n=Es(),r=Xo(n=Ya(n,t));r.tag=zo,void 0!==e&&null!==e&&(r.callback=e),Ga(),Jo(t,r),Ja(t,n)}};function si(t,e,n,r,i,o,a){return"function"===typeof(t=t.stateNode).shouldComponentUpdate?t.shouldComponentUpdate(r,o,a):!e.prototype||!e.prototype.isPureReactComponent||(!tn(n,r)||!tn(i,o))}function ui(t,e,n){var r=!1,i=Ar,o=e.contextType;return"object"===typeof o&&null!==o?o=qo(o):(i=Or(e)?Nr:Pr.current,o=(r=null!==(r=e.contextTypes)&&void 0!==r)?Rr(t,i):Ar),e=new e(n,o),t.memoizedState=null!==e.state&&void 0!==e.state?e.state:null,e.updater=ai,t.stateNode=e,e._reactInternalFiber=t,r&&((t=t.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=o),e}function ci(t,e,n,r){t=e.state,"function"===typeof e.componentWillReceiveProps&&e.componentWillReceiveProps(n,r),"function"===typeof e.UNSAFE_componentWillReceiveProps&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&ai.enqueueReplaceState(e,e.state,null)}function li(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs=ii;var o=e.contextType;"object"===typeof o&&null!==o?i.context=qo(o):(o=Or(e)?Nr:Pr.current,i.context=Rr(t,o)),null!==(o=t.updateQueue)&&(na(t,o,n,i,r),i.state=t.memoizedState),"function"===typeof(o=e.getDerivedStateFromProps)&&(oi(t,e,o,n),i.state=t.memoizedState),"function"===typeof e.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(e=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),e!==i.state&&ai.enqueueReplaceState(i,i.state,null),null!==(o=t.updateQueue)&&(na(t,o,n,i,r),i.state=t.memoizedState)),"function"===typeof i.componentDidMount&&(t.effectTag|=4)}var hi=Array.isArray;function fi(t,e,n){if(null!==(t=n.ref)&&"function"!==typeof t&&"object"!==typeof t){if(n._owner){n=n._owner;var r=void 0;n&&(1!==n.tag&&a("309"),r=n.stateNode),r||a("147",t);var i=""+t;return null!==e&&null!==e.ref&&"function"===typeof e.ref&&e.ref._stringRef===i?e.ref:((e=function(t){var e=r.refs;e===ii&&(e=r.refs={}),null===t?delete e[i]:e[i]=t})._stringRef=i,e)}"string"!==typeof t&&a("284"),n._owner||a("290",t)}return t}function pi(t,e){"textarea"!==t.type&&a("31","[object Object]"===Object.prototype.toString.call(e)?"object with keys {"+Object.keys(e).join(", ")+"}":e,"")}function di(t){function e(e,n){if(t){var r=e.lastEffect;null!==r?(r.nextEffect=n,e.lastEffect=n):e.firstEffect=e.lastEffect=n,n.nextEffect=null,n.effectTag=8}}function n(n,r){if(!t)return null;for(;null!==r;)e(n,r),r=r.sibling;return null}function r(t,e){for(t=new Map;null!==e;)null!==e.key?t.set(e.key,e):t.set(e.index,e),e=e.sibling;return t}function i(t,e,n){return(t=Kr(t,e)).index=0,t.sibling=null,t}function o(e,n,r){return e.index=r,t?null!==(r=e.alternate)?(r=r.index)<n?(e.effectTag=2,n):r:(e.effectTag=2,n):n}function s(e){return t&&null===e.alternate&&(e.effectTag=2),e}function u(t,e,n,r){return null===e||6!==e.tag?((e=$r(n,t.mode,r)).return=t,e):((e=i(e,n)).return=t,e)}function c(t,e,n,r){return null!==e&&e.elementType===n.type?((r=i(e,n.props)).ref=fi(t,e,n),r.return=t,r):((r=Qr(n.type,n.key,n.props,null,t.mode,r)).ref=fi(t,e,n),r.return=t,r)}function l(t,e,n,r){return null===e||4!==e.tag||e.stateNode.containerInfo!==n.containerInfo||e.stateNode.implementation!==n.implementation?((e=Jr(n,t.mode,r)).return=t,e):((e=i(e,n.children||[])).return=t,e)}function h(t,e,n,r,o){return null===e||7!==e.tag?((e=Yr(n,t.mode,r,o)).return=t,e):((e=i(e,n)).return=t,e)}function f(t,e,n){if("string"===typeof e||"number"===typeof e)return(e=$r(""+e,t.mode,n)).return=t,e;if("object"===typeof e&&null!==e){switch(e.$$typeof){case Kt:return(n=Qr(e.type,e.key,e.props,null,t.mode,n)).ref=fi(t,null,e),n.return=t,n;case Qt:return(e=Jr(e,t.mode,n)).return=t,e}if(hi(e)||ae(e))return(e=Yr(e,t.mode,n,null)).return=t,e;pi(t,e)}return null}function p(t,e,n,r){var i=null!==e?e.key:null;if("string"===typeof n||"number"===typeof n)return null!==i?null:u(t,e,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case Kt:return n.key===i?n.type===Yt?h(t,e,n.props.children,r,i):c(t,e,n,r):null;case Qt:return n.key===i?l(t,e,n,r):null}if(hi(n)||ae(n))return null!==i?null:h(t,e,n,r,null);pi(t,n)}return null}function d(t,e,n,r,i){if("string"===typeof r||"number"===typeof r)return u(e,t=t.get(n)||null,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case Kt:return t=t.get(null===r.key?n:r.key)||null,r.type===Yt?h(e,t,r.props.children,i,r.key):c(e,t,r,i);case Qt:return l(e,t=t.get(null===r.key?n:r.key)||null,r,i)}if(hi(r)||ae(r))return h(e,t=t.get(n)||null,r,i,null);pi(e,r)}return null}function m(i,a,s,u){for(var c=null,l=null,h=a,m=a=0,y=null;null!==h&&m<s.length;m++){h.index>m?(y=h,h=null):y=h.sibling;var g=p(i,h,s[m],u);if(null===g){null===h&&(h=y);break}t&&h&&null===g.alternate&&e(i,h),a=o(g,a,m),null===l?c=g:l.sibling=g,l=g,h=y}if(m===s.length)return n(i,h),c;if(null===h){for(;m<s.length;m++)(h=f(i,s[m],u))&&(a=o(h,a,m),null===l?c=h:l.sibling=h,l=h);return c}for(h=r(i,h);m<s.length;m++)(y=d(h,i,m,s[m],u))&&(t&&null!==y.alternate&&h.delete(null===y.key?m:y.key),a=o(y,a,m),null===l?c=y:l.sibling=y,l=y);return t&&h.forEach(function(t){return e(i,t)}),c}function y(i,s,u,c){var l=ae(u);"function"!==typeof l&&a("150"),null==(u=l.call(u))&&a("151");for(var h=l=null,m=s,y=s=0,g=null,v=u.next();null!==m&&!v.done;y++,v=u.next()){m.index>y?(g=m,m=null):g=m.sibling;var b=p(i,m,v.value,c);if(null===b){m||(m=g);break}t&&m&&null===b.alternate&&e(i,m),s=o(b,s,y),null===h?l=b:h.sibling=b,h=b,m=g}if(v.done)return n(i,m),l;if(null===m){for(;!v.done;y++,v=u.next())null!==(v=f(i,v.value,c))&&(s=o(v,s,y),null===h?l=v:h.sibling=v,h=v);return l}for(m=r(i,m);!v.done;y++,v=u.next())null!==(v=d(m,i,y,v.value,c))&&(t&&null!==v.alternate&&m.delete(null===v.key?y:v.key),s=o(v,s,y),null===h?l=v:h.sibling=v,h=v);return t&&m.forEach(function(t){return e(i,t)}),l}return function(t,r,o,u){var c="object"===typeof o&&null!==o&&o.type===Yt&&null===o.key;c&&(o=o.props.children);var l="object"===typeof o&&null!==o;if(l)switch(o.$$typeof){case Kt:t:{for(l=o.key,c=r;null!==c;){if(c.key===l){if(7===c.tag?o.type===Yt:c.elementType===o.type){n(t,c.sibling),(r=i(c,o.type===Yt?o.props.children:o.props)).ref=fi(t,c,o),r.return=t,t=r;break t}n(t,c);break}e(t,c),c=c.sibling}o.type===Yt?((r=Yr(o.props.children,t.mode,u,o.key)).return=t,t=r):((u=Qr(o.type,o.key,o.props,null,t.mode,u)).ref=fi(t,r,o),u.return=t,t=u)}return s(t);case Qt:t:{for(c=o.key;null!==r;){if(r.key===c){if(4===r.tag&&r.stateNode.containerInfo===o.containerInfo&&r.stateNode.implementation===o.implementation){n(t,r.sibling),(r=i(r,o.children||[])).return=t,t=r;break t}n(t,r);break}e(t,r),r=r.sibling}(r=Jr(o,t.mode,u)).return=t,t=r}return s(t)}if("string"===typeof o||"number"===typeof o)return o=""+o,null!==r&&6===r.tag?(n(t,r.sibling),(r=i(r,o)).return=t,t=r):(n(t,r),(r=$r(o,t.mode,u)).return=t,t=r),s(t);if(hi(o))return m(t,r,o,u);if(ae(o))return y(t,r,o,u);if(l&&pi(t,o),"undefined"===typeof o&&!c)switch(t.tag){case 1:case 0:a("152",(u=t.type).displayName||u.name||"Component")}return n(t,r)}}var mi=di(!0),yi=di(!1),gi={},vi={current:gi},bi={current:gi},_i={current:gi};function wi(t){return t===gi&&a("174"),t}function Ei(t,e){Ir(_i,e),Ir(bi,t),Ir(vi,gi);var n=e.nodeType;switch(n){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:er(null,"");break;default:e=er(e=(n=8===n?e.parentNode:e).namespaceURI||null,n=n.tagName)}xr(vi),Ir(vi,e)}function Si(t){xr(vi),xr(bi),xr(_i)}function Ti(t){wi(_i.current);var e=wi(vi.current),n=er(e,t.type);e!==n&&(Ir(bi,t),Ir(vi,n))}function Ci(t){bi.current===t&&(xr(vi),xr(bi))}var ki=0,xi=2,Ii=4,Ai=8,Pi=16,Di=32,Ni=64,Ri=128,Oi=Wt.ReactCurrentDispatcher,Mi=0,Fi=null,Li=null,Vi=null,Bi=null,Ui=null,ji=null,qi=0,Gi=null,Wi=0,zi=!1,Hi=null,Ki=0;function Qi(){a("321")}function Yi(t,e){if(null===e)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Je(t[n],e[n]))return!1;return!0}function Xi(t,e,n,r,i,o){if(Mi=o,Fi=e,Vi=null!==t?t.memoizedState:null,Oi.current=null===Vi?co:lo,e=n(r,i),zi){do{zi=!1,Ki+=1,Vi=null!==t?t.memoizedState:null,ji=Bi,Gi=Ui=Li=null,Oi.current=lo,e=n(r,i)}while(zi);Hi=null,Ki=0}return Oi.current=uo,(t=Fi).memoizedState=Bi,t.expirationTime=qi,t.updateQueue=Gi,t.effectTag|=Wi,t=null!==Li&&null!==Li.next,Mi=0,ji=Ui=Bi=Vi=Li=Fi=null,qi=0,Gi=null,Wi=0,t&&a("300"),e}function $i(){Oi.current=uo,Mi=0,ji=Ui=Bi=Vi=Li=Fi=null,qi=0,Gi=null,Wi=0,zi=!1,Hi=null,Ki=0}function Ji(){var t={memoizedState:null,baseState:null,queue:null,baseUpdate:null,next:null};return null===Ui?Bi=Ui=t:Ui=Ui.next=t,Ui}function Zi(){if(null!==ji)ji=(Ui=ji).next,Vi=null!==(Li=Vi)?Li.next:null;else{null===Vi&&a("310");var t={memoizedState:(Li=Vi).memoizedState,baseState:Li.baseState,queue:Li.queue,baseUpdate:Li.baseUpdate,next:null};Ui=null===Ui?Bi=t:Ui.next=t,Vi=Li.next}return Ui}function to(t,e){return"function"===typeof e?e(t):e}function eo(t){var e=Zi(),n=e.queue;if(null===n&&a("311"),n.lastRenderedReducer=t,0<Ki){var r=n.dispatch;if(null!==Hi){var i=Hi.get(n);if(void 0!==i){Hi.delete(n);var o=e.memoizedState;do{o=t(o,i.action),i=i.next}while(null!==i);return Je(o,e.memoizedState)||(Eo=!0),e.memoizedState=o,e.baseUpdate===n.last&&(e.baseState=o),n.lastRenderedState=o,[o,r]}}return[e.memoizedState,r]}r=n.last;var s=e.baseUpdate;if(o=e.baseState,null!==s?(null!==r&&(r.next=null),r=s.next):r=null!==r?r.next:null,null!==r){var u=i=null,c=r,l=!1;do{var h=c.expirationTime;h<Mi?(l||(l=!0,u=s,i=o),h>qi&&(qi=h)):o=c.eagerReducer===t?c.eagerState:t(o,c.action),s=c,c=c.next}while(null!==c&&c!==r);l||(u=s,i=o),Je(o,e.memoizedState)||(Eo=!0),e.memoizedState=o,e.baseUpdate=u,e.baseState=i,n.lastRenderedState=o}return[e.memoizedState,n.dispatch]}function no(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},null===Gi?(Gi={lastEffect:null}).lastEffect=t.next=t:null===(e=Gi.lastEffect)?Gi.lastEffect=t.next=t:(n=e.next,e.next=t,t.next=n,Gi.lastEffect=t),t}function ro(t,e,n,r){var i=Ji();Wi|=t,i.memoizedState=no(e,n,void 0,void 0===r?null:r)}function io(t,e,n,r){var i=Zi();r=void 0===r?null:r;var o=void 0;if(null!==Li){var a=Li.memoizedState;if(o=a.destroy,null!==r&&Yi(r,a.deps))return void no(ki,n,o,r)}Wi|=t,i.memoizedState=no(e,n,o,r)}function oo(t,e){return"function"===typeof e?(t=t(),e(t),function(){e(null)}):null!==e&&void 0!==e?(t=t(),e.current=t,function(){e.current=null}):void 0}function ao(){}function so(t,e,n){25>Ki||a("301");var r=t.alternate;if(t===Fi||null!==r&&r===Fi)if(zi=!0,t={expirationTime:Mi,action:n,eagerReducer:null,eagerState:null,next:null},null===Hi&&(Hi=new Map),void 0===(n=Hi.get(e)))Hi.set(e,t);else{for(e=n;null!==e.next;)e=e.next;e.next=t}else{Ga();var i=Es(),o={expirationTime:i=Ya(i,t),action:n,eagerReducer:null,eagerState:null,next:null},s=e.last;if(null===s)o.next=o;else{var u=s.next;null!==u&&(o.next=u),s.next=o}if(e.last=o,0===t.expirationTime&&(null===r||0===r.expirationTime)&&null!==(r=e.lastRenderedReducer))try{var c=e.lastRenderedState,l=r(c,n);if(o.eagerReducer=r,o.eagerState=l,Je(l,c))return}catch(h){}Ja(t,i)}}var uo={readContext:qo,useCallback:Qi,useContext:Qi,useEffect:Qi,useImperativeHandle:Qi,useLayoutEffect:Qi,useMemo:Qi,useReducer:Qi,useRef:Qi,useState:Qi,useDebugValue:Qi},co={readContext:qo,useCallback:function(t,e){return Ji().memoizedState=[t,void 0===e?null:e],t},useContext:qo,useEffect:function(t,e){return ro(516,Ri|Ni,t,e)},useImperativeHandle:function(t,e,n){return n=null!==n&&void 0!==n?n.concat([t]):null,ro(4,Ii|Di,oo.bind(null,e,t),n)},useLayoutEffect:function(t,e){return ro(4,Ii|Di,t,e)},useMemo:function(t,e){var n=Ji();return e=void 0===e?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=Ji();return e=void 0!==n?n(e):e,r.memoizedState=r.baseState=e,t=(t=r.queue={last:null,dispatch:null,lastRenderedReducer:t,lastRenderedState:e}).dispatch=so.bind(null,Fi,t),[r.memoizedState,t]},useRef:function(t){return t={current:t},Ji().memoizedState=t},useState:function(t){var e=Ji();return"function"===typeof t&&(t=t()),e.memoizedState=e.baseState=t,t=(t=e.queue={last:null,dispatch:null,lastRenderedReducer:to,lastRenderedState:t}).dispatch=so.bind(null,Fi,t),[e.memoizedState,t]},useDebugValue:ao},lo={readContext:qo,useCallback:function(t,e){var n=Zi();e=void 0===e?null:e;var r=n.memoizedState;return null!==r&&null!==e&&Yi(e,r[1])?r[0]:(n.memoizedState=[t,e],t)},useContext:qo,useEffect:function(t,e){return io(516,Ri|Ni,t,e)},useImperativeHandle:function(t,e,n){return n=null!==n&&void 0!==n?n.concat([t]):null,io(4,Ii|Di,oo.bind(null,e,t),n)},useLayoutEffect:function(t,e){return io(4,Ii|Di,t,e)},useMemo:function(t,e){var n=Zi();e=void 0===e?null:e;var r=n.memoizedState;return null!==r&&null!==e&&Yi(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)},useReducer:eo,useRef:function(){return Zi().memoizedState},useState:function(t){return eo(to)},useDebugValue:ao},ho=null,fo=null,po=!1;function mo(t,e){var n=zr(5,null,null,0);n.elementType="DELETED",n.type="DELETED",n.stateNode=e,n.return=t,n.effectTag=8,null!==t.lastEffect?(t.lastEffect.nextEffect=n,t.lastEffect=n):t.firstEffect=t.lastEffect=n}function yo(t,e){switch(t.tag){case 5:var n=t.type;return null!==(e=1!==e.nodeType||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e)&&(t.stateNode=e,!0);case 6:return null!==(e=""===t.pendingProps||3!==e.nodeType?null:e)&&(t.stateNode=e,!0);case 13:default:return!1}}function go(t){if(po){var e=fo;if(e){var n=e;if(!yo(t,e)){if(!(e=Sr(n))||!yo(t,e))return t.effectTag|=2,po=!1,void(ho=t);mo(ho,n)}ho=t,fo=Tr(e)}else t.effectTag|=2,po=!1,ho=t}}function vo(t){for(t=t.return;null!==t&&5!==t.tag&&3!==t.tag&&18!==t.tag;)t=t.return;ho=t}function bo(t){if(t!==ho)return!1;if(!po)return vo(t),po=!0,!1;var e=t.type;if(5!==t.tag||"head"!==e&&"body"!==e&&!vr(e,t.memoizedProps))for(e=fo;e;)mo(t,e),e=Sr(e);return vo(t),fo=ho?Sr(t.stateNode):null,!0}function _o(){fo=ho=null,po=!1}var wo=Wt.ReactCurrentOwner,Eo=!1;function So(t,e,n,r){e.child=null===t?yi(e,null,n,r):mi(e,t.child,n,r)}function To(t,e,n,r,i){n=n.render;var o=e.ref;return jo(e,i),r=Xi(t,e,n,r,o,i),null===t||Eo?(e.effectTag|=1,So(t,e,r,i),e.child):(e.updateQueue=t.updateQueue,e.effectTag&=-517,t.expirationTime<=i&&(t.expirationTime=0),Ro(t,e,i))}function Co(t,e,n,r,i,o){if(null===t){var a=n.type;return"function"!==typeof a||Hr(a)||void 0!==a.defaultProps||null!==n.compare||void 0!==n.defaultProps?((t=Qr(n.type,null,r,null,e.mode,o)).ref=e.ref,t.return=e,e.child=t):(e.tag=15,e.type=a,ko(t,e,a,r,i,o))}return a=t.child,i<o&&(i=a.memoizedProps,(n=null!==(n=n.compare)?n:tn)(i,r)&&t.ref===e.ref)?Ro(t,e,o):(e.effectTag|=1,(t=Kr(a,r)).ref=e.ref,t.return=e,e.child=t)}function ko(t,e,n,r,i,o){return null!==t&&tn(t.memoizedProps,r)&&t.ref===e.ref&&(Eo=!1,i<o)?Ro(t,e,o):Io(t,e,n,r,o)}function xo(t,e){var n=e.ref;(null===t&&null!==n||null!==t&&t.ref!==n)&&(e.effectTag|=128)}function Io(t,e,n,r,i){var o=Or(n)?Nr:Pr.current;return o=Rr(e,o),jo(e,i),n=Xi(t,e,n,r,o,i),null===t||Eo?(e.effectTag|=1,So(t,e,n,i),e.child):(e.updateQueue=t.updateQueue,e.effectTag&=-517,t.expirationTime<=i&&(t.expirationTime=0),Ro(t,e,i))}function Ao(t,e,n,r,i){if(Or(n)){var o=!0;Br(e)}else o=!1;if(jo(e,i),null===e.stateNode)null!==t&&(t.alternate=null,e.alternate=null,e.effectTag|=2),ui(e,n,r),li(e,n,r,i),r=!0;else if(null===t){var a=e.stateNode,s=e.memoizedProps;a.props=s;var u=a.context,c=n.contextType;"object"===typeof c&&null!==c?c=qo(c):c=Rr(e,c=Or(n)?Nr:Pr.current);var l=n.getDerivedStateFromProps,h="function"===typeof l||"function"===typeof a.getSnapshotBeforeUpdate;h||"function"!==typeof a.UNSAFE_componentWillReceiveProps&&"function"!==typeof a.componentWillReceiveProps||(s!==r||u!==c)&&ci(e,a,r,c),Ko=!1;var f=e.memoizedState;u=a.state=f;var p=e.updateQueue;null!==p&&(na(e,p,r,a,i),u=e.memoizedState),s!==r||f!==u||Dr.current||Ko?("function"===typeof l&&(oi(e,n,l,r),u=e.memoizedState),(s=Ko||si(e,n,s,r,f,u,c))?(h||"function"!==typeof a.UNSAFE_componentWillMount&&"function"!==typeof a.componentWillMount||("function"===typeof a.componentWillMount&&a.componentWillMount(),"function"===typeof a.UNSAFE_componentWillMount&&a.UNSAFE_componentWillMount()),"function"===typeof a.componentDidMount&&(e.effectTag|=4)):("function"===typeof a.componentDidMount&&(e.effectTag|=4),e.memoizedProps=r,e.memoizedState=u),a.props=r,a.state=u,a.context=c,r=s):("function"===typeof a.componentDidMount&&(e.effectTag|=4),r=!1)}else a=e.stateNode,s=e.memoizedProps,a.props=e.type===e.elementType?s:ri(e.type,s),u=a.context,"object"===typeof(c=n.contextType)&&null!==c?c=qo(c):c=Rr(e,c=Or(n)?Nr:Pr.current),(h="function"===typeof(l=n.getDerivedStateFromProps)||"function"===typeof a.getSnapshotBeforeUpdate)||"function"!==typeof a.UNSAFE_componentWillReceiveProps&&"function"!==typeof a.componentWillReceiveProps||(s!==r||u!==c)&&ci(e,a,r,c),Ko=!1,u=e.memoizedState,f=a.state=u,null!==(p=e.updateQueue)&&(na(e,p,r,a,i),f=e.memoizedState),s!==r||u!==f||Dr.current||Ko?("function"===typeof l&&(oi(e,n,l,r),f=e.memoizedState),(l=Ko||si(e,n,s,r,u,f,c))?(h||"function"!==typeof a.UNSAFE_componentWillUpdate&&"function"!==typeof a.componentWillUpdate||("function"===typeof a.componentWillUpdate&&a.componentWillUpdate(r,f,c),"function"===typeof a.UNSAFE_componentWillUpdate&&a.UNSAFE_componentWillUpdate(r,f,c)),"function"===typeof a.componentDidUpdate&&(e.effectTag|=4),"function"===typeof a.getSnapshotBeforeUpdate&&(e.effectTag|=256)):("function"!==typeof a.componentDidUpdate||s===t.memoizedProps&&u===t.memoizedState||(e.effectTag|=4),"function"!==typeof a.getSnapshotBeforeUpdate||s===t.memoizedProps&&u===t.memoizedState||(e.effectTag|=256),e.memoizedProps=r,e.memoizedState=f),a.props=r,a.state=f,a.context=c,r=l):("function"!==typeof a.componentDidUpdate||s===t.memoizedProps&&u===t.memoizedState||(e.effectTag|=4),"function"!==typeof a.getSnapshotBeforeUpdate||s===t.memoizedProps&&u===t.memoizedState||(e.effectTag|=256),r=!1);return Po(t,e,n,r,o,i)}function Po(t,e,n,r,i,o){xo(t,e);var a=0!==(64&e.effectTag);if(!r&&!a)return i&&Ur(e,n,!1),Ro(t,e,o);r=e.stateNode,wo.current=e;var s=a&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return e.effectTag|=1,null!==t&&a?(e.child=mi(e,t.child,null,o),e.child=mi(e,null,s,o)):So(t,e,s,o),e.memoizedState=r.state,i&&Ur(e,n,!0),e.child}function Do(t){var e=t.stateNode;e.pendingContext?Lr(0,e.pendingContext,e.pendingContext!==e.context):e.context&&Lr(0,e.context,!1),Ei(t,e.containerInfo)}function No(t,e,n){var r=e.mode,i=e.pendingProps,o=e.memoizedState;if(0===(64&e.effectTag)){o=null;var a=!1}else o={timedOutAt:null!==o?o.timedOutAt:0},a=!0,e.effectTag&=-65;if(null===t)if(a){var s=i.fallback;t=Yr(null,r,0,null),0===(1&e.mode)&&(t.child=null!==e.memoizedState?e.child.child:e.child),r=Yr(s,r,n,null),t.sibling=r,(n=t).return=r.return=e}else n=r=yi(e,null,i.children,n);else null!==t.memoizedState?(s=(r=t.child).sibling,a?(n=i.fallback,i=Kr(r,r.pendingProps),0===(1&e.mode)&&((a=null!==e.memoizedState?e.child.child:e.child)!==r.child&&(i.child=a)),r=i.sibling=Kr(s,n,s.expirationTime),n=i,i.childExpirationTime=0,n.return=r.return=e):n=r=mi(e,r.child,i.children,n)):(s=t.child,a?(a=i.fallback,(i=Yr(null,r,0,null)).child=s,0===(1&e.mode)&&(i.child=null!==e.memoizedState?e.child.child:e.child),(r=i.sibling=Yr(a,r,n,null)).effectTag|=2,n=i,i.childExpirationTime=0,n.return=r.return=e):r=n=mi(e,s,i.children,n)),e.stateNode=t.stateNode;return e.memoizedState=o,e.child=n,r}function Ro(t,e,n){if(null!==t&&(e.contextDependencies=t.contextDependencies),e.childExpirationTime<n)return null;if(null!==t&&e.child!==t.child&&a("153"),null!==e.child){for(n=Kr(t=e.child,t.pendingProps,t.expirationTime),e.child=n,n.return=e;null!==t.sibling;)t=t.sibling,(n=n.sibling=Kr(t,t.pendingProps,t.expirationTime)).return=e;n.sibling=null}return e.child}function Oo(t,e,n){var r=e.expirationTime;if(null!==t){if(t.memoizedProps!==e.pendingProps||Dr.current)Eo=!0;else if(r<n){switch(Eo=!1,e.tag){case 3:Do(e),_o();break;case 5:Ti(e);break;case 1:Or(e.type)&&Br(e);break;case 4:Ei(e,e.stateNode.containerInfo);break;case 10:Bo(e,e.memoizedProps.value);break;case 13:if(null!==e.memoizedState)return 0!==(r=e.child.childExpirationTime)&&r>=n?No(t,e,n):null!==(e=Ro(t,e,n))?e.sibling:null}return Ro(t,e,n)}}else Eo=!1;switch(e.expirationTime=0,e.tag){case 2:r=e.elementType,null!==t&&(t.alternate=null,e.alternate=null,e.effectTag|=2),t=e.pendingProps;var i=Rr(e,Pr.current);if(jo(e,n),i=Xi(null,e,r,t,i,n),e.effectTag|=1,"object"===typeof i&&null!==i&&"function"===typeof i.render&&void 0===i.$$typeof){if(e.tag=1,$i(),Or(r)){var o=!0;Br(e)}else o=!1;e.memoizedState=null!==i.state&&void 0!==i.state?i.state:null;var s=r.getDerivedStateFromProps;"function"===typeof s&&oi(e,r,s,t),i.updater=ai,e.stateNode=i,i._reactInternalFiber=e,li(e,r,t,n),e=Po(null,e,r,!0,o,n)}else e.tag=0,So(null,e,i,n),e=e.child;return e;case 16:switch(i=e.elementType,null!==t&&(t.alternate=null,e.alternate=null,e.effectTag|=2),o=e.pendingProps,t=function(t){var e=t._result;switch(t._status){case 1:return e;case 2:case 0:throw e;default:switch(t._status=0,(e=(e=t._ctor)()).then(function(e){0===t._status&&(e=e.default,t._status=1,t._result=e)},function(e){0===t._status&&(t._status=2,t._result=e)}),t._status){case 1:return t._result;case 2:throw t._result}throw t._result=e,e}}(i),e.type=t,i=e.tag=function(t){if("function"===typeof t)return Hr(t)?1:0;if(void 0!==t&&null!==t){if((t=t.$$typeof)===ee)return 11;if(t===re)return 14}return 2}(t),o=ri(t,o),s=void 0,i){case 0:s=Io(null,e,t,o,n);break;case 1:s=Ao(null,e,t,o,n);break;case 11:s=To(null,e,t,o,n);break;case 14:s=Co(null,e,t,ri(t.type,o),r,n);break;default:a("306",t,"")}return s;case 0:return r=e.type,i=e.pendingProps,Io(t,e,r,i=e.elementType===r?i:ri(r,i),n);case 1:return r=e.type,i=e.pendingProps,Ao(t,e,r,i=e.elementType===r?i:ri(r,i),n);case 3:return Do(e),null===(r=e.updateQueue)&&a("282"),i=null!==(i=e.memoizedState)?i.element:null,na(e,r,e.pendingProps,null,n),(r=e.memoizedState.element)===i?(_o(),e=Ro(t,e,n)):(i=e.stateNode,(i=(null===t||null===t.child)&&i.hydrate)&&(fo=Tr(e.stateNode.containerInfo),ho=e,i=po=!0),i?(e.effectTag|=2,e.child=yi(e,null,r,n)):(So(t,e,r,n),_o()),e=e.child),e;case 5:return Ti(e),null===t&&go(e),r=e.type,i=e.pendingProps,o=null!==t?t.memoizedProps:null,s=i.children,vr(r,i)?s=null:null!==o&&vr(r,o)&&(e.effectTag|=16),xo(t,e),1!==n&&1&e.mode&&i.hidden?(e.expirationTime=e.childExpirationTime=1,e=null):(So(t,e,s,n),e=e.child),e;case 6:return null===t&&go(e),null;case 13:return No(t,e,n);case 4:return Ei(e,e.stateNode.containerInfo),r=e.pendingProps,null===t?e.child=mi(e,null,r,n):So(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,To(t,e,r,i=e.elementType===r?i:ri(r,i),n);case 7:return So(t,e,e.pendingProps,n),e.child;case 8:case 12:return So(t,e,e.pendingProps.children,n),e.child;case 10:t:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,Bo(e,o=i.value),null!==s){var u=s.value;if(0===(o=Je(u,o)?0:0|("function"===typeof r._calculateChangedBits?r._calculateChangedBits(u,o):1073741823))){if(s.children===i.children&&!Dr.current){e=Ro(t,e,n);break t}}else for(null!==(u=e.child)&&(u.return=e);null!==u;){var c=u.contextDependencies;if(null!==c){s=u.child;for(var l=c.first;null!==l;){if(l.context===r&&0!==(l.observedBits&o)){1===u.tag&&((l=Xo(n)).tag=zo,Jo(u,l)),u.expirationTime<n&&(u.expirationTime=n),null!==(l=u.alternate)&&l.expirationTime<n&&(l.expirationTime=n),l=n;for(var h=u.return;null!==h;){var f=h.alternate;if(h.childExpirationTime<l)h.childExpirationTime=l,null!==f&&f.childExpirationTime<l&&(f.childExpirationTime=l);else{if(!(null!==f&&f.childExpirationTime<l))break;f.childExpirationTime=l}h=h.return}c.expirationTime<n&&(c.expirationTime=n);break}l=l.next}}else s=10===u.tag&&u.type===e.type?null:u.child;if(null!==s)s.return=u;else for(s=u;null!==s;){if(s===e){s=null;break}if(null!==(u=s.sibling)){u.return=s.return,s=u;break}s=s.return}u=s}}So(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=(o=e.pendingProps).children,jo(e,n),r=r(i=qo(i,o.unstable_observedBits)),e.effectTag|=1,So(t,e,r,n),e.child;case 14:return o=ri(i=e.type,e.pendingProps),Co(t,e,i,o=ri(i.type,o),r,n);case 15:return ko(t,e,e.type,e.pendingProps,r,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:ri(r,i),null!==t&&(t.alternate=null,e.alternate=null,e.effectTag|=2),e.tag=1,Or(r)?(t=!0,Br(e)):t=!1,jo(e,n),ui(e,r,i),li(e,r,i,n),Po(null,e,r,!0,t,n)}a("156")}var Mo={current:null},Fo=null,Lo=null,Vo=null;function Bo(t,e){var n=t.type._context;Ir(Mo,n._currentValue),n._currentValue=e}function Uo(t){var e=Mo.current;xr(Mo),t.type._context._currentValue=e}function jo(t,e){Fo=t,Vo=Lo=null;var n=t.contextDependencies;null!==n&&n.expirationTime>=e&&(Eo=!0),t.contextDependencies=null}function qo(t,e){return Vo!==t&&!1!==e&&0!==e&&("number"===typeof e&&1073741823!==e||(Vo=t,e=1073741823),e={context:t,observedBits:e,next:null},null===Lo?(null===Fo&&a("308"),Lo=e,Fo.contextDependencies={first:e,expirationTime:0}):Lo=Lo.next=e),t._currentValue}var Go=0,Wo=1,zo=2,Ho=3,Ko=!1;function Qo(t){return{baseState:t,firstUpdate:null,lastUpdate:null,firstCapturedUpdate:null,lastCapturedUpdate:null,firstEffect:null,lastEffect:null,firstCapturedEffect:null,lastCapturedEffect:null}}function Yo(t){return{baseState:t.baseState,firstUpdate:t.firstUpdate,lastUpdate:t.lastUpdate,firstCapturedUpdate:null,lastCapturedUpdate:null,firstEffect:null,lastEffect:null,firstCapturedEffect:null,lastCapturedEffect:null}}function Xo(t){return{expirationTime:t,tag:Go,payload:null,callback:null,next:null,nextEffect:null}}function $o(t,e){null===t.lastUpdate?t.firstUpdate=t.lastUpdate=e:(t.lastUpdate.next=e,t.lastUpdate=e)}function Jo(t,e){var n=t.alternate;if(null===n){var r=t.updateQueue,i=null;null===r&&(r=t.updateQueue=Qo(t.memoizedState))}else r=t.updateQueue,i=n.updateQueue,null===r?null===i?(r=t.updateQueue=Qo(t.memoizedState),i=n.updateQueue=Qo(n.memoizedState)):r=t.updateQueue=Yo(i):null===i&&(i=n.updateQueue=Yo(r));null===i||r===i?$o(r,e):null===r.lastUpdate||null===i.lastUpdate?($o(r,e),$o(i,e)):($o(r,e),i.lastUpdate=e)}function Zo(t,e){var n=t.updateQueue;null===(n=null===n?t.updateQueue=Qo(t.memoizedState):ta(t,n)).lastCapturedUpdate?n.firstCapturedUpdate=n.lastCapturedUpdate=e:(n.lastCapturedUpdate.next=e,n.lastCapturedUpdate=e)}function ta(t,e){var n=t.alternate;return null!==n&&e===n.updateQueue&&(e=t.updateQueue=Yo(e)),e}function ea(t,e,n,r,o,a){switch(n.tag){case Wo:return"function"===typeof(t=n.payload)?t.call(a,r,o):t;case Ho:t.effectTag=-2049&t.effectTag|64;case Go:if(null===(o="function"===typeof(t=n.payload)?t.call(a,r,o):t)||void 0===o)break;return i({},r,o);case zo:Ko=!0}return r}function na(t,e,n,r,i){Ko=!1;for(var o=(e=ta(t,e)).baseState,a=null,s=0,u=e.firstUpdate,c=o;null!==u;){var l=u.expirationTime;l<i?(null===a&&(a=u,o=c),s<l&&(s=l)):(c=ea(t,0,u,c,n,r),null!==u.callback&&(t.effectTag|=32,u.nextEffect=null,null===e.lastEffect?e.firstEffect=e.lastEffect=u:(e.lastEffect.nextEffect=u,e.lastEffect=u))),u=u.next}for(l=null,u=e.firstCapturedUpdate;null!==u;){var h=u.expirationTime;h<i?(null===l&&(l=u,null===a&&(o=c)),s<h&&(s=h)):(c=ea(t,0,u,c,n,r),null!==u.callback&&(t.effectTag|=32,u.nextEffect=null,null===e.lastCapturedEffect?e.firstCapturedEffect=e.lastCapturedEffect=u:(e.lastCapturedEffect.nextEffect=u,e.lastCapturedEffect=u))),u=u.next}null===a&&(e.lastUpdate=null),null===l?e.lastCapturedUpdate=null:t.effectTag|=32,null===a&&null===l&&(o=c),e.baseState=o,e.firstUpdate=a,e.firstCapturedUpdate=l,t.expirationTime=s,t.memoizedState=c}function ra(t,e,n){null!==e.firstCapturedUpdate&&(null!==e.lastUpdate&&(e.lastUpdate.next=e.firstCapturedUpdate,e.lastUpdate=e.lastCapturedUpdate),e.firstCapturedUpdate=e.lastCapturedUpdate=null),ia(e.firstEffect,n),e.firstEffect=e.lastEffect=null,ia(e.firstCapturedEffect,n),e.firstCapturedEffect=e.lastCapturedEffect=null}function ia(t,e){for(;null!==t;){var n=t.callback;if(null!==n){t.callback=null;var r=e;"function"!==typeof n&&a("191",n),n.call(r)}t=t.nextEffect}}function oa(t,e){return{value:t,source:e,stack:ue(e)}}function aa(t){t.effectTag|=4}var sa=void 0,ua=void 0,ca=void 0,la=void 0;sa=function(t,e){for(var n=e.child;null!==n;){if(5===n.tag||6===n.tag)t.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===e)break;for(;null===n.sibling;){if(null===n.return||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},ua=function(){},ca=function(t,e,n,r,o){var a=t.memoizedProps;if(a!==r){var s=e.stateNode;switch(wi(vi.current),t=null,n){case"input":a=be(s,a),r=be(s,r),t=[];break;case"option":a=Kn(s,a),r=Kn(s,r),t=[];break;case"select":a=i({},a,{value:void 0}),r=i({},r,{value:void 0}),t=[];break;case"textarea":a=Yn(s,a),r=Yn(s,r),t=[];break;default:"function"!==typeof a.onClick&&"function"===typeof r.onClick&&(s.onclick=dr)}hr(n,r),s=n=void 0;var u=null;for(n in a)if(!r.hasOwnProperty(n)&&a.hasOwnProperty(n)&&null!=a[n])if("style"===n){var c=a[n];for(s in c)c.hasOwnProperty(s)&&(u||(u={}),u[s]="")}else"dangerouslySetInnerHTML"!==n&&"children"!==n&&"suppressContentEditableWarning"!==n&&"suppressHydrationWarning"!==n&&"autoFocus"!==n&&(b.hasOwnProperty(n)?t||(t=[]):(t=t||[]).push(n,null));for(n in r){var l=r[n];if(c=null!=a?a[n]:void 0,r.hasOwnProperty(n)&&l!==c&&(null!=l||null!=c))if("style"===n)if(c){for(s in c)!c.hasOwnProperty(s)||l&&l.hasOwnProperty(s)||(u||(u={}),u[s]="");for(s in l)l.hasOwnProperty(s)&&c[s]!==l[s]&&(u||(u={}),u[s]=l[s])}else u||(t||(t=[]),t.push(n,u)),u=l;else"dangerouslySetInnerHTML"===n?(l=l?l.__html:void 0,c=c?c.__html:void 0,null!=l&&c!==l&&(t=t||[]).push(n,""+l)):"children"===n?c===l||"string"!==typeof l&&"number"!==typeof l||(t=t||[]).push(n,""+l):"suppressContentEditableWarning"!==n&&"suppressHydrationWarning"!==n&&(b.hasOwnProperty(n)?(null!=l&&pr(o,n),t||c===l||(t=[])):(t=t||[]).push(n,l))}u&&(t=t||[]).push("style",u),o=t,(e.updateQueue=o)&&aa(e)}},la=function(t,e,n,r){n!==r&&aa(e)};var ha="function"===typeof WeakSet?WeakSet:Set;function fa(t,e){var n=e.source,r=e.stack;null===r&&null!==n&&(r=ue(n)),null!==n&&se(n.type),e=e.value,null!==t&&1===t.tag&&se(t.type);try{console.error(e)}catch(i){setTimeout(function(){throw i})}}function pa(t){var e=t.ref;if(null!==e)if("function"===typeof e)try{e(null)}catch(n){Qa(t,n)}else e.current=null}function da(t,e,n){if(null!==(n=null!==(n=n.updateQueue)?n.lastEffect:null)){var r=n=n.next;do{if((r.tag&t)!==ki){var i=r.destroy;r.destroy=void 0,void 0!==i&&i()}(r.tag&e)!==ki&&(i=r.create,r.destroy=i()),r=r.next}while(r!==n)}}function ma(t){switch("function"===typeof qr&&qr(t),t.tag){case 0:case 11:case 14:case 15:var e=t.updateQueue;if(null!==e&&null!==(e=e.lastEffect)){var n=e=e.next;do{var r=n.destroy;if(void 0!==r){var i=t;try{r()}catch(o){Qa(i,o)}}n=n.next}while(n!==e)}break;case 1:if(pa(t),"function"===typeof(e=t.stateNode).componentWillUnmount)try{e.props=t.memoizedProps,e.state=t.memoizedState,e.componentWillUnmount()}catch(o){Qa(t,o)}break;case 5:pa(t);break;case 4:va(t)}}function ya(t){return 5===t.tag||3===t.tag||4===t.tag}function ga(t){t:{for(var e=t.return;null!==e;){if(ya(e)){var n=e;break t}e=e.return}a("160"),n=void 0}var r=e=void 0;switch(n.tag){case 5:e=n.stateNode,r=!1;break;case 3:case 4:e=n.stateNode.containerInfo,r=!0;break;default:a("161")}16&n.effectTag&&(or(e,""),n.effectTag&=-17);t:e:for(n=t;;){for(;null===n.sibling;){if(null===n.return||ya(n.return)){n=null;break t}n=n.return}for(n.sibling.return=n.return,n=n.sibling;5!==n.tag&&6!==n.tag&&18!==n.tag;){if(2&n.effectTag)continue e;if(null===n.child||4===n.tag)continue e;n.child.return=n,n=n.child}if(!(2&n.effectTag)){n=n.stateNode;break t}}for(var i=t;;){if(5===i.tag||6===i.tag)if(n)if(r){var o=e,s=i.stateNode,u=n;8===o.nodeType?o.parentNode.insertBefore(s,u):o.insertBefore(s,u)}else e.insertBefore(i.stateNode,n);else r?(s=e,u=i.stateNode,8===s.nodeType?(o=s.parentNode).insertBefore(u,s):(o=s).appendChild(u),null!==(s=s._reactRootContainer)&&void 0!==s||null!==o.onclick||(o.onclick=dr)):e.appendChild(i.stateNode);else if(4!==i.tag&&null!==i.child){i.child.return=i,i=i.child;continue}if(i===t)break;for(;null===i.sibling;){if(null===i.return||i.return===t)return;i=i.return}i.sibling.return=i.return,i=i.sibling}}function va(t){for(var e=t,n=!1,r=void 0,i=void 0;;){if(!n){n=e.return;t:for(;;){switch(null===n&&a("160"),n.tag){case 5:r=n.stateNode,i=!1;break t;case 3:case 4:r=n.stateNode.containerInfo,i=!0;break t}n=n.return}n=!0}if(5===e.tag||6===e.tag){t:for(var o=e,s=o;;)if(ma(s),null!==s.child&&4!==s.tag)s.child.return=s,s=s.child;else{if(s===o)break;for(;null===s.sibling;){if(null===s.return||s.return===o)break t;s=s.return}s.sibling.return=s.return,s=s.sibling}i?(o=r,s=e.stateNode,8===o.nodeType?o.parentNode.removeChild(s):o.removeChild(s)):r.removeChild(e.stateNode)}else if(4===e.tag){if(null!==e.child){r=e.stateNode.containerInfo,i=!0,e.child.return=e,e=e.child;continue}}else if(ma(e),null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break;for(;null===e.sibling;){if(null===e.return||e.return===t)return;4===(e=e.return).tag&&(n=!1)}e.sibling.return=e.return,e=e.sibling}}function ba(t,e){switch(e.tag){case 0:case 11:case 14:case 15:da(Ii,Ai,e);break;case 1:break;case 5:var n=e.stateNode;if(null!=n){var r=e.memoizedProps;t=null!==t?t.memoizedProps:r;var i=e.type,o=e.updateQueue;e.updateQueue=null,null!==o&&function(t,e,n,r,i){t[O]=i,"input"===n&&"radio"===i.type&&null!=i.name&&we(t,i),fr(n,r),r=fr(n,i);for(var o=0;o<e.length;o+=2){var a=e[o],s=e[o+1];"style"===a?cr(t,s):"dangerouslySetInnerHTML"===a?ir(t,s):"children"===a?or(t,s):ge(t,a,s,r)}switch(n){case"input":Ee(t,i);break;case"textarea":$n(t,i);break;case"select":e=t._wrapperState.wasMultiple,t._wrapperState.wasMultiple=!!i.multiple,null!=(n=i.value)?Qn(t,!!i.multiple,n,!1):e!==!!i.multiple&&(null!=i.defaultValue?Qn(t,!!i.multiple,i.defaultValue,!0):Qn(t,!!i.multiple,i.multiple?[]:"",!1))}}(n,o,i,t,r)}break;case 6:null===e.stateNode&&a("162"),e.stateNode.nodeValue=e.memoizedProps;break;case 3:case 12:break;case 13:if(n=e.memoizedState,r=void 0,t=e,null===n?r=!1:(r=!0,t=e.child,0===n.timedOutAt&&(n.timedOutAt=Es())),null!==t&&function(t,e){for(var n=t;;){if(5===n.tag){var r=n.stateNode;if(e)r.style.display="none";else{r=n.stateNode;var i=n.memoizedProps.style;i=void 0!==i&&null!==i&&i.hasOwnProperty("display")?i.display:null,r.style.display=ur("display",i)}}else if(6===n.tag)n.stateNode.nodeValue=e?"":n.memoizedProps;else{if(13===n.tag&&null!==n.memoizedState){(r=n.child.sibling).return=n,n=r;continue}if(null!==n.child){n.child.return=n,n=n.child;continue}}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}}(t,r),null!==(n=e.updateQueue)){e.updateQueue=null;var s=e.stateNode;null===s&&(s=e.stateNode=new ha),n.forEach(function(t){var n=function(t,e){var n=t.stateNode;null!==n&&n.delete(e),e=Ya(e=Es(),t),null!==(t=$a(t,e))&&(Zr(t,e),0!==(e=t.expirationTime)&&Ss(t,e))}.bind(null,e,t);s.has(t)||(s.add(t),t.then(n,n))})}break;case 17:break;default:a("163")}}var _a="function"===typeof WeakMap?WeakMap:Map;function wa(t,e,n){(n=Xo(n)).tag=Ho,n.payload={element:null};var r=e.value;return n.callback=function(){Ns(r),fa(t,e)},n}function Ea(t,e,n){(n=Xo(n)).tag=Ho;var r=t.type.getDerivedStateFromError;if("function"===typeof r){var i=e.value;n.payload=function(){return r(i)}}var o=t.stateNode;return null!==o&&"function"===typeof o.componentDidCatch&&(n.callback=function(){"function"!==typeof r&&(null===Va?Va=new Set([this]):Va.add(this));var n=e.value,i=e.stack;fa(t,e),this.componentDidCatch(n,{componentStack:null!==i?i:""})}),n}function Sa(t){switch(t.tag){case 1:Or(t.type)&&Mr();var e=t.effectTag;return 2048&e?(t.effectTag=-2049&e|64,t):null;case 3:return Si(),Fr(),0!==(64&(e=t.effectTag))&&a("285"),t.effectTag=-2049&e|64,t;case 5:return Ci(t),null;case 13:return 2048&(e=t.effectTag)?(t.effectTag=-2049&e|64,t):null;case 18:return null;case 4:return Si(),null;case 10:return Uo(t),null;default:return null}}var Ta=Wt.ReactCurrentDispatcher,Ca=Wt.ReactCurrentOwner,ka=1073741822,xa=!1,Ia=null,Aa=null,Pa=0,Da=-1,Na=!1,Ra=null,Oa=!1,Ma=null,Fa=null,La=null,Va=null;function Ba(){if(null!==Ia)for(var t=Ia.return;null!==t;){var e=t;switch(e.tag){case 1:var n=e.type.childContextTypes;null!==n&&void 0!==n&&Mr();break;case 3:Si(),Fr();break;case 5:Ci(e);break;case 4:Si();break;case 10:Uo(e)}t=t.return}Aa=null,Pa=0,Da=-1,Na=!1,Ia=null}function Ua(){for(;null!==Ra;){var t=Ra.effectTag;if(16&t&&or(Ra.stateNode,""),128&t){var e=Ra.alternate;null!==e&&(null!==(e=e.ref)&&("function"===typeof e?e(null):e.current=null))}switch(14&t){case 2:ga(Ra),Ra.effectTag&=-3;break;case 6:ga(Ra),Ra.effectTag&=-3,ba(Ra.alternate,Ra);break;case 4:ba(Ra.alternate,Ra);break;case 8:va(t=Ra),t.return=null,t.child=null,t.memoizedState=null,t.updateQueue=null,null!==(t=t.alternate)&&(t.return=null,t.child=null,t.memoizedState=null,t.updateQueue=null)}Ra=Ra.nextEffect}}function ja(){for(;null!==Ra;){if(256&Ra.effectTag)t:{var t=Ra.alternate,e=Ra;switch(e.tag){case 0:case 11:case 15:da(xi,ki,e);break t;case 1:if(256&e.effectTag&&null!==t){var n=t.memoizedProps,r=t.memoizedState;e=(t=e.stateNode).getSnapshotBeforeUpdate(e.elementType===e.type?n:ri(e.type,n),r),t.__reactInternalSnapshotBeforeUpdate=e}break t;case 3:case 5:case 6:case 4:case 17:break t;default:a("163")}}Ra=Ra.nextEffect}}function qa(t,e){for(;null!==Ra;){var n=Ra.effectTag;if(36&n){var r=Ra.alternate,i=Ra,o=e;switch(i.tag){case 0:case 11:case 15:da(Pi,Di,i);break;case 1:var s=i.stateNode;if(4&i.effectTag)if(null===r)s.componentDidMount();else{var u=i.elementType===i.type?r.memoizedProps:ri(i.type,r.memoizedProps);s.componentDidUpdate(u,r.memoizedState,s.__reactInternalSnapshotBeforeUpdate)}null!==(r=i.updateQueue)&&ra(0,r,s);break;case 3:if(null!==(r=i.updateQueue)){if(s=null,null!==i.child)switch(i.child.tag){case 5:s=i.child.stateNode;break;case 1:s=i.child.stateNode}ra(0,r,s)}break;case 5:o=i.stateNode,null===r&&4&i.effectTag&&gr(i.type,i.memoizedProps)&&o.focus();break;case 6:case 4:case 12:case 13:case 17:break;default:a("163")}}128&n&&(null!==(i=Ra.ref)&&(o=Ra.stateNode,"function"===typeof i?i(o):i.current=o)),512&n&&(Ma=t),Ra=Ra.nextEffect}}function Ga(){null!==Fa&&Er(Fa),null!==La&&La()}function Wa(t,e){Oa=xa=!0,t.current===e&&a("177");var n=t.pendingCommitExpirationTime;0===n&&a("261"),t.pendingCommitExpirationTime=0;var r=e.expirationTime,i=e.childExpirationTime;for(function(t,e){if(t.didError=!1,0===e)t.earliestPendingTime=0,t.latestPendingTime=0,t.earliestSuspendedTime=0,t.latestSuspendedTime=0,t.latestPingedTime=0;else{e<t.latestPingedTime&&(t.latestPingedTime=0);var n=t.latestPendingTime;0!==n&&(n>e?t.earliestPendingTime=t.latestPendingTime=0:t.earliestPendingTime>e&&(t.earliestPendingTime=t.latestPendingTime)),0===(n=t.earliestSuspendedTime)?Zr(t,e):e<t.latestSuspendedTime?(t.earliestSuspendedTime=0,t.latestSuspendedTime=0,t.latestPingedTime=0,Zr(t,e)):e>n&&Zr(t,e)}ni(0,t)}(t,i>r?i:r),Ca.current=null,r=void 0,1<e.effectTag?null!==e.lastEffect?(e.lastEffect.nextEffect=e,r=e.firstEffect):r=e:r=e.firstEffect,mr=Tn,yr=function(){var t=Fn();if(Ln(t)){if("selectionStart"in t)var e={start:t.selectionStart,end:t.selectionEnd};else t:{var n=(e=(e=t.ownerDocument)&&e.defaultView||window).getSelection&&e.getSelection();if(n&&0!==n.rangeCount){e=n.anchorNode;var r=n.anchorOffset,i=n.focusNode;n=n.focusOffset;try{e.nodeType,i.nodeType}catch(p){e=null;break t}var o=0,a=-1,s=-1,u=0,c=0,l=t,h=null;e:for(;;){for(var f;l!==e||0!==r&&3!==l.nodeType||(a=o+r),l!==i||0!==n&&3!==l.nodeType||(s=o+n),3===l.nodeType&&(o+=l.nodeValue.length),null!==(f=l.firstChild);)h=l,l=f;for(;;){if(l===t)break e;if(h===e&&++u===r&&(a=o),h===i&&++c===n&&(s=o),null!==(f=l.nextSibling))break;h=(l=h).parentNode}l=f}e=-1===a||-1===s?null:{start:a,end:s}}else e=null}e=e||{start:0,end:0}}else e=null;return{focusedElem:t,selectionRange:e}}(),Tn=!1,Ra=r;null!==Ra;){i=!1;var s=void 0;try{ja()}catch(c){i=!0,s=c}i&&(null===Ra&&a("178"),Qa(Ra,s),null!==Ra&&(Ra=Ra.nextEffect))}for(Ra=r;null!==Ra;){i=!1,s=void 0;try{Ua()}catch(c){i=!0,s=c}i&&(null===Ra&&a("178"),Qa(Ra,s),null!==Ra&&(Ra=Ra.nextEffect))}for(Vn(yr),yr=null,Tn=!!mr,mr=null,t.current=e,Ra=r;null!==Ra;){i=!1,s=void 0;try{qa(t,n)}catch(c){i=!0,s=c}i&&(null===Ra&&a("178"),Qa(Ra,s),null!==Ra&&(Ra=Ra.nextEffect))}if(null!==r&&null!==Ma){var u=function(t,e){La=Fa=Ma=null;var n=is;is=!0;do{if(512&e.effectTag){var r=!1,i=void 0;try{var o=e;da(Ri,ki,o),da(ki,Ni,o)}catch(u){r=!0,i=u}r&&Qa(e,i)}e=e.nextEffect}while(null!==e);is=n,0!==(n=t.expirationTime)&&Ss(t,n),ls||is||Is(1073741823,!1)}.bind(null,t,r);Fa=o.unstable_runWithPriority(o.unstable_NormalPriority,function(){return wr(u)}),La=u}xa=Oa=!1,"function"===typeof jr&&jr(e.stateNode),n=e.expirationTime,0===(e=(e=e.childExpirationTime)>n?e:n)&&(Va=null),function(t,e){t.expirationTime=e,t.finishedWork=null}(t,e)}function za(t){for(;;){var e=t.alternate,n=t.return,r=t.sibling;if(0===(1024&t.effectTag)){Ia=t;t:{var o=e,s=Pa,u=(e=t).pendingProps;switch(e.tag){case 2:case 16:break;case 15:case 0:break;case 1:Or(e.type)&&Mr();break;case 3:Si(),Fr(),(u=e.stateNode).pendingContext&&(u.context=u.pendingContext,u.pendingContext=null),null!==o&&null!==o.child||(bo(e),e.effectTag&=-3),ua(e);break;case 5:Ci(e);var c=wi(_i.current);if(s=e.type,null!==o&&null!=e.stateNode)ca(o,e,s,u,c),o.ref!==e.ref&&(e.effectTag|=128);else if(u){var l=wi(vi.current);if(bo(e)){o=(u=e).stateNode;var h=u.type,f=u.memoizedProps,p=c;switch(o[R]=u,o[O]=f,s=void 0,c=h){case"iframe":case"object":Cn("load",o);break;case"video":case"audio":for(h=0;h<et.length;h++)Cn(et[h],o);break;case"source":Cn("error",o);break;case"img":case"image":case"link":Cn("error",o),Cn("load",o);break;case"form":Cn("reset",o),Cn("submit",o);break;case"details":Cn("toggle",o);break;case"input":_e(o,f),Cn("invalid",o),pr(p,"onChange");break;case"select":o._wrapperState={wasMultiple:!!f.multiple},Cn("invalid",o),pr(p,"onChange");break;case"textarea":Xn(o,f),Cn("invalid",o),pr(p,"onChange")}for(s in hr(c,f),h=null,f)f.hasOwnProperty(s)&&(l=f[s],"children"===s?"string"===typeof l?o.textContent!==l&&(h=["children",l]):"number"===typeof l&&o.textContent!==""+l&&(h=["children",""+l]):b.hasOwnProperty(s)&&null!=l&&pr(p,s));switch(c){case"input":qt(o),Se(o,f,!0);break;case"textarea":qt(o),Jn(o);break;case"select":case"option":break;default:"function"===typeof f.onClick&&(o.onclick=dr)}s=h,u.updateQueue=s,(u=null!==s)&&aa(e)}else{f=e,p=s,o=u,h=9===c.nodeType?c:c.ownerDocument,l===Zn.html&&(l=tr(p)),l===Zn.html?"script"===p?((o=h.createElement("div")).innerHTML="<script><\/script>",h=o.removeChild(o.firstChild)):"string"===typeof o.is?h=h.createElement(p,{is:o.is}):(h=h.createElement(p),"select"===p&&(p=h,o.multiple?p.multiple=!0:o.size&&(p.size=o.size))):h=h.createElementNS(l,p),(o=h)[R]=f,o[O]=u,sa(o,e,!1,!1),p=o;var d=c,m=fr(h=s,f=u);switch(h){case"iframe":case"object":Cn("load",p),c=f;break;case"video":case"audio":for(c=0;c<et.length;c++)Cn(et[c],p);c=f;break;case"source":Cn("error",p),c=f;break;case"img":case"image":case"link":Cn("error",p),Cn("load",p),c=f;break;case"form":Cn("reset",p),Cn("submit",p),c=f;break;case"details":Cn("toggle",p),c=f;break;case"input":_e(p,f),c=be(p,f),Cn("invalid",p),pr(d,"onChange");break;case"option":c=Kn(p,f);break;case"select":p._wrapperState={wasMultiple:!!f.multiple},c=i({},f,{value:void 0}),Cn("invalid",p),pr(d,"onChange");break;case"textarea":Xn(p,f),c=Yn(p,f),Cn("invalid",p),pr(d,"onChange");break;default:c=f}hr(h,c),l=void 0;var y=h,g=p,v=c;for(l in v)if(v.hasOwnProperty(l)){var _=v[l];"style"===l?cr(g,_):"dangerouslySetInnerHTML"===l?null!=(_=_?_.__html:void 0)&&ir(g,_):"children"===l?"string"===typeof _?("textarea"!==y||""!==_)&&or(g,_):"number"===typeof _&&or(g,""+_):"suppressContentEditableWarning"!==l&&"suppressHydrationWarning"!==l&&"autoFocus"!==l&&(b.hasOwnProperty(l)?null!=_&&pr(d,l):null!=_&&ge(g,l,_,m))}switch(h){case"input":qt(p),Se(p,f,!1);break;case"textarea":qt(p),Jn(p);break;case"option":null!=f.value&&p.setAttribute("value",""+ve(f.value));break;case"select":(c=p).multiple=!!f.multiple,null!=(p=f.value)?Qn(c,!!f.multiple,p,!1):null!=f.defaultValue&&Qn(c,!!f.multiple,f.defaultValue,!0);break;default:"function"===typeof c.onClick&&(p.onclick=dr)}(u=gr(s,u))&&aa(e),e.stateNode=o}null!==e.ref&&(e.effectTag|=128)}else null===e.stateNode&&a("166");break;case 6:o&&null!=e.stateNode?la(o,e,o.memoizedProps,u):("string"!==typeof u&&(null===e.stateNode&&a("166")),o=wi(_i.current),wi(vi.current),bo(e)?(s=(u=e).stateNode,o=u.memoizedProps,s[R]=u,(u=s.nodeValue!==o)&&aa(e)):(s=e,(u=(9===o.nodeType?o:o.ownerDocument).createTextNode(u))[R]=e,s.stateNode=u));break;case 11:break;case 13:if(u=e.memoizedState,0!==(64&e.effectTag)){e.expirationTime=s,Ia=e;break t}u=null!==u,s=null!==o&&null!==o.memoizedState,null!==o&&!u&&s&&(null!==(o=o.child.sibling)&&(null!==(c=e.firstEffect)?(e.firstEffect=o,o.nextEffect=c):(e.firstEffect=e.lastEffect=o,o.nextEffect=null),o.effectTag=8)),(u||s)&&(e.effectTag|=4);break;case 7:case 8:case 12:break;case 4:Si(),ua(e);break;case 10:Uo(e);break;case 9:case 14:break;case 17:Or(e.type)&&Mr();break;case 18:break;default:a("156")}Ia=null}if(e=t,1===Pa||1!==e.childExpirationTime){for(u=0,s=e.child;null!==s;)(o=s.expirationTime)>u&&(u=o),(c=s.childExpirationTime)>u&&(u=c),s=s.sibling;e.childExpirationTime=u}if(null!==Ia)return Ia;null!==n&&0===(1024&n.effectTag)&&(null===n.firstEffect&&(n.firstEffect=t.firstEffect),null!==t.lastEffect&&(null!==n.lastEffect&&(n.lastEffect.nextEffect=t.firstEffect),n.lastEffect=t.lastEffect),1<t.effectTag&&(null!==n.lastEffect?n.lastEffect.nextEffect=t:n.firstEffect=t,n.lastEffect=t))}else{if(null!==(t=Sa(t)))return t.effectTag&=1023,t;null!==n&&(n.firstEffect=n.lastEffect=null,n.effectTag|=1024)}if(null!==r)return r;if(null===n)break;t=n}return null}function Ha(t){var e=Oo(t.alternate,t,Pa);return t.memoizedProps=t.pendingProps,null===e&&(e=za(t)),Ca.current=null,e}function Ka(t,e){xa&&a("243"),Ga(),xa=!0;var n=Ta.current;Ta.current=uo;var r=t.nextExpirationTimeToWorkOn;r===Pa&&t===Aa&&null!==Ia||(Ba(),Pa=r,Ia=Kr((Aa=t).current,null),t.pendingCommitExpirationTime=0);for(var i=!1;;){try{if(e)for(;null!==Ia&&!ks();)Ia=Ha(Ia);else for(;null!==Ia;)Ia=Ha(Ia)}catch(g){if(Vo=Lo=Fo=null,$i(),null===Ia)i=!0,Ns(g);else{null===Ia&&a("271");var o=Ia,s=o.return;if(null!==s){t:{var u=t,c=s,l=o,h=g;if(s=Pa,l.effectTag|=1024,l.firstEffect=l.lastEffect=null,null!==h&&"object"===typeof h&&"function"===typeof h.then){var f=h;h=c;var p=-1,d=-1;do{if(13===h.tag){var m=h.alternate;if(null!==m&&null!==(m=m.memoizedState)){d=10*(1073741822-m.timedOutAt);break}"number"===typeof(m=h.pendingProps.maxDuration)&&(0>=m?p=0:(-1===p||m<p)&&(p=m))}h=h.return}while(null!==h);h=c;do{if((m=13===h.tag)&&(m=void 0!==h.memoizedProps.fallback&&null===h.memoizedState),m){if(null===(c=h.updateQueue)?((c=new Set).add(f),h.updateQueue=c):c.add(f),0===(1&h.mode)){h.effectTag|=64,l.effectTag&=-1957,1===l.tag&&(null===l.alternate?l.tag=17:((s=Xo(1073741823)).tag=zo,Jo(l,s))),l.expirationTime=1073741823;break t}c=s;var y=(l=u).pingCache;null===y?(y=l.pingCache=new _a,m=new Set,y.set(f,m)):void 0===(m=y.get(f))&&(m=new Set,y.set(f,m)),m.has(c)||(m.add(c),l=Xa.bind(null,l,f,c),f.then(l,l)),-1===p?u=1073741823:(-1===d&&(d=10*(1073741822-ei(u,s))-5e3),u=d+p),0<=u&&Da<u&&(Da=u),h.effectTag|=2048,h.expirationTime=s;break t}h=h.return}while(null!==h);h=Error((se(l.type)||"A React component")+" suspended while rendering, but no fallback UI was specified.\n\nAdd a <Suspense fallback=...> component higher in the tree to provide a loading indicator or placeholder to display."+ue(l))}Na=!0,h=oa(h,l),u=c;do{switch(u.tag){case 3:u.effectTag|=2048,u.expirationTime=s,Zo(u,s=wa(u,h,s));break t;case 1:if(p=h,d=u.type,l=u.stateNode,0===(64&u.effectTag)&&("function"===typeof d.getDerivedStateFromError||null!==l&&"function"===typeof l.componentDidCatch&&(null===Va||!Va.has(l)))){u.effectTag|=2048,u.expirationTime=s,Zo(u,s=Ea(u,p,s));break t}}u=u.return}while(null!==u)}Ia=za(o);continue}i=!0,Ns(g)}}break}if(xa=!1,Ta.current=n,Vo=Lo=Fo=null,$i(),i)Aa=null,t.finishedWork=null;else if(null!==Ia)t.finishedWork=null;else{if(null===(n=t.current.alternate)&&a("281"),Aa=null,Na){if(i=t.latestPendingTime,o=t.latestSuspendedTime,s=t.latestPingedTime,0!==i&&i<r||0!==o&&o<r||0!==s&&s<r)return ti(t,r),void ws(t,n,r,t.expirationTime,-1);if(!t.didError&&e)return t.didError=!0,r=t.nextExpirationTimeToWorkOn=r,e=t.expirationTime=1073741823,void ws(t,n,r,e,-1)}e&&-1!==Da?(ti(t,r),(e=10*(1073741822-ei(t,r)))<Da&&(Da=e),e=10*(1073741822-Es()),e=Da-e,ws(t,n,r,t.expirationTime,0>e?0:e)):(t.pendingCommitExpirationTime=r,t.finishedWork=n)}}function Qa(t,e){for(var n=t.return;null!==n;){switch(n.tag){case 1:var r=n.stateNode;if("function"===typeof n.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Va||!Va.has(r)))return Jo(n,t=Ea(n,t=oa(e,t),1073741823)),void Ja(n,1073741823);break;case 3:return Jo(n,t=wa(n,t=oa(e,t),1073741823)),void Ja(n,1073741823)}n=n.return}3===t.tag&&(Jo(t,n=wa(t,n=oa(e,t),1073741823)),Ja(t,1073741823))}function Ya(t,e){var n=o.unstable_getCurrentPriorityLevel(),r=void 0;if(0===(1&e.mode))r=1073741823;else if(xa&&!Oa)r=Pa;else{switch(n){case o.unstable_ImmediatePriority:r=1073741823;break;case o.unstable_UserBlockingPriority:r=1073741822-10*(1+((1073741822-t+15)/10|0));break;case o.unstable_NormalPriority:r=1073741822-25*(1+((1073741822-t+500)/25|0));break;case o.unstable_LowPriority:case o.unstable_IdlePriority:r=1;break;default:a("313")}null!==Aa&&r===Pa&&--r}return n===o.unstable_UserBlockingPriority&&(0===ss||r<ss)&&(ss=r),r}function Xa(t,e,n){var r=t.pingCache;null!==r&&r.delete(e),null!==Aa&&Pa===n?Aa=null:(e=t.earliestSuspendedTime,r=t.latestSuspendedTime,0!==e&&n<=e&&n>=r&&(t.didError=!1,(0===(e=t.latestPingedTime)||e>n)&&(t.latestPingedTime=n),ni(n,t),0!==(n=t.expirationTime)&&Ss(t,n)))}function $a(t,e){t.expirationTime<e&&(t.expirationTime=e);var n=t.alternate;null!==n&&n.expirationTime<e&&(n.expirationTime=e);var r=t.return,i=null;if(null===r&&3===t.tag)i=t.stateNode;else for(;null!==r;){if(n=r.alternate,r.childExpirationTime<e&&(r.childExpirationTime=e),null!==n&&n.childExpirationTime<e&&(n.childExpirationTime=e),null===r.return&&3===r.tag){i=r.stateNode;break}r=r.return}return i}function Ja(t,e){null!==(t=$a(t,e))&&(!xa&&0!==Pa&&e>Pa&&Ba(),Zr(t,e),xa&&!Oa&&Aa===t||Ss(t,t.expirationTime),gs>ys&&(gs=0,a("185")))}function Za(t,e,n,r,i){return o.unstable_runWithPriority(o.unstable_ImmediatePriority,function(){return t(e,n,r,i)})}var ts=null,es=null,ns=0,rs=void 0,is=!1,os=null,as=0,ss=0,us=!1,cs=null,ls=!1,hs=!1,fs=null,ps=o.unstable_now(),ds=1073741822-(ps/10|0),ms=ds,ys=50,gs=0,vs=null;function bs(){ds=1073741822-((o.unstable_now()-ps)/10|0)}function _s(t,e){if(0!==ns){if(e<ns)return;null!==rs&&o.unstable_cancelCallback(rs)}ns=e,t=o.unstable_now()-ps,rs=o.unstable_scheduleCallback(xs,{timeout:10*(1073741822-e)-t})}function ws(t,e,n,r,i){t.expirationTime=r,0!==i||ks()?0<i&&(t.timeoutHandle=br(function(t,e,n){t.pendingCommitExpirationTime=n,t.finishedWork=e,bs(),ms=ds,As(t,n)}.bind(null,t,e,n),i)):(t.pendingCommitExpirationTime=n,t.finishedWork=e)}function Es(){return is?ms:(Ts(),0!==as&&1!==as||(bs(),ms=ds),ms)}function Ss(t,e){null===t.nextScheduledRoot?(t.expirationTime=e,null===es?(ts=es=t,t.nextScheduledRoot=t):(es=es.nextScheduledRoot=t).nextScheduledRoot=ts):e>t.expirationTime&&(t.expirationTime=e),is||(ls?hs&&(os=t,as=1073741823,Ps(t,1073741823,!1)):1073741823===e?Is(1073741823,!1):_s(t,e))}function Ts(){var t=0,e=null;if(null!==es)for(var n=es,r=ts;null!==r;){var i=r.expirationTime;if(0===i){if((null===n||null===es)&&a("244"),r===r.nextScheduledRoot){ts=es=r.nextScheduledRoot=null;break}if(r===ts)ts=i=r.nextScheduledRoot,es.nextScheduledRoot=i,r.nextScheduledRoot=null;else{if(r===es){(es=n).nextScheduledRoot=ts,r.nextScheduledRoot=null;break}n.nextScheduledRoot=r.nextScheduledRoot,r.nextScheduledRoot=null}r=n.nextScheduledRoot}else{if(i>t&&(t=i,e=r),r===es)break;if(1073741823===t)break;n=r,r=r.nextScheduledRoot}}os=e,as=t}var Cs=!1;function ks(){return!!Cs||!!o.unstable_shouldYield()&&(Cs=!0)}function xs(){try{if(!ks()&&null!==ts){bs();var t=ts;do{var e=t.expirationTime;0!==e&&ds<=e&&(t.nextExpirationTimeToWorkOn=ds),t=t.nextScheduledRoot}while(t!==ts)}Is(0,!0)}finally{Cs=!1}}function Is(t,e){if(Ts(),e)for(bs(),ms=ds;null!==os&&0!==as&&t<=as&&!(Cs&&ds>as);)Ps(os,as,ds>as),Ts(),bs(),ms=ds;else for(;null!==os&&0!==as&&t<=as;)Ps(os,as,!1),Ts();if(e&&(ns=0,rs=null),0!==as&&_s(os,as),gs=0,vs=null,null!==fs)for(t=fs,fs=null,e=0;e<t.length;e++){var n=t[e];try{n._onComplete()}catch(r){us||(us=!0,cs=r)}}if(us)throw t=cs,cs=null,us=!1,t}function As(t,e){is&&a("253"),os=t,as=e,Ps(t,e,!1),Is(1073741823,!1)}function Ps(t,e,n){if(is&&a("245"),is=!0,n){var r=t.finishedWork;null!==r?Ds(t,r,e):(t.finishedWork=null,-1!==(r=t.timeoutHandle)&&(t.timeoutHandle=-1,_r(r)),Ka(t,n),null!==(r=t.finishedWork)&&(ks()?t.finishedWork=r:Ds(t,r,e)))}else null!==(r=t.finishedWork)?Ds(t,r,e):(t.finishedWork=null,-1!==(r=t.timeoutHandle)&&(t.timeoutHandle=-1,_r(r)),Ka(t,n),null!==(r=t.finishedWork)&&Ds(t,r,e));is=!1}function Ds(t,e,n){var r=t.firstBatch;if(null!==r&&r._expirationTime>=n&&(null===fs?fs=[r]:fs.push(r),r._defer))return t.finishedWork=e,void(t.expirationTime=0);t.finishedWork=null,t===vs?gs++:(vs=t,gs=0),o.unstable_runWithPriority(o.unstable_ImmediatePriority,function(){Wa(t,e)})}function Ns(t){null===os&&a("246"),os.expirationTime=0,us||(us=!0,cs=t)}function Rs(t,e){var n=ls;ls=!0;try{return t(e)}finally{(ls=n)||is||Is(1073741823,!1)}}function Os(t,e){if(ls&&!hs){hs=!0;try{return t(e)}finally{hs=!1}}return t(e)}function Ms(t,e,n){ls||is||0===ss||(Is(ss,!1),ss=0);var r=ls;ls=!0;try{return o.unstable_runWithPriority(o.unstable_UserBlockingPriority,function(){return t(e,n)})}finally{(ls=r)||is||Is(1073741823,!1)}}function Fs(t,e,n,r,i){var o=e.current;t:if(n){e:{2===en(n=n._reactInternalFiber)&&1===n.tag||a("170");var s=n;do{switch(s.tag){case 3:s=s.stateNode.context;break e;case 1:if(Or(s.type)){s=s.stateNode.__reactInternalMemoizedMergedChildContext;break e}}s=s.return}while(null!==s);a("171"),s=void 0}if(1===n.tag){var u=n.type;if(Or(u)){n=Vr(n,u,s);break t}}n=s}else n=Ar;return null===e.context?e.context=n:e.pendingContext=n,e=i,(i=Xo(r)).payload={element:t},null!==(e=void 0===e?null:e)&&(i.callback=e),Ga(),Jo(o,i),Ja(o,r),r}function Ls(t,e,n,r){var i=e.current;return Fs(t,e,n,i=Ya(Es(),i),r)}function Vs(t){if(!(t=t.current).child)return null;switch(t.child.tag){case 5:default:return t.child.stateNode}}function Bs(t){var e=1073741822-25*(1+((1073741822-Es()+500)/25|0));e>=ka&&(e=ka-1),this._expirationTime=ka=e,this._root=t,this._callbacks=this._next=null,this._hasChildren=this._didComplete=!1,this._children=null,this._defer=!0}function Us(){this._callbacks=null,this._didCommit=!1,this._onCommit=this._onCommit.bind(this)}function js(t,e,n){t={current:e=zr(3,null,null,e?3:0),containerInfo:t,pendingChildren:null,pingCache:null,earliestPendingTime:0,latestPendingTime:0,earliestSuspendedTime:0,latestSuspendedTime:0,latestPingedTime:0,didError:!1,pendingCommitExpirationTime:0,finishedWork:null,timeoutHandle:-1,context:null,pendingContext:null,hydrate:n,nextExpirationTimeToWorkOn:0,expirationTime:0,firstBatch:null,nextScheduledRoot:null},this._internalRoot=e.stateNode=t}function qs(t){return!(!t||1!==t.nodeType&&9!==t.nodeType&&11!==t.nodeType&&(8!==t.nodeType||" react-mount-point-unstable "!==t.nodeValue))}function Gs(t,e,n,r,i){var o=n._reactRootContainer;if(o){if("function"===typeof i){var a=i;i=function(){var t=Vs(o._internalRoot);a.call(t)}}null!=t?o.legacy_renderSubtreeIntoContainer(t,e,i):o.render(e,i)}else{if(o=n._reactRootContainer=function(t,e){if(e||(e=!(!(e=t?9===t.nodeType?t.documentElement:t.firstChild:null)||1!==e.nodeType||!e.hasAttribute("data-reactroot"))),!e)for(var n;n=t.lastChild;)t.removeChild(n);return new js(t,!1,e)}(n,r),"function"===typeof i){var s=i;i=function(){var t=Vs(o._internalRoot);s.call(t)}}Os(function(){null!=t?o.legacy_renderSubtreeIntoContainer(t,e,i):o.render(e,i)})}return Vs(o._internalRoot)}function Ws(t,e){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;return qs(e)||a("200"),function(t,e,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:Qt,key:null==r?null:""+r,children:t,containerInfo:e,implementation:n}}(t,e,null,n)}kt=function(t,e,n){switch(e){case"input":if(Ee(t,n),e=n.name,"radio"===n.type&&null!=e){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=V(r);i||a("90"),Gt(r),Ee(r,i)}}}break;case"textarea":$n(t,n);break;case"select":null!=(e=n.value)&&Qn(t,!!n.multiple,e,!1)}},Bs.prototype.render=function(t){this._defer||a("250"),this._hasChildren=!0,this._children=t;var e=this._root._internalRoot,n=this._expirationTime,r=new Us;return Fs(t,e,null,n,r._onCommit),r},Bs.prototype.then=function(t){if(this._didComplete)t();else{var e=this._callbacks;null===e&&(e=this._callbacks=[]),e.push(t)}},Bs.prototype.commit=function(){var t=this._root._internalRoot,e=t.firstBatch;if(this._defer&&null!==e||a("251"),this._hasChildren){var n=this._expirationTime;if(e!==this){this._hasChildren&&(n=this._expirationTime=e._expirationTime,this.render(this._children));for(var r=null,i=e;i!==this;)r=i,i=i._next;null===r&&a("251"),r._next=i._next,this._next=e,t.firstBatch=this}this._defer=!1,As(t,n),e=this._next,this._next=null,null!==(e=t.firstBatch=e)&&e._hasChildren&&e.render(e._children)}else this._next=null,this._defer=!1},Bs.prototype._onComplete=function(){if(!this._didComplete){this._didComplete=!0;var t=this._callbacks;if(null!==t)for(var e=0;e<t.length;e++)(0,t[e])()}},Us.prototype.then=function(t){if(this._didCommit)t();else{var e=this._callbacks;null===e&&(e=this._callbacks=[]),e.push(t)}},Us.prototype._onCommit=function(){if(!this._didCommit){this._didCommit=!0;var t=this._callbacks;if(null!==t)for(var e=0;e<t.length;e++){var n=t[e];"function"!==typeof n&&a("191",n),n()}}},js.prototype.render=function(t,e){var n=this._internalRoot,r=new Us;return null!==(e=void 0===e?null:e)&&r.then(e),Ls(t,n,null,r._onCommit),r},js.prototype.unmount=function(t){var e=this._internalRoot,n=new Us;return null!==(t=void 0===t?null:t)&&n.then(t),Ls(null,e,null,n._onCommit),n},js.prototype.legacy_renderSubtreeIntoContainer=function(t,e,n){var r=this._internalRoot,i=new Us;return null!==(n=void 0===n?null:n)&&i.then(n),Ls(e,r,t,i._onCommit),i},js.prototype.createBatch=function(){var t=new Bs(this),e=t._expirationTime,n=this._internalRoot,r=n.firstBatch;if(null===r)n.firstBatch=t,t._next=null;else{for(n=null;null!==r&&r._expirationTime>=e;)n=r,r=r._next;t._next=r,null!==n&&(n._next=t)}return t},Nt=Rs,Rt=Ms,Ot=function(){is||0===ss||(Is(ss,!1),ss=0)};var zs={createPortal:Ws,findDOMNode:function(t){if(null==t)return null;if(1===t.nodeType)return t;var e=t._reactInternalFiber;return void 0===e&&("function"===typeof t.render?a("188"):a("268",Object.keys(t))),t=null===(t=rn(e))?null:t.stateNode},hydrate:function(t,e,n){return qs(e)||a("200"),Gs(null,t,e,!0,n)},render:function(t,e,n){return qs(e)||a("200"),Gs(null,t,e,!1,n)},unstable_renderSubtreeIntoContainer:function(t,e,n,r){return qs(n)||a("200"),(null==t||void 0===t._reactInternalFiber)&&a("38"),Gs(t,e,n,!1,r)},unmountComponentAtNode:function(t){return qs(t)||a("40"),!!t._reactRootContainer&&(Os(function(){Gs(null,null,t,!1,function(){t._reactRootContainer=null})}),!0)},unstable_createPortal:function(){return Ws.apply(void 0,arguments)},unstable_batchedUpdates:Rs,unstable_interactiveUpdates:Ms,flushSync:function(t,e){is&&a("187");var n=ls;ls=!0;try{return Za(t,e)}finally{ls=n,Is(1073741823,!1)}},unstable_createRoot:function(t,e){return qs(t)||a("299","unstable_createRoot"),new js(t,!0,null!=e&&!0===e.hydrate)},unstable_flushControlled:function(t){var e=ls;ls=!0;try{Za(t)}finally{(ls=e)||is||Is(1073741823,!1)}},__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED:{Events:[F,L,V,A.injectEventPluginsByName,v,W,function(t){k(t,G)},Pt,Dt,In,D]}};!function(t){var e=t.findFiberByHostInstance;(function(t){if("undefined"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__)return!1;var e=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(e.isDisabled||!e.supportsFiber)return!0;try{var n=e.inject(t);jr=Gr(function(t){return e.onCommitFiberRoot(n,t)}),qr=Gr(function(t){return e.onCommitFiberUnmount(n,t)})}catch(r){}})(i({},t,{overrideProps:null,currentDispatcherRef:Wt.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return null===(t=rn(t))?null:t.stateNode},findFiberByHostInstance:function(t){return e?e(t):null}}))}({findFiberByHostInstance:M,bundleType:0,version:"16.8.6",rendererPackageName:"react-dom"});var Hs={default:zs},Ks=Hs&&zs||Hs;t.exports=Ks.default||Ks},function(t,e,n){"use strict";t.exports=n(79)},function(t,e,n){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0});var n=null,r=!1,i=3,o=-1,a=-1,s=!1,u=!1;function c(){if(!s){var t=n.expirationTime;u?S():u=!0,E(f,t)}}function l(){var t=n,e=n.next;if(n===e)n=null;else{var r=n.previous;n=r.next=e,e.previous=r}t.next=t.previous=null,r=t.callback,e=t.expirationTime,t=t.priorityLevel;var o=i,s=a;i=t,a=e;try{var u=r()}finally{i=o,a=s}if("function"===typeof u)if(u={callback:u,priorityLevel:t,expirationTime:e,next:null,previous:null},null===n)n=u.next=u.previous=u;else{r=null,t=n;do{if(t.expirationTime>=e){r=t;break}t=t.next}while(t!==n);null===r?r=n:r===n&&(n=u,c()),(e=r.previous).next=r.previous=u,u.next=r,u.previous=e}}function h(){if(-1===o&&null!==n&&1===n.priorityLevel){s=!0;try{do{l()}while(null!==n&&1===n.priorityLevel)}finally{s=!1,null!==n?c():u=!1}}}function f(t){s=!0;var i=r;r=t;try{if(t)for(;null!==n;){var o=e.unstable_now();if(!(n.expirationTime<=o))break;do{l()}while(null!==n&&n.expirationTime<=o)}else if(null!==n)do{l()}while(null!==n&&!T())}finally{s=!1,r=i,null!==n?c():u=!1,h()}}var p,d,m=Date,y="function"===typeof setTimeout?setTimeout:void 0,g="function"===typeof clearTimeout?clearTimeout:void 0,v="function"===typeof requestAnimationFrame?requestAnimationFrame:void 0,b="function"===typeof cancelAnimationFrame?cancelAnimationFrame:void 0;function _(t){p=v(function(e){g(d),t(e)}),d=y(function(){b(p),t(e.unstable_now())},100)}if("object"===typeof performance&&"function"===typeof performance.now){var w=performance;e.unstable_now=function(){return w.now()}}else e.unstable_now=function(){return m.now()};var E,S,T,C=null;if("undefined"!==typeof window?C=window:"undefined"!==typeof t&&(C=t),C&&C._schedMock){var k=C._schedMock;E=k[0],S=k[1],T=k[2],e.unstable_now=k[3]}else if("undefined"===typeof window||"function"!==typeof MessageChannel){var x=null,I=function(t){if(null!==x)try{x(t)}finally{x=null}};E=function(t){null!==x?setTimeout(E,0,t):(x=t,setTimeout(I,0,!1))},S=function(){x=null},T=function(){return!1}}else{"undefined"!==typeof console&&("function"!==typeof v&&console.error("This browser doesn't support requestAnimationFrame. Make sure that you load a polyfill in older browsers. https://fb.me/react-polyfills"),"function"!==typeof b&&console.error("This browser doesn't support cancelAnimationFrame. Make sure that you load a polyfill in older browsers. https://fb.me/react-polyfills"));var A=null,P=!1,D=-1,N=!1,R=!1,O=0,M=33,F=33;T=function(){return O<=e.unstable_now()};var L=new MessageChannel,V=L.port2;L.port1.onmessage=function(){P=!1;var t=A,n=D;A=null,D=-1;var r=e.unstable_now(),i=!1;if(0>=O-r){if(!(-1!==n&&n<=r))return N||(N=!0,_(B)),A=t,void(D=n);i=!0}if(null!==t){R=!0;try{t(i)}finally{R=!1}}};var B=function t(e){if(null!==A){_(t);var n=e-O+F;n<F&&M<F?(8>n&&(n=8),F=n<M?M:n):M=n,O=e+F,P||(P=!0,V.postMessage(void 0))}else N=!1};E=function(t,e){A=t,D=e,R||0>e?V.postMessage(void 0):N||(N=!0,_(B))},S=function(){A=null,P=!1,D=-1}}e.unstable_ImmediatePriority=1,e.unstable_UserBlockingPriority=2,e.unstable_NormalPriority=3,e.unstable_IdlePriority=5,e.unstable_LowPriority=4,e.unstable_runWithPriority=function(t,n){switch(t){case 1:case 2:case 3:case 4:case 5:break;default:t=3}var r=i,a=o;i=t,o=e.unstable_now();try{return n()}finally{i=r,o=a,h()}},e.unstable_next=function(t){switch(i){case 1:case 2:case 3:var n=3;break;default:n=i}var r=i,a=o;i=n,o=e.unstable_now();try{return t()}finally{i=r,o=a,h()}},e.unstable_scheduleCallback=function(t,r){var a=-1!==o?o:e.unstable_now();if("object"===typeof r&&null!==r&&"number"===typeof r.timeout)r=a+r.timeout;else switch(i){case 1:r=a+-1;break;case 2:r=a+250;break;case 5:r=a+1073741823;break;case 4:r=a+1e4;break;default:r=a+5e3}if(t={callback:t,priorityLevel:i,expirationTime:r,next:null,previous:null},null===n)n=t.next=t.previous=t,c();else{a=null;var s=n;do{if(s.expirationTime>r){a=s;break}s=s.next}while(s!==n);null===a?a=n:a===n&&(n=t,c()),(r=a.previous).next=a.previous=t,t.next=a,t.previous=r}return t},e.unstable_cancelCallback=function(t){var e=t.next;if(null!==e){if(e===t)n=null;else{t===n&&(n=e);var r=t.previous;r.next=e,e.previous=r}t.next=t.previous=null}},e.unstable_wrapCallback=function(t){var n=i;return function(){var r=i,a=o;i=n,o=e.unstable_now();try{return t.apply(this,arguments)}finally{i=r,o=a,h()}}},e.unstable_getCurrentPriorityLevel=function(){return i},e.unstable_shouldYield=function(){return!r&&(null!==n&&n.expirationTime<a||T())},e.unstable_continueExecution=function(){null!==n&&c()},e.unstable_pauseExecution=function(){},e.unstable_getFirstCallbackNode=function(){return n}}).call(this,n(18))},,,function(t,e){t.exports=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}},function(t,e){function n(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}t.exports=function(t,e,r){return e&&n(t.prototype,e),r&&n(t,r),t}},function(t,e,n){var r=n(85),i=n(55);t.exports=function(t,e){return!e||"object"!==r(e)&&"function"!==typeof e?i(t):e}},function(t,e){function n(t){return(n="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function r(e){return"function"===typeof Symbol&&"symbol"===n(Symbol.iterator)?t.exports=r=function(t){return n(t)}:t.exports=r=function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":n(t)},r(e)}t.exports=r},function(t,e){function n(e){return t.exports=n=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},n(e)}t.exports=n},function(t,e,n){var r=n(88);t.exports=function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&r(t,e)}},function(t,e){function n(e,r){return t.exports=n=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},n(e,r)}t.exports=n},function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_RESULT__,root,factory;"undefined"!==typeof navigator&&(root=window||{},factory=function(window){"use strict";var svgNS="http://www.w3.org/2000/svg",locationHref="",initialDefaultFrame=-999999,subframeEnabled=!0,expressionsPlugin,isSafari=/^((?!chrome|android).)*safari/i.test(navigator.userAgent),cachedColors={},bm_rounder=Math.round,bm_rnd,bm_pow=Math.pow,bm_sqrt=Math.sqrt,bm_abs=Math.abs,bm_floor=Math.floor,bm_max=Math.max,bm_min=Math.min,blitter=10,BMMath={};function ProjectInterface(){return{}}!function(){var t,e=["abs","acos","acosh","asin","asinh","atan","atanh","atan2","ceil","cbrt","expm1","clz32","cos","cosh","exp","floor","fround","hypot","imul","log","log1p","log2","log10","max","min","pow","random","round","sign","sin","sinh","sqrt","tan","tanh","trunc","E","LN10","LN2","LOG10E","LOG2E","PI","SQRT1_2","SQRT2"],n=e.length;for(t=0;t<n;t+=1)BMMath[e[t]]=Math[e[t]]}(),BMMath.random=Math.random,BMMath.abs=function(t){if("object"===typeof t&&t.length){var e,n=createSizedArray(t.length),r=t.length;for(e=0;e<r;e+=1)n[e]=Math.abs(t[e]);return n}return Math.abs(t)};var defaultCurveSegments=150,degToRads=Math.PI/180,roundCorner=.5519;function roundValues(t){bm_rnd=t?Math.round:function(t){return t}}function styleDiv(t){t.style.position="absolute",t.style.top=0,t.style.left=0,t.style.display="block",t.style.transformOrigin=t.style.webkitTransformOrigin="0 0",t.style.backfaceVisibility=t.style.webkitBackfaceVisibility="visible",t.style.transformStyle=t.style.webkitTransformStyle=t.style.mozTransformStyle="preserve-3d"}function BMEnterFrameEvent(t,e,n,r){this.type=t,this.currentTime=e,this.totalTime=n,this.direction=r<0?-1:1}function BMCompleteEvent(t,e){this.type=t,this.direction=e<0?-1:1}function BMCompleteLoopEvent(t,e,n,r){this.type=t,this.currentLoop=n,this.totalLoops=e,this.direction=r<0?-1:1}function BMSegmentStartEvent(t,e,n){this.type=t,this.firstFrame=e,this.totalFrames=n}function BMDestroyEvent(t,e){this.type=t,this.target=e}roundValues(!1);var createElementID=function(){var t=0;return function(){return"__lottie_element_"+ ++t}}();function HSVtoRGB(t,e,n){var r,i,o,a,s,u,c,l;switch(u=n*(1-e),c=n*(1-(s=6*t-(a=Math.floor(6*t)))*e),l=n*(1-(1-s)*e),a%6){case 0:r=n,i=l,o=u;break;case 1:r=c,i=n,o=u;break;case 2:r=u,i=n,o=l;break;case 3:r=u,i=c,o=n;break;case 4:r=l,i=u,o=n;break;case 5:r=n,i=u,o=c}return[r,i,o]}function RGBtoHSV(t,e,n){var r,i=Math.max(t,e,n),o=Math.min(t,e,n),a=i-o,s=0===i?0:a/i,u=i/255;switch(i){case o:r=0;break;case t:r=e-n+a*(e<n?6:0),r/=6*a;break;case e:r=n-t+2*a,r/=6*a;break;case n:r=t-e+4*a,r/=6*a}return[r,s,u]}function addSaturationToRGB(t,e){var n=RGBtoHSV(255*t[0],255*t[1],255*t[2]);return n[1]+=e,n[1]>1?n[1]=1:n[1]<=0&&(n[1]=0),HSVtoRGB(n[0],n[1],n[2])}function addBrightnessToRGB(t,e){var n=RGBtoHSV(255*t[0],255*t[1],255*t[2]);return n[2]+=e,n[2]>1?n[2]=1:n[2]<0&&(n[2]=0),HSVtoRGB(n[0],n[1],n[2])}function addHueToRGB(t,e){var n=RGBtoHSV(255*t[0],255*t[1],255*t[2]);return n[0]+=e/360,n[0]>1?n[0]-=1:n[0]<0&&(n[0]+=1),HSVtoRGB(n[0],n[1],n[2])}var rgbToHex=function(){var t,e,n=[];for(t=0;t<256;t+=1)e=t.toString(16),n[t]=1==e.length?"0"+e:e;return function(t,e,r){return t<0&&(t=0),e<0&&(e=0),r<0&&(r=0),"#"+n[t]+n[e]+n[r]}}();function BaseEvent(){}BaseEvent.prototype={triggerEvent:function(t,e){if(this._cbs[t])for(var n=this._cbs[t].length,r=0;r<n;r++)this._cbs[t][r](e)},addEventListener:function(t,e){return this._cbs[t]||(this._cbs[t]=[]),this._cbs[t].push(e),function(){this.removeEventListener(t,e)}.bind(this)},removeEventListener:function(t,e){if(e){if(this._cbs[t]){for(var n=0,r=this._cbs[t].length;n<r;)this._cbs[t][n]===e&&(this._cbs[t].splice(n,1),n-=1,r-=1),n+=1;this._cbs[t].length||(this._cbs[t]=null)}}else this._cbs[t]=null}};var createTypedArray=function(){return"function"===typeof Uint8ClampedArray&&"function"===typeof Float32Array?function(t,e){return"float32"===t?new Float32Array(e):"int16"===t?new Int16Array(e):"uint8c"===t?new Uint8ClampedArray(e):void 0}:function(t,e){var n,r=0,i=[];switch(t){case"int16":case"uint8c":n=1;break;default:n=1.1}for(r=0;r<e;r+=1)i.push(n);return i}}();function createSizedArray(t){return Array.apply(null,{length:t})}function createNS(t){return document.createElementNS(svgNS,t)}function createTag(t){return document.createElement(t)}function DynamicPropertyContainer(){}DynamicPropertyContainer.prototype={addDynamicProperty:function(t){-1===this.dynamicProperties.indexOf(t)&&(this.dynamicProperties.push(t),this.container.addDynamicProperty(this),this._isAnimated=!0)},iterateDynamicProperties:function(){this._mdf=!1;var t,e=this.dynamicProperties.length;for(t=0;t<e;t+=1)this.dynamicProperties[t].getValue(),this.dynamicProperties[t]._mdf&&(this._mdf=!0)},initDynamicPropertyContainer:function(t){this.container=t,this.dynamicProperties=[],this._mdf=!1,this._isAnimated=!1}};var getBlendMode=function(){var t={0:"source-over",1:"multiply",2:"screen",3:"overlay",4:"darken",5:"lighten",6:"color-dodge",7:"color-burn",8:"hard-light",9:"soft-light",10:"difference",11:"exclusion",12:"hue",13:"saturation",14:"color",15:"luminosity"};return function(e){return t[e]||""}}(),Matrix=function(){var t=Math.cos,e=Math.sin,n=Math.tan,r=Math.round;function i(){return this.props[0]=1,this.props[1]=0,this.props[2]=0,this.props[3]=0,this.props[4]=0,this.props[5]=1,this.props[6]=0,this.props[7]=0,this.props[8]=0,this.props[9]=0,this.props[10]=1,this.props[11]=0,this.props[12]=0,this.props[13]=0,this.props[14]=0,this.props[15]=1,this}function o(n){if(0===n)return this;var r=t(n),i=e(n);return this._t(r,-i,0,0,i,r,0,0,0,0,1,0,0,0,0,1)}function a(n){if(0===n)return this;var r=t(n),i=e(n);return this._t(1,0,0,0,0,r,-i,0,0,i,r,0,0,0,0,1)}function s(n){if(0===n)return this;var r=t(n),i=e(n);return this._t(r,0,i,0,0,1,0,0,-i,0,r,0,0,0,0,1)}function u(n){if(0===n)return this;var r=t(n),i=e(n);return this._t(r,-i,0,0,i,r,0,0,0,0,1,0,0,0,0,1)}function c(t,e){return this._t(1,e,t,1,0,0)}function l(t,e){return this.shear(n(t),n(e))}function h(r,i){var o=t(i),a=e(i);return this._t(o,a,0,0,-a,o,0,0,0,0,1,0,0,0,0,1)._t(1,0,0,0,n(r),1,0,0,0,0,1,0,0,0,0,1)._t(o,-a,0,0,a,o,0,0,0,0,1,0,0,0,0,1)}function f(t,e,n){return n||0===n||(n=1),1===t&&1===e&&1===n?this:this._t(t,0,0,0,0,e,0,0,0,0,n,0,0,0,0,1)}function p(t,e,n,r,i,o,a,s,u,c,l,h,f,p,d,m){return this.props[0]=t,this.props[1]=e,this.props[2]=n,this.props[3]=r,this.props[4]=i,this.props[5]=o,this.props[6]=a,this.props[7]=s,this.props[8]=u,this.props[9]=c,this.props[10]=l,this.props[11]=h,this.props[12]=f,this.props[13]=p,this.props[14]=d,this.props[15]=m,this}function d(t,e,n){return n=n||0,0!==t||0!==e||0!==n?this._t(1,0,0,0,0,1,0,0,0,0,1,0,t,e,n,1):this}function m(t,e,n,r,i,o,a,s,u,c,l,h,f,p,d,m){var y=this.props;if(1===t&&0===e&&0===n&&0===r&&0===i&&1===o&&0===a&&0===s&&0===u&&0===c&&1===l&&0===h)return y[12]=y[12]*t+y[15]*f,y[13]=y[13]*o+y[15]*p,y[14]=y[14]*l+y[15]*d,y[15]=y[15]*m,this._identityCalculated=!1,this;var g=y[0],v=y[1],b=y[2],_=y[3],w=y[4],E=y[5],S=y[6],T=y[7],C=y[8],k=y[9],x=y[10],I=y[11],A=y[12],P=y[13],D=y[14],N=y[15];return y[0]=g*t+v*i+b*u+_*f,y[1]=g*e+v*o+b*c+_*p,y[2]=g*n+v*a+b*l+_*d,y[3]=g*r+v*s+b*h+_*m,y[4]=w*t+E*i+S*u+T*f,y[5]=w*e+E*o+S*c+T*p,y[6]=w*n+E*a+S*l+T*d,y[7]=w*r+E*s+S*h+T*m,y[8]=C*t+k*i+x*u+I*f,y[9]=C*e+k*o+x*c+I*p,y[10]=C*n+k*a+x*l+I*d,y[11]=C*r+k*s+x*h+I*m,y[12]=A*t+P*i+D*u+N*f,y[13]=A*e+P*o+D*c+N*p,y[14]=A*n+P*a+D*l+N*d,y[15]=A*r+P*s+D*h+N*m,this._identityCalculated=!1,this}function y(){return this._identityCalculated||(this._identity=!(1!==this.props[0]||0!==this.props[1]||0!==this.props[2]||0!==this.props[3]||0!==this.props[4]||1!==this.props[5]||0!==this.props[6]||0!==this.props[7]||0!==this.props[8]||0!==this.props[9]||1!==this.props[10]||0!==this.props[11]||0!==this.props[12]||0!==this.props[13]||0!==this.props[14]||1!==this.props[15]),this._identityCalculated=!0),this._identity}function g(t){for(var e=0;e<16;){if(t.props[e]!==this.props[e])return!1;e+=1}return!0}function v(t){var e;for(e=0;e<16;e+=1)t.props[e]=this.props[e]}function b(t){var e;for(e=0;e<16;e+=1)this.props[e]=t[e]}function _(t,e,n){return{x:t*this.props[0]+e*this.props[4]+n*this.props[8]+this.props[12],y:t*this.props[1]+e*this.props[5]+n*this.props[9]+this.props[13],z:t*this.props[2]+e*this.props[6]+n*this.props[10]+this.props[14]}}function w(t,e,n){return t*this.props[0]+e*this.props[4]+n*this.props[8]+this.props[12]}function E(t,e,n){return t*this.props[1]+e*this.props[5]+n*this.props[9]+this.props[13]}function S(t,e,n){return t*this.props[2]+e*this.props[6]+n*this.props[10]+this.props[14]}function T(t){var e=this.props[0]*this.props[5]-this.props[1]*this.props[4],n=this.props[5]/e,r=-this.props[1]/e,i=-this.props[4]/e,o=this.props[0]/e,a=(this.props[4]*this.props[13]-this.props[5]*this.props[12])/e,s=-(this.props[0]*this.props[13]-this.props[1]*this.props[12])/e;return[t[0]*n+t[1]*i+a,t[0]*r+t[1]*o+s,0]}function C(t){var e,n=t.length,r=[];for(e=0;e<n;e+=1)r[e]=T(t[e]);return r}function k(t,e,n){var r=createTypedArray("float32",6);if(this.isIdentity())r[0]=t[0],r[1]=t[1],r[2]=e[0],r[3]=e[1],r[4]=n[0],r[5]=n[1];else{var i=this.props[0],o=this.props[1],a=this.props[4],s=this.props[5],u=this.props[12],c=this.props[13];r[0]=t[0]*i+t[1]*a+u,r[1]=t[0]*o+t[1]*s+c,r[2]=e[0]*i+e[1]*a+u,r[3]=e[0]*o+e[1]*s+c,r[4]=n[0]*i+n[1]*a+u,r[5]=n[0]*o+n[1]*s+c}return r}function x(t,e,n){return this.isIdentity()?[t,e,n]:[t*this.props[0]+e*this.props[4]+n*this.props[8]+this.props[12],t*this.props[1]+e*this.props[5]+n*this.props[9]+this.props[13],t*this.props[2]+e*this.props[6]+n*this.props[10]+this.props[14]]}function I(t,e){if(this.isIdentity())return t+","+e;var n=this.props;return Math.round(100*(t*n[0]+e*n[4]+n[12]))/100+","+Math.round(100*(t*n[1]+e*n[5]+n[13]))/100}function A(){for(var t=0,e=this.props,n="matrix3d(";t<16;)n+=r(1e4*e[t])/1e4,n+=15===t?")":",",t+=1;return n}function P(t){return t<1e-6&&t>0||t>-1e-6&&t<0?r(1e4*t)/1e4:t}function D(){var t=this.props;return"matrix("+P(t[0])+","+P(t[1])+","+P(t[4])+","+P(t[5])+","+P(t[12])+","+P(t[13])+")"}return function(){this.reset=i,this.rotate=o,this.rotateX=a,this.rotateY=s,this.rotateZ=u,this.skew=l,this.skewFromAxis=h,this.shear=c,this.scale=f,this.setTransform=p,this.translate=d,this.transform=m,this.applyToPoint=_,this.applyToX=w,this.applyToY=E,this.applyToZ=S,this.applyToPointArray=x,this.applyToTriplePoints=k,this.applyToPointStringified=I,this.toCSS=A,this.to2dCSS=D,this.clone=v,this.cloneFromProps=b,this.equals=g,this.inversePoints=C,this.inversePoint=T,this._t=this.transform,this.isIdentity=y,this._identity=!0,this._identityCalculated=!1,this.props=createTypedArray("float32",16),this.reset()}}();!function(t,e){var n,r=this,i=256,o=6,a="random",s=e.pow(i,o),u=e.pow(2,52),c=2*u,l=i-1;function h(t){var e,n=t.length,r=this,o=0,a=r.i=r.j=0,s=r.S=[];for(n||(t=[n++]);o<i;)s[o]=o++;for(o=0;o<i;o++)s[o]=s[a=l&a+t[o%n]+(e=s[o])],s[a]=e;r.g=function(t){for(var e,n=0,o=r.i,a=r.j,s=r.S;t--;)e=s[o=l&o+1],n=n*i+s[l&(s[o]=s[a=l&a+e])+(s[a]=e)];return r.i=o,r.j=a,n}}function f(t,e){return e.i=t.i,e.j=t.j,e.S=t.S.slice(),e}function p(t,e){for(var n,r=t+"",i=0;i<r.length;)e[l&i]=l&(n^=19*e[l&i])+r.charCodeAt(i++);return d(e)}function d(t){return String.fromCharCode.apply(0,t)}e["seed"+a]=function(l,m,y){var g=[],v=p(function t(e,n){var r,i=[],o=typeof e;if(n&&"object"==o)for(r in e)try{i.push(t(e[r],n-1))}catch(a){}return i.length?i:"string"==o?e:e+"\0"}((m=!0===m?{entropy:!0}:m||{}).entropy?[l,d(t)]:null===l?function(){try{if(n)return d(n.randomBytes(i));var e=new Uint8Array(i);return(r.crypto||r.msCrypto).getRandomValues(e),d(e)}catch(s){var o=r.navigator,a=o&&o.plugins;return[+new Date,r,a,r.screen,d(t)]}}():l,3),g),b=new h(g),_=function(){for(var t=b.g(o),e=s,n=0;t<u;)t=(t+n)*i,e*=i,n=b.g(1);for(;t>=c;)t/=2,e/=2,n>>>=1;return(t+n)/e};return _.int32=function(){return 0|b.g(4)},_.quick=function(){return b.g(4)/4294967296},_.double=_,p(d(b.S),t),(m.pass||y||function(t,n,r,i){return i&&(i.S&&f(i,b),t.state=function(){return f(b,{})}),r?(e[a]=t,n):t})(_,v,"global"in m?m.global:this==e,m.state)},p(e.random(),t)}([],BMMath);var BezierFactory=function(){var t={getBezierEasing:function(t,n,r,i,o){var a=o||("bez_"+t+"_"+n+"_"+r+"_"+i).replace(/\./g,"p");if(e[a])return e[a];var s=new p([t,n,r,i]);return e[a]=s,s}},e={};var n=4,r=1e-7,i=10,o=11,a=1/(o-1),s="function"===typeof Float32Array;function u(t,e){return 1-3*e+3*t}function c(t,e){return 3*e-6*t}function l(t){return 3*t}function h(t,e,n){return((u(e,n)*t+c(e,n))*t+l(e))*t}function f(t,e,n){return 3*u(e,n)*t*t+2*c(e,n)*t+l(e)}function p(t){this._p=t,this._mSampleValues=s?new Float32Array(o):new Array(o),this._precomputed=!1,this.get=this.get.bind(this)}return p.prototype={get:function(t){var e=this._p[0],n=this._p[1],r=this._p[2],i=this._p[3];return this._precomputed||this._precompute(),e===n&&r===i?t:0===t?0:1===t?1:h(this._getTForX(t),n,i)},_precompute:function(){var t=this._p[0],e=this._p[1],n=this._p[2],r=this._p[3];this._precomputed=!0,t===e&&n===r||this._calcSampleValues()},_calcSampleValues:function(){for(var t=this._p[0],e=this._p[2],n=0;n<o;++n)this._mSampleValues[n]=h(n*a,t,e)},_getTForX:function(t){for(var e=this._p[0],s=this._p[2],u=this._mSampleValues,c=0,l=1,p=o-1;l!==p&&u[l]<=t;++l)c+=a;var d=c+(t-u[--l])/(u[l+1]-u[l])*a,m=f(d,e,s);return m>=.001?function(t,e,r,i){for(var o=0;o<n;++o){var a=f(e,r,i);if(0===a)return e;e-=(h(e,r,i)-t)/a}return e}(t,d,e,s):0===m?d:function(t,e,n,o,a){var s,u,c=0;do{(s=h(u=e+(n-e)/2,o,a)-t)>0?n=u:e=u}while(Math.abs(s)>r&&++c<i);return u}(t,c,c+a,e,s)}},t}();function extendPrototype(t,e){var n,r,i=t.length;for(n=0;n<i;n+=1)for(var o in r=t[n].prototype)r.hasOwnProperty(o)&&(e.prototype[o]=r[o])}function getDescriptor(t,e){return Object.getOwnPropertyDescriptor(t,e)}function createProxyFunction(t){function e(){}return e.prototype=t,e}function bezFunction(){Math;function t(t,e,n,r,i,o){var a=t*r+e*i+n*o-i*r-o*t-n*e;return a>-.001&&a<.001}var e=function(t,e,n,r){var i,o,a,s,u,c,l=defaultCurveSegments,h=0,f=[],p=[],d=bezier_length_pool.newElement();for(a=n.length,i=0;i<l;i+=1){for(u=i/(l-1),c=0,o=0;o<a;o+=1)s=bm_pow(1-u,3)*t[o]+3*bm_pow(1-u,2)*u*n[o]+3*(1-u)*bm_pow(u,2)*r[o]+bm_pow(u,3)*e[o],f[o]=s,null!==p[o]&&(c+=bm_pow(f[o]-p[o],2)),p[o]=f[o];c&&(h+=c=bm_sqrt(c)),d.percents[i]=u,d.lengths[i]=h}return d.addedLength=h,d};function n(t){this.segmentLength=0,this.points=new Array(t)}function r(t,e){this.partialLength=t,this.point=e}var i=function(){var e={};return function(i,o,a,s){var u=(i[0]+"_"+i[1]+"_"+o[0]+"_"+o[1]+"_"+a[0]+"_"+a[1]+"_"+s[0]+"_"+s[1]).replace(/\./g,"p");if(!e[u]){var c,l,h,f,p,d,m,y=defaultCurveSegments,g=0,v=null;2===i.length&&(i[0]!=o[0]||i[1]!=o[1])&&t(i[0],i[1],o[0],o[1],i[0]+a[0],i[1]+a[1])&&t(i[0],i[1],o[0],o[1],o[0]+s[0],o[1]+s[1])&&(y=2);var b=new n(y);for(h=a.length,c=0;c<y;c+=1){for(m=createSizedArray(h),p=c/(y-1),d=0,l=0;l<h;l+=1)f=bm_pow(1-p,3)*i[l]+3*bm_pow(1-p,2)*p*(i[l]+a[l])+3*(1-p)*bm_pow(p,2)*(o[l]+s[l])+bm_pow(p,3)*o[l],m[l]=f,null!==v&&(d+=bm_pow(m[l]-v[l],2));g+=d=bm_sqrt(d),b.points[c]=new r(d,m),v=m}b.segmentLength=g,e[u]=b}return e[u]}}();function o(t,e){var n=e.percents,r=e.lengths,i=n.length,o=bm_floor((i-1)*t),a=t*e.addedLength,s=0;if(o===i-1||0===o||a===r[o])return n[o];for(var u=r[o]>a?-1:1,c=!0;c;)if(r[o]<=a&&r[o+1]>a?(s=(a-r[o])/(r[o+1]-r[o]),c=!1):o+=u,o<0||o>=i-1){if(o===i-1)return n[o];c=!1}return n[o]+(n[o+1]-n[o])*s}var a=createTypedArray("float32",8);return{getSegmentsLength:function(t){var n,r=segments_length_pool.newElement(),i=t.c,o=t.v,a=t.o,s=t.i,u=t._length,c=r.lengths,l=0;for(n=0;n<u-1;n+=1)c[n]=e(o[n],o[n+1],a[n],s[n+1]),l+=c[n].addedLength;return i&&u&&(c[n]=e(o[n],o[0],a[n],s[0]),l+=c[n].addedLength),r.totalLength=l,r},getNewSegment:function(t,e,n,r,i,s,u){var c,l=o(i=i<0?0:i>1?1:i,u),h=o(s=s>1?1:s,u),f=t.length,p=1-l,d=1-h,m=p*p*p,y=l*p*p*3,g=l*l*p*3,v=l*l*l,b=p*p*d,_=l*p*d+p*l*d+p*p*h,w=l*l*d+p*l*h+l*p*h,E=l*l*h,S=p*d*d,T=l*d*d+p*h*d+p*d*h,C=l*h*d+p*h*h+l*d*h,k=l*h*h,x=d*d*d,I=h*d*d+d*h*d+d*d*h,A=h*h*d+d*h*h+h*d*h,P=h*h*h;for(c=0;c<f;c+=1)a[4*c]=Math.round(1e3*(m*t[c]+y*n[c]+g*r[c]+v*e[c]))/1e3,a[4*c+1]=Math.round(1e3*(b*t[c]+_*n[c]+w*r[c]+E*e[c]))/1e3,a[4*c+2]=Math.round(1e3*(S*t[c]+T*n[c]+C*r[c]+k*e[c]))/1e3,a[4*c+3]=Math.round(1e3*(x*t[c]+I*n[c]+A*r[c]+P*e[c]))/1e3;return a},getPointInSegment:function(t,e,n,r,i,a){var s=o(i,a),u=1-s;return[Math.round(1e3*(u*u*u*t[0]+(s*u*u+u*s*u+u*u*s)*n[0]+(s*s*u+u*s*s+s*u*s)*r[0]+s*s*s*e[0]))/1e3,Math.round(1e3*(u*u*u*t[1]+(s*u*u+u*s*u+u*u*s)*n[1]+(s*s*u+u*s*s+s*u*s)*r[1]+s*s*s*e[1]))/1e3]},buildBezierData:i,pointOnLine2D:t,pointOnLine3D:function(e,n,r,i,o,a,s,u,c){if(0===r&&0===a&&0===c)return t(e,n,i,o,s,u);var l,h=Math.sqrt(Math.pow(i-e,2)+Math.pow(o-n,2)+Math.pow(a-r,2)),f=Math.sqrt(Math.pow(s-e,2)+Math.pow(u-n,2)+Math.pow(c-r,2)),p=Math.sqrt(Math.pow(s-i,2)+Math.pow(u-o,2)+Math.pow(c-a,2));return(l=h>f?h>p?h-f-p:p-f-h:p>f?p-f-h:f-h-p)>-1e-4&&l<1e-4}}}!function(){for(var t=0,e=["ms","moz","webkit","o"],n=0;n<e.length&&!window.requestAnimationFrame;++n)window.requestAnimationFrame=window[e[n]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[e[n]+"CancelAnimationFrame"]||window[e[n]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(e,n){var r=(new Date).getTime(),i=Math.max(0,16-(r-t)),o=setTimeout(function(){e(r+i)},i);return t=r+i,o}),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(t){clearTimeout(t)})}();var bez=bezFunction();function dataFunctionManager(){function t(t,e){for(var n=0,r=e.length;n<r;){if(e[n].id===t)return e[n].layers.__used?JSON.parse(JSON.stringify(e[n].layers)):(e[n].layers.__used=!0,e[n].layers);n+=1}}function e(t){var r,i,o;for(r=t.length-1;r>=0;r-=1)if("sh"==t[r].ty){if(t[r].ks.k.i)n(t[r].ks.k);else for(o=t[r].ks.k.length,i=0;i<o;i+=1)t[r].ks.k[i].s&&n(t[r].ks.k[i].s[0]),t[r].ks.k[i].e&&n(t[r].ks.k[i].e[0]);!0}else"gr"==t[r].ty&&e(t[r].it)}function n(t){var e,n=t.i.length;for(e=0;e<n;e+=1)t.i[e][0]+=t.v[e][0],t.i[e][1]+=t.v[e][1],t.o[e][0]+=t.v[e][0],t.o[e][1]+=t.v[e][1]}function r(t,e){var n=e?e.split("."):[100,100,100];return t[0]>n[0]||!(n[0]>t[0])&&(t[1]>n[1]||!(n[1]>t[1])&&(t[2]>n[2]||!(n[2]>t[2])&&void 0))}var i=function(){var t=[4,4,14];function e(t){var e=t.t.d;t.t.d={k:[{s:e,t:0}]}}function n(t){var n,r=t.length;for(n=0;n<r;n+=1)5===t[n].ty&&e(t[n])}return function(e){if(r(t,e.v)&&(n(e.layers),e.assets)){var i,o=e.assets.length;for(i=0;i<o;i+=1)e.assets[i].layers&&n(e.assets[i].layers)}}}(),o=function(){var t=[4,7,99];return function(e){if(e.chars&&!r(t,e.v)){var i,o,a,s,u,c=e.chars.length;for(i=0;i<c;i+=1)if(e.chars[i].data&&e.chars[i].data.shapes)for(a=(u=e.chars[i].data.shapes[0].it).length,o=0;o<a;o+=1)(s=u[o].ks.k).__converted||(n(u[o].ks.k),s.__converted=!0)}}}(),a=function(){var t=[4,1,9];function e(t){var n,r,i,o=t.length;for(n=0;n<o;n+=1)if("gr"===t[n].ty)e(t[n].it);else if("fl"===t[n].ty||"st"===t[n].ty)if(t[n].c.k&&t[n].c.k[0].i)for(i=t[n].c.k.length,r=0;r<i;r+=1)t[n].c.k[r].s&&(t[n].c.k[r].s[0]/=255,t[n].c.k[r].s[1]/=255,t[n].c.k[r].s[2]/=255,t[n].c.k[r].s[3]/=255),t[n].c.k[r].e&&(t[n].c.k[r].e[0]/=255,t[n].c.k[r].e[1]/=255,t[n].c.k[r].e[2]/=255,t[n].c.k[r].e[3]/=255);else t[n].c.k[0]/=255,t[n].c.k[1]/=255,t[n].c.k[2]/=255,t[n].c.k[3]/=255}function n(t){var n,r=t.length;for(n=0;n<r;n+=1)4===t[n].ty&&e(t[n].shapes)}return function(e){if(r(t,e.v)&&(n(e.layers),e.assets)){var i,o=e.assets.length;for(i=0;i<o;i+=1)e.assets[i].layers&&n(e.assets[i].layers)}}}(),s=function(){var t=[4,4,18];function e(t){var n,r,i;for(n=t.length-1;n>=0;n-=1)if("sh"==t[n].ty){if(t[n].ks.k.i)t[n].ks.k.c=t[n].closed;else for(i=t[n].ks.k.length,r=0;r<i;r+=1)t[n].ks.k[r].s&&(t[n].ks.k[r].s[0].c=t[n].closed),t[n].ks.k[r].e&&(t[n].ks.k[r].e[0].c=t[n].closed);!0}else"gr"==t[n].ty&&e(t[n].it)}function n(t){var n,r,i,o,a,s,u=t.length;for(r=0;r<u;r+=1){if((n=t[r]).hasMask){var c=n.masksProperties;for(o=c.length,i=0;i<o;i+=1)if(c[i].pt.k.i)c[i].pt.k.c=c[i].cl;else for(s=c[i].pt.k.length,a=0;a<s;a+=1)c[i].pt.k[a].s&&(c[i].pt.k[a].s[0].c=c[i].cl),c[i].pt.k[a].e&&(c[i].pt.k[a].e[0].c=c[i].cl)}4===n.ty&&e(n.shapes)}}return function(e){if(r(t,e.v)&&(n(e.layers),e.assets)){var i,o=e.assets.length;for(i=0;i<o;i+=1)e.assets[i].layers&&n(e.assets[i].layers)}}}();var u={};return u.completeData=function(r,u){r.__complete||(a(r),i(r),o(r),s(r),function r(i,o,a){var s,u,c,l,h,f,p,d=i.length;for(u=0;u<d;u+=1)if("ks"in(s=i[u])&&!s.completed){if(s.completed=!0,s.tt&&(i[u-1].td=s.tt),s.hasMask){var m=s.masksProperties;for(l=m.length,c=0;c<l;c+=1)if(m[c].pt.k.i)n(m[c].pt.k);else for(f=m[c].pt.k.length,h=0;h<f;h+=1)m[c].pt.k[h].s&&n(m[c].pt.k[h].s[0]),m[c].pt.k[h].e&&n(m[c].pt.k[h].e[0])}0===s.ty?(s.layers=t(s.refId,o),r(s.layers,o,a)):4===s.ty?e(s.shapes):5==s.ty&&(0!==(p=s).t.a.length||"m"in p.t.p||(p.singleShape=!0))}}(r.layers,r.assets,u),r.__complete=!0)},u}var dataManager=dataFunctionManager(),FontManager=function(){var t=5e3,e={w:0,size:0,shapes:[]},n=[];function r(t,e){var n=createTag("span");n.style.fontFamily=e;var r=createTag("span");r.innerHTML="giItT1WQy@!-/#",n.style.position="absolute",n.style.left="-10000px",n.style.top="-10000px",n.style.fontSize="300px",n.style.fontVariant="normal",n.style.fontStyle="normal",n.style.fontWeight="normal",n.style.letterSpacing="0",n.appendChild(r),document.body.appendChild(n);var i=r.offsetWidth;return r.style.fontFamily=t+", "+e,{node:r,w:i,parent:n}}function i(t,e){var n=createNS("text");return n.style.fontSize="100px",n.setAttribute("font-family",e.fFamily),n.setAttribute("font-style",e.fStyle),n.setAttribute("font-weight",e.fWeight),n.textContent="1",e.fClass?(n.style.fontFamily="inherit",n.setAttribute("class",e.fClass)):n.style.fontFamily=e.fFamily,t.appendChild(n),createTag("canvas").getContext("2d").font=e.fWeight+" "+e.fStyle+" 100px "+e.fFamily,n}n=n.concat([2304,2305,2306,2307,2362,2363,2364,2364,2366,2367,2368,2369,2370,2371,2372,2373,2374,2375,2376,2377,2378,2379,2380,2381,2382,2383,2387,2388,2389,2390,2391,2402,2403]);var o=function(){this.fonts=[],this.chars=null,this.typekitLoaded=0,this.isLoaded=!1,this.initTime=Date.now()};return o.getCombinedCharacterCodes=function(){return n},o.prototype.addChars=function(t){if(t){this.chars||(this.chars=[]);var e,n,r,i=t.length,o=this.chars.length;for(e=0;e<i;e+=1){for(n=0,r=!1;n<o;)this.chars[n].style===t[e].style&&this.chars[n].fFamily===t[e].fFamily&&this.chars[n].ch===t[e].ch&&(r=!0),n+=1;r||(this.chars.push(t[e]),o+=1)}}},o.prototype.addFonts=function(t,e){if(t){if(this.chars)return this.isLoaded=!0,void(this.fonts=t.list);var n,o=t.list,a=o.length,s=a;for(n=0;n<a;n+=1){var u,c,l=!0;if(o[n].loaded=!1,o[n].monoCase=r(o[n].fFamily,"monospace"),o[n].sansCase=r(o[n].fFamily,"sans-serif"),o[n].fPath){if("p"===o[n].fOrigin||3===o[n].origin){if((u=document.querySelectorAll('style[f-forigin="p"][f-family="'+o[n].fFamily+'"], style[f-origin="3"][f-family="'+o[n].fFamily+'"]')).length>0&&(l=!1),l){var h=createTag("style");h.setAttribute("f-forigin",o[n].fOrigin),h.setAttribute("f-origin",o[n].origin),h.setAttribute("f-family",o[n].fFamily),h.type="text/css",h.innerHTML="@font-face {font-family: "+o[n].fFamily+"; font-style: normal; src: url('"+o[n].fPath+"');}",e.appendChild(h)}}else if("g"===o[n].fOrigin||1===o[n].origin){for(u=document.querySelectorAll('link[f-forigin="g"], link[f-origin="1"]'),c=0;c<u.length;c++)-1!==u[c].href.indexOf(o[n].fPath)&&(l=!1);if(l){var f=createTag("link");f.setAttribute("f-forigin",o[n].fOrigin),f.setAttribute("f-origin",o[n].origin),f.type="text/css",f.rel="stylesheet",f.href=o[n].fPath,document.body.appendChild(f)}}else if("t"===o[n].fOrigin||2===o[n].origin){for(u=document.querySelectorAll('script[f-forigin="t"], script[f-origin="2"]'),c=0;c<u.length;c++)o[n].fPath===u[c].src&&(l=!1);if(l){var p=createTag("link");p.setAttribute("f-forigin",o[n].fOrigin),p.setAttribute("f-origin",o[n].origin),p.setAttribute("rel","stylesheet"),p.setAttribute("href",o[n].fPath),e.appendChild(p)}}}else o[n].loaded=!0,s-=1;o[n].helper=i(e,o[n]),o[n].cache={},this.fonts.push(o[n])}0===s?this.isLoaded=!0:setTimeout(this.checkLoadedFonts.bind(this),100)}else this.isLoaded=!0},o.prototype.getCharData=function(t,n,r){for(var i=0,o=this.chars.length;i<o;){if(this.chars[i].ch===t&&this.chars[i].style===n&&this.chars[i].fFamily===r)return this.chars[i];i+=1}return console&&console.warn&&console.warn("Missing character from exported characters list: ",t,n,r),e},o.prototype.getFontByName=function(t){for(var e=0,n=this.fonts.length;e<n;){if(this.fonts[e].fName===t)return this.fonts[e];e+=1}return this.fonts[0]},o.prototype.measureText=function(t,e,n){var r=this.getFontByName(e),i=t.charCodeAt(0);if(!r.cache[i+1]){var o=r.helper;if(" "===t){o.textContent="|"+t+"|";var a=o.getComputedTextLength();o.textContent="||";var s=o.getComputedTextLength();r.cache[i+1]=(a-s)/100}else o.textContent=t,r.cache[i+1]=o.getComputedTextLength()/100}return r.cache[i+1]*n},o.prototype.checkLoadedFonts=function(){var e,n,r,i=this.fonts.length,o=i;for(e=0;e<i;e+=1)this.fonts[e].loaded?o-=1:"n"===this.fonts[e].fOrigin||0===this.fonts[e].origin?this.fonts[e].loaded=!0:(n=this.fonts[e].monoCase.node,r=this.fonts[e].monoCase.w,n.offsetWidth!==r?(o-=1,this.fonts[e].loaded=!0):(n=this.fonts[e].sansCase.node,r=this.fonts[e].sansCase.w,n.offsetWidth!==r&&(o-=1,this.fonts[e].loaded=!0)),this.fonts[e].loaded&&(this.fonts[e].sansCase.parent.parentNode.removeChild(this.fonts[e].sansCase.parent),this.fonts[e].monoCase.parent.parentNode.removeChild(this.fonts[e].monoCase.parent)));0!==o&&Date.now()-this.initTime<t?setTimeout(this.checkLoadedFonts.bind(this),20):setTimeout(function(){this.isLoaded=!0}.bind(this),0)},o.prototype.loaded=function(){return this.isLoaded},o}(),PropertyFactory=function(){var t=initialDefaultFrame,e=Math.abs;function n(t,e){var n,i=this.offsetTime;"multidimensional"===this.propType&&(n=createTypedArray("float32",this.pv.length));for(var o,a,s,u,c,l,h,f,p=e.lastIndex,d=p,m=this.keyframes.length-1,y=!0;y;){if(o=this.keyframes[d],a=this.keyframes[d+1],d===m-1&&t>=a.t-i){o.h&&(o=a),p=0;break}if(a.t-i>t){p=d;break}d<m-1?d+=1:(p=0,y=!1)}var g,v=a.t-i,b=o.t-i;if(o.to){o.bezierData||(o.bezierData=bez.buildBezierData(o.s,a.s||o.e,o.to,o.ti));var _=o.bezierData;if(t>=v||t<b){var w=t>=v?_.points.length-1:0;for(u=_.points[w].point.length,s=0;s<u;s+=1)n[s]=_.points[w].point[s]}else{o.__fnct?f=o.__fnct:(f=BezierFactory.getBezierEasing(o.o.x,o.o.y,o.i.x,o.i.y,o.n).get,o.__fnct=f),c=f((t-b)/(v-b));var E,S=_.segmentLength*c,T=e.lastFrame<t&&e._lastKeyframeIndex===d?e._lastAddedLength:0;for(h=e.lastFrame<t&&e._lastKeyframeIndex===d?e._lastPoint:0,y=!0,l=_.points.length;y;){if(T+=_.points[h].partialLength,0===S||0===c||h===_.points.length-1){for(u=_.points[h].point.length,s=0;s<u;s+=1)n[s]=_.points[h].point[s];break}if(S>=T&&S<T+_.points[h+1].partialLength){for(E=(S-T)/_.points[h+1].partialLength,u=_.points[h].point.length,s=0;s<u;s+=1)n[s]=_.points[h].point[s]+(_.points[h+1].point[s]-_.points[h].point[s])*E;break}h<l-1?h+=1:y=!1}e._lastPoint=h,e._lastAddedLength=T-_.points[h].partialLength,e._lastKeyframeIndex=d}}else{var C,k,x,I,A;if(m=o.s.length,g=a.s||o.e,this.sh&&1!==o.h)if(t>=v)n[0]=g[0],n[1]=g[1],n[2]=g[2];else if(t<=b)n[0]=o.s[0],n[1]=o.s[1],n[2]=o.s[2];else{!function(t,e){var n=e[0],r=e[1],i=e[2],o=e[3],a=Math.atan2(2*r*o-2*n*i,1-2*r*r-2*i*i),s=Math.asin(2*n*r+2*i*o),u=Math.atan2(2*n*o-2*r*i,1-2*n*n-2*i*i);t[0]=a/degToRads,t[1]=s/degToRads,t[2]=u/degToRads}(n,function(t,e,n){var r,i,o,a,s,u=[],c=t[0],l=t[1],h=t[2],f=t[3],p=e[0],d=e[1],m=e[2],y=e[3];(i=c*p+l*d+h*m+f*y)<0&&(i=-i,p=-p,d=-d,m=-m,y=-y);1-i>1e-6?(r=Math.acos(i),o=Math.sin(r),a=Math.sin((1-n)*r)/o,s=Math.sin(n*r)/o):(a=1-n,s=n);return u[0]=a*c+s*p,u[1]=a*l+s*d,u[2]=a*h+s*m,u[3]=a*f+s*y,u}(r(o.s),r(g),(t-b)/(v-b)))}else for(d=0;d<m;d+=1)1!==o.h&&(t>=v?c=1:t<b?c=0:(o.o.x.constructor===Array?(o.__fnct||(o.__fnct=[]),o.__fnct[d]?f=o.__fnct[d]:(C="undefined"===typeof o.o.x[d]?o.o.x[0]:o.o.x[d],k="undefined"===typeof o.o.y[d]?o.o.y[0]:o.o.y[d],x="undefined"===typeof o.i.x[d]?o.i.x[0]:o.i.x[d],I="undefined"===typeof o.i.y[d]?o.i.y[0]:o.i.y[d],f=BezierFactory.getBezierEasing(C,k,x,I).get,o.__fnct[d]=f)):o.__fnct?f=o.__fnct:(C=o.o.x,k=o.o.y,x=o.i.x,I=o.i.y,f=BezierFactory.getBezierEasing(C,k,x,I).get,o.__fnct=f),c=f((t-b)/(v-b)))),g=a.s||o.e,A=1===o.h?o.s[d]:o.s[d]+(g[d]-o.s[d])*c,1===m?n=A:n[d]=A}return e.lastIndex=p,n}function r(t){var e=t[0]*degToRads,n=t[1]*degToRads,r=t[2]*degToRads,i=Math.cos(e/2),o=Math.cos(n/2),a=Math.cos(r/2),s=Math.sin(e/2),u=Math.sin(n/2),c=Math.sin(r/2);return[s*u*a+i*o*c,s*o*a+i*u*c,i*u*a-s*o*c,i*o*a-s*u*c]}function i(){var e=this.comp.renderedFrame-this.offsetTime,n=this.keyframes[0].t-this.offsetTime,r=this.keyframes[this.keyframes.length-1].t-this.offsetTime;if(!(e===this._caching.lastFrame||this._caching.lastFrame!==t&&(this._caching.lastFrame>=r&&e>=r||this._caching.lastFrame<n&&e<n))){this._caching.lastFrame>=e&&(this._caching._lastKeyframeIndex=-1,this._caching.lastIndex=0);var i=this.interpolateValue(e,this._caching);this.pv=i}return this._caching.lastFrame=e,this.pv}function o(t){var n;if("unidimensional"===this.propType)n=t*this.mult,e(this.v-n)>1e-5&&(this.v=n,this._mdf=!0);else for(var r=0,i=this.v.length;r<i;)n=t[r]*this.mult,e(this.v[r]-n)>1e-5&&(this.v[r]=n,this._mdf=!0),r+=1}function a(){if(this.elem.globalData.frameId!==this.frameId&&this.effectsSequence.length)if(this.lock)this.setVValue(this.pv);else{this.lock=!0,this._mdf=this._isFirstFrame;var t,e=this.effectsSequence.length,n=this.kf?this.pv:this.data.k;for(t=0;t<e;t+=1)n=this.effectsSequence[t](n);this.setVValue(n),this._isFirstFrame=!1,this.lock=!1,this.frameId=this.elem.globalData.frameId}}function s(t){this.effectsSequence.push(t),this.container.addDynamicProperty(this)}function u(t,e,n,r){this.propType="unidimensional",this.mult=n||1,this.data=e,this.v=n?e.k*n:e.k,this.pv=e.k,this._mdf=!1,this.elem=t,this.container=r,this.comp=t.comp,this.k=!1,this.kf=!1,this.vel=0,this.effectsSequence=[],this._isFirstFrame=!0,this.getValue=a,this.setVValue=o,this.addEffect=s}function c(t,e,n,r){this.propType="multidimensional",this.mult=n||1,this.data=e,this._mdf=!1,this.elem=t,this.container=r,this.comp=t.comp,this.k=!1,this.kf=!1,this.frameId=-1;var i,u=e.k.length;this.v=createTypedArray("float32",u),this.pv=createTypedArray("float32",u);createTypedArray("float32",u);for(this.vel=createTypedArray("float32",u),i=0;i<u;i+=1)this.v[i]=e.k[i]*this.mult,this.pv[i]=e.k[i];this._isFirstFrame=!0,this.effectsSequence=[],this.getValue=a,this.setVValue=o,this.addEffect=s}function l(e,r,u,c){this.propType="unidimensional",this.keyframes=r.k,this.offsetTime=e.data.st,this.frameId=-1,this._caching={lastFrame:t,lastIndex:0,value:0,_lastKeyframeIndex:-1},this.k=!0,this.kf=!0,this.data=r,this.mult=u||1,this.elem=e,this.container=c,this.comp=e.comp,this.v=t,this.pv=t,this._isFirstFrame=!0,this.getValue=a,this.setVValue=o,this.interpolateValue=n,this.effectsSequence=[i.bind(this)],this.addEffect=s}function h(e,r,u,c){this.propType="multidimensional";var l,h,f,p,d,m=r.k.length;for(l=0;l<m-1;l+=1)r.k[l].to&&r.k[l].s&&r.k[l].e&&(h=r.k[l].s,f=r.k[l].e,p=r.k[l].to,d=r.k[l].ti,(2===h.length&&(h[0]!==f[0]||h[1]!==f[1])&&bez.pointOnLine2D(h[0],h[1],f[0],f[1],h[0]+p[0],h[1]+p[1])&&bez.pointOnLine2D(h[0],h[1],f[0],f[1],f[0]+d[0],f[1]+d[1])||3===h.length&&(h[0]!==f[0]||h[1]!==f[1]||h[2]!==f[2])&&bez.pointOnLine3D(h[0],h[1],h[2],f[0],f[1],f[2],h[0]+p[0],h[1]+p[1],h[2]+p[2])&&bez.pointOnLine3D(h[0],h[1],h[2],f[0],f[1],f[2],f[0]+d[0],f[1]+d[1],f[2]+d[2]))&&(r.k[l].to=null,r.k[l].ti=null),h[0]===f[0]&&h[1]===f[1]&&0===p[0]&&0===p[1]&&0===d[0]&&0===d[1]&&(2===h.length||h[2]===f[2]&&0===p[2]&&0===d[2])&&(r.k[l].to=null,r.k[l].ti=null));this.effectsSequence=[i.bind(this)],this.keyframes=r.k,this.offsetTime=e.data.st,this.k=!0,this.kf=!0,this._isFirstFrame=!0,this.mult=u||1,this.elem=e,this.container=c,this.comp=e.comp,this.getValue=a,this.setVValue=o,this.interpolateValue=n,this.frameId=-1;var y=r.k[0].s.length;for(this.v=createTypedArray("float32",y),this.pv=createTypedArray("float32",y),l=0;l<y;l+=1)this.v[l]=t,this.pv[l]=t;this._caching={lastFrame:t,lastIndex:0,value:createTypedArray("float32",y)},this.addEffect=s}return{getProp:function(t,e,n,r,i){var o;if(e.k.length)if("number"===typeof e.k[0])o=new c(t,e,r,i);else switch(n){case 0:o=new l(t,e,r,i);break;case 1:o=new h(t,e,r,i)}else o=new u(t,e,r,i);return o.effectsSequence.length&&i.addDynamicProperty(o),o}}}(),TransformPropertyFactory=function(){function t(t,e,n){if(this.elem=t,this.frameId=-1,this.propType="transform",this.data=e,this.v=new Matrix,this.pre=new Matrix,this.appliedTransformations=0,this.initDynamicPropertyContainer(n||t),e.p&&e.p.s?(this.px=PropertyFactory.getProp(t,e.p.x,0,0,this),this.py=PropertyFactory.getProp(t,e.p.y,0,0,this),e.p.z&&(this.pz=PropertyFactory.getProp(t,e.p.z,0,0,this))):this.p=PropertyFactory.getProp(t,e.p||{k:[0,0,0]},1,0,this),e.rx){if(this.rx=PropertyFactory.getProp(t,e.rx,0,degToRads,this),this.ry=PropertyFactory.getProp(t,e.ry,0,degToRads,this),this.rz=PropertyFactory.getProp(t,e.rz,0,degToRads,this),e.or.k[0].ti){var r,i=e.or.k.length;for(r=0;r<i;r+=1)e.or.k[r].to=e.or.k[r].ti=null}this.or=PropertyFactory.getProp(t,e.or,1,degToRads,this),this.or.sh=!0}else this.r=PropertyFactory.getProp(t,e.r||{k:0},0,degToRads,this);e.sk&&(this.sk=PropertyFactory.getProp(t,e.sk,0,degToRads,this),this.sa=PropertyFactory.getProp(t,e.sa,0,degToRads,this)),this.a=PropertyFactory.getProp(t,e.a||{k:[0,0,0]},1,0,this),this.s=PropertyFactory.getProp(t,e.s||{k:[100,100,100]},1,.01,this),e.o?this.o=PropertyFactory.getProp(t,e.o,0,.01,t):this.o={_mdf:!1,v:1},this._isDirty=!0,this.dynamicProperties.length||this.getValue(!0)}return t.prototype={applyToMatrix:function(t){var e=this._mdf;this.iterateDynamicProperties(),this._mdf=this._mdf||e,this.a&&t.translate(-this.a.v[0],-this.a.v[1],this.a.v[2]),this.s&&t.scale(this.s.v[0],this.s.v[1],this.s.v[2]),this.sk&&t.skewFromAxis(-this.sk.v,this.sa.v),this.r?t.rotate(-this.r.v):t.rotateZ(-this.rz.v).rotateY(this.ry.v).rotateX(this.rx.v).rotateZ(-this.or.v[2]).rotateY(this.or.v[1]).rotateX(this.or.v[0]),this.data.p.s?this.data.p.z?t.translate(this.px.v,this.py.v,-this.pz.v):t.translate(this.px.v,this.py.v,0):t.translate(this.p.v[0],this.p.v[1],-this.p.v[2])},getValue:function(t){if(this.elem.globalData.frameId!==this.frameId){if(this._isDirty&&(this.precalculateMatrix(),this._isDirty=!1),this.iterateDynamicProperties(),this._mdf||t){if(this.v.cloneFromProps(this.pre.props),this.appliedTransformations<1&&this.v.translate(-this.a.v[0],-this.a.v[1],this.a.v[2]),this.appliedTransformations<2&&this.v.scale(this.s.v[0],this.s.v[1],this.s.v[2]),this.sk&&this.appliedTransformations<3&&this.v.skewFromAxis(-this.sk.v,this.sa.v),this.r&&this.appliedTransformations<4?this.v.rotate(-this.r.v):!this.r&&this.appliedTransformations<4&&this.v.rotateZ(-this.rz.v).rotateY(this.ry.v).rotateX(this.rx.v).rotateZ(-this.or.v[2]).rotateY(this.or.v[1]).rotateX(this.or.v[0]),this.autoOriented){var e,n,r=this.elem.globalData.frameRate;if(this.p&&this.p.keyframes&&this.p.getValueAtTime)this.p._caching.lastFrame+this.p.offsetTime<=this.p.keyframes[0].t?(e=this.p.getValueAtTime((this.p.keyframes[0].t+.01)/r,0),n=this.p.getValueAtTime(this.p.keyframes[0].t/r,0)):this.p._caching.lastFrame+this.p.offsetTime>=this.p.keyframes[this.p.keyframes.length-1].t?(e=this.p.getValueAtTime(this.p.keyframes[this.p.keyframes.length-1].t/r,0),n=this.p.getValueAtTime((this.p.keyframes[this.p.keyframes.length-1].t-.01)/r,0)):(e=this.p.pv,n=this.p.getValueAtTime((this.p._caching.lastFrame+this.p.offsetTime-.01)/r,this.p.offsetTime));else if(this.px&&this.px.keyframes&&this.py.keyframes&&this.px.getValueAtTime&&this.py.getValueAtTime){e=[],n=[];var i=this.px,o=this.py;i._caching.lastFrame+i.offsetTime<=i.keyframes[0].t?(e[0]=i.getValueAtTime((i.keyframes[0].t+.01)/r,0),e[1]=o.getValueAtTime((o.keyframes[0].t+.01)/r,0),n[0]=i.getValueAtTime(i.keyframes[0].t/r,0),n[1]=o.getValueAtTime(o.keyframes[0].t/r,0)):i._caching.lastFrame+i.offsetTime>=i.keyframes[i.keyframes.length-1].t?(e[0]=i.getValueAtTime(i.keyframes[i.keyframes.length-1].t/r,0),e[1]=o.getValueAtTime(o.keyframes[o.keyframes.length-1].t/r,0),n[0]=i.getValueAtTime((i.keyframes[i.keyframes.length-1].t-.01)/r,0),n[1]=o.getValueAtTime((o.keyframes[o.keyframes.length-1].t-.01)/r,0)):(e=[i.pv,o.pv],n[0]=i.getValueAtTime((i._caching.lastFrame+i.offsetTime-.01)/r,i.offsetTime),n[1]=o.getValueAtTime((o._caching.lastFrame+o.offsetTime-.01)/r,o.offsetTime))}this.v.rotate(-Math.atan2(e[1]-n[1],e[0]-n[0]))}this.data.p&&this.data.p.s?this.data.p.z?this.v.translate(this.px.v,this.py.v,-this.pz.v):this.v.translate(this.px.v,this.py.v,0):this.v.translate(this.p.v[0],this.p.v[1],-this.p.v[2])}this.frameId=this.elem.globalData.frameId}},precalculateMatrix:function(){if(!this.a.k&&(this.pre.translate(-this.a.v[0],-this.a.v[1],this.a.v[2]),this.appliedTransformations=1,!this.s.effectsSequence.length)){if(this.pre.scale(this.s.v[0],this.s.v[1],this.s.v[2]),this.appliedTransformations=2,this.sk){if(this.sk.effectsSequence.length||this.sa.effectsSequence.length)return;this.pre.skewFromAxis(-this.sk.v,this.sa.v),this.appliedTransformations=3}if(this.r){if(this.r.effectsSequence.length)return;this.pre.rotate(-this.r.v),this.appliedTransformations=4}else this.rz.effectsSequence.length||this.ry.effectsSequence.length||this.rx.effectsSequence.length||this.or.effectsSequence.length||(this.pre.rotateZ(-this.rz.v).rotateY(this.ry.v).rotateX(this.rx.v).rotateZ(-this.or.v[2]).rotateY(this.or.v[1]).rotateX(this.or.v[0]),this.appliedTransformations=4)}},autoOrient:function(){}},extendPrototype([DynamicPropertyContainer],t),t.prototype.addDynamicProperty=function(t){this._addDynamicProperty(t),this.elem.addDynamicProperty(t),this._isDirty=!0},t.prototype._addDynamicProperty=DynamicPropertyContainer.prototype.addDynamicProperty,{getTransformProperty:function(e,n,r){return new t(e,n,r)}}}();function ShapePath(){this.c=!1,this._length=0,this._maxLength=8,this.v=createSizedArray(this._maxLength),this.o=createSizedArray(this._maxLength),this.i=createSizedArray(this._maxLength)}ShapePath.prototype.setPathData=function(t,e){this.c=t,this.setLength(e);for(var n=0;n<e;)this.v[n]=point_pool.newElement(),this.o[n]=point_pool.newElement(),this.i[n]=point_pool.newElement(),n+=1},ShapePath.prototype.setLength=function(t){for(;this._maxLength<t;)this.doubleArrayLength();this._length=t},ShapePath.prototype.doubleArrayLength=function(){this.v=this.v.concat(createSizedArray(this._maxLength)),this.i=this.i.concat(createSizedArray(this._maxLength)),this.o=this.o.concat(createSizedArray(this._maxLength)),this._maxLength*=2},ShapePath.prototype.setXYAt=function(t,e,n,r,i){var o;switch(this._length=Math.max(this._length,r+1),this._length>=this._maxLength&&this.doubleArrayLength(),n){case"v":o=this.v;break;case"i":o=this.i;break;case"o":o=this.o}(!o[r]||o[r]&&!i)&&(o[r]=point_pool.newElement()),o[r][0]=t,o[r][1]=e},ShapePath.prototype.setTripleAt=function(t,e,n,r,i,o,a,s){this.setXYAt(t,e,"v",a,s),this.setXYAt(n,r,"o",a,s),this.setXYAt(i,o,"i",a,s)},ShapePath.prototype.reverse=function(){var t=new ShapePath;t.setPathData(this.c,this._length);var e=this.v,n=this.o,r=this.i,i=0;this.c&&(t.setTripleAt(e[0][0],e[0][1],r[0][0],r[0][1],n[0][0],n[0][1],0,!1),i=1);var o,a=this._length-1,s=this._length;for(o=i;o<s;o+=1)t.setTripleAt(e[a][0],e[a][1],r[a][0],r[a][1],n[a][0],n[a][1],o,!1),a-=1;return t};var ShapePropertyFactory=function(){var t=-999999;function e(t,e,n){var r,i,o,a,s,u,c,l,h,f=n.lastIndex,p=this.keyframes;if(t<p[0].t-this.offsetTime)r=p[0].s[0],o=!0,f=0;else if(t>=p[p.length-1].t-this.offsetTime)r=p[p.length-1].s?p[p.length-1].s[0]:p[p.length-2].e[0],o=!0;else{for(var d,m,y=f,g=p.length-1,v=!0;v&&(d=p[y],!((m=p[y+1]).t-this.offsetTime>t));)y<g-1?y+=1:v=!1;if(f=y,!(o=1===d.h)){if(t>=m.t-this.offsetTime)l=1;else if(t<d.t-this.offsetTime)l=0;else{var b;d.__fnct?b=d.__fnct:(b=BezierFactory.getBezierEasing(d.o.x,d.o.y,d.i.x,d.i.y).get,d.__fnct=b),l=b((t-(d.t-this.offsetTime))/(m.t-this.offsetTime-(d.t-this.offsetTime)))}i=m.s?m.s[0]:d.e[0]}r=d.s[0]}for(u=e._length,c=r.i[0].length,n.lastIndex=f,a=0;a<u;a+=1)for(s=0;s<c;s+=1)h=o?r.i[a][s]:r.i[a][s]+(i.i[a][s]-r.i[a][s])*l,e.i[a][s]=h,h=o?r.o[a][s]:r.o[a][s]+(i.o[a][s]-r.o[a][s])*l,e.o[a][s]=h,h=o?r.v[a][s]:r.v[a][s]+(i.v[a][s]-r.v[a][s])*l,e.v[a][s]=h}function n(){var e=this.comp.renderedFrame-this.offsetTime,n=this.keyframes[0].t-this.offsetTime,r=this.keyframes[this.keyframes.length-1].t-this.offsetTime,i=this._caching.lastFrame;return i!==t&&(i<n&&e<n||i>r&&e>r)||(this._caching.lastIndex=i<e?this._caching.lastIndex:0,this.interpolateShape(e,this.pv,this._caching)),this._caching.lastFrame=e,this.pv}function r(){this.paths=this.localShapeCollection}function i(t){(function(t,e){if(t._length!==e._length||t.c!==e.c)return!1;var n,r=t._length;for(n=0;n<r;n+=1)if(t.v[n][0]!==e.v[n][0]||t.v[n][1]!==e.v[n][1]||t.o[n][0]!==e.o[n][0]||t.o[n][1]!==e.o[n][1]||t.i[n][0]!==e.i[n][0]||t.i[n][1]!==e.i[n][1])return!1;return!0})(this.v,t)||(this.v=shape_pool.clone(t),this.localShapeCollection.releaseShapes(),this.localShapeCollection.addShape(this.v),this._mdf=!0,this.paths=this.localShapeCollection)}function o(){if(this.elem.globalData.frameId!==this.frameId&&this.effectsSequence.length)if(this.lock)this.setVValue(this.pv);else{this.lock=!0,this._mdf=!1;var t,e=this.kf?this.pv:this.data.ks?this.data.ks.k:this.data.pt.k,n=this.effectsSequence.length;for(t=0;t<n;t+=1)e=this.effectsSequence[t](e);this.setVValue(e),this.lock=!1,this.frameId=this.elem.globalData.frameId}}function a(t,e,n){this.propType="shape",this.comp=t.comp,this.container=t,this.elem=t,this.data=e,this.k=!1,this.kf=!1,this._mdf=!1;var i=3===n?e.pt.k:e.ks.k;this.v=shape_pool.clone(i),this.pv=shape_pool.clone(this.v),this.localShapeCollection=shapeCollection_pool.newShapeCollection(),this.paths=this.localShapeCollection,this.paths.addShape(this.v),this.reset=r,this.effectsSequence=[]}function s(t){this.effectsSequence.push(t),this.container.addDynamicProperty(this)}function u(e,i,o){this.propType="shape",this.comp=e.comp,this.elem=e,this.container=e,this.offsetTime=e.data.st,this.keyframes=3===o?i.pt.k:i.ks.k,this.k=!0,this.kf=!0;var a=this.keyframes[0].s[0].i.length;this.keyframes[0].s[0].i[0].length;this.v=shape_pool.newElement(),this.v.setPathData(this.keyframes[0].s[0].c,a),this.pv=shape_pool.clone(this.v),this.localShapeCollection=shapeCollection_pool.newShapeCollection(),this.paths=this.localShapeCollection,this.paths.addShape(this.v),this.lastFrame=t,this.reset=r,this._caching={lastFrame:t,lastIndex:0},this.effectsSequence=[n.bind(this)]}a.prototype.interpolateShape=e,a.prototype.getValue=o,a.prototype.setVValue=i,a.prototype.addEffect=s,u.prototype.getValue=o,u.prototype.interpolateShape=e,u.prototype.setVValue=i,u.prototype.addEffect=s;var c=function(){var t=roundCorner;function e(t,e){this.v=shape_pool.newElement(),this.v.setPathData(!0,4),this.localShapeCollection=shapeCollection_pool.newShapeCollection(),this.paths=this.localShapeCollection,this.localShapeCollection.addShape(this.v),this.d=e.d,this.elem=t,this.comp=t.comp,this.frameId=-1,this.initDynamicPropertyContainer(t),this.p=PropertyFactory.getProp(t,e.p,1,0,this),this.s=PropertyFactory.getProp(t,e.s,1,0,this),this.dynamicProperties.length?this.k=!0:(this.k=!1,this.convertEllToPath())}return e.prototype={reset:r,getValue:function(){this.elem.globalData.frameId!==this.frameId&&(this.frameId=this.elem.globalData.frameId,this.iterateDynamicProperties(),this._mdf&&this.convertEllToPath())},convertEllToPath:function(){var e=this.p.v[0],n=this.p.v[1],r=this.s.v[0]/2,i=this.s.v[1]/2,o=3!==this.d,a=this.v;a.v[0][0]=e,a.v[0][1]=n-i,a.v[1][0]=o?e+r:e-r,a.v[1][1]=n,a.v[2][0]=e,a.v[2][1]=n+i,a.v[3][0]=o?e-r:e+r,a.v[3][1]=n,a.i[0][0]=o?e-r*t:e+r*t,a.i[0][1]=n-i,a.i[1][0]=o?e+r:e-r,a.i[1][1]=n-i*t,a.i[2][0]=o?e+r*t:e-r*t,a.i[2][1]=n+i,a.i[3][0]=o?e-r:e+r,a.i[3][1]=n+i*t,a.o[0][0]=o?e+r*t:e-r*t,a.o[0][1]=n-i,a.o[1][0]=o?e+r:e-r,a.o[1][1]=n+i*t,a.o[2][0]=o?e-r*t:e+r*t,a.o[2][1]=n+i,a.o[3][0]=o?e-r:e+r,a.o[3][1]=n-i*t}},extendPrototype([DynamicPropertyContainer],e),e}(),l=function(){function t(t,e){this.v=shape_pool.newElement(),this.v.setPathData(!0,0),this.elem=t,this.comp=t.comp,this.data=e,this.frameId=-1,this.d=e.d,this.initDynamicPropertyContainer(t),1===e.sy?(this.ir=PropertyFactory.getProp(t,e.ir,0,0,this),this.is=PropertyFactory.getProp(t,e.is,0,.01,this),this.convertToPath=this.convertStarToPath):this.convertToPath=this.convertPolygonToPath,this.pt=PropertyFactory.getProp(t,e.pt,0,0,this),this.p=PropertyFactory.getProp(t,e.p,1,0,this),this.r=PropertyFactory.getProp(t,e.r,0,degToRads,this),this.or=PropertyFactory.getProp(t,e.or,0,0,this),this.os=PropertyFactory.getProp(t,e.os,0,.01,this),this.localShapeCollection=shapeCollection_pool.newShapeCollection(),this.localShapeCollection.addShape(this.v),this.paths=this.localShapeCollection,this.dynamicProperties.length?this.k=!0:(this.k=!1,this.convertToPath())}return t.prototype={reset:r,getValue:function(){this.elem.globalData.frameId!==this.frameId&&(this.frameId=this.elem.globalData.frameId,this.iterateDynamicProperties(),this._mdf&&this.convertToPath())},convertStarToPath:function(){var t,e,n,r,i=2*Math.floor(this.pt.v),o=2*Math.PI/i,a=!0,s=this.or.v,u=this.ir.v,c=this.os.v,l=this.is.v,h=2*Math.PI*s/(2*i),f=2*Math.PI*u/(2*i),p=-Math.PI/2;p+=this.r.v;var d=3===this.data.d?-1:1;for(this.v._length=0,t=0;t<i;t+=1){n=a?c:l,r=a?h:f;var m=(e=a?s:u)*Math.cos(p),y=e*Math.sin(p),g=0===m&&0===y?0:y/Math.sqrt(m*m+y*y),v=0===m&&0===y?0:-m/Math.sqrt(m*m+y*y);m+=+this.p.v[0],y+=+this.p.v[1],this.v.setTripleAt(m,y,m-g*r*n*d,y-v*r*n*d,m+g*r*n*d,y+v*r*n*d,t,!0),a=!a,p+=o*d}},convertPolygonToPath:function(){var t,e=Math.floor(this.pt.v),n=2*Math.PI/e,r=this.or.v,i=this.os.v,o=2*Math.PI*r/(4*e),a=-Math.PI/2,s=3===this.data.d?-1:1;for(a+=this.r.v,this.v._length=0,t=0;t<e;t+=1){var u=r*Math.cos(a),c=r*Math.sin(a),l=0===u&&0===c?0:c/Math.sqrt(u*u+c*c),h=0===u&&0===c?0:-u/Math.sqrt(u*u+c*c);u+=+this.p.v[0],c+=+this.p.v[1],this.v.setTripleAt(u,c,u-l*o*i*s,c-h*o*i*s,u+l*o*i*s,c+h*o*i*s,t,!0),a+=n*s}this.paths.length=0,this.paths[0]=this.v}},extendPrototype([DynamicPropertyContainer],t),t}(),h=function(){function t(t,e){this.v=shape_pool.newElement(),this.v.c=!0,this.localShapeCollection=shapeCollection_pool.newShapeCollection(),this.localShapeCollection.addShape(this.v),this.paths=this.localShapeCollection,this.elem=t,this.comp=t.comp,this.frameId=-1,this.d=e.d,this.initDynamicPropertyContainer(t),this.p=PropertyFactory.getProp(t,e.p,1,0,this),this.s=PropertyFactory.getProp(t,e.s,1,0,this),this.r=PropertyFactory.getProp(t,e.r,0,0,this),this.dynamicProperties.length?this.k=!0:(this.k=!1,this.convertRectToPath())}return t.prototype={convertRectToPath:function(){var t=this.p.v[0],e=this.p.v[1],n=this.s.v[0]/2,r=this.s.v[1]/2,i=bm_min(n,r,this.r.v),o=i*(1-roundCorner);this.v._length=0,2===this.d||1===this.d?(this.v.setTripleAt(t+n,e-r+i,t+n,e-r+i,t+n,e-r+o,0,!0),this.v.setTripleAt(t+n,e+r-i,t+n,e+r-o,t+n,e+r-i,1,!0),0!==i?(this.v.setTripleAt(t+n-i,e+r,t+n-i,e+r,t+n-o,e+r,2,!0),this.v.setTripleAt(t-n+i,e+r,t-n+o,e+r,t-n+i,e+r,3,!0),this.v.setTripleAt(t-n,e+r-i,t-n,e+r-i,t-n,e+r-o,4,!0),this.v.setTripleAt(t-n,e-r+i,t-n,e-r+o,t-n,e-r+i,5,!0),this.v.setTripleAt(t-n+i,e-r,t-n+i,e-r,t-n+o,e-r,6,!0),this.v.setTripleAt(t+n-i,e-r,t+n-o,e-r,t+n-i,e-r,7,!0)):(this.v.setTripleAt(t-n,e+r,t-n+o,e+r,t-n,e+r,2),this.v.setTripleAt(t-n,e-r,t-n,e-r+o,t-n,e-r,3))):(this.v.setTripleAt(t+n,e-r+i,t+n,e-r+o,t+n,e-r+i,0,!0),0!==i?(this.v.setTripleAt(t+n-i,e-r,t+n-i,e-r,t+n-o,e-r,1,!0),this.v.setTripleAt(t-n+i,e-r,t-n+o,e-r,t-n+i,e-r,2,!0),this.v.setTripleAt(t-n,e-r+i,t-n,e-r+i,t-n,e-r+o,3,!0),this.v.setTripleAt(t-n,e+r-i,t-n,e+r-o,t-n,e+r-i,4,!0),this.v.setTripleAt(t-n+i,e+r,t-n+i,e+r,t-n+o,e+r,5,!0),this.v.setTripleAt(t+n-i,e+r,t+n-o,e+r,t+n-i,e+r,6,!0),this.v.setTripleAt(t+n,e+r-i,t+n,e+r-i,t+n,e+r-o,7,!0)):(this.v.setTripleAt(t-n,e-r,t-n+o,e-r,t-n,e-r,1,!0),this.v.setTripleAt(t-n,e+r,t-n,e+r-o,t-n,e+r,2,!0),this.v.setTripleAt(t+n,e+r,t+n-o,e+r,t+n,e+r,3,!0)))},getValue:function(t){this.elem.globalData.frameId!==this.frameId&&(this.frameId=this.elem.globalData.frameId,this.iterateDynamicProperties(),this._mdf&&this.convertRectToPath())},reset:r},extendPrototype([DynamicPropertyContainer],t),t}();var f={getShapeProp:function(t,e,n){var r;return 3===n||4===n?r=(3===n?e.pt:e.ks).k.length?new u(t,e,n):new a(t,e,n):5===n?r=new h(t,e):6===n?r=new c(t,e):7===n&&(r=new l(t,e)),r.k&&t.addDynamicProperty(r),r},getConstructorFunction:function(){return a},getKeyframedConstructorFunction:function(){return u}};return f}(),ShapeModifiers=function(){var t={},e={};return t.registerModifier=function(t,n){e[t]||(e[t]=n)},t.getModifier=function(t,n,r){return new e[t](n,r)},t}();function ShapeModifier(){}function TrimModifier(){}function RoundCornersModifier(){}function RepeaterModifier(){}function ShapeCollection(){this._length=0,this._maxLength=4,this.shapes=createSizedArray(this._maxLength)}function DashProperty(t,e,n,r){this.elem=t,this.frameId=-1,this.dataProps=createSizedArray(e.length),this.renderer=n,this.k=!1,this.dashStr="",this.dashArray=createTypedArray("float32",e.length?e.length-1:0),this.dashoffset=createTypedArray("float32",1),this.initDynamicPropertyContainer(r);var i,o,a=e.length||0;for(i=0;i<a;i+=1)o=PropertyFactory.getProp(t,e[i].v,0,0,this),this.k=o.k||this.k,this.dataProps[i]={n:e[i].n,p:o};this.k||this.getValue(!0),this._isAnimated=this.k}function GradientProperty(t,e,n){this.data=e,this.c=createTypedArray("uint8c",4*e.p);var r=e.k.k[0].s?e.k.k[0].s.length-4*e.p:e.k.k.length-4*e.p;this.o=createTypedArray("float32",r),this._cmdf=!1,this._omdf=!1,this._collapsable=this.checkCollapsable(),this._hasOpacity=r,this.initDynamicPropertyContainer(n),this.prop=PropertyFactory.getProp(t,e.k,1,null,this),this.k=this.prop.k,this.getValue(!0)}ShapeModifier.prototype.initModifierProperties=function(){},ShapeModifier.prototype.addShapeToModifier=function(){},ShapeModifier.prototype.addShape=function(t){if(!this.closed){var e={shape:t.sh,data:t,localShapeCollection:shapeCollection_pool.newShapeCollection()};this.shapes.push(e),this.addShapeToModifier(e),this._isAnimated&&t.setAsAnimated()}},ShapeModifier.prototype.init=function(t,e){this.shapes=[],this.elem=t,this.initDynamicPropertyContainer(t),this.initModifierProperties(t,e),this.frameId=initialDefaultFrame,this.closed=!1,this.k=!1,this.dynamicProperties.length?this.k=!0:this.getValue(!0)},ShapeModifier.prototype.processKeys=function(){this.elem.globalData.frameId!==this.frameId&&(this.frameId=this.elem.globalData.frameId,this.iterateDynamicProperties())},extendPrototype([DynamicPropertyContainer],ShapeModifier),extendPrototype([ShapeModifier],TrimModifier),TrimModifier.prototype.initModifierProperties=function(t,e){this.s=PropertyFactory.getProp(t,e.s,0,.01,this),this.e=PropertyFactory.getProp(t,e.e,0,.01,this),this.o=PropertyFactory.getProp(t,e.o,0,0,this),this.sValue=0,this.eValue=0,this.getValue=this.processKeys,this.m=e.m,this._isAnimated=!!this.s.effectsSequence.length||!!this.e.effectsSequence.length||!!this.o.effectsSequence.length},TrimModifier.prototype.addShapeToModifier=function(t){t.pathsData=[]},TrimModifier.prototype.calculateShapeEdges=function(t,e,n,r,i){var o=[];e<=1?o.push({s:t,e:e}):t>=1?o.push({s:t-1,e:e-1}):(o.push({s:t,e:1}),o.push({s:0,e:e-1}));var a,s,u=[],c=o.length;for(a=0;a<c;a+=1){var l,h;if((s=o[a]).e*i<r||s.s*i>r+n);else l=s.s*i<=r?0:(s.s*i-r)/n,h=s.e*i>=r+n?1:(s.e*i-r)/n,u.push([l,h])}return u.length||u.push([0,0]),u},TrimModifier.prototype.releasePathsData=function(t){var e,n=t.length;for(e=0;e<n;e+=1)segments_length_pool.release(t[e]);return t.length=0,t},TrimModifier.prototype.processShapes=function(t){var e,n,r;if(this._mdf||t){var i=this.o.v%360/360;if(i<0&&(i+=1),(e=(this.s.v>1?1:this.s.v<0?0:this.s.v)+i)>(n=(this.e.v>1?1:this.e.v<0?0:this.e.v)+i)){var o=e;e=n,n=o}e=1e-4*Math.round(1e4*e),n=1e-4*Math.round(1e4*n),this.sValue=e,this.eValue=n}else e=this.sValue,n=this.eValue;var a,s,u,c,l,h,f=this.shapes.length,p=0;if(n===e)for(a=0;a<f;a+=1)this.shapes[a].localShapeCollection.releaseShapes(),this.shapes[a].shape._mdf=!0,this.shapes[a].shape.paths=this.shapes[a].localShapeCollection;else if(1===n&&0===e||0===n&&1===e){if(this._mdf)for(a=0;a<f;a+=1)this.shapes[a].pathsData.length=0,this.shapes[a].shape._mdf=!0}else{var d,m,y=[];for(a=0;a<f;a+=1)if((d=this.shapes[a]).shape._mdf||this._mdf||t||2===this.m){if(u=(r=d.shape.paths)._length,h=0,!d.shape._mdf&&d.pathsData.length)h=d.totalShapeLength;else{for(c=this.releasePathsData(d.pathsData),s=0;s<u;s+=1)l=bez.getSegmentsLength(r.shapes[s]),c.push(l),h+=l.totalLength;d.totalShapeLength=h,d.pathsData=c}p+=h,d.shape._mdf=!0}else d.shape.paths=d.localShapeCollection;var g,v=e,b=n,_=0;for(a=f-1;a>=0;a-=1)if((d=this.shapes[a]).shape._mdf){for((m=d.localShapeCollection).releaseShapes(),2===this.m&&f>1?(g=this.calculateShapeEdges(e,n,d.totalShapeLength,_,p),_+=d.totalShapeLength):g=[[v,b]],u=g.length,s=0;s<u;s+=1){v=g[s][0],b=g[s][1],y.length=0,b<=1?y.push({s:d.totalShapeLength*v,e:d.totalShapeLength*b}):v>=1?y.push({s:d.totalShapeLength*(v-1),e:d.totalShapeLength*(b-1)}):(y.push({s:d.totalShapeLength*v,e:d.totalShapeLength}),y.push({s:0,e:d.totalShapeLength*(b-1)}));var w=this.addShapes(d,y[0]);if(y[0].s!==y[0].e){if(y.length>1)if(d.shape.paths.shapes[d.shape.paths._length-1].c){var E=w.pop();this.addPaths(w,m),w=this.addShapes(d,y[1],E)}else this.addPaths(w,m),w=this.addShapes(d,y[1]);this.addPaths(w,m)}}d.shape.paths=m}}},TrimModifier.prototype.addPaths=function(t,e){var n,r=t.length;for(n=0;n<r;n+=1)e.addShape(t[n])},TrimModifier.prototype.addSegment=function(t,e,n,r,i,o,a){i.setXYAt(e[0],e[1],"o",o),i.setXYAt(n[0],n[1],"i",o+1),a&&i.setXYAt(t[0],t[1],"v",o),i.setXYAt(r[0],r[1],"v",o+1)},TrimModifier.prototype.addSegmentFromArray=function(t,e,n,r){e.setXYAt(t[1],t[5],"o",n),e.setXYAt(t[2],t[6],"i",n+1),r&&e.setXYAt(t[0],t[4],"v",n),e.setXYAt(t[3],t[7],"v",n+1)},TrimModifier.prototype.addShapes=function(t,e,n){var r,i,o,a,s,u,c,l,h=t.pathsData,f=t.shape.paths.shapes,p=t.shape.paths._length,d=0,m=[],y=!0;for(n?(s=n._length,l=n._length):(n=shape_pool.newElement(),s=0,l=0),m.push(n),r=0;r<p;r+=1){for(u=h[r].lengths,n.c=f[r].c,o=f[r].c?u.length:u.length+1,i=1;i<o;i+=1)if(d+(a=u[i-1]).addedLength<e.s)d+=a.addedLength,n.c=!1;else{if(d>e.e){n.c=!1;break}e.s<=d&&e.e>=d+a.addedLength?(this.addSegment(f[r].v[i-1],f[r].o[i-1],f[r].i[i],f[r].v[i],n,s,y),y=!1):(c=bez.getNewSegment(f[r].v[i-1],f[r].v[i],f[r].o[i-1],f[r].i[i],(e.s-d)/a.addedLength,(e.e-d)/a.addedLength,u[i-1]),this.addSegmentFromArray(c,n,s,y),y=!1,n.c=!1),d+=a.addedLength,s+=1}if(f[r].c&&u.length){if(a=u[i-1],d<=e.e){var g=u[i-1].addedLength;e.s<=d&&e.e>=d+g?(this.addSegment(f[r].v[i-1],f[r].o[i-1],f[r].i[0],f[r].v[0],n,s,y),y=!1):(c=bez.getNewSegment(f[r].v[i-1],f[r].v[0],f[r].o[i-1],f[r].i[0],(e.s-d)/g,(e.e-d)/g,u[i-1]),this.addSegmentFromArray(c,n,s,y),y=!1,n.c=!1)}else n.c=!1;d+=a.addedLength,s+=1}if(n._length&&(n.setXYAt(n.v[l][0],n.v[l][1],"i",l),n.setXYAt(n.v[n._length-1][0],n.v[n._length-1][1],"o",n._length-1)),d>e.e)break;r<p-1&&(n=shape_pool.newElement(),y=!0,m.push(n),s=0)}return m},ShapeModifiers.registerModifier("tm",TrimModifier),extendPrototype([ShapeModifier],RoundCornersModifier),RoundCornersModifier.prototype.initModifierProperties=function(t,e){this.getValue=this.processKeys,this.rd=PropertyFactory.getProp(t,e.r,0,null,this),this._isAnimated=!!this.rd.effectsSequence.length},RoundCornersModifier.prototype.processPath=function(t,e){var n=shape_pool.newElement();n.c=t.c;var r,i,o,a,s,u,c,l,h,f,p,d,m,y=t._length,g=0;for(r=0;r<y;r+=1)i=t.v[r],a=t.o[r],o=t.i[r],i[0]===a[0]&&i[1]===a[1]&&i[0]===o[0]&&i[1]===o[1]?0!==r&&r!==y-1||t.c?(s=0===r?t.v[y-1]:t.v[r-1],c=(u=Math.sqrt(Math.pow(i[0]-s[0],2)+Math.pow(i[1]-s[1],2)))?Math.min(u/2,e)/u:0,l=d=i[0]+(s[0]-i[0])*c,h=m=i[1]-(i[1]-s[1])*c,f=l-(l-i[0])*roundCorner,p=h-(h-i[1])*roundCorner,n.setTripleAt(l,h,f,p,d,m,g),g+=1,s=r===y-1?t.v[0]:t.v[r+1],c=(u=Math.sqrt(Math.pow(i[0]-s[0],2)+Math.pow(i[1]-s[1],2)))?Math.min(u/2,e)/u:0,l=f=i[0]+(s[0]-i[0])*c,h=p=i[1]+(s[1]-i[1])*c,d=l-(l-i[0])*roundCorner,m=h-(h-i[1])*roundCorner,n.setTripleAt(l,h,f,p,d,m,g),g+=1):(n.setTripleAt(i[0],i[1],a[0],a[1],o[0],o[1],g),g+=1):(n.setTripleAt(t.v[r][0],t.v[r][1],t.o[r][0],t.o[r][1],t.i[r][0],t.i[r][1],g),g+=1);return n},RoundCornersModifier.prototype.processShapes=function(t){var e,n,r,i,o,a,s=this.shapes.length,u=this.rd.v;if(0!==u)for(n=0;n<s;n+=1){if((o=this.shapes[n]).shape.paths,a=o.localShapeCollection,o.shape._mdf||this._mdf||t)for(a.releaseShapes(),o.shape._mdf=!0,e=o.shape.paths.shapes,i=o.shape.paths._length,r=0;r<i;r+=1)a.addShape(this.processPath(e[r],u));o.shape.paths=o.localShapeCollection}this.dynamicProperties.length||(this._mdf=!1)},ShapeModifiers.registerModifier("rd",RoundCornersModifier),extendPrototype([ShapeModifier],RepeaterModifier),RepeaterModifier.prototype.initModifierProperties=function(t,e){this.getValue=this.processKeys,this.c=PropertyFactory.getProp(t,e.c,0,null,this),this.o=PropertyFactory.getProp(t,e.o,0,null,this),this.tr=TransformPropertyFactory.getTransformProperty(t,e.tr,this),this.so=PropertyFactory.getProp(t,e.tr.so,0,.01,this),this.eo=PropertyFactory.getProp(t,e.tr.eo,0,.01,this),this.data=e,this.dynamicProperties.length||this.getValue(!0),this._isAnimated=!!this.dynamicProperties.length,this.pMatrix=new Matrix,this.rMatrix=new Matrix,this.sMatrix=new Matrix,this.tMatrix=new Matrix,this.matrix=new Matrix},RepeaterModifier.prototype.applyTransforms=function(t,e,n,r,i,o){var a=o?-1:1,s=r.s.v[0]+(1-r.s.v[0])*(1-i),u=r.s.v[1]+(1-r.s.v[1])*(1-i);t.translate(r.p.v[0]*a*i,r.p.v[1]*a*i,r.p.v[2]),e.translate(-r.a.v[0],-r.a.v[1],r.a.v[2]),e.rotate(-r.r.v*a*i),e.translate(r.a.v[0],r.a.v[1],r.a.v[2]),n.translate(-r.a.v[0],-r.a.v[1],r.a.v[2]),n.scale(o?1/s:s,o?1/u:u),n.translate(r.a.v[0],r.a.v[1],r.a.v[2])},RepeaterModifier.prototype.init=function(t,e,n,r){this.elem=t,this.arr=e,this.pos=n,this.elemsData=r,this._currentCopies=0,this._elements=[],this._groups=[],this.frameId=-1,this.initDynamicPropertyContainer(t),this.initModifierProperties(t,e[n]);for(;n>0;)n-=1,this._elements.unshift(e[n]),1;this.dynamicProperties.length?this.k=!0:this.getValue(!0)},RepeaterModifier.prototype.resetElements=function(t){var e,n=t.length;for(e=0;e<n;e+=1)t[e]._processed=!1,"gr"===t[e].ty&&this.resetElements(t[e].it)},RepeaterModifier.prototype.cloneElements=function(t){t.length;var e=JSON.parse(JSON.stringify(t));return this.resetElements(e),e},RepeaterModifier.prototype.changeGroupRender=function(t,e){var n,r=t.length;for(n=0;n<r;n+=1)t[n]._render=e,"gr"===t[n].ty&&this.changeGroupRender(t[n].it,e)},RepeaterModifier.prototype.processShapes=function(t){var e,n,r,i,o;if(this._mdf||t){var a,s=Math.ceil(this.c.v);if(this._groups.length<s){for(;this._groups.length<s;){var u={it:this.cloneElements(this._elements),ty:"gr"};u.it.push({a:{a:0,ix:1,k:[0,0]},nm:"Transform",o:{a:0,ix:7,k:100},p:{a:0,ix:2,k:[0,0]},r:{a:1,ix:6,k:[{s:0,e:0,t:0},{s:0,e:0,t:1}]},s:{a:0,ix:3,k:[100,100]},sa:{a:0,ix:5,k:0},sk:{a:0,ix:4,k:0},ty:"tr"}),this.arr.splice(0,0,u),this._groups.splice(0,0,u),this._currentCopies+=1}this.elem.reloadShapes()}for(o=0,r=0;r<=this._groups.length-1;r+=1)a=o<s,this._groups[r]._render=a,this.changeGroupRender(this._groups[r].it,a),o+=1;this._currentCopies=s;var c=this.o.v,l=c%1,h=c>0?Math.floor(c):Math.ceil(c),f=(this.tr.v.props,this.pMatrix.props),p=this.rMatrix.props,d=this.sMatrix.props;this.pMatrix.reset(),this.rMatrix.reset(),this.sMatrix.reset(),this.tMatrix.reset(),this.matrix.reset();var m,y,g=0;if(c>0){for(;g<h;)this.applyTransforms(this.pMatrix,this.rMatrix,this.sMatrix,this.tr,1,!1),g+=1;l&&(this.applyTransforms(this.pMatrix,this.rMatrix,this.sMatrix,this.tr,l,!1),g+=l)}else if(c<0){for(;g>h;)this.applyTransforms(this.pMatrix,this.rMatrix,this.sMatrix,this.tr,1,!0),g-=1;l&&(this.applyTransforms(this.pMatrix,this.rMatrix,this.sMatrix,this.tr,-l,!0),g-=l)}for(r=1===this.data.m?0:this._currentCopies-1,i=1===this.data.m?1:-1,o=this._currentCopies;o;){if(y=(n=(e=this.elemsData[r].it)[e.length-1].transform.mProps.v.props).length,e[e.length-1].transform.mProps._mdf=!0,e[e.length-1].transform.op._mdf=!0,e[e.length-1].transform.op.v=this.so.v+(this.eo.v-this.so.v)*(r/(this._currentCopies-1)),0!==g){for((0!==r&&1===i||r!==this._currentCopies-1&&-1===i)&&this.applyTransforms(this.pMatrix,this.rMatrix,this.sMatrix,this.tr,1,!1),this.matrix.transform(p[0],p[1],p[2],p[3],p[4],p[5],p[6],p[7],p[8],p[9],p[10],p[11],p[12],p[13],p[14],p[15]),this.matrix.transform(d[0],d[1],d[2],d[3],d[4],d[5],d[6],d[7],d[8],d[9],d[10],d[11],d[12],d[13],d[14],d[15]),this.matrix.transform(f[0],f[1],f[2],f[3],f[4],f[5],f[6],f[7],f[8],f[9],f[10],f[11],f[12],f[13],f[14],f[15]),m=0;m<y;m+=1)n[m]=this.matrix.props[m];this.matrix.reset()}else for(this.matrix.reset(),m=0;m<y;m+=1)n[m]=this.matrix.props[m];g+=1,o-=1,r+=i}}else for(o=this._currentCopies,r=0,i=1;o;)n=(e=this.elemsData[r].it)[e.length-1].transform.mProps.v.props,e[e.length-1].transform.mProps._mdf=!1,e[e.length-1].transform.op._mdf=!1,o-=1,r+=i},RepeaterModifier.prototype.addShape=function(){},ShapeModifiers.registerModifier("rp",RepeaterModifier),ShapeCollection.prototype.addShape=function(t){this._length===this._maxLength&&(this.shapes=this.shapes.concat(createSizedArray(this._maxLength)),this._maxLength*=2),this.shapes[this._length]=t,this._length+=1},ShapeCollection.prototype.releaseShapes=function(){var t;for(t=0;t<this._length;t+=1)shape_pool.release(this.shapes[t]);this._length=0},DashProperty.prototype.getValue=function(t){if((this.elem.globalData.frameId!==this.frameId||t)&&(this.frameId=this.elem.globalData.frameId,this.iterateDynamicProperties(),this._mdf=this._mdf||t,this._mdf)){var e=0,n=this.dataProps.length;for("svg"===this.renderer&&(this.dashStr=""),e=0;e<n;e+=1)"o"!=this.dataProps[e].n?"svg"===this.renderer?this.dashStr+=" "+this.dataProps[e].p.v:this.dashArray[e]=this.dataProps[e].p.v:this.dashoffset[0]=this.dataProps[e].p.v}},extendPrototype([DynamicPropertyContainer],DashProperty),GradientProperty.prototype.comparePoints=function(t,e){for(var n=0,r=this.o.length/2;n<r;){if(Math.abs(t[4*n]-t[4*e+2*n])>.01)return!1;n+=1}return!0},GradientProperty.prototype.checkCollapsable=function(){if(this.o.length/2!==this.c.length/4)return!1;if(this.data.k.k[0].s)for(var t=0,e=this.data.k.k.length;t<e;){if(!this.comparePoints(this.data.k.k[t].s,this.data.p))return!1;t+=1}else if(!this.comparePoints(this.data.k.k,this.data.p))return!1;return!0},GradientProperty.prototype.getValue=function(t){if(this.prop.getValue(),this._mdf=!1,this._cmdf=!1,this._omdf=!1,this.prop._mdf||t){var e,n,r,i=4*this.data.p;for(e=0;e<i;e+=1)n=e%4===0?100:255,r=Math.round(this.prop.v[e]*n),this.c[e]!==r&&(this.c[e]=r,this._cmdf=!t);if(this.o.length)for(i=this.prop.v.length,e=4*this.data.p;e<i;e+=1)n=e%2===0?100:1,r=e%2===0?Math.round(100*this.prop.v[e]):this.prop.v[e],this.o[e-4*this.data.p]!==r&&(this.o[e-4*this.data.p]=r,this._omdf=!t);this._mdf=!t}},extendPrototype([DynamicPropertyContainer],GradientProperty);var buildShapeString=function(t,e,n,r){if(0===e)return"";var i,o=t.o,a=t.i,s=t.v,u=" M"+r.applyToPointStringified(s[0][0],s[0][1]);for(i=1;i<e;i+=1)u+=" C"+r.applyToPointStringified(o[i-1][0],o[i-1][1])+" "+r.applyToPointStringified(a[i][0],a[i][1])+" "+r.applyToPointStringified(s[i][0],s[i][1]);return n&&e&&(u+=" C"+r.applyToPointStringified(o[i-1][0],o[i-1][1])+" "+r.applyToPointStringified(a[0][0],a[0][1])+" "+r.applyToPointStringified(s[0][0],s[0][1]),u+="z"),u},ImagePreloader=function(){var t=function(){var t=createTag("canvas");t.width=1,t.height=1;var e=t.getContext("2d");return e.fillStyle="#FF0000",e.fillRect(0,0,1,1),t}();function e(){this.loadedAssets+=1,this.loadedAssets===this.totalImages&&this.imagesLoadedCb&&this.imagesLoadedCb(null)}function n(e){var n=function(t,e,n){var r="";if(t.e)r=t.p;else if(e){var i=t.p;-1!==i.indexOf("images/")&&(i=i.split("/")[1]),r=e+i}else r=n,r+=t.u?t.u:"",r+=t.p;return r}(e,this.assetsPath,this.path),r=createTag("img");r.crossOrigin="anonymous",r.addEventListener("load",this._imageLoaded.bind(this),!1),r.addEventListener("error",function(){i.img=t,this._imageLoaded()}.bind(this),!1),r.src=n;var i={img:r,assetData:e};return i}function r(t,e){this.imagesLoadedCb=e;var n,r=t.length;for(n=0;n<r;n+=1)t[n].layers||(this.totalImages+=1,this.images.push(this._createImageData(t[n])))}function i(t){this.path=t||""}function o(t){this.assetsPath=t||""}function a(t){for(var e=0,n=this.images.length;e<n;){if(this.images[e].assetData===t)return this.images[e].img;e+=1}}function s(){this.imagesLoadedCb=null,this.images.length=0}function u(){return this.totalImages===this.loadedAssets}return function(){this.loadAssets=r,this.setAssetsPath=o,this.setPath=i,this.loaded=u,this.destroy=s,this.getImage=a,this._createImageData=n,this._imageLoaded=e,this.assetsPath="",this.path="",this.totalImages=0,this.loadedAssets=0,this.imagesLoadedCb=null,this.images=[]}}(),featureSupport=function(){var t={maskType:!0};return(/MSIE 10/i.test(navigator.userAgent)||/MSIE 9/i.test(navigator.userAgent)||/rv:11.0/i.test(navigator.userAgent)||/Edge\/\d./i.test(navigator.userAgent))&&(t.maskType=!1),t}(),filtersFactory=function(){var t={};return t.createFilter=function(t){var e=createNS("filter");return e.setAttribute("id",t),e.setAttribute("filterUnits","objectBoundingBox"),e.setAttribute("x","0%"),e.setAttribute("y","0%"),e.setAttribute("width","100%"),e.setAttribute("height","100%"),e},t.createAlphaToLuminanceFilter=function(){var t=createNS("feColorMatrix");return t.setAttribute("type","matrix"),t.setAttribute("color-interpolation-filters","sRGB"),t.setAttribute("values","0 0 0 1 0  0 0 0 1 0  0 0 0 1 0  0 0 0 1 1"),t},t}(),assetLoader=function(){function t(t){return t.response&&"object"===typeof t.response?t.response:t.response&&"string"===typeof t.response?JSON.parse(t.response):t.responseText?JSON.parse(t.responseText):void 0}return{load:function(e,n,r){var i,o=new XMLHttpRequest;o.open("GET",e,!0);try{o.responseType="json"}catch(a){}o.send(),o.onreadystatechange=function(){if(4==o.readyState)if(200==o.status)i=t(o),n(i);else try{i=t(o),n(i)}catch(a){r&&r(a)}}}}}();function TextAnimatorProperty(t,e,n){this._isFirstFrame=!0,this._hasMaskedPath=!1,this._frameId=-1,this._textData=t,this._renderType=e,this._elem=n,this._animatorsData=createSizedArray(this._textData.a.length),this._pathData={},this._moreOptions={alignment:{}},this.renderedLetters=[],this.lettersChangedFlag=!1,this.initDynamicPropertyContainer(n)}function TextAnimatorDataProperty(t,e,n){var r={propType:!1},i=PropertyFactory.getProp,o=e.a;this.a={r:o.r?i(t,o.r,0,degToRads,n):r,rx:o.rx?i(t,o.rx,0,degToRads,n):r,ry:o.ry?i(t,o.ry,0,degToRads,n):r,sk:o.sk?i(t,o.sk,0,degToRads,n):r,sa:o.sa?i(t,o.sa,0,degToRads,n):r,s:o.s?i(t,o.s,1,.01,n):r,a:o.a?i(t,o.a,1,0,n):r,o:o.o?i(t,o.o,0,.01,n):r,p:o.p?i(t,o.p,1,0,n):r,sw:o.sw?i(t,o.sw,0,0,n):r,sc:o.sc?i(t,o.sc,1,0,n):r,fc:o.fc?i(t,o.fc,1,0,n):r,fh:o.fh?i(t,o.fh,0,0,n):r,fs:o.fs?i(t,o.fs,0,.01,n):r,fb:o.fb?i(t,o.fb,0,.01,n):r,t:o.t?i(t,o.t,0,0,n):r},this.s=TextSelectorProp.getTextSelectorProp(t,e.s,n),this.s.t=e.s.t}function LetterProps(t,e,n,r,i,o){this.o=t,this.sw=e,this.sc=n,this.fc=r,this.m=i,this.p=o,this._mdf={o:!0,sw:!!e,sc:!!n,fc:!!r,m:!0,p:!0}}function TextProperty(t,e){this._frameId=initialDefaultFrame,this.pv="",this.v="",this.kf=!1,this._isFirstFrame=!0,this._mdf=!1,this.data=e,this.elem=t,this.comp=this.elem.comp,this.keysIndex=0,this.canResize=!1,this.minimumFontSize=1,this.effectsSequence=[],this.currentData={ascent:0,boxWidth:this.defaultBoxWidth,f:"",fStyle:"",fWeight:"",fc:"",j:"",justifyOffset:"",l:[],lh:0,lineWidths:[],ls:"",of:"",s:"",sc:"",sw:0,t:0,tr:0,sz:0,ps:null,fillColorAnim:!1,strokeColorAnim:!1,strokeWidthAnim:!1,yOffset:0,finalSize:0,finalText:[],finalLineHeight:0,__complete:!1},this.copyData(this.currentData,this.data.d.k[0].s),this.searchProperty()||this.completeTextData(this.currentData)}TextAnimatorProperty.prototype.searchProperties=function(){var t,e,n=this._textData.a.length,r=PropertyFactory.getProp;for(t=0;t<n;t+=1)e=this._textData.a[t],this._animatorsData[t]=new TextAnimatorDataProperty(this._elem,e,this);this._textData.p&&"m"in this._textData.p?(this._pathData={f:r(this._elem,this._textData.p.f,0,0,this),l:r(this._elem,this._textData.p.l,0,0,this),r:this._textData.p.r,m:this._elem.maskManager.getMaskProperty(this._textData.p.m)},this._hasMaskedPath=!0):this._hasMaskedPath=!1,this._moreOptions.alignment=r(this._elem,this._textData.m.a,1,0,this)},TextAnimatorProperty.prototype.getMeasures=function(t,e){if(this.lettersChangedFlag=e,this._mdf||this._isFirstFrame||e||this._hasMaskedPath&&this._pathData.m._mdf){this._isFirstFrame=!1;var n,r,i,o,a,s,u,c,l,h,f,p,d,m,y,g,v,b,_,w=this._moreOptions.alignment.v,E=this._animatorsData,S=this._textData,T=this.mHelper,C=this._renderType,k=this.renderedLetters.length,x=(this.data,t.l);if(this._hasMaskedPath){if(_=this._pathData.m,!this._pathData.n||this._pathData._mdf){var I,A=_.v;for(this._pathData.r&&(A=A.reverse()),a={tLength:0,segments:[]},o=A._length-1,g=0,i=0;i<o;i+=1)I=bez.buildBezierData(A.v[i],A.v[i+1],[A.o[i][0]-A.v[i][0],A.o[i][1]-A.v[i][1]],[A.i[i+1][0]-A.v[i+1][0],A.i[i+1][1]-A.v[i+1][1]]),a.tLength+=I.segmentLength,a.segments.push(I),g+=I.segmentLength;i=o,_.v.c&&(I=bez.buildBezierData(A.v[i],A.v[0],[A.o[i][0]-A.v[i][0],A.o[i][1]-A.v[i][1]],[A.i[0][0]-A.v[0][0],A.i[0][1]-A.v[0][1]]),a.tLength+=I.segmentLength,a.segments.push(I),g+=I.segmentLength),this._pathData.pi=a}if(a=this._pathData.pi,s=this._pathData.f.v,f=0,h=1,c=0,l=!0,m=a.segments,s<0&&_.v.c)for(a.tLength<Math.abs(s)&&(s=-Math.abs(s)%a.tLength),h=(d=m[f=m.length-1].points).length-1;s<0;)s+=d[h].partialLength,(h-=1)<0&&(h=(d=m[f-=1].points).length-1);p=(d=m[f].points)[h-1],y=(u=d[h]).partialLength}o=x.length,n=0,r=0;var P,D,N,R,O=1.2*t.finalSize*.714,M=!0;N=E.length;var F,L,V,B,U,j,q,G,W,z,H,K,Q,Y=-1,X=s,$=f,J=h,Z=-1,tt="",et=this.defaultPropsArray;if(2===t.j||1===t.j){var nt=0,rt=0,it=2===t.j?-.5:-1,ot=0,at=!0;for(i=0;i<o;i+=1)if(x[i].n){for(nt&&(nt+=rt);ot<i;)x[ot].animatorJustifyOffset=nt,ot+=1;nt=0,at=!0}else{for(D=0;D<N;D+=1)(P=E[D].a).t.propType&&(at&&2===t.j&&(rt+=P.t.v*it),(F=E[D].s.getMult(x[i].anIndexes[D],S.a[D].s.totalChars)).length?nt+=P.t.v*F[0]*it:nt+=P.t.v*F*it);at=!1}for(nt&&(nt+=rt);ot<i;)x[ot].animatorJustifyOffset=nt,ot+=1}for(i=0;i<o;i+=1){if(T.reset(),U=1,x[i].n)n=0,r+=t.yOffset,r+=M?1:0,s=X,M=!1,0,this._hasMaskedPath&&(h=J,p=(d=m[f=$].points)[h-1],y=(u=d[h]).partialLength,c=0),Q=z=K=tt="",et=this.defaultPropsArray;else{if(this._hasMaskedPath){if(Z!==x[i].line){switch(t.j){case 1:s+=g-t.lineWidths[x[i].line];break;case 2:s+=(g-t.lineWidths[x[i].line])/2}Z=x[i].line}Y!==x[i].ind&&(x[Y]&&(s+=x[Y].extra),s+=x[i].an/2,Y=x[i].ind),s+=w[0]*x[i].an/200;var st=0;for(D=0;D<N;D+=1)(P=E[D].a).p.propType&&((F=E[D].s.getMult(x[i].anIndexes[D],S.a[D].s.totalChars)).length?st+=P.p.v[0]*F[0]:st+=P.p.v[0]*F),P.a.propType&&((F=E[D].s.getMult(x[i].anIndexes[D],S.a[D].s.totalChars)).length?st+=P.a.v[0]*F[0]:st+=P.a.v[0]*F);for(l=!0;l;)c+y>=s+st||!d?(v=(s+st-c)/u.partialLength,V=p.point[0]+(u.point[0]-p.point[0])*v,B=p.point[1]+(u.point[1]-p.point[1])*v,T.translate(-w[0]*x[i].an/200,-w[1]*O/100),l=!1):d&&(c+=u.partialLength,(h+=1)>=d.length&&(h=0,m[f+=1]?d=m[f].points:_.v.c?(h=0,d=m[f=0].points):(c-=u.partialLength,d=null)),d&&(p=u,y=(u=d[h]).partialLength));L=x[i].an/2-x[i].add,T.translate(-L,0,0)}else L=x[i].an/2-x[i].add,T.translate(-L,0,0),T.translate(-w[0]*x[i].an/200,-w[1]*O/100,0);for(x[i].l/2,D=0;D<N;D+=1)(P=E[D].a).t.propType&&(F=E[D].s.getMult(x[i].anIndexes[D],S.a[D].s.totalChars),0===n&&0===t.j||(this._hasMaskedPath?F.length?s+=P.t.v*F[0]:s+=P.t.v*F:F.length?n+=P.t.v*F[0]:n+=P.t.v*F));for(x[i].l/2,t.strokeWidthAnim&&(q=t.sw||0),t.strokeColorAnim&&(j=t.sc?[t.sc[0],t.sc[1],t.sc[2]]:[0,0,0]),t.fillColorAnim&&t.fc&&(G=[t.fc[0],t.fc[1],t.fc[2]]),D=0;D<N;D+=1)(P=E[D].a).a.propType&&((F=E[D].s.getMult(x[i].anIndexes[D],S.a[D].s.totalChars)).length?T.translate(-P.a.v[0]*F[0],-P.a.v[1]*F[1],P.a.v[2]*F[2]):T.translate(-P.a.v[0]*F,-P.a.v[1]*F,P.a.v[2]*F));for(D=0;D<N;D+=1)(P=E[D].a).s.propType&&((F=E[D].s.getMult(x[i].anIndexes[D],S.a[D].s.totalChars)).length?T.scale(1+(P.s.v[0]-1)*F[0],1+(P.s.v[1]-1)*F[1],1):T.scale(1+(P.s.v[0]-1)*F,1+(P.s.v[1]-1)*F,1));for(D=0;D<N;D+=1){if(P=E[D].a,F=E[D].s.getMult(x[i].anIndexes[D],S.a[D].s.totalChars),P.sk.propType&&(F.length?T.skewFromAxis(-P.sk.v*F[0],P.sa.v*F[1]):T.skewFromAxis(-P.sk.v*F,P.sa.v*F)),P.r.propType&&(F.length?T.rotateZ(-P.r.v*F[2]):T.rotateZ(-P.r.v*F)),P.ry.propType&&(F.length?T.rotateY(P.ry.v*F[1]):T.rotateY(P.ry.v*F)),P.rx.propType&&(F.length?T.rotateX(P.rx.v*F[0]):T.rotateX(P.rx.v*F)),P.o.propType&&(F.length?U+=(P.o.v*F[0]-U)*F[0]:U+=(P.o.v*F-U)*F),t.strokeWidthAnim&&P.sw.propType&&(F.length?q+=P.sw.v*F[0]:q+=P.sw.v*F),t.strokeColorAnim&&P.sc.propType)for(W=0;W<3;W+=1)F.length?j[W]=j[W]+(P.sc.v[W]-j[W])*F[0]:j[W]=j[W]+(P.sc.v[W]-j[W])*F;if(t.fillColorAnim&&t.fc){if(P.fc.propType)for(W=0;W<3;W+=1)F.length?G[W]=G[W]+(P.fc.v[W]-G[W])*F[0]:G[W]=G[W]+(P.fc.v[W]-G[W])*F;P.fh.propType&&(G=F.length?addHueToRGB(G,P.fh.v*F[0]):addHueToRGB(G,P.fh.v*F)),P.fs.propType&&(G=F.length?addSaturationToRGB(G,P.fs.v*F[0]):addSaturationToRGB(G,P.fs.v*F)),P.fb.propType&&(G=F.length?addBrightnessToRGB(G,P.fb.v*F[0]):addBrightnessToRGB(G,P.fb.v*F))}}for(D=0;D<N;D+=1)(P=E[D].a).p.propType&&(F=E[D].s.getMult(x[i].anIndexes[D],S.a[D].s.totalChars),this._hasMaskedPath?F.length?T.translate(0,P.p.v[1]*F[0],-P.p.v[2]*F[1]):T.translate(0,P.p.v[1]*F,-P.p.v[2]*F):F.length?T.translate(P.p.v[0]*F[0],P.p.v[1]*F[1],-P.p.v[2]*F[2]):T.translate(P.p.v[0]*F,P.p.v[1]*F,-P.p.v[2]*F));if(t.strokeWidthAnim&&(z=q<0?0:q),t.strokeColorAnim&&(H="rgb("+Math.round(255*j[0])+","+Math.round(255*j[1])+","+Math.round(255*j[2])+")"),t.fillColorAnim&&t.fc&&(K="rgb("+Math.round(255*G[0])+","+Math.round(255*G[1])+","+Math.round(255*G[2])+")"),this._hasMaskedPath){if(T.translate(0,-t.ls),T.translate(0,w[1]*O/100+r,0),S.p.p){b=(u.point[1]-p.point[1])/(u.point[0]-p.point[0]);var ut=180*Math.atan(b)/Math.PI;u.point[0]<p.point[0]&&(ut+=180),T.rotate(-ut*Math.PI/180)}T.translate(V,B,0),s-=w[0]*x[i].an/200,x[i+1]&&Y!==x[i+1].ind&&(s+=x[i].an/2,s+=t.tr/1e3*t.finalSize)}else{switch(T.translate(n,r,0),t.ps&&T.translate(t.ps[0],t.ps[1]+t.ascent,0),t.j){case 1:T.translate(x[i].animatorJustifyOffset+t.justifyOffset+(t.boxWidth-t.lineWidths[x[i].line]),0,0);break;case 2:T.translate(x[i].animatorJustifyOffset+t.justifyOffset+(t.boxWidth-t.lineWidths[x[i].line])/2,0,0)}T.translate(0,-t.ls),T.translate(L,0,0),T.translate(w[0]*x[i].an/200,w[1]*O/100,0),n+=x[i].l+t.tr/1e3*t.finalSize}"html"===C?tt=T.toCSS():"svg"===C?tt=T.to2dCSS():et=[T.props[0],T.props[1],T.props[2],T.props[3],T.props[4],T.props[5],T.props[6],T.props[7],T.props[8],T.props[9],T.props[10],T.props[11],T.props[12],T.props[13],T.props[14],T.props[15]],Q=U}k<=i?(R=new LetterProps(Q,z,H,K,tt,et),this.renderedLetters.push(R),k+=1,this.lettersChangedFlag=!0):(R=this.renderedLetters[i],this.lettersChangedFlag=R.update(Q,z,H,K,tt,et)||this.lettersChangedFlag)}}},TextAnimatorProperty.prototype.getValue=function(){this._elem.globalData.frameId!==this._frameId&&(this._frameId=this._elem.globalData.frameId,this.iterateDynamicProperties())},TextAnimatorProperty.prototype.mHelper=new Matrix,TextAnimatorProperty.prototype.defaultPropsArray=[],extendPrototype([DynamicPropertyContainer],TextAnimatorProperty),LetterProps.prototype.update=function(t,e,n,r,i,o){this._mdf.o=!1,this._mdf.sw=!1,this._mdf.sc=!1,this._mdf.fc=!1,this._mdf.m=!1,this._mdf.p=!1;var a=!1;return this.o!==t&&(this.o=t,this._mdf.o=!0,a=!0),this.sw!==e&&(this.sw=e,this._mdf.sw=!0,a=!0),this.sc!==n&&(this.sc=n,this._mdf.sc=!0,a=!0),this.fc!==r&&(this.fc=r,this._mdf.fc=!0,a=!0),this.m!==i&&(this.m=i,this._mdf.m=!0,a=!0),!o.length||this.p[0]===o[0]&&this.p[1]===o[1]&&this.p[4]===o[4]&&this.p[5]===o[5]&&this.p[12]===o[12]&&this.p[13]===o[13]||(this.p=o,this._mdf.p=!0,a=!0),a},TextProperty.prototype.defaultBoxWidth=[0,0],TextProperty.prototype.copyData=function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t},TextProperty.prototype.setCurrentData=function(t){t.__complete||this.completeTextData(t),this.currentData=t,this.currentData.boxWidth=this.currentData.boxWidth||this.defaultBoxWidth,this._mdf=!0},TextProperty.prototype.searchProperty=function(){return this.searchKeyframes()},TextProperty.prototype.searchKeyframes=function(){return this.kf=this.data.d.k.length>1,this.kf&&this.addEffect(this.getKeyframeValue.bind(this)),this.kf},TextProperty.prototype.addEffect=function(t){this.effectsSequence.push(t),this.elem.addDynamicProperty(this)},TextProperty.prototype.getValue=function(t){if(this.elem.globalData.frameId!==this.frameId&&this.effectsSequence.length||t){this.currentData.t=this.data.d.k[this.keysIndex].s.t;var e=this.currentData,n=this.keysIndex;if(this.lock)this.setCurrentData(this.currentData);else{this.lock=!0,this._mdf=!1;var r,i=this.effectsSequence.length,o=t||this.data.d.k[this.keysIndex].s;for(r=0;r<i;r+=1)o=n!==this.keysIndex?this.effectsSequence[r](o,o.t):this.effectsSequence[r](this.currentData,o.t);e!==o&&this.setCurrentData(o),this.pv=this.v=this.currentData,this.lock=!1,this.frameId=this.elem.globalData.frameId}}},TextProperty.prototype.getKeyframeValue=function(){for(var t=this.data.d.k,e=this.elem.comp.renderedFrame,n=0,r=t.length;n<=r-1&&(t[n].s,!(n===r-1||t[n+1].t>e));)n+=1;return this.keysIndex!==n&&(this.keysIndex=n),this.data.d.k[this.keysIndex].s},TextProperty.prototype.buildFinalText=function(t){for(var e=FontManager.getCombinedCharacterCodes(),n=[],r=0,i=t.length;r<i;)-1!==e.indexOf(t.charCodeAt(r))?n[n.length-1]+=t.charAt(r):n.push(t.charAt(r)),r+=1;return n},TextProperty.prototype.completeTextData=function(t){t.__complete=!0;var e,n,r,i,o,a,s,u=this.elem.globalData.fontManager,c=this.data,l=[],h=0,f=c.m.g,p=0,d=0,m=0,y=[],g=0,v=0,b=u.getFontByName(t.f),_=0,w=b.fStyle?b.fStyle.split(" "):[],E="normal",S="normal";for(n=w.length,e=0;e<n;e+=1)switch(w[e].toLowerCase()){case"italic":S="italic";break;case"bold":E="700";break;case"black":E="900";break;case"medium":E="500";break;case"regular":case"normal":E="400";break;case"light":case"thin":E="200"}t.fWeight=b.fWeight||E,t.fStyle=S,n=t.t.length,t.finalSize=t.s,t.finalText=this.buildFinalText(t.t),t.finalLineHeight=t.lh;var T,C=t.tr/1e3*t.finalSize;if(t.sz)for(var k,x,I=!0,A=t.sz[0],P=t.sz[1];I;){k=0,g=0,n=(x=this.buildFinalText(t.t)).length,C=t.tr/1e3*t.finalSize;var D=-1;for(e=0;e<n;e+=1)T=x[e].charCodeAt(0),r=!1," "===x[e]?D=e:13!==T&&3!==T||(g=0,r=!0,k+=t.finalLineHeight||1.2*t.finalSize),u.chars?(s=u.getCharData(x[e],b.fStyle,b.fFamily),_=r?0:s.w*t.finalSize/100):_=u.measureText(x[e],t.f,t.finalSize),g+_>A&&" "!==x[e]?(-1===D?n+=1:e=D,k+=t.finalLineHeight||1.2*t.finalSize,x.splice(e,D===e?1:0,"\r"),D=-1,g=0):(g+=_,g+=C);k+=b.ascent*t.finalSize/100,this.canResize&&t.finalSize>this.minimumFontSize&&P<k?(t.finalSize-=1,t.finalLineHeight=t.finalSize*t.lh/t.s):(t.finalText=x,n=t.finalText.length,I=!1)}g=-C,_=0;var N,R=0;for(e=0;e<n;e+=1)if(r=!1,T=(N=t.finalText[e]).charCodeAt(0)," "===N?i="\xa0":13===T||3===T?(R=0,y.push(g),v=g>v?g:v,g=-2*C,i="",r=!0,m+=1):i=t.finalText[e],u.chars?(s=u.getCharData(N,b.fStyle,u.getFontByName(t.f).fFamily),_=r?0:s.w*t.finalSize/100):_=u.measureText(i,t.f,t.finalSize)," "===N?R+=_+C:(g+=_+C+R,R=0),l.push({l:_,an:_,add:p,n:r,anIndexes:[],val:i,line:m,animatorJustifyOffset:0}),2==f){if(p+=_,""===i||"\xa0"===i||e===n-1){for(""!==i&&"\xa0"!==i||(p-=_);d<=e;)l[d].an=p,l[d].ind=h,l[d].extra=_,d+=1;h+=1,p=0}}else if(3==f){if(p+=_,""===i||e===n-1){for(""===i&&(p-=_);d<=e;)l[d].an=p,l[d].ind=h,l[d].extra=_,d+=1;p=0,h+=1}}else l[h].ind=h,l[h].extra=0,h+=1;if(t.l=l,v=g>v?g:v,y.push(g),t.sz)t.boxWidth=t.sz[0],t.justifyOffset=0;else switch(t.boxWidth=v,t.j){case 1:t.justifyOffset=-t.boxWidth;break;case 2:t.justifyOffset=-t.boxWidth/2;break;default:t.justifyOffset=0}t.lineWidths=y;var O,M,F=c.a;a=F.length;var L,V,B=[];for(o=0;o<a;o+=1){for((O=F[o]).a.sc&&(t.strokeColorAnim=!0),O.a.sw&&(t.strokeWidthAnim=!0),(O.a.fc||O.a.fh||O.a.fs||O.a.fb)&&(t.fillColorAnim=!0),V=0,L=O.s.b,e=0;e<n;e+=1)(M=l[e]).anIndexes[o]=V,(1==L&&""!==M.val||2==L&&""!==M.val&&"\xa0"!==M.val||3==L&&(M.n||"\xa0"==M.val||e==n-1)||4==L&&(M.n||e==n-1))&&(1===O.s.rn&&B.push(V),V+=1);c.a[o].s.totalChars=V;var U,j=-1;if(1===O.s.rn)for(e=0;e<n;e+=1)j!=(M=l[e]).anIndexes[o]&&(j=M.anIndexes[o],U=B.splice(Math.floor(Math.random()*B.length),1)[0]),M.anIndexes[o]=U}t.yOffset=t.finalLineHeight||1.2*t.finalSize,t.ls=t.ls||0,t.ascent=b.ascent*t.finalSize/100},TextProperty.prototype.updateDocumentData=function(t,e){e=void 0===e?this.keysIndex:e;var n=this.copyData({},this.data.d.k[e].s);n=this.copyData(n,t),this.data.d.k[e].s=n,this.recalculate(e),this.elem.addDynamicProperty(this)},TextProperty.prototype.recalculate=function(t){var e=this.data.d.k[t].s;e.__complete=!1,this.keysIndex=0,this._isFirstFrame=!0,this.getValue(e)},TextProperty.prototype.canResizeFont=function(t){this.canResize=t,this.recalculate(this.keysIndex),this.elem.addDynamicProperty(this)},TextProperty.prototype.setMinimumFontSize=function(t){this.minimumFontSize=Math.floor(t)||1,this.recalculate(this.keysIndex),this.elem.addDynamicProperty(this)};var TextSelectorProp=function(){var t=Math.max,e=Math.min,n=Math.floor;function r(t,e){this._currentTextLength=-1,this.k=!1,this.data=e,this.elem=t,this.comp=t.comp,this.finalS=0,this.finalE=0,this.initDynamicPropertyContainer(t),this.s=PropertyFactory.getProp(t,e.s||{k:0},0,0,this),this.e="e"in e?PropertyFactory.getProp(t,e.e,0,0,this):{v:100},this.o=PropertyFactory.getProp(t,e.o||{k:0},0,0,this),this.xe=PropertyFactory.getProp(t,e.xe||{k:0},0,0,this),this.ne=PropertyFactory.getProp(t,e.ne||{k:0},0,0,this),this.a=PropertyFactory.getProp(t,e.a,0,.01,this),this.dynamicProperties.length||this.getValue()}return r.prototype={getMult:function(r){this._currentTextLength!==this.elem.textProperty.currentData.l.length&&this.getValue();var i=BezierFactory.getBezierEasing(this.ne.v/100,0,1-this.xe.v/100,1).get,o=0,a=this.finalS,s=this.finalE,u=this.data.sh;if(2==u)o=i(o=s===a?r>=s?1:0:t(0,e(.5/(s-a)+(r-a)/(s-a),1)));else if(3==u)o=i(o=s===a?r>=s?0:1:1-t(0,e(.5/(s-a)+(r-a)/(s-a),1)));else if(4==u)s===a?o=0:(o=t(0,e(.5/(s-a)+(r-a)/(s-a),1)))<.5?o*=2:o=1-2*(o-.5),o=i(o);else if(5==u){if(s===a)o=0;else{var c=s-a,l=-c/2+(r=e(t(0,r+.5-a),s-a)),h=c/2;o=Math.sqrt(1-l*l/(h*h))}o=i(o)}else 6==u?(s===a?o=0:(r=e(t(0,r+.5-a),s-a),o=(1+Math.cos(Math.PI+2*Math.PI*r/(s-a)))/2),o=i(o)):(r>=n(a)&&(o=r-a<0?1-(a-r):t(0,e(s-r,1))),o=i(o));return o*this.a.v},getValue:function(t){this.iterateDynamicProperties(),this._mdf=t||this._mdf,this._currentTextLength=this.elem.textProperty.currentData.l.length||0,t&&2===this.data.r&&(this.e.v=this._currentTextLength);var e=2===this.data.r?1:100/this.data.totalChars,n=this.o.v/e,r=this.s.v/e+n,i=this.e.v/e+n;if(r>i){var o=r;r=i,i=o}this.finalS=r,this.finalE=i}},extendPrototype([DynamicPropertyContainer],r),{getTextSelectorProp:function(t,e,n){return new r(t,e,n)}}}(),pool_factory=function(t,e,n,r){var i=0,o=t,a=createSizedArray(o);function s(){return i?a[i-=1]:e()}return{newElement:s,release:function(t){i===o&&(a=pooling.double(a),o*=2),n&&n(t),a[i]=t,i+=1}}},pooling=function(){return{double:function(t){return t.concat(createSizedArray(t.length))}}}(),point_pool=function(){return pool_factory(8,function(){return createTypedArray("float32",2)})}(),shape_pool=function(){var t=pool_factory(4,function(){return new ShapePath},function(t){var e,n=t._length;for(e=0;e<n;e+=1)point_pool.release(t.v[e]),point_pool.release(t.i[e]),point_pool.release(t.o[e]),t.v[e]=null,t.i[e]=null,t.o[e]=null;t._length=0,t.c=!1});return t.clone=function(e){var n,r=t.newElement(),i=void 0===e._length?e.v.length:e._length;for(r.setLength(i),r.c=e.c,n=0;n<i;n+=1)r.setTripleAt(e.v[n][0],e.v[n][1],e.o[n][0],e.o[n][1],e.i[n][0],e.i[n][1],n);return r},t}(),shapeCollection_pool=function(){var t={newShapeCollection:function(){var t;t=e?r[e-=1]:new ShapeCollection;return t},release:function(t){var i,o=t._length;for(i=0;i<o;i+=1)shape_pool.release(t.shapes[i]);t._length=0,e===n&&(r=pooling.double(r),n*=2);r[e]=t,e+=1}},e=0,n=4,r=createSizedArray(n);return t}(),segments_length_pool=function(){return pool_factory(8,function(){return{lengths:[],totalLength:0}},function(t){var e,n=t.lengths.length;for(e=0;e<n;e+=1)bezier_length_pool.release(t.lengths[e]);t.lengths.length=0})}(),bezier_length_pool=function(){return pool_factory(8,function(){return{addedLength:0,percents:createTypedArray("float32",defaultCurveSegments),lengths:createTypedArray("float32",defaultCurveSegments)}})}();function BaseRenderer(){}function SVGRenderer(t,e){this.animationItem=t,this.layers=null,this.renderedFrame=-1,this.svgElement=createNS("svg");var n="";if(e&&e.title){var r=createNS("title"),i=createElementID();r.setAttribute("id",i),r.textContent=e.title,this.svgElement.appendChild(r),n+=i}if(e&&e.description){var o=createNS("desc"),a=createElementID();o.setAttribute("id",a),o.textContent=e.description,this.svgElement.appendChild(o),n+=" "+a}n&&this.svgElement.setAttribute("aria-labelledby",n);var s=createNS("defs");this.svgElement.appendChild(s);var u=createNS("g");this.svgElement.appendChild(u),this.layerElement=u,this.renderConfig={preserveAspectRatio:e&&e.preserveAspectRatio||"xMidYMid meet",imagePreserveAspectRatio:e&&e.imagePreserveAspectRatio||"xMidYMid slice",progressiveLoad:e&&e.progressiveLoad||!1,hideOnTransparent:!e||!1!==e.hideOnTransparent,viewBoxOnly:e&&e.viewBoxOnly||!1,viewBoxSize:e&&e.viewBoxSize||!1,className:e&&e.className||""},this.globalData={_mdf:!1,frameNum:-1,defs:s,renderConfig:this.renderConfig},this.elements=[],this.pendingElements=[],this.destroyed=!1,this.rendererType="svg"}function CanvasRenderer(t,e){this.animationItem=t,this.renderConfig={clearCanvas:!e||void 0===e.clearCanvas||e.clearCanvas,context:e&&e.context||null,progressiveLoad:e&&e.progressiveLoad||!1,preserveAspectRatio:e&&e.preserveAspectRatio||"xMidYMid meet",imagePreserveAspectRatio:e&&e.imagePreserveAspectRatio||"xMidYMid slice",className:e&&e.className||""},this.renderConfig.dpr=e&&e.dpr||1,this.animationItem.wrapper&&(this.renderConfig.dpr=e&&e.dpr||window.devicePixelRatio||1),this.renderedFrame=-1,this.globalData={frameNum:-1,_mdf:!1,renderConfig:this.renderConfig,currentGlobalAlpha:-1},this.contextData=new CVContextData,this.elements=[],this.pendingElements=[],this.transformMat=new Matrix,this.completeLayers=!1,this.rendererType="canvas"}function HybridRenderer(t,e){this.animationItem=t,this.layers=null,this.renderedFrame=-1,this.renderConfig={className:e&&e.className||"",imagePreserveAspectRatio:e&&e.imagePreserveAspectRatio||"xMidYMid slice",hideOnTransparent:!e||!1!==e.hideOnTransparent},this.globalData={_mdf:!1,frameNum:-1,renderConfig:this.renderConfig},this.pendingElements=[],this.elements=[],this.threeDElements=[],this.destroyed=!1,this.camera=null,this.supports3d=!0,this.rendererType="html"}function MaskElement(t,e,n){this.data=t,this.element=e,this.globalData=n,this.storedData=[],this.masksProperties=this.data.masksProperties||[],this.maskElement=null;var r,i=this.globalData.defs,o=this.masksProperties?this.masksProperties.length:0;this.viewData=createSizedArray(o),this.solidPath="";var a,s,u,c,l,h,f,p=this.masksProperties,d=0,m=[],y=createElementID(),g="clipPath",v="clip-path";for(r=0;r<o;r++)if(("a"!==p[r].mode&&"n"!==p[r].mode||p[r].inv||100!==p[r].o.k)&&(g="mask",v="mask"),"s"!=p[r].mode&&"i"!=p[r].mode||0!==d?c=null:((c=createNS("rect")).setAttribute("fill","#ffffff"),c.setAttribute("width",this.element.comp.data.w||0),c.setAttribute("height",this.element.comp.data.h||0),m.push(c)),a=createNS("path"),"n"!=p[r].mode){var b;if(d+=1,a.setAttribute("fill","s"===p[r].mode?"#000000":"#ffffff"),a.setAttribute("clip-rule","nonzero"),0!==p[r].x.k?(g="mask",v="mask",f=PropertyFactory.getProp(this.element,p[r].x,0,null,this.element),b=createElementID(),(l=createNS("filter")).setAttribute("id",b),(h=createNS("feMorphology")).setAttribute("operator","erode"),h.setAttribute("in","SourceGraphic"),h.setAttribute("radius","0"),l.appendChild(h),i.appendChild(l),a.setAttribute("stroke","s"===p[r].mode?"#000000":"#ffffff")):(h=null,f=null),this.storedData[r]={elem:a,x:f,expan:h,lastPath:"",lastOperator:"",filterId:b,lastRadius:0},"i"==p[r].mode){u=m.length;var _=createNS("g");for(s=0;s<u;s+=1)_.appendChild(m[s]);var w=createNS("mask");w.setAttribute("mask-type","alpha"),w.setAttribute("id",y+"_"+d),w.appendChild(a),i.appendChild(w),_.setAttribute("mask","url("+locationHref+"#"+y+"_"+d+")"),m.length=0,m.push(_)}else m.push(a);p[r].inv&&!this.solidPath&&(this.solidPath=this.createLayerSolidPath()),this.viewData[r]={elem:a,lastPath:"",op:PropertyFactory.getProp(this.element,p[r].o,0,.01,this.element),prop:ShapePropertyFactory.getShapeProp(this.element,p[r],3),invRect:c},this.viewData[r].prop.k||this.drawPath(p[r],this.viewData[r].prop.v,this.viewData[r])}else this.viewData[r]={op:PropertyFactory.getProp(this.element,p[r].o,0,.01,this.element),prop:ShapePropertyFactory.getShapeProp(this.element,p[r],3),elem:a,lastPath:""},i.appendChild(a);for(this.maskElement=createNS(g),o=m.length,r=0;r<o;r+=1)this.maskElement.appendChild(m[r]);d>0&&(this.maskElement.setAttribute("id",y),this.element.maskedElement.setAttribute(v,"url("+locationHref+"#"+y+")"),i.appendChild(this.maskElement)),this.viewData.length&&this.element.addRenderableComponent(this)}function HierarchyElement(){}function FrameElement(){}function TransformElement(){}function RenderableElement(){}function RenderableDOMElement(){}function ProcessedElement(t,e){this.elem=t,this.pos=e}function SVGStyleData(t,e){this.data=t,this.type=t.ty,this.d="",this.lvl=e,this._mdf=!1,this.closed=!0===t.hd,this.pElem=createNS("path"),this.msElem=null}function SVGShapeData(t,e,n){this.caches=[],this.styles=[],this.transformers=t,this.lStr="",this.sh=n,this.lvl=e,this._isAnimated=!!n.k;for(var r=0,i=t.length;r<i;){if(t[r].mProps.dynamicProperties.length){this._isAnimated=!0;break}r+=1}}function SVGTransformData(t,e,n){this.transform={mProps:t,op:e,container:n},this.elements=[],this._isAnimated=this.transform.mProps.dynamicProperties.length||this.transform.op.effectsSequence.length}function SVGStrokeStyleData(t,e,n){this.initDynamicPropertyContainer(t),this.getValue=this.iterateDynamicProperties,this.o=PropertyFactory.getProp(t,e.o,0,.01,this),this.w=PropertyFactory.getProp(t,e.w,0,null,this),this.d=new DashProperty(t,e.d||{},"svg",this),this.c=PropertyFactory.getProp(t,e.c,1,255,this),this.style=n,this._isAnimated=!!this._isAnimated}function SVGFillStyleData(t,e,n){this.initDynamicPropertyContainer(t),this.getValue=this.iterateDynamicProperties,this.o=PropertyFactory.getProp(t,e.o,0,.01,this),this.c=PropertyFactory.getProp(t,e.c,1,255,this),this.style=n}function SVGGradientFillStyleData(t,e,n){this.initDynamicPropertyContainer(t),this.getValue=this.iterateDynamicProperties,this.initGradientData(t,e,n)}function SVGGradientStrokeStyleData(t,e,n){this.initDynamicPropertyContainer(t),this.getValue=this.iterateDynamicProperties,this.w=PropertyFactory.getProp(t,e.w,0,null,this),this.d=new DashProperty(t,e.d||{},"svg",this),this.initGradientData(t,e,n),this._isAnimated=!!this._isAnimated}function ShapeGroupData(){this.it=[],this.prevViewData=[],this.gr=createNS("g")}BaseRenderer.prototype.checkLayers=function(t){var e,n,r=this.layers.length;for(this.completeLayers=!0,e=r-1;e>=0;e--)this.elements[e]||(n=this.layers[e]).ip-n.st<=t-this.layers[e].st&&n.op-n.st>t-this.layers[e].st&&this.buildItem(e),this.completeLayers=!!this.elements[e]&&this.completeLayers;this.checkPendingElements()},BaseRenderer.prototype.createItem=function(t){switch(t.ty){case 2:return this.createImage(t);case 0:return this.createComp(t);case 1:return this.createSolid(t);case 3:return this.createNull(t);case 4:return this.createShape(t);case 5:return this.createText(t);case 13:return this.createCamera(t)}return this.createNull(t)},BaseRenderer.prototype.createCamera=function(){throw new Error("You're using a 3d camera. Try the html renderer.")},BaseRenderer.prototype.buildAllItems=function(){var t,e=this.layers.length;for(t=0;t<e;t+=1)this.buildItem(t);this.checkPendingElements()},BaseRenderer.prototype.includeLayers=function(t){this.completeLayers=!1;var e,n,r=t.length,i=this.layers.length;for(e=0;e<r;e+=1)for(n=0;n<i;){if(this.layers[n].id==t[e].id){this.layers[n]=t[e];break}n+=1}},BaseRenderer.prototype.setProjectInterface=function(t){this.globalData.projectInterface=t},BaseRenderer.prototype.initItems=function(){this.globalData.progressiveLoad||this.buildAllItems()},BaseRenderer.prototype.buildElementParenting=function(t,e,n){for(var r=this.elements,i=this.layers,o=0,a=i.length;o<a;)i[o].ind==e&&(r[o]&&!0!==r[o]?(n.push(r[o]),r[o].setAsParent(),void 0!==i[o].parent?this.buildElementParenting(t,i[o].parent,n):t.setHierarchy(n)):(this.buildItem(o),this.addPendingElement(t))),o+=1},BaseRenderer.prototype.addPendingElement=function(t){this.pendingElements.push(t)},BaseRenderer.prototype.searchExtraCompositions=function(t){var e,n=t.length;for(e=0;e<n;e+=1)if(t[e].xt){var r=this.createComp(t[e]);r.initExpressions(),this.globalData.projectInterface.registerComposition(r)}},BaseRenderer.prototype.setupGlobalData=function(t,e){this.globalData.fontManager=new FontManager,this.globalData.fontManager.addChars(t.chars),this.globalData.fontManager.addFonts(t.fonts,e),this.globalData.getAssetData=this.animationItem.getAssetData.bind(this.animationItem),this.globalData.getAssetsPath=this.animationItem.getAssetsPath.bind(this.animationItem),this.globalData.imageLoader=this.animationItem.imagePreloader,this.globalData.frameId=0,this.globalData.frameRate=t.fr,this.globalData.nm=t.nm,this.globalData.compSize={w:t.w,h:t.h}},extendPrototype([BaseRenderer],SVGRenderer),SVGRenderer.prototype.createNull=function(t){return new NullElement(t,this.globalData,this)},SVGRenderer.prototype.createShape=function(t){return new SVGShapeElement(t,this.globalData,this)},SVGRenderer.prototype.createText=function(t){return new SVGTextElement(t,this.globalData,this)},SVGRenderer.prototype.createImage=function(t){return new IImageElement(t,this.globalData,this)},SVGRenderer.prototype.createComp=function(t){return new SVGCompElement(t,this.globalData,this)},SVGRenderer.prototype.createSolid=function(t){return new ISolidElement(t,this.globalData,this)},SVGRenderer.prototype.configAnimation=function(t){this.svgElement.setAttribute("xmlns","http://www.w3.org/2000/svg"),this.renderConfig.viewBoxSize?this.svgElement.setAttribute("viewBox",this.renderConfig.viewBoxSize):this.svgElement.setAttribute("viewBox","0 0 "+t.w+" "+t.h),this.renderConfig.viewBoxOnly||(this.svgElement.setAttribute("width",t.w),this.svgElement.setAttribute("height",t.h),this.svgElement.style.width="100%",this.svgElement.style.height="100%",this.svgElement.style.transform="translate3d(0,0,0)"),this.renderConfig.className&&this.svgElement.setAttribute("class",this.renderConfig.className),this.svgElement.setAttribute("preserveAspectRatio",this.renderConfig.preserveAspectRatio),this.animationItem.wrapper.appendChild(this.svgElement);var e=this.globalData.defs;this.setupGlobalData(t,e),this.globalData.progressiveLoad=this.renderConfig.progressiveLoad,this.data=t;var n=createNS("clipPath"),r=createNS("rect");r.setAttribute("width",t.w),r.setAttribute("height",t.h),r.setAttribute("x",0),r.setAttribute("y",0);var i=createElementID();n.setAttribute("id",i),n.appendChild(r),this.layerElement.setAttribute("clip-path","url("+locationHref+"#"+i+")"),e.appendChild(n),this.layers=t.layers,this.elements=createSizedArray(t.layers.length)},SVGRenderer.prototype.destroy=function(){this.animationItem.wrapper.innerHTML="",this.layerElement=null,this.globalData.defs=null;var t,e=this.layers?this.layers.length:0;for(t=0;t<e;t++)this.elements[t]&&this.elements[t].destroy();this.elements.length=0,this.destroyed=!0,this.animationItem=null},SVGRenderer.prototype.updateContainerSize=function(){},SVGRenderer.prototype.buildItem=function(t){var e=this.elements;if(!e[t]&&99!=this.layers[t].ty){e[t]=!0;var n=this.createItem(this.layers[t]);e[t]=n,expressionsPlugin&&(0===this.layers[t].ty&&this.globalData.projectInterface.registerComposition(n),n.initExpressions()),this.appendElementInPos(n,t),this.layers[t].tt&&(this.elements[t-1]&&!0!==this.elements[t-1]?n.setMatte(e[t-1].layerId):(this.buildItem(t-1),this.addPendingElement(n)))}},SVGRenderer.prototype.checkPendingElements=function(){for(;this.pendingElements.length;){var t=this.pendingElements.pop();if(t.checkParenting(),t.data.tt)for(var e=0,n=this.elements.length;e<n;){if(this.elements[e]===t){t.setMatte(this.elements[e-1].layerId);break}e+=1}}},SVGRenderer.prototype.renderFrame=function(t){if(this.renderedFrame!==t&&!this.destroyed){null===t?t=this.renderedFrame:this.renderedFrame=t,this.globalData.frameNum=t,this.globalData.frameId+=1,this.globalData.projectInterface.currentFrame=t,this.globalData._mdf=!1;var e,n=this.layers.length;for(this.completeLayers||this.checkLayers(t),e=n-1;e>=0;e--)(this.completeLayers||this.elements[e])&&this.elements[e].prepareFrame(t-this.layers[e].st);if(this.globalData._mdf)for(e=0;e<n;e+=1)(this.completeLayers||this.elements[e])&&this.elements[e].renderFrame()}},SVGRenderer.prototype.appendElementInPos=function(t,e){var n=t.getBaseElement();if(n){for(var r,i=0;i<e;)this.elements[i]&&!0!==this.elements[i]&&this.elements[i].getBaseElement()&&(r=this.elements[i].getBaseElement()),i+=1;r?this.layerElement.insertBefore(n,r):this.layerElement.appendChild(n)}},SVGRenderer.prototype.hide=function(){this.layerElement.style.display="none"},SVGRenderer.prototype.show=function(){this.layerElement.style.display="block"},extendPrototype([BaseRenderer],CanvasRenderer),CanvasRenderer.prototype.createShape=function(t){return new CVShapeElement(t,this.globalData,this)},CanvasRenderer.prototype.createText=function(t){return new CVTextElement(t,this.globalData,this)},CanvasRenderer.prototype.createImage=function(t){return new CVImageElement(t,this.globalData,this)},CanvasRenderer.prototype.createComp=function(t){return new CVCompElement(t,this.globalData,this)},CanvasRenderer.prototype.createSolid=function(t){return new CVSolidElement(t,this.globalData,this)},CanvasRenderer.prototype.createNull=SVGRenderer.prototype.createNull,CanvasRenderer.prototype.ctxTransform=function(t){if(1!==t[0]||0!==t[1]||0!==t[4]||1!==t[5]||0!==t[12]||0!==t[13])if(this.renderConfig.clearCanvas){this.transformMat.cloneFromProps(t);var e=this.contextData.cTr.props;this.transformMat.transform(e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8],e[9],e[10],e[11],e[12],e[13],e[14],e[15]),this.contextData.cTr.cloneFromProps(this.transformMat.props);var n=this.contextData.cTr.props;this.canvasContext.setTransform(n[0],n[1],n[4],n[5],n[12],n[13])}else this.canvasContext.transform(t[0],t[1],t[4],t[5],t[12],t[13])},CanvasRenderer.prototype.ctxOpacity=function(t){if(!this.renderConfig.clearCanvas)return this.canvasContext.globalAlpha*=t<0?0:t,void(this.globalData.currentGlobalAlpha=this.contextData.cO);this.contextData.cO*=t<0?0:t,this.globalData.currentGlobalAlpha!==this.contextData.cO&&(this.canvasContext.globalAlpha=this.contextData.cO,this.globalData.currentGlobalAlpha=this.contextData.cO)},CanvasRenderer.prototype.reset=function(){this.renderConfig.clearCanvas?this.contextData.reset():this.canvasContext.restore()},CanvasRenderer.prototype.save=function(t){if(this.renderConfig.clearCanvas){t&&this.canvasContext.save();var e=this.contextData.cTr.props;this.contextData._length<=this.contextData.cArrPos&&this.contextData.duplicate();var n,r=this.contextData.saved[this.contextData.cArrPos];for(n=0;n<16;n+=1)r[n]=e[n];this.contextData.savedOp[this.contextData.cArrPos]=this.contextData.cO,this.contextData.cArrPos+=1}else this.canvasContext.save()},CanvasRenderer.prototype.restore=function(t){if(this.renderConfig.clearCanvas){t&&(this.canvasContext.restore(),this.globalData.blendMode="source-over"),this.contextData.cArrPos-=1;var e,n=this.contextData.saved[this.contextData.cArrPos],r=this.contextData.cTr.props;for(e=0;e<16;e+=1)r[e]=n[e];this.canvasContext.setTransform(n[0],n[1],n[4],n[5],n[12],n[13]),n=this.contextData.savedOp[this.contextData.cArrPos],this.contextData.cO=n,this.globalData.currentGlobalAlpha!==n&&(this.canvasContext.globalAlpha=n,this.globalData.currentGlobalAlpha=n)}else this.canvasContext.restore()},CanvasRenderer.prototype.configAnimation=function(t){this.animationItem.wrapper?(this.animationItem.container=createTag("canvas"),this.animationItem.container.style.width="100%",this.animationItem.container.style.height="100%",this.animationItem.container.style.transformOrigin=this.animationItem.container.style.mozTransformOrigin=this.animationItem.container.style.webkitTransformOrigin=this.animationItem.container.style["-webkit-transform"]="0px 0px 0px",this.animationItem.wrapper.appendChild(this.animationItem.container),this.canvasContext=this.animationItem.container.getContext("2d"),this.renderConfig.className&&this.animationItem.container.setAttribute("class",this.renderConfig.className)):this.canvasContext=this.renderConfig.context,this.data=t,this.layers=t.layers,this.transformCanvas={w:t.w,h:t.h,sx:0,sy:0,tx:0,ty:0},this.setupGlobalData(t,document.body),this.globalData.canvasContext=this.canvasContext,this.globalData.renderer=this,this.globalData.isDashed=!1,this.globalData.progressiveLoad=this.renderConfig.progressiveLoad,this.globalData.transformCanvas=this.transformCanvas,this.elements=createSizedArray(t.layers.length),this.updateContainerSize()},CanvasRenderer.prototype.updateContainerSize=function(){var t,e,n,r;if(this.reset(),this.animationItem.wrapper&&this.animationItem.container?(t=this.animationItem.wrapper.offsetWidth,e=this.animationItem.wrapper.offsetHeight,this.animationItem.container.setAttribute("width",t*this.renderConfig.dpr),this.animationItem.container.setAttribute("height",e*this.renderConfig.dpr)):(t=this.canvasContext.canvas.width*this.renderConfig.dpr,e=this.canvasContext.canvas.height*this.renderConfig.dpr),-1!==this.renderConfig.preserveAspectRatio.indexOf("meet")||-1!==this.renderConfig.preserveAspectRatio.indexOf("slice")){var i=this.renderConfig.preserveAspectRatio.split(" "),o=i[1]||"meet",a=i[0]||"xMidYMid",s=a.substr(0,4),u=a.substr(4);n=t/e,(r=this.transformCanvas.w/this.transformCanvas.h)>n&&"meet"===o||r<n&&"slice"===o?(this.transformCanvas.sx=t/(this.transformCanvas.w/this.renderConfig.dpr),this.transformCanvas.sy=t/(this.transformCanvas.w/this.renderConfig.dpr)):(this.transformCanvas.sx=e/(this.transformCanvas.h/this.renderConfig.dpr),this.transformCanvas.sy=e/(this.transformCanvas.h/this.renderConfig.dpr)),this.transformCanvas.tx="xMid"===s&&(r<n&&"meet"===o||r>n&&"slice"===o)?(t-this.transformCanvas.w*(e/this.transformCanvas.h))/2*this.renderConfig.dpr:"xMax"===s&&(r<n&&"meet"===o||r>n&&"slice"===o)?(t-this.transformCanvas.w*(e/this.transformCanvas.h))*this.renderConfig.dpr:0,this.transformCanvas.ty="YMid"===u&&(r>n&&"meet"===o||r<n&&"slice"===o)?(e-this.transformCanvas.h*(t/this.transformCanvas.w))/2*this.renderConfig.dpr:"YMax"===u&&(r>n&&"meet"===o||r<n&&"slice"===o)?(e-this.transformCanvas.h*(t/this.transformCanvas.w))*this.renderConfig.dpr:0}else"none"==this.renderConfig.preserveAspectRatio?(this.transformCanvas.sx=t/(this.transformCanvas.w/this.renderConfig.dpr),this.transformCanvas.sy=e/(this.transformCanvas.h/this.renderConfig.dpr),this.transformCanvas.tx=0,this.transformCanvas.ty=0):(this.transformCanvas.sx=this.renderConfig.dpr,this.transformCanvas.sy=this.renderConfig.dpr,this.transformCanvas.tx=0,this.transformCanvas.ty=0);this.transformCanvas.props=[this.transformCanvas.sx,0,0,0,0,this.transformCanvas.sy,0,0,0,0,1,0,this.transformCanvas.tx,this.transformCanvas.ty,0,1],this.ctxTransform(this.transformCanvas.props),this.canvasContext.beginPath(),this.canvasContext.rect(0,0,this.transformCanvas.w,this.transformCanvas.h),this.canvasContext.closePath(),this.canvasContext.clip(),this.renderFrame(this.renderedFrame,!0)},CanvasRenderer.prototype.destroy=function(){var t;for(this.renderConfig.clearCanvas&&(this.animationItem.wrapper.innerHTML=""),t=(this.layers?this.layers.length:0)-1;t>=0;t-=1)this.elements[t]&&this.elements[t].destroy();this.elements.length=0,this.globalData.canvasContext=null,this.animationItem.container=null,this.destroyed=!0},CanvasRenderer.prototype.renderFrame=function(t,e){if((this.renderedFrame!==t||!0!==this.renderConfig.clearCanvas||e)&&!this.destroyed&&-1!==t){this.renderedFrame=t,this.globalData.frameNum=t-this.animationItem._isFirstFrame,this.globalData.frameId+=1,this.globalData._mdf=!this.renderConfig.clearCanvas||e,this.globalData.projectInterface.currentFrame=t;var n,r=this.layers.length;for(this.completeLayers||this.checkLayers(t),n=0;n<r;n++)(this.completeLayers||this.elements[n])&&this.elements[n].prepareFrame(t-this.layers[n].st);if(this.globalData._mdf){for(!0===this.renderConfig.clearCanvas?this.canvasContext.clearRect(0,0,this.transformCanvas.w,this.transformCanvas.h):this.save(),n=r-1;n>=0;n-=1)(this.completeLayers||this.elements[n])&&this.elements[n].renderFrame();!0!==this.renderConfig.clearCanvas&&this.restore()}}},CanvasRenderer.prototype.buildItem=function(t){var e=this.elements;if(!e[t]&&99!=this.layers[t].ty){var n=this.createItem(this.layers[t],this,this.globalData);e[t]=n,n.initExpressions()}},CanvasRenderer.prototype.checkPendingElements=function(){for(;this.pendingElements.length;){this.pendingElements.pop().checkParenting()}},CanvasRenderer.prototype.hide=function(){this.animationItem.container.style.display="none"},CanvasRenderer.prototype.show=function(){this.animationItem.container.style.display="block"},extendPrototype([BaseRenderer],HybridRenderer),HybridRenderer.prototype.buildItem=SVGRenderer.prototype.buildItem,HybridRenderer.prototype.checkPendingElements=function(){for(;this.pendingElements.length;){this.pendingElements.pop().checkParenting()}},HybridRenderer.prototype.appendElementInPos=function(t,e){var n=t.getBaseElement();if(n){var r=this.layers[e];if(r.ddd&&this.supports3d)this.addTo3dContainer(n,e);else if(this.threeDElements)this.addTo3dContainer(n,e);else{for(var i,o,a=0;a<e;)this.elements[a]&&!0!==this.elements[a]&&this.elements[a].getBaseElement&&(o=this.elements[a],i=(this.layers[a].ddd?this.getThreeDContainerByPos(a):o.getBaseElement())||i),a+=1;i?r.ddd&&this.supports3d||this.layerElement.insertBefore(n,i):r.ddd&&this.supports3d||this.layerElement.appendChild(n)}}},HybridRenderer.prototype.createShape=function(t){return this.supports3d?new HShapeElement(t,this.globalData,this):new SVGShapeElement(t,this.globalData,this)},HybridRenderer.prototype.createText=function(t){return this.supports3d?new HTextElement(t,this.globalData,this):new SVGTextElement(t,this.globalData,this)},HybridRenderer.prototype.createCamera=function(t){return this.camera=new HCameraElement(t,this.globalData,this),this.camera},HybridRenderer.prototype.createImage=function(t){return this.supports3d?new HImageElement(t,this.globalData,this):new IImageElement(t,this.globalData,this)},HybridRenderer.prototype.createComp=function(t){return this.supports3d?new HCompElement(t,this.globalData,this):new SVGCompElement(t,this.globalData,this)},HybridRenderer.prototype.createSolid=function(t){return this.supports3d?new HSolidElement(t,this.globalData,this):new ISolidElement(t,this.globalData,this)},HybridRenderer.prototype.createNull=SVGRenderer.prototype.createNull,HybridRenderer.prototype.getThreeDContainerByPos=function(t){for(var e=0,n=this.threeDElements.length;e<n;){if(this.threeDElements[e].startPos<=t&&this.threeDElements[e].endPos>=t)return this.threeDElements[e].perspectiveElem;e+=1}},HybridRenderer.prototype.createThreeDContainer=function(t,e){var n=createTag("div");styleDiv(n);var r=createTag("div");styleDiv(r),"3d"===e&&(n.style.width=this.globalData.compSize.w+"px",n.style.height=this.globalData.compSize.h+"px",n.style.transformOrigin=n.style.mozTransformOrigin=n.style.webkitTransformOrigin="50% 50%",r.style.transform=r.style.webkitTransform="matrix3d(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1)"),n.appendChild(r);var i={container:r,perspectiveElem:n,startPos:t,endPos:t,type:e};return this.threeDElements.push(i),i},HybridRenderer.prototype.build3dContainers=function(){var t,e,n=this.layers.length,r="";for(t=0;t<n;t+=1)this.layers[t].ddd&&3!==this.layers[t].ty?("3d"!==r&&(r="3d",e=this.createThreeDContainer(t,"3d")),e.endPos=Math.max(e.endPos,t)):("2d"!==r&&(r="2d",e=this.createThreeDContainer(t,"2d")),e.endPos=Math.max(e.endPos,t));for(t=(n=this.threeDElements.length)-1;t>=0;t--)this.resizerElem.appendChild(this.threeDElements[t].perspectiveElem)},HybridRenderer.prototype.addTo3dContainer=function(t,e){for(var n=0,r=this.threeDElements.length;n<r;){if(e<=this.threeDElements[n].endPos){for(var i,o=this.threeDElements[n].startPos;o<e;)this.elements[o]&&this.elements[o].getBaseElement&&(i=this.elements[o].getBaseElement()),o+=1;i?this.threeDElements[n].container.insertBefore(t,i):this.threeDElements[n].container.appendChild(t);break}n+=1}},HybridRenderer.prototype.configAnimation=function(t){var e=createTag("div"),n=this.animationItem.wrapper;e.style.width=t.w+"px",e.style.height=t.h+"px",this.resizerElem=e,styleDiv(e),e.style.transformStyle=e.style.webkitTransformStyle=e.style.mozTransformStyle="flat",this.renderConfig.className&&e.setAttribute("class",this.renderConfig.className),n.appendChild(e),e.style.overflow="hidden";var r=createNS("svg");r.setAttribute("width","1"),r.setAttribute("height","1"),styleDiv(r),this.resizerElem.appendChild(r);var i=createNS("defs");r.appendChild(i),this.data=t,this.setupGlobalData(t,r),this.globalData.defs=i,this.layers=t.layers,this.layerElement=this.resizerElem,this.build3dContainers(),this.updateContainerSize()},HybridRenderer.prototype.destroy=function(){this.animationItem.wrapper.innerHTML="",this.animationItem.container=null,this.globalData.defs=null;var t,e=this.layers?this.layers.length:0;for(t=0;t<e;t++)this.elements[t].destroy();this.elements.length=0,this.destroyed=!0,this.animationItem=null},HybridRenderer.prototype.updateContainerSize=function(){var t,e,n,r,i=this.animationItem.wrapper.offsetWidth,o=this.animationItem.wrapper.offsetHeight,a=i/o;this.globalData.compSize.w/this.globalData.compSize.h>a?(t=i/this.globalData.compSize.w,e=i/this.globalData.compSize.w,n=0,r=(o-this.globalData.compSize.h*(i/this.globalData.compSize.w))/2):(t=o/this.globalData.compSize.h,e=o/this.globalData.compSize.h,n=(i-this.globalData.compSize.w*(o/this.globalData.compSize.h))/2,r=0),this.resizerElem.style.transform=this.resizerElem.style.webkitTransform="matrix3d("+t+",0,0,0,0,"+e+",0,0,0,0,1,0,"+n+","+r+",0,1)"},HybridRenderer.prototype.renderFrame=SVGRenderer.prototype.renderFrame,HybridRenderer.prototype.hide=function(){this.resizerElem.style.display="none"},HybridRenderer.prototype.show=function(){this.resizerElem.style.display="block"},HybridRenderer.prototype.initItems=function(){if(this.buildAllItems(),this.camera)this.camera.setup();else{var t,e=this.globalData.compSize.w,n=this.globalData.compSize.h,r=this.threeDElements.length;for(t=0;t<r;t+=1)this.threeDElements[t].perspectiveElem.style.perspective=this.threeDElements[t].perspectiveElem.style.webkitPerspective=Math.sqrt(Math.pow(e,2)+Math.pow(n,2))+"px"}},HybridRenderer.prototype.searchExtraCompositions=function(t){var e,n=t.length,r=createTag("div");for(e=0;e<n;e+=1)if(t[e].xt){var i=this.createComp(t[e],r,this.globalData.comp,null);i.initExpressions(),this.globalData.projectInterface.registerComposition(i)}},MaskElement.prototype.getMaskProperty=function(t){return this.viewData[t].prop},MaskElement.prototype.renderFrame=function(t){var e,n=this.element.finalTransform.mat,r=this.masksProperties.length;for(e=0;e<r;e++)if((this.viewData[e].prop._mdf||t)&&this.drawPath(this.masksProperties[e],this.viewData[e].prop.v,this.viewData[e]),(this.viewData[e].op._mdf||t)&&this.viewData[e].elem.setAttribute("fill-opacity",this.viewData[e].op.v),"n"!==this.masksProperties[e].mode&&(this.viewData[e].invRect&&(this.element.finalTransform.mProp._mdf||t)&&(this.viewData[e].invRect.setAttribute("x",-n.props[12]),this.viewData[e].invRect.setAttribute("y",-n.props[13])),this.storedData[e].x&&(this.storedData[e].x._mdf||t))){var i=this.storedData[e].expan;this.storedData[e].x.v<0?("erode"!==this.storedData[e].lastOperator&&(this.storedData[e].lastOperator="erode",this.storedData[e].elem.setAttribute("filter","url("+locationHref+"#"+this.storedData[e].filterId+")")),i.setAttribute("radius",-this.storedData[e].x.v)):("dilate"!==this.storedData[e].lastOperator&&(this.storedData[e].lastOperator="dilate",this.storedData[e].elem.setAttribute("filter",null)),this.storedData[e].elem.setAttribute("stroke-width",2*this.storedData[e].x.v))}},MaskElement.prototype.getMaskelement=function(){return this.maskElement},MaskElement.prototype.createLayerSolidPath=function(){var t="M0,0 ";return t+=" h"+this.globalData.compSize.w,t+=" v"+this.globalData.compSize.h,t+=" h-"+this.globalData.compSize.w,t+=" v-"+this.globalData.compSize.h+" "},MaskElement.prototype.drawPath=function(t,e,n){var r,i,o=" M"+e.v[0][0]+","+e.v[0][1];for(i=e._length,r=1;r<i;r+=1)o+=" C"+e.o[r-1][0]+","+e.o[r-1][1]+" "+e.i[r][0]+","+e.i[r][1]+" "+e.v[r][0]+","+e.v[r][1];if(e.c&&i>1&&(o+=" C"+e.o[r-1][0]+","+e.o[r-1][1]+" "+e.i[0][0]+","+e.i[0][1]+" "+e.v[0][0]+","+e.v[0][1]),n.lastPath!==o){var a="";n.elem&&(e.c&&(a=t.inv?this.solidPath+o:o),n.elem.setAttribute("d",a)),n.lastPath=o}},MaskElement.prototype.destroy=function(){this.element=null,this.globalData=null,this.maskElement=null,this.data=null,this.masksProperties=null},HierarchyElement.prototype={initHierarchy:function(){this.hierarchy=[],this._isParent=!1,this.checkParenting()},setHierarchy:function(t){this.hierarchy=t},setAsParent:function(){this._isParent=!0},checkParenting:function(){void 0!==this.data.parent&&this.comp.buildElementParenting(this,this.data.parent,[])}},FrameElement.prototype={initFrame:function(){this._isFirstFrame=!1,this.dynamicProperties=[],this._mdf=!1},prepareProperties:function(t,e){var n,r=this.dynamicProperties.length;for(n=0;n<r;n+=1)(e||this._isParent&&"transform"===this.dynamicProperties[n].propType)&&(this.dynamicProperties[n].getValue(),this.dynamicProperties[n]._mdf&&(this.globalData._mdf=!0,this._mdf=!0))},addDynamicProperty:function(t){-1===this.dynamicProperties.indexOf(t)&&this.dynamicProperties.push(t)}},TransformElement.prototype={initTransform:function(){this.finalTransform={mProp:this.data.ks?TransformPropertyFactory.getTransformProperty(this,this.data.ks,this):{o:0},_matMdf:!1,_opMdf:!1,mat:new Matrix},this.data.ao&&(this.finalTransform.mProp.autoOriented=!0),this.data.ty},renderTransform:function(){if(this.finalTransform._opMdf=this.finalTransform.mProp.o._mdf||this._isFirstFrame,this.finalTransform._matMdf=this.finalTransform.mProp._mdf||this._isFirstFrame,this.hierarchy){var t,e=this.finalTransform.mat,n=0,r=this.hierarchy.length;if(!this.finalTransform._matMdf)for(;n<r;){if(this.hierarchy[n].finalTransform.mProp._mdf){this.finalTransform._matMdf=!0;break}n+=1}if(this.finalTransform._matMdf)for(t=this.finalTransform.mProp.v.props,e.cloneFromProps(t),n=0;n<r;n+=1)t=this.hierarchy[n].finalTransform.mProp.v.props,e.transform(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8],t[9],t[10],t[11],t[12],t[13],t[14],t[15])}},globalToLocal:function(t){var e=[];e.push(this.finalTransform);for(var n=!0,r=this.comp;n;)r.finalTransform?(r.data.hasMask&&e.splice(0,0,r.finalTransform),r=r.comp):n=!1;var i,o,a=e.length;for(i=0;i<a;i+=1)o=e[i].mat.applyToPointArray(0,0,0),t=[t[0]-o[0],t[1]-o[1],0];return t},mHelper:new Matrix},RenderableElement.prototype={initRenderable:function(){this.isInRange=!1,this.hidden=!1,this.isTransparent=!1,this.renderableComponents=[]},addRenderableComponent:function(t){-1===this.renderableComponents.indexOf(t)&&this.renderableComponents.push(t)},removeRenderableComponent:function(t){-1!==this.renderableComponents.indexOf(t)&&this.renderableComponents.splice(this.renderableComponents.indexOf(t),1)},prepareRenderableFrame:function(t){this.checkLayerLimits(t)},checkTransparency:function(){this.finalTransform.mProp.o.v<=0?!this.isTransparent&&this.globalData.renderConfig.hideOnTransparent&&(this.isTransparent=!0,this.hide()):this.isTransparent&&(this.isTransparent=!1,this.show())},checkLayerLimits:function(t){this.data.ip-this.data.st<=t&&this.data.op-this.data.st>t?!0!==this.isInRange&&(this.globalData._mdf=!0,this._mdf=!0,this.isInRange=!0,this.show()):!1!==this.isInRange&&(this.globalData._mdf=!0,this.isInRange=!1,this.hide())},renderRenderable:function(){var t,e=this.renderableComponents.length;for(t=0;t<e;t+=1)this.renderableComponents[t].renderFrame(this._isFirstFrame)},sourceRectAtTime:function(){return{top:0,left:0,width:100,height:100}},getLayerSize:function(){return 5===this.data.ty?{w:this.data.textData.width,h:this.data.textData.height}:{w:this.data.width,h:this.data.height}}},extendPrototype([RenderableElement,createProxyFunction({initElement:function(t,e,n){this.initFrame(),this.initBaseData(t,e,n),this.initTransform(t,e,n),this.initHierarchy(),this.initRenderable(),this.initRendererElement(),this.createContainerElements(),this.createRenderableComponents(),this.createContent(),this.hide()},hide:function(){this.hidden||this.isInRange&&!this.isTransparent||((this.baseElement||this.layerElement).style.display="none",this.hidden=!0)},show:function(){this.isInRange&&!this.isTransparent&&(this.data.hd||((this.baseElement||this.layerElement).style.display="block"),this.hidden=!1,this._isFirstFrame=!0)},renderFrame:function(){this.data.hd||this.hidden||(this.renderTransform(),this.renderRenderable(),this.renderElement(),this.renderInnerContent(),this._isFirstFrame&&(this._isFirstFrame=!1))},renderInnerContent:function(){},prepareFrame:function(t){this._mdf=!1,this.prepareRenderableFrame(t),this.prepareProperties(t,this.isInRange),this.checkTransparency()},destroy:function(){this.innerElem=null,this.destroyBaseElement()}})],RenderableDOMElement),SVGStyleData.prototype.reset=function(){this.d="",this._mdf=!1},SVGShapeData.prototype.setAsAnimated=function(){this._isAnimated=!0},extendPrototype([DynamicPropertyContainer],SVGStrokeStyleData),extendPrototype([DynamicPropertyContainer],SVGFillStyleData),SVGGradientFillStyleData.prototype.initGradientData=function(t,e,n){this.o=PropertyFactory.getProp(t,e.o,0,.01,this),this.s=PropertyFactory.getProp(t,e.s,1,null,this),this.e=PropertyFactory.getProp(t,e.e,1,null,this),this.h=PropertyFactory.getProp(t,e.h||{k:0},0,.01,this),this.a=PropertyFactory.getProp(t,e.a||{k:0},0,degToRads,this),this.g=new GradientProperty(t,e.g,this),this.style=n,this.stops=[],this.setGradientData(n.pElem,e),this.setGradientOpacity(e,n),this._isAnimated=!!this._isAnimated},SVGGradientFillStyleData.prototype.setGradientData=function(t,e){var n=createElementID(),r=createNS(1===e.t?"linearGradient":"radialGradient");r.setAttribute("id",n),r.setAttribute("spreadMethod","pad"),r.setAttribute("gradientUnits","userSpaceOnUse");var i,o,a,s=[];for(a=4*e.g.p,o=0;o<a;o+=4)i=createNS("stop"),r.appendChild(i),s.push(i);t.setAttribute("gf"===e.ty?"fill":"stroke","url("+locationHref+"#"+n+")"),this.gf=r,this.cst=s},SVGGradientFillStyleData.prototype.setGradientOpacity=function(t,e){if(this.g._hasOpacity&&!this.g._collapsable){var n,r,i,o=createNS("mask"),a=createNS("path");o.appendChild(a);var s=createElementID(),u=createElementID();o.setAttribute("id",u);var c=createNS(1===t.t?"linearGradient":"radialGradient");c.setAttribute("id",s),c.setAttribute("spreadMethod","pad"),c.setAttribute("gradientUnits","userSpaceOnUse"),i=t.g.k.k[0].s?t.g.k.k[0].s.length:t.g.k.k.length;var l=this.stops;for(r=4*t.g.p;r<i;r+=2)(n=createNS("stop")).setAttribute("stop-color","rgb(255,255,255)"),c.appendChild(n),l.push(n);a.setAttribute("gf"===t.ty?"fill":"stroke","url("+locationHref+"#"+s+")"),this.of=c,this.ms=o,this.ost=l,this.maskId=u,e.msElem=a}},extendPrototype([DynamicPropertyContainer],SVGGradientFillStyleData),extendPrototype([SVGGradientFillStyleData,DynamicPropertyContainer],SVGGradientStrokeStyleData);var SVGElementsRenderer=function(){var t=new Matrix,e=new Matrix;function n(t,e,n){(n||e.transform.op._mdf)&&e.transform.container.setAttribute("opacity",e.transform.op.v),(n||e.transform.mProps._mdf)&&e.transform.container.setAttribute("transform",e.transform.mProps.v.to2dCSS())}function r(n,r,i){var o,a,s,u,c,l,h,f,p,d,m,y=r.styles.length,g=r.lvl;for(l=0;l<y;l+=1){if(u=r.sh._mdf||i,r.styles[l].lvl<g){for(f=e.reset(),d=g-r.styles[l].lvl,m=r.transformers.length-1;!u&&d>0;)u=r.transformers[m].mProps._mdf||u,d--,m--;if(u)for(d=g-r.styles[l].lvl,m=r.transformers.length-1;d>0;)p=r.transformers[m].mProps.v.props,f.transform(p[0],p[1],p[2],p[3],p[4],p[5],p[6],p[7],p[8],p[9],p[10],p[11],p[12],p[13],p[14],p[15]),d--,m--}else f=t;if(a=(h=r.sh.paths)._length,u){for(s="",o=0;o<a;o+=1)(c=h.shapes[o])&&c._length&&(s+=buildShapeString(c,c._length,c.c,f));r.caches[l]=s}else s=r.caches[l];r.styles[l].d+=!0===n.hd?"":s,r.styles[l]._mdf=u||r.styles[l]._mdf}}function i(t,e,n){var r=e.style;(e.c._mdf||n)&&r.pElem.setAttribute("fill","rgb("+bm_floor(e.c.v[0])+","+bm_floor(e.c.v[1])+","+bm_floor(e.c.v[2])+")"),(e.o._mdf||n)&&r.pElem.setAttribute("fill-opacity",e.o.v)}function o(t,e,n){a(t,e,n),s(t,e,n)}function a(t,e,n){var r,i,o,a,s,u=e.gf,c=e.g._hasOpacity,l=e.s.v,h=e.e.v;if(e.o._mdf||n){var f="gf"===t.ty?"fill-opacity":"stroke-opacity";e.style.pElem.setAttribute(f,e.o.v)}if(e.s._mdf||n){var p=1===t.t?"x1":"cx",d="x1"===p?"y1":"cy";u.setAttribute(p,l[0]),u.setAttribute(d,l[1]),c&&!e.g._collapsable&&(e.of.setAttribute(p,l[0]),e.of.setAttribute(d,l[1]))}if(e.g._cmdf||n){r=e.cst;var m=e.g.c;for(o=r.length,i=0;i<o;i+=1)(a=r[i]).setAttribute("offset",m[4*i]+"%"),a.setAttribute("stop-color","rgb("+m[4*i+1]+","+m[4*i+2]+","+m[4*i+3]+")")}if(c&&(e.g._omdf||n)){var y=e.g.o;for(o=(r=e.g._collapsable?e.cst:e.ost).length,i=0;i<o;i+=1)a=r[i],e.g._collapsable||a.setAttribute("offset",y[2*i]+"%"),a.setAttribute("stop-opacity",y[2*i+1])}if(1===t.t)(e.e._mdf||n)&&(u.setAttribute("x2",h[0]),u.setAttribute("y2",h[1]),c&&!e.g._collapsable&&(e.of.setAttribute("x2",h[0]),e.of.setAttribute("y2",h[1])));else if((e.s._mdf||e.e._mdf||n)&&(s=Math.sqrt(Math.pow(l[0]-h[0],2)+Math.pow(l[1]-h[1],2)),u.setAttribute("r",s),c&&!e.g._collapsable&&e.of.setAttribute("r",s)),e.e._mdf||e.h._mdf||e.a._mdf||n){s||(s=Math.sqrt(Math.pow(l[0]-h[0],2)+Math.pow(l[1]-h[1],2)));var g=Math.atan2(h[1]-l[1],h[0]-l[0]),v=s*(e.h.v>=1?.99:e.h.v<=-1?-.99:e.h.v),b=Math.cos(g+e.a.v)*v+l[0],_=Math.sin(g+e.a.v)*v+l[1];u.setAttribute("fx",b),u.setAttribute("fy",_),c&&!e.g._collapsable&&(e.of.setAttribute("fx",b),e.of.setAttribute("fy",_))}}function s(t,e,n){var r=e.style,i=e.d;i&&(i._mdf||n)&&i.dashStr&&(r.pElem.setAttribute("stroke-dasharray",i.dashStr),r.pElem.setAttribute("stroke-dashoffset",i.dashoffset[0])),e.c&&(e.c._mdf||n)&&r.pElem.setAttribute("stroke","rgb("+bm_floor(e.c.v[0])+","+bm_floor(e.c.v[1])+","+bm_floor(e.c.v[2])+")"),(e.o._mdf||n)&&r.pElem.setAttribute("stroke-opacity",e.o.v),(e.w._mdf||n)&&(r.pElem.setAttribute("stroke-width",e.w.v),r.msElem&&r.msElem.setAttribute("stroke-width",e.w.v))}return{createRenderFunction:function(t){t.ty;switch(t.ty){case"fl":return i;case"gf":return a;case"gs":return o;case"st":return s;case"sh":case"el":case"rc":case"sr":return r;case"tr":return n}}}}();function ShapeTransformManager(){this.sequences={},this.sequenceList=[],this.transform_key_count=0}function CVShapeData(t,e,n,r){this.styledShapes=[],this.tr=[0,0,0,0,0,0];var i=4;"rc"==e.ty?i=5:"el"==e.ty?i=6:"sr"==e.ty&&(i=7),this.sh=ShapePropertyFactory.getShapeProp(t,e,i,t);var o,a,s=n.length;for(o=0;o<s;o+=1)n[o].closed||(a={transforms:r.addTransformSequence(n[o].transforms),trNodes:[]},this.styledShapes.push(a),n[o].elements.push(a))}function BaseElement(){}function NullElement(t,e,n){this.initFrame(),this.initBaseData(t,e,n),this.initFrame(),this.initTransform(t,e,n),this.initHierarchy()}function SVGBaseElement(){}function IShapeElement(){}function ITextElement(){}function ICompElement(){}function IImageElement(t,e,n){this.assetData=e.getAssetData(t.refId),this.initElement(t,e,n),this.sourceRect={top:0,left:0,width:this.assetData.w,height:this.assetData.h}}function ISolidElement(t,e,n){this.initElement(t,e,n)}function SVGCompElement(t,e,n){this.layers=t.layers,this.supports3d=!0,this.completeLayers=!1,this.pendingElements=[],this.elements=this.layers?createSizedArray(this.layers.length):[],this.initElement(t,e,n),this.tm=t.tm?PropertyFactory.getProp(this,t.tm,0,e.frameRate,this):{_placeholder:!0}}function SVGTextElement(t,e,n){this.textSpans=[],this.renderType="svg",this.initElement(t,e,n)}function SVGShapeElement(t,e,n){this.shapes=[],this.shapesData=t.shapes,this.stylesList=[],this.shapeModifiers=[],this.itemsData=[],this.processedElements=[],this.animatedContents=[],this.initElement(t,e,n),this.prevViewData=[]}function SVGTintFilter(t,e){this.filterManager=e;var n=createNS("feColorMatrix");if(n.setAttribute("type","matrix"),n.setAttribute("color-interpolation-filters","linearRGB"),n.setAttribute("values","0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0 0 0 1 0"),n.setAttribute("result","f1"),t.appendChild(n),(n=createNS("feColorMatrix")).setAttribute("type","matrix"),n.setAttribute("color-interpolation-filters","sRGB"),n.setAttribute("values","1 0 0 0 0 0 1 0 0 0 0 0 1 0 0 0 0 0 1 0"),n.setAttribute("result","f2"),t.appendChild(n),this.matrixFilter=n,100!==e.effectElements[2].p.v||e.effectElements[2].p.k){var r,i=createNS("feMerge");t.appendChild(i),(r=createNS("feMergeNode")).setAttribute("in","SourceGraphic"),i.appendChild(r),(r=createNS("feMergeNode")).setAttribute("in","f2"),i.appendChild(r)}}function SVGFillFilter(t,e){this.filterManager=e;var n=createNS("feColorMatrix");n.setAttribute("type","matrix"),n.setAttribute("color-interpolation-filters","sRGB"),n.setAttribute("values","1 0 0 0 0 0 1 0 0 0 0 0 1 0 0 0 0 0 1 0"),t.appendChild(n),this.matrixFilter=n}function SVGStrokeEffect(t,e){this.initialized=!1,this.filterManager=e,this.elem=t,this.paths=[]}function SVGTritoneFilter(t,e){this.filterManager=e;var n=createNS("feColorMatrix");n.setAttribute("type","matrix"),n.setAttribute("color-interpolation-filters","linearRGB"),n.setAttribute("values","0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0 0 0 1 0"),n.setAttribute("result","f1"),t.appendChild(n);var r=createNS("feComponentTransfer");r.setAttribute("color-interpolation-filters","sRGB"),t.appendChild(r),this.matrixFilter=r;var i=createNS("feFuncR");i.setAttribute("type","table"),r.appendChild(i),this.feFuncR=i;var o=createNS("feFuncG");o.setAttribute("type","table"),r.appendChild(o),this.feFuncG=o;var a=createNS("feFuncB");a.setAttribute("type","table"),r.appendChild(a),this.feFuncB=a}function SVGProLevelsFilter(t,e){this.filterManager=e;var n=this.filterManager.effectElements,r=createNS("feComponentTransfer");(n[10].p.k||0!==n[10].p.v||n[11].p.k||1!==n[11].p.v||n[12].p.k||1!==n[12].p.v||n[13].p.k||0!==n[13].p.v||n[14].p.k||1!==n[14].p.v)&&(this.feFuncR=this.createFeFunc("feFuncR",r)),(n[17].p.k||0!==n[17].p.v||n[18].p.k||1!==n[18].p.v||n[19].p.k||1!==n[19].p.v||n[20].p.k||0!==n[20].p.v||n[21].p.k||1!==n[21].p.v)&&(this.feFuncG=this.createFeFunc("feFuncG",r)),(n[24].p.k||0!==n[24].p.v||n[25].p.k||1!==n[25].p.v||n[26].p.k||1!==n[26].p.v||n[27].p.k||0!==n[27].p.v||n[28].p.k||1!==n[28].p.v)&&(this.feFuncB=this.createFeFunc("feFuncB",r)),(n[31].p.k||0!==n[31].p.v||n[32].p.k||1!==n[32].p.v||n[33].p.k||1!==n[33].p.v||n[34].p.k||0!==n[34].p.v||n[35].p.k||1!==n[35].p.v)&&(this.feFuncA=this.createFeFunc("feFuncA",r)),(this.feFuncR||this.feFuncG||this.feFuncB||this.feFuncA)&&(r.setAttribute("color-interpolation-filters","sRGB"),t.appendChild(r),r=createNS("feComponentTransfer")),(n[3].p.k||0!==n[3].p.v||n[4].p.k||1!==n[4].p.v||n[5].p.k||1!==n[5].p.v||n[6].p.k||0!==n[6].p.v||n[7].p.k||1!==n[7].p.v)&&(r.setAttribute("color-interpolation-filters","sRGB"),t.appendChild(r),this.feFuncRComposed=this.createFeFunc("feFuncR",r),this.feFuncGComposed=this.createFeFunc("feFuncG",r),this.feFuncBComposed=this.createFeFunc("feFuncB",r))}function SVGDropShadowEffect(t,e){t.setAttribute("x","-100%"),t.setAttribute("y","-100%"),t.setAttribute("width","400%"),t.setAttribute("height","400%"),this.filterManager=e;var n=createNS("feGaussianBlur");n.setAttribute("in","SourceAlpha"),n.setAttribute("result","drop_shadow_1"),n.setAttribute("stdDeviation","0"),this.feGaussianBlur=n,t.appendChild(n);var r=createNS("feOffset");r.setAttribute("dx","25"),r.setAttribute("dy","0"),r.setAttribute("in","drop_shadow_1"),r.setAttribute("result","drop_shadow_2"),this.feOffset=r,t.appendChild(r);var i=createNS("feFlood");i.setAttribute("flood-color","#00ff00"),i.setAttribute("flood-opacity","1"),i.setAttribute("result","drop_shadow_3"),this.feFlood=i,t.appendChild(i);var o=createNS("feComposite");o.setAttribute("in","drop_shadow_3"),o.setAttribute("in2","drop_shadow_2"),o.setAttribute("operator","in"),o.setAttribute("result","drop_shadow_4"),t.appendChild(o);var a,s=createNS("feMerge");t.appendChild(s),a=createNS("feMergeNode"),s.appendChild(a),(a=createNS("feMergeNode")).setAttribute("in","SourceGraphic"),this.feMergeNode=a,this.feMerge=s,this.originalNodeAdded=!1,s.appendChild(a)}ShapeTransformManager.prototype={addTransformSequence:function(t){var e,n=t.length,r="_";for(e=0;e<n;e+=1)r+=t[e].transform.key+"_";var i=this.sequences[r];return i||(i={transforms:[].concat(t),finalTransform:new Matrix,_mdf:!1},this.sequences[r]=i,this.sequenceList.push(i)),i},processSequence:function(t,e){for(var n,r=0,i=t.transforms.length,o=e;r<i&&!e;){if(t.transforms[r].transform.mProps._mdf){o=!0;break}r+=1}if(o)for(t.finalTransform.reset(),r=i-1;r>=0;r-=1)n=t.transforms[r].transform.mProps.v.props,t.finalTransform.transform(n[0],n[1],n[2],n[3],n[4],n[5],n[6],n[7],n[8],n[9],n[10],n[11],n[12],n[13],n[14],n[15]);t._mdf=o},processSequences:function(t){var e,n=this.sequenceList.length;for(e=0;e<n;e+=1)this.processSequence(this.sequenceList[e],t)},getNewKey:function(){return"_"+this.transform_key_count++}},CVShapeData.prototype.setAsAnimated=SVGShapeData.prototype.setAsAnimated,BaseElement.prototype={checkMasks:function(){if(!this.data.hasMask)return!1;for(var t=0,e=this.data.masksProperties.length;t<e;){if("n"!==this.data.masksProperties[t].mode&&!1!==this.data.masksProperties[t].cl)return!0;t+=1}return!1},initExpressions:function(){this.layerInterface=LayerExpressionInterface(this),this.data.hasMask&&this.maskManager&&this.layerInterface.registerMaskInterface(this.maskManager);var t=EffectsExpressionInterface.createEffectsInterface(this,this.layerInterface);this.layerInterface.registerEffectsInterface(t),0===this.data.ty||this.data.xt?this.compInterface=CompExpressionInterface(this):4===this.data.ty?(this.layerInterface.shapeInterface=ShapeExpressionInterface(this.shapesData,this.itemsData,this.layerInterface),this.layerInterface.content=this.layerInterface.shapeInterface):5===this.data.ty&&(this.layerInterface.textInterface=TextExpressionInterface(this),this.layerInterface.text=this.layerInterface.textInterface)},setBlendMode:function(){var t=getBlendMode(this.data.bm);(this.baseElement||this.layerElement).style["mix-blend-mode"]=t},initBaseData:function(t,e,n){this.globalData=e,this.comp=n,this.data=t,this.layerId=createElementID(),this.data.sr||(this.data.sr=1),this.effectsManager=new EffectsManager(this.data,this,this.dynamicProperties)},getType:function(){return this.type},sourceRectAtTime:function(){}},NullElement.prototype.prepareFrame=function(t){this.prepareProperties(t,!0)},NullElement.prototype.renderFrame=function(){},NullElement.prototype.getBaseElement=function(){return null},NullElement.prototype.destroy=function(){},NullElement.prototype.sourceRectAtTime=function(){},NullElement.prototype.hide=function(){},extendPrototype([BaseElement,TransformElement,HierarchyElement,FrameElement],NullElement),SVGBaseElement.prototype={initRendererElement:function(){this.layerElement=createNS("g")},createContainerElements:function(){this.matteElement=createNS("g"),this.transformedElement=this.layerElement,this.maskedElement=this.layerElement,this._sizeChanged=!1;var t,e,n,r=null;if(this.data.td){if(3==this.data.td||1==this.data.td){var i=createNS("mask");i.setAttribute("id",this.layerId),i.setAttribute("mask-type",3==this.data.td?"luminance":"alpha"),i.appendChild(this.layerElement),r=i,this.globalData.defs.appendChild(i),featureSupport.maskType||1!=this.data.td||(i.setAttribute("mask-type","luminance"),t=createElementID(),e=filtersFactory.createFilter(t),this.globalData.defs.appendChild(e),e.appendChild(filtersFactory.createAlphaToLuminanceFilter()),(n=createNS("g")).appendChild(this.layerElement),r=n,i.appendChild(n),n.setAttribute("filter","url("+locationHref+"#"+t+")"))}else if(2==this.data.td){var o=createNS("mask");o.setAttribute("id",this.layerId),o.setAttribute("mask-type","alpha");var a=createNS("g");o.appendChild(a),t=createElementID(),e=filtersFactory.createFilter(t);var s=createNS("feComponentTransfer");s.setAttribute("in","SourceGraphic"),e.appendChild(s);var u=createNS("feFuncA");u.setAttribute("type","table"),u.setAttribute("tableValues","1.0 0.0"),s.appendChild(u),this.globalData.defs.appendChild(e);var c=createNS("rect");c.setAttribute("width",this.comp.data.w),c.setAttribute("height",this.comp.data.h),c.setAttribute("x","0"),c.setAttribute("y","0"),c.setAttribute("fill","#ffffff"),c.setAttribute("opacity","0"),a.setAttribute("filter","url("+locationHref+"#"+t+")"),a.appendChild(c),a.appendChild(this.layerElement),r=a,featureSupport.maskType||(o.setAttribute("mask-type","luminance"),e.appendChild(filtersFactory.createAlphaToLuminanceFilter()),n=createNS("g"),a.appendChild(c),n.appendChild(this.layerElement),r=n,a.appendChild(n)),this.globalData.defs.appendChild(o)}}else this.data.tt?(this.matteElement.appendChild(this.layerElement),r=this.matteElement,this.baseElement=this.matteElement):this.baseElement=this.layerElement;if(this.data.ln&&this.layerElement.setAttribute("id",this.data.ln),this.data.cl&&this.layerElement.setAttribute("class",this.data.cl),0===this.data.ty&&!this.data.hd){var l=createNS("clipPath"),h=createNS("path");h.setAttribute("d","M0,0 L"+this.data.w+",0 L"+this.data.w+","+this.data.h+" L0,"+this.data.h+"z");var f=createElementID();if(l.setAttribute("id",f),l.appendChild(h),this.globalData.defs.appendChild(l),this.checkMasks()){var p=createNS("g");p.setAttribute("clip-path","url("+locationHref+"#"+f+")"),p.appendChild(this.layerElement),this.transformedElement=p,r?r.appendChild(this.transformedElement):this.baseElement=this.transformedElement}else this.layerElement.setAttribute("clip-path","url("+locationHref+"#"+f+")")}0!==this.data.bm&&this.setBlendMode()},renderElement:function(){this.finalTransform._matMdf&&this.transformedElement.setAttribute("transform",this.finalTransform.mat.to2dCSS()),this.finalTransform._opMdf&&this.transformedElement.setAttribute("opacity",this.finalTransform.mProp.o.v)},destroyBaseElement:function(){this.layerElement=null,this.matteElement=null,this.maskManager.destroy()},getBaseElement:function(){return this.data.hd?null:this.baseElement},createRenderableComponents:function(){this.maskManager=new MaskElement(this.data,this,this.globalData),this.renderableEffectsManager=new SVGEffects(this)},setMatte:function(t){this.matteElement&&this.matteElement.setAttribute("mask","url("+locationHref+"#"+t+")")}},IShapeElement.prototype={addShapeToModifiers:function(t){var e,n=this.shapeModifiers.length;for(e=0;e<n;e+=1)this.shapeModifiers[e].addShape(t)},isShapeInAnimatedModifiers:function(t){for(var e=this.shapeModifiers.length;0<e;)if(this.shapeModifiers[0].isAnimatedWithShape(t))return!0;return!1},renderModifiers:function(){if(this.shapeModifiers.length){var t,e=this.shapes.length;for(t=0;t<e;t+=1)this.shapes[t].sh.reset();for(t=(e=this.shapeModifiers.length)-1;t>=0;t-=1)this.shapeModifiers[t].processShapes(this._isFirstFrame)}},lcEnum:{1:"butt",2:"round",3:"square"},ljEnum:{1:"miter",2:"round",3:"bevel"},searchProcessedElement:function(t){for(var e=this.processedElements,n=0,r=e.length;n<r;){if(e[n].elem===t)return e[n].pos;n+=1}return 0},addProcessedElement:function(t,e){for(var n=this.processedElements,r=n.length;r;)if(n[r-=1].elem===t)return void(n[r].pos=e);n.push(new ProcessedElement(t,e))},prepareFrame:function(t){this.prepareRenderableFrame(t),this.prepareProperties(t,this.isInRange)}},ITextElement.prototype.initElement=function(t,e,n){this.lettersChangedFlag=!0,this.initFrame(),this.initBaseData(t,e,n),this.textProperty=new TextProperty(this,t.t,this.dynamicProperties),this.textAnimator=new TextAnimatorProperty(t.t,this.renderType,this),this.initTransform(t,e,n),this.initHierarchy(),this.initRenderable(),this.initRendererElement(),this.createContainerElements(),this.createRenderableComponents(),this.createContent(),this.hide(),this.textAnimator.searchProperties(this.dynamicProperties)},ITextElement.prototype.prepareFrame=function(t){this._mdf=!1,this.prepareRenderableFrame(t),this.prepareProperties(t,this.isInRange),(this.textProperty._mdf||this.textProperty._isFirstFrame)&&(this.buildNewText(),this.textProperty._isFirstFrame=!1,this.textProperty._mdf=!1)},ITextElement.prototype.createPathShape=function(t,e){var n,r,i=e.length,o="";for(n=0;n<i;n+=1)r=e[n].ks.k,o+=buildShapeString(r,r.i.length,!0,t);return o},ITextElement.prototype.updateDocumentData=function(t,e){this.textProperty.updateDocumentData(t,e)},ITextElement.prototype.canResizeFont=function(t){this.textProperty.canResizeFont(t)},ITextElement.prototype.setMinimumFontSize=function(t){this.textProperty.setMinimumFontSize(t)},ITextElement.prototype.applyTextPropertiesToMatrix=function(t,e,n,r,i){switch(t.ps&&e.translate(t.ps[0],t.ps[1]+t.ascent,0),e.translate(0,-t.ls,0),t.j){case 1:e.translate(t.justifyOffset+(t.boxWidth-t.lineWidths[n]),0,0);break;case 2:e.translate(t.justifyOffset+(t.boxWidth-t.lineWidths[n])/2,0,0)}e.translate(r,i,0)},ITextElement.prototype.buildColor=function(t){return"rgb("+Math.round(255*t[0])+","+Math.round(255*t[1])+","+Math.round(255*t[2])+")"},ITextElement.prototype.emptyProp=new LetterProps,ITextElement.prototype.destroy=function(){},extendPrototype([BaseElement,TransformElement,HierarchyElement,FrameElement,RenderableDOMElement],ICompElement),ICompElement.prototype.initElement=function(t,e,n){this.initFrame(),this.initBaseData(t,e,n),this.initTransform(t,e,n),this.initRenderable(),this.initHierarchy(),this.initRendererElement(),this.createContainerElements(),this.createRenderableComponents(),!this.data.xt&&e.progressiveLoad||this.buildAllItems(),this.hide()},ICompElement.prototype.prepareFrame=function(t){if(this._mdf=!1,this.prepareRenderableFrame(t),this.prepareProperties(t,this.isInRange),this.isInRange||this.data.xt){if(this.tm._placeholder)this.renderedFrame=t/this.data.sr;else{var e=this.tm.v;e===this.data.op&&(e=this.data.op-1),this.renderedFrame=e}var n,r=this.elements.length;for(this.completeLayers||this.checkLayers(this.renderedFrame),n=r-1;n>=0;n-=1)(this.completeLayers||this.elements[n])&&(this.elements[n].prepareFrame(this.renderedFrame-this.layers[n].st),this.elements[n]._mdf&&(this._mdf=!0))}},ICompElement.prototype.renderInnerContent=function(){var t,e=this.layers.length;for(t=0;t<e;t+=1)(this.completeLayers||this.elements[t])&&this.elements[t].renderFrame()},ICompElement.prototype.setElements=function(t){this.elements=t},ICompElement.prototype.getElements=function(){return this.elements},ICompElement.prototype.destroyElements=function(){var t,e=this.layers.length;for(t=0;t<e;t+=1)this.elements[t]&&this.elements[t].destroy()},ICompElement.prototype.destroy=function(){this.destroyElements(),this.destroyBaseElement()},extendPrototype([BaseElement,TransformElement,SVGBaseElement,HierarchyElement,FrameElement,RenderableDOMElement],IImageElement),IImageElement.prototype.createContent=function(){var t=this.globalData.getAssetsPath(this.assetData);this.innerElem=createNS("image"),this.innerElem.setAttribute("width",this.assetData.w+"px"),this.innerElem.setAttribute("height",this.assetData.h+"px"),this.innerElem.setAttribute("preserveAspectRatio",this.assetData.pr||this.globalData.renderConfig.imagePreserveAspectRatio),this.innerElem.setAttributeNS("http://www.w3.org/1999/xlink","href",t),this.layerElement.appendChild(this.innerElem)},IImageElement.prototype.sourceRectAtTime=function(){return this.sourceRect},extendPrototype([IImageElement],ISolidElement),ISolidElement.prototype.createContent=function(){var t=createNS("rect");t.setAttribute("width",this.data.sw),t.setAttribute("height",this.data.sh),t.setAttribute("fill",this.data.sc),this.layerElement.appendChild(t)},extendPrototype([SVGRenderer,ICompElement,SVGBaseElement],SVGCompElement),extendPrototype([BaseElement,TransformElement,SVGBaseElement,HierarchyElement,FrameElement,RenderableDOMElement,ITextElement],SVGTextElement),SVGTextElement.prototype.createContent=function(){this.data.singleShape&&!this.globalData.fontManager.chars&&(this.textContainer=createNS("text"))},SVGTextElement.prototype.buildTextContents=function(t){for(var e=0,n=t.length,r=[],i="";e<n;)t[e]===String.fromCharCode(13)||t[e]===String.fromCharCode(3)?(r.push(i),i=""):i+=t[e],e+=1;return r.push(i),r},SVGTextElement.prototype.buildNewText=function(){var t,e,n=this.textProperty.currentData;this.renderedLetters=createSizedArray(n?n.l.length:0),n.fc?this.layerElement.setAttribute("fill",this.buildColor(n.fc)):this.layerElement.setAttribute("fill","rgba(0,0,0,0)"),n.sc&&(this.layerElement.setAttribute("stroke",this.buildColor(n.sc)),this.layerElement.setAttribute("stroke-width",n.sw)),this.layerElement.setAttribute("font-size",n.finalSize);var r=this.globalData.fontManager.getFontByName(n.f);if(r.fClass)this.layerElement.setAttribute("class",r.fClass);else{this.layerElement.setAttribute("font-family",r.fFamily);var i=n.fWeight,o=n.fStyle;this.layerElement.setAttribute("font-style",o),this.layerElement.setAttribute("font-weight",i)}this.layerElement.setAttribute("arial-label",n.t);var a,s=n.l||[],u=!!this.globalData.fontManager.chars;e=s.length;var c,l=this.mHelper,h="",f=this.data.singleShape,p=0,d=0,m=!0,y=n.tr/1e3*n.finalSize;if(!f||u||n.sz){var g,v,b=this.textSpans.length;for(t=0;t<e;t+=1)u&&f&&0!==t||(a=b>t?this.textSpans[t]:createNS(u?"path":"text"),b<=t&&(a.setAttribute("stroke-linecap","butt"),a.setAttribute("stroke-linejoin","round"),a.setAttribute("stroke-miterlimit","4"),this.textSpans[t]=a,this.layerElement.appendChild(a)),a.style.display="inherit"),l.reset(),l.scale(n.finalSize/100,n.finalSize/100),f&&(s[t].n&&(p=-y,d+=n.yOffset,d+=m?1:0,m=!1),this.applyTextPropertiesToMatrix(n,l,s[t].line,p,d),p+=s[t].l||0,p+=y),u?(c=(g=(v=this.globalData.fontManager.getCharData(n.finalText[t],r.fStyle,this.globalData.fontManager.getFontByName(n.f).fFamily))&&v.data||{}).shapes?g.shapes[0].it:[],f?h+=this.createPathShape(l,c):a.setAttribute("d",this.createPathShape(l,c))):(f&&a.setAttribute("transform","translate("+l.props[12]+","+l.props[13]+")"),a.textContent=s[t].val,a.setAttributeNS("http://www.w3.org/XML/1998/namespace","xml:space","preserve"));f&&a&&a.setAttribute("d",h)}else{var _=this.textContainer,w="start";switch(n.j){case 1:w="end";break;case 2:w="middle"}_.setAttribute("text-anchor",w),_.setAttribute("letter-spacing",y);var E=this.buildTextContents(n.finalText);for(e=E.length,d=n.ps?n.ps[1]+n.ascent:0,t=0;t<e;t+=1)(a=this.textSpans[t]||createNS("tspan")).textContent=E[t],a.setAttribute("x",0),a.setAttribute("y",d),a.style.display="inherit",_.appendChild(a),this.textSpans[t]=a,d+=n.finalLineHeight;this.layerElement.appendChild(_)}for(;t<this.textSpans.length;)this.textSpans[t].style.display="none",t+=1;this._sizeChanged=!0},SVGTextElement.prototype.sourceRectAtTime=function(t){if(this.prepareFrame(this.comp.renderedFrame-this.data.st),this.renderInnerContent(),this._sizeChanged){this._sizeChanged=!1;var e=this.layerElement.getBBox();this.bbox={top:e.y,left:e.x,width:e.width,height:e.height}}return this.bbox},SVGTextElement.prototype.renderInnerContent=function(){if(!this.data.singleShape&&(this.textAnimator.getMeasures(this.textProperty.currentData,this.lettersChangedFlag),this.lettersChangedFlag||this.textAnimator.lettersChangedFlag)){var t,e;this._sizeChanged=!0;var n,r,i=this.textAnimator.renderedLetters,o=this.textProperty.currentData.l;for(e=o.length,t=0;t<e;t+=1)o[t].n||(n=i[t],r=this.textSpans[t],n._mdf.m&&r.setAttribute("transform",n.m),n._mdf.o&&r.setAttribute("opacity",n.o),n._mdf.sw&&r.setAttribute("stroke-width",n.sw),n._mdf.sc&&r.setAttribute("stroke",n.sc),n._mdf.fc&&r.setAttribute("fill",n.fc))}},extendPrototype([BaseElement,TransformElement,SVGBaseElement,IShapeElement,HierarchyElement,FrameElement,RenderableDOMElement],SVGShapeElement),SVGShapeElement.prototype.initSecondaryElement=function(){},SVGShapeElement.prototype.identityMatrix=new Matrix,SVGShapeElement.prototype.buildExpressionInterface=function(){},SVGShapeElement.prototype.createContent=function(){this.searchShapes(this.shapesData,this.itemsData,this.prevViewData,this.layerElement,0,[],!0),this.filterUniqueShapes()},SVGShapeElement.prototype.filterUniqueShapes=function(){var t,e,n,r,i=this.shapes.length,o=this.stylesList.length,a=[],s=!1;for(n=0;n<o;n+=1){for(r=this.stylesList[n],s=!1,a.length=0,t=0;t<i;t+=1)-1!==(e=this.shapes[t]).styles.indexOf(r)&&(a.push(e),s=e._isAnimated||s);a.length>1&&s&&this.setShapesAsAnimated(a)}},SVGShapeElement.prototype.setShapesAsAnimated=function(t){var e,n=t.length;for(e=0;e<n;e+=1)t[e].setAsAnimated()},SVGShapeElement.prototype.createStyleElement=function(t,e){var n,r=new SVGStyleData(t,e),i=r.pElem;if("st"===t.ty)n=new SVGStrokeStyleData(this,t,r);else if("fl"===t.ty)n=new SVGFillStyleData(this,t,r);else if("gf"===t.ty||"gs"===t.ty){n=new("gf"===t.ty?SVGGradientFillStyleData:SVGGradientStrokeStyleData)(this,t,r),this.globalData.defs.appendChild(n.gf),n.maskId&&(this.globalData.defs.appendChild(n.ms),this.globalData.defs.appendChild(n.of),i.setAttribute("mask","url("+locationHref+"#"+n.maskId+")"))}return"st"!==t.ty&&"gs"!==t.ty||(i.setAttribute("stroke-linecap",this.lcEnum[t.lc]||"round"),i.setAttribute("stroke-linejoin",this.ljEnum[t.lj]||"round"),i.setAttribute("fill-opacity","0"),1===t.lj&&i.setAttribute("stroke-miterlimit",t.ml)),2===t.r&&i.setAttribute("fill-rule","evenodd"),t.ln&&i.setAttribute("id",t.ln),t.cl&&i.setAttribute("class",t.cl),t.bm&&(i.style["mix-blend-mode"]=getBlendMode(t.bm)),this.stylesList.push(r),this.addToAnimatedContents(t,n),n},SVGShapeElement.prototype.createGroupElement=function(t){var e=new ShapeGroupData;return t.ln&&e.gr.setAttribute("id",t.ln),t.cl&&e.gr.setAttribute("class",t.cl),t.bm&&(e.gr.style["mix-blend-mode"]=getBlendMode(t.bm)),e},SVGShapeElement.prototype.createTransformElement=function(t,e){var n=TransformPropertyFactory.getTransformProperty(this,t,this),r=new SVGTransformData(n,n.o,e);return this.addToAnimatedContents(t,r),r},SVGShapeElement.prototype.createShapeElement=function(t,e,n){var r=4;"rc"===t.ty?r=5:"el"===t.ty?r=6:"sr"===t.ty&&(r=7);var i=new SVGShapeData(e,n,ShapePropertyFactory.getShapeProp(this,t,r,this));return this.shapes.push(i),this.addShapeToModifiers(i),this.addToAnimatedContents(t,i),i},SVGShapeElement.prototype.addToAnimatedContents=function(t,e){for(var n=0,r=this.animatedContents.length;n<r;){if(this.animatedContents[n].element===e)return;n+=1}this.animatedContents.push({fn:SVGElementsRenderer.createRenderFunction(t),element:e,data:t})},SVGShapeElement.prototype.setElementStyles=function(t){var e,n=t.styles,r=this.stylesList.length;for(e=0;e<r;e+=1)this.stylesList[e].closed||n.push(this.stylesList[e])},SVGShapeElement.prototype.reloadShapes=function(){this._isFirstFrame=!0;var t,e=this.itemsData.length;for(t=0;t<e;t+=1)this.prevViewData[t]=this.itemsData[t];for(this.searchShapes(this.shapesData,this.itemsData,this.prevViewData,this.layerElement,0,[],!0),this.filterUniqueShapes(),e=this.dynamicProperties.length,t=0;t<e;t+=1)this.dynamicProperties[t].getValue();this.renderModifiers()},SVGShapeElement.prototype.searchShapes=function(t,e,n,r,i,o,a){var s,u,c,l,h,f,p=[].concat(o),d=t.length-1,m=[],y=[];for(s=d;s>=0;s-=1){if((f=this.searchProcessedElement(t[s]))?e[s]=n[f-1]:t[s]._render=a,"fl"==t[s].ty||"st"==t[s].ty||"gf"==t[s].ty||"gs"==t[s].ty)f?e[s].style.closed=!1:e[s]=this.createStyleElement(t[s],i),t[s]._render&&r.appendChild(e[s].style.pElem),m.push(e[s].style);else if("gr"==t[s].ty){if(f)for(c=e[s].it.length,u=0;u<c;u+=1)e[s].prevViewData[u]=e[s].it[u];else e[s]=this.createGroupElement(t[s]);this.searchShapes(t[s].it,e[s].it,e[s].prevViewData,e[s].gr,i+1,p,a),t[s]._render&&r.appendChild(e[s].gr)}else"tr"==t[s].ty?(f||(e[s]=this.createTransformElement(t[s],r)),l=e[s].transform,p.push(l)):"sh"==t[s].ty||"rc"==t[s].ty||"el"==t[s].ty||"sr"==t[s].ty?(f||(e[s]=this.createShapeElement(t[s],p,i)),this.setElementStyles(e[s])):"tm"==t[s].ty||"rd"==t[s].ty||"ms"==t[s].ty?(f?(h=e[s]).closed=!1:((h=ShapeModifiers.getModifier(t[s].ty)).init(this,t[s]),e[s]=h,this.shapeModifiers.push(h)),y.push(h)):"rp"==t[s].ty&&(f?(h=e[s]).closed=!0:(h=ShapeModifiers.getModifier(t[s].ty),e[s]=h,h.init(this,t,s,e),this.shapeModifiers.push(h),a=!1),y.push(h));this.addProcessedElement(t[s],s+1)}for(d=m.length,s=0;s<d;s+=1)m[s].closed=!0;for(d=y.length,s=0;s<d;s+=1)y[s].closed=!0},SVGShapeElement.prototype.renderInnerContent=function(){this.renderModifiers();var t,e=this.stylesList.length;for(t=0;t<e;t+=1)this.stylesList[t].reset();for(this.renderShape(),t=0;t<e;t+=1)(this.stylesList[t]._mdf||this._isFirstFrame)&&(this.stylesList[t].msElem&&(this.stylesList[t].msElem.setAttribute("d",this.stylesList[t].d),this.stylesList[t].d="M0 0"+this.stylesList[t].d),this.stylesList[t].pElem.setAttribute("d",this.stylesList[t].d||"M0 0"))},SVGShapeElement.prototype.renderShape=function(){var t,e,n=this.animatedContents.length;for(t=0;t<n;t+=1)e=this.animatedContents[t],(this._isFirstFrame||e.element._isAnimated)&&!0!==e.data&&e.fn(e.data,e.element,this._isFirstFrame)},SVGShapeElement.prototype.destroy=function(){this.destroyBaseElement(),this.shapesData=null,this.itemsData=null},SVGTintFilter.prototype.renderFrame=function(t){if(t||this.filterManager._mdf){var e=this.filterManager.effectElements[0].p.v,n=this.filterManager.effectElements[1].p.v,r=this.filterManager.effectElements[2].p.v/100;this.matrixFilter.setAttribute("values",n[0]-e[0]+" 0 0 0 "+e[0]+" "+(n[1]-e[1])+" 0 0 0 "+e[1]+" "+(n[2]-e[2])+" 0 0 0 "+e[2]+" 0 0 0 "+r+" 0")}},SVGFillFilter.prototype.renderFrame=function(t){if(t||this.filterManager._mdf){var e=this.filterManager.effectElements[2].p.v,n=this.filterManager.effectElements[6].p.v;this.matrixFilter.setAttribute("values","0 0 0 0 "+e[0]+" 0 0 0 0 "+e[1]+" 0 0 0 0 "+e[2]+" 0 0 0 "+n+" 0")}},SVGStrokeEffect.prototype.initialize=function(){var t,e,n,r,i=this.elem.layerElement.children||this.elem.layerElement.childNodes;for(1===this.filterManager.effectElements[1].p.v?(r=this.elem.maskManager.masksProperties.length,n=0):r=(n=this.filterManager.effectElements[0].p.v-1)+1,(e=createNS("g")).setAttribute("fill","none"),e.setAttribute("stroke-linecap","round"),e.setAttribute("stroke-dashoffset",1);n<r;n+=1)t=createNS("path"),e.appendChild(t),this.paths.push({p:t,m:n});if(3===this.filterManager.effectElements[10].p.v){var o=createNS("mask"),a=createElementID();o.setAttribute("id",a),o.setAttribute("mask-type","alpha"),o.appendChild(e),this.elem.globalData.defs.appendChild(o);var s=createNS("g");for(s.setAttribute("mask","url("+locationHref+"#"+a+")");i[0];)s.appendChild(i[0]);this.elem.layerElement.appendChild(s),this.masker=o,e.setAttribute("stroke","#fff")}else if(1===this.filterManager.effectElements[10].p.v||2===this.filterManager.effectElements[10].p.v){if(2===this.filterManager.effectElements[10].p.v)for(i=this.elem.layerElement.children||this.elem.layerElement.childNodes;i.length;)this.elem.layerElement.removeChild(i[0]);this.elem.layerElement.appendChild(e),this.elem.layerElement.removeAttribute("mask"),e.setAttribute("stroke","#fff")}this.initialized=!0,this.pathMasker=e},SVGStrokeEffect.prototype.renderFrame=function(t){this.initialized||this.initialize();var e,n,r,i=this.paths.length;for(e=0;e<i;e+=1)if(-1!==this.paths[e].m&&(n=this.elem.maskManager.viewData[this.paths[e].m],r=this.paths[e].p,(t||this.filterManager._mdf||n.prop._mdf)&&r.setAttribute("d",n.lastPath),t||this.filterManager.effectElements[9].p._mdf||this.filterManager.effectElements[4].p._mdf||this.filterManager.effectElements[7].p._mdf||this.filterManager.effectElements[8].p._mdf||n.prop._mdf)){var o;if(0!==this.filterManager.effectElements[7].p.v||100!==this.filterManager.effectElements[8].p.v){var a=Math.min(this.filterManager.effectElements[7].p.v,this.filterManager.effectElements[8].p.v)/100,s=Math.max(this.filterManager.effectElements[7].p.v,this.filterManager.effectElements[8].p.v)/100,u=r.getTotalLength();o="0 0 0 "+u*a+" ";var c,l=u*(s-a),h=1+2*this.filterManager.effectElements[4].p.v*this.filterManager.effectElements[9].p.v/100,f=Math.floor(l/h);for(c=0;c<f;c+=1)o+="1 "+2*this.filterManager.effectElements[4].p.v*this.filterManager.effectElements[9].p.v/100+" ";o+="0 "+10*u+" 0 0"}else o="1 "+2*this.filterManager.effectElements[4].p.v*this.filterManager.effectElements[9].p.v/100;r.setAttribute("stroke-dasharray",o)}if((t||this.filterManager.effectElements[4].p._mdf)&&this.pathMasker.setAttribute("stroke-width",2*this.filterManager.effectElements[4].p.v),(t||this.filterManager.effectElements[6].p._mdf)&&this.pathMasker.setAttribute("opacity",this.filterManager.effectElements[6].p.v),(1===this.filterManager.effectElements[10].p.v||2===this.filterManager.effectElements[10].p.v)&&(t||this.filterManager.effectElements[3].p._mdf)){var p=this.filterManager.effectElements[3].p.v;this.pathMasker.setAttribute("stroke","rgb("+bm_floor(255*p[0])+","+bm_floor(255*p[1])+","+bm_floor(255*p[2])+")")}},SVGTritoneFilter.prototype.renderFrame=function(t){if(t||this.filterManager._mdf){var e=this.filterManager.effectElements[0].p.v,n=this.filterManager.effectElements[1].p.v,r=this.filterManager.effectElements[2].p.v,i=r[0]+" "+n[0]+" "+e[0],o=r[1]+" "+n[1]+" "+e[1],a=r[2]+" "+n[2]+" "+e[2];this.feFuncR.setAttribute("tableValues",i),this.feFuncG.setAttribute("tableValues",o),this.feFuncB.setAttribute("tableValues",a)}},SVGProLevelsFilter.prototype.createFeFunc=function(t,e){var n=createNS(t);return n.setAttribute("type","table"),e.appendChild(n),n},SVGProLevelsFilter.prototype.getTableValue=function(t,e,n,r,i){for(var o,a,s=0,u=Math.min(t,e),c=Math.max(t,e),l=Array.call(null,{length:256}),h=0,f=i-r,p=e-t;s<=256;)a=(o=s/256)<=u?p<0?i:r:o>=c?p<0?r:i:r+f*Math.pow((o-t)/p,1/n),l[h++]=a,s+=256/255;return l.join(" ")},SVGProLevelsFilter.prototype.renderFrame=function(t){if(t||this.filterManager._mdf){var e,n=this.filterManager.effectElements;this.feFuncRComposed&&(t||n[3].p._mdf||n[4].p._mdf||n[5].p._mdf||n[6].p._mdf||n[7].p._mdf)&&(e=this.getTableValue(n[3].p.v,n[4].p.v,n[5].p.v,n[6].p.v,n[7].p.v),this.feFuncRComposed.setAttribute("tableValues",e),this.feFuncGComposed.setAttribute("tableValues",e),this.feFuncBComposed.setAttribute("tableValues",e)),this.feFuncR&&(t||n[10].p._mdf||n[11].p._mdf||n[12].p._mdf||n[13].p._mdf||n[14].p._mdf)&&(e=this.getTableValue(n[10].p.v,n[11].p.v,n[12].p.v,n[13].p.v,n[14].p.v),this.feFuncR.setAttribute("tableValues",e)),this.feFuncG&&(t||n[17].p._mdf||n[18].p._mdf||n[19].p._mdf||n[20].p._mdf||n[21].p._mdf)&&(e=this.getTableValue(n[17].p.v,n[18].p.v,n[19].p.v,n[20].p.v,n[21].p.v),this.feFuncG.setAttribute("tableValues",e)),this.feFuncB&&(t||n[24].p._mdf||n[25].p._mdf||n[26].p._mdf||n[27].p._mdf||n[28].p._mdf)&&(e=this.getTableValue(n[24].p.v,n[25].p.v,n[26].p.v,n[27].p.v,n[28].p.v),this.feFuncB.setAttribute("tableValues",e)),this.feFuncA&&(t||n[31].p._mdf||n[32].p._mdf||n[33].p._mdf||n[34].p._mdf||n[35].p._mdf)&&(e=this.getTableValue(n[31].p.v,n[32].p.v,n[33].p.v,n[34].p.v,n[35].p.v),this.feFuncA.setAttribute("tableValues",e))}},SVGDropShadowEffect.prototype.renderFrame=function(t){if(t||this.filterManager._mdf){if((t||this.filterManager.effectElements[4].p._mdf)&&this.feGaussianBlur.setAttribute("stdDeviation",this.filterManager.effectElements[4].p.v/4),t||this.filterManager.effectElements[0].p._mdf){var e=this.filterManager.effectElements[0].p.v;this.feFlood.setAttribute("flood-color",rgbToHex(Math.round(255*e[0]),Math.round(255*e[1]),Math.round(255*e[2])))}if((t||this.filterManager.effectElements[1].p._mdf)&&this.feFlood.setAttribute("flood-opacity",this.filterManager.effectElements[1].p.v/255),t||this.filterManager.effectElements[2].p._mdf||this.filterManager.effectElements[3].p._mdf){var n=this.filterManager.effectElements[3].p.v,r=(this.filterManager.effectElements[2].p.v-90)*degToRads,i=n*Math.cos(r),o=n*Math.sin(r);this.feOffset.setAttribute("dx",i),this.feOffset.setAttribute("dy",o)}}};var _svgMatteSymbols=[];function SVGMatte3Effect(t,e,n){this.initialized=!1,this.filterManager=e,this.filterElem=t,this.elem=n,n.matteElement=createNS("g"),n.matteElement.appendChild(n.layerElement),n.matteElement.appendChild(n.transformedElement),n.baseElement=n.matteElement}function SVGEffects(t){var e,n,r=t.data.ef?t.data.ef.length:0,i=createElementID(),o=filtersFactory.createFilter(i),a=0;for(this.filters=[],e=0;e<r;e+=1)n=null,20===t.data.ef[e].ty?(a+=1,n=new SVGTintFilter(o,t.effectsManager.effectElements[e])):21===t.data.ef[e].ty?(a+=1,n=new SVGFillFilter(o,t.effectsManager.effectElements[e])):22===t.data.ef[e].ty?n=new SVGStrokeEffect(t,t.effectsManager.effectElements[e]):23===t.data.ef[e].ty?(a+=1,n=new SVGTritoneFilter(o,t.effectsManager.effectElements[e])):24===t.data.ef[e].ty?(a+=1,n=new SVGProLevelsFilter(o,t.effectsManager.effectElements[e])):25===t.data.ef[e].ty?(a+=1,n=new SVGDropShadowEffect(o,t.effectsManager.effectElements[e])):28===t.data.ef[e].ty&&(n=new SVGMatte3Effect(o,t.effectsManager.effectElements[e],t)),n&&this.filters.push(n);a&&(t.globalData.defs.appendChild(o),t.layerElement.setAttribute("filter","url("+locationHref+"#"+i+")")),this.filters.length&&t.addRenderableComponent(this)}function CVContextData(){this.saved=[],this.cArrPos=0,this.cTr=new Matrix,this.cO=1;var t;for(this.savedOp=createTypedArray("float32",15),t=0;t<15;t+=1)this.saved[t]=createTypedArray("float32",16);this._length=15}function CVBaseElement(){}function CVImageElement(t,e,n){this.failed=!1,this.assetData=e.getAssetData(t.refId),this.img=e.imageLoader.getImage(this.assetData),this.initElement(t,e,n)}function CVCompElement(t,e,n){this.completeLayers=!1,this.layers=t.layers,this.pendingElements=[],this.elements=createSizedArray(this.layers.length),this.initElement(t,e,n),this.tm=t.tm?PropertyFactory.getProp(this,t.tm,0,e.frameRate,this):{_placeholder:!0}}function CVMaskElement(t,e){this.data=t,this.element=e,this.masksProperties=this.data.masksProperties||[],this.viewData=createSizedArray(this.masksProperties.length);var n,r=this.masksProperties.length,i=!1;for(n=0;n<r;n++)"n"!==this.masksProperties[n].mode&&(i=!0),this.viewData[n]=ShapePropertyFactory.getShapeProp(this.element,this.masksProperties[n],3);this.hasMasks=i,i&&this.element.addRenderableComponent(this)}function CVShapeElement(t,e,n){this.shapes=[],this.shapesData=t.shapes,this.stylesList=[],this.itemsData=[],this.prevViewData=[],this.shapeModifiers=[],this.processedElements=[],this.transformsManager=new ShapeTransformManager,this.initElement(t,e,n)}function CVSolidElement(t,e,n){this.initElement(t,e,n)}function CVTextElement(t,e,n){this.textSpans=[],this.yOffset=0,this.fillColorAnim=!1,this.strokeColorAnim=!1,this.strokeWidthAnim=!1,this.stroke=!1,this.fill=!1,this.justifyOffset=0,this.currentRender=null,this.renderType="canvas",this.values={fill:"rgba(0,0,0,0)",stroke:"rgba(0,0,0,0)",sWidth:0,fValue:""},this.initElement(t,e,n)}function CVEffects(){}function HBaseElement(t,e,n){}function HSolidElement(t,e,n){this.initElement(t,e,n)}function HCompElement(t,e,n){this.layers=t.layers,this.supports3d=!t.hasMask,this.completeLayers=!1,this.pendingElements=[],this.elements=this.layers?createSizedArray(this.layers.length):[],this.initElement(t,e,n),this.tm=t.tm?PropertyFactory.getProp(this,t.tm,0,e.frameRate,this):{_placeholder:!0}}function HShapeElement(t,e,n){this.shapes=[],this.shapesData=t.shapes,this.stylesList=[],this.shapeModifiers=[],this.itemsData=[],this.processedElements=[],this.animatedContents=[],this.shapesContainer=createNS("g"),this.initElement(t,e,n),this.prevViewData=[],this.currentBBox={x:999999,y:-999999,h:0,w:0}}function HTextElement(t,e,n){this.textSpans=[],this.textPaths=[],this.currentBBox={x:999999,y:-999999,h:0,w:0},this.renderType="svg",this.isMasked=!1,this.initElement(t,e,n)}function HImageElement(t,e,n){this.assetData=e.getAssetData(t.refId),this.initElement(t,e,n)}function HCameraElement(t,e,n){this.initFrame(),this.initBaseData(t,e,n),this.initHierarchy();var r=PropertyFactory.getProp;if(this.pe=r(this,t.pe,0,0,this),t.ks.p.s?(this.px=r(this,t.ks.p.x,1,0,this),this.py=r(this,t.ks.p.y,1,0,this),this.pz=r(this,t.ks.p.z,1,0,this)):this.p=r(this,t.ks.p,1,0,this),t.ks.a&&(this.a=r(this,t.ks.a,1,0,this)),t.ks.or.k.length&&t.ks.or.k[0].to){var i,o=t.ks.or.k.length;for(i=0;i<o;i+=1)t.ks.or.k[i].to=null,t.ks.or.k[i].ti=null}this.or=r(this,t.ks.or,1,degToRads,this),this.or.sh=!0,this.rx=r(this,t.ks.rx,0,degToRads,this),this.ry=r(this,t.ks.ry,0,degToRads,this),this.rz=r(this,t.ks.rz,0,degToRads,this),this.mat=new Matrix,this._prevMat=new Matrix,this._isFirstFrame=!0,this.finalTransform={mProp:this}}function HEffects(){}SVGMatte3Effect.prototype.findSymbol=function(t){for(var e=0,n=_svgMatteSymbols.length;e<n;){if(_svgMatteSymbols[e]===t)return _svgMatteSymbols[e];e+=1}return null},SVGMatte3Effect.prototype.replaceInParent=function(t,e){var n=t.layerElement.parentNode;if(n){for(var r,i=n.children,o=0,a=i.length;o<a&&i[o]!==t.layerElement;)o+=1;o<=a-2&&(r=i[o+1]);var s=createNS("use");s.setAttribute("href","#"+e),r?n.insertBefore(s,r):n.appendChild(s)}},SVGMatte3Effect.prototype.setElementAsMask=function(t,e){if(!this.findSymbol(e)){var n=createElementID(),r=createNS("mask");r.setAttribute("id",e.layerId),r.setAttribute("mask-type","alpha"),_svgMatteSymbols.push(e);var i=t.globalData.defs;i.appendChild(r);var o=createNS("symbol");o.setAttribute("id",n),this.replaceInParent(e,n),o.appendChild(e.layerElement),i.appendChild(o);var a=createNS("use");a.setAttribute("href","#"+n),r.appendChild(a),e.data.hd=!1,e.show()}t.setMatte(e.layerId)},SVGMatte3Effect.prototype.initialize=function(){for(var t=this.filterManager.effectElements[0].p.v,e=this.elem.comp.elements,n=0,r=e.length;n<r;)e[n]&&e[n].data.ind===t&&this.setElementAsMask(this.elem,e[n]),n+=1;this.initialized=!0},SVGMatte3Effect.prototype.renderFrame=function(){this.initialized||this.initialize()},SVGEffects.prototype.renderFrame=function(t){var e,n=this.filters.length;for(e=0;e<n;e+=1)this.filters[e].renderFrame(t)},CVContextData.prototype.duplicate=function(){var t=2*this._length,e=this.savedOp;this.savedOp=createTypedArray("float32",t),this.savedOp.set(e);var n=0;for(n=this._length;n<t;n+=1)this.saved[n]=createTypedArray("float32",16);this._length=t},CVContextData.prototype.reset=function(){this.cArrPos=0,this.cTr.reset(),this.cO=1},CVBaseElement.prototype={createElements:function(){},initRendererElement:function(){},createContainerElements:function(){this.canvasContext=this.globalData.canvasContext,this.renderableEffectsManager=new CVEffects(this)},createContent:function(){},setBlendMode:function(){var t=this.globalData;if(t.blendMode!==this.data.bm){t.blendMode=this.data.bm;var e=getBlendMode(this.data.bm);t.canvasContext.globalCompositeOperation=e}},createRenderableComponents:function(){this.maskManager=new CVMaskElement(this.data,this)},hideElement:function(){this.hidden||this.isInRange&&!this.isTransparent||(this.hidden=!0)},showElement:function(){this.isInRange&&!this.isTransparent&&(this.hidden=!1,this._isFirstFrame=!0,this.maskManager._isFirstFrame=!0)},renderFrame:function(){this.hidden||this.data.hd||(this.renderTransform(),this.renderRenderable(),this.setBlendMode(),this.globalData.renderer.save(),this.globalData.renderer.ctxTransform(this.finalTransform.mat.props),this.globalData.renderer.ctxOpacity(this.finalTransform.mProp.o.v),this.renderInnerContent(),this.globalData.renderer.restore(),this.maskManager.hasMasks&&this.globalData.renderer.restore(!0),this._isFirstFrame&&(this._isFirstFrame=!1))},destroy:function(){this.canvasContext=null,this.data=null,this.globalData=null,this.maskManager.destroy()},mHelper:new Matrix},CVBaseElement.prototype.hide=CVBaseElement.prototype.hideElement,CVBaseElement.prototype.show=CVBaseElement.prototype.showElement,extendPrototype([BaseElement,TransformElement,CVBaseElement,HierarchyElement,FrameElement,RenderableElement],CVImageElement),CVImageElement.prototype.initElement=SVGShapeElement.prototype.initElement,CVImageElement.prototype.prepareFrame=IImageElement.prototype.prepareFrame,CVImageElement.prototype.createContent=function(){if(this.img.width&&(this.assetData.w!==this.img.width||this.assetData.h!==this.img.height)){var t=createTag("canvas");t.width=this.assetData.w,t.height=this.assetData.h;var e,n,r=t.getContext("2d"),i=this.img.width,o=this.img.height,a=i/o,s=this.assetData.w/this.assetData.h,u=this.assetData.pr||this.globalData.renderConfig.imagePreserveAspectRatio;a>s&&"xMidYMid slice"===u||a<s&&"xMidYMid slice"!==u?e=(n=o)*s:n=(e=i)/s,r.drawImage(this.img,(i-e)/2,(o-n)/2,e,n,0,0,this.assetData.w,this.assetData.h),this.img=t}},CVImageElement.prototype.renderInnerContent=function(t){this.failed||this.canvasContext.drawImage(this.img,0,0)},CVImageElement.prototype.destroy=function(){this.img=null},extendPrototype([CanvasRenderer,ICompElement,CVBaseElement],CVCompElement),CVCompElement.prototype.renderInnerContent=function(){var t;for(t=this.layers.length-1;t>=0;t-=1)(this.completeLayers||this.elements[t])&&this.elements[t].renderFrame()},CVCompElement.prototype.destroy=function(){var t;for(t=this.layers.length-1;t>=0;t-=1)this.elements[t]&&this.elements[t].destroy();this.layers=null,this.elements=null},CVMaskElement.prototype.renderFrame=function(){if(this.hasMasks){var t,e,n,r,i=this.element.finalTransform.mat,o=this.element.canvasContext,a=this.masksProperties.length;for(o.beginPath(),t=0;t<a;t++)if("n"!==this.masksProperties[t].mode){this.masksProperties[t].inv&&(o.moveTo(0,0),o.lineTo(this.element.globalData.compSize.w,0),o.lineTo(this.element.globalData.compSize.w,this.element.globalData.compSize.h),o.lineTo(0,this.element.globalData.compSize.h),o.lineTo(0,0)),r=this.viewData[t].v,e=i.applyToPointArray(r.v[0][0],r.v[0][1],0),o.moveTo(e[0],e[1]);var s,u=r._length;for(s=1;s<u;s++)n=i.applyToTriplePoints(r.o[s-1],r.i[s],r.v[s]),o.bezierCurveTo(n[0],n[1],n[2],n[3],n[4],n[5]);n=i.applyToTriplePoints(r.o[s-1],r.i[0],r.v[0]),o.bezierCurveTo(n[0],n[1],n[2],n[3],n[4],n[5])}this.element.globalData.renderer.save(!0),o.clip()}},CVMaskElement.prototype.getMaskProperty=MaskElement.prototype.getMaskProperty,CVMaskElement.prototype.destroy=function(){this.element=null},extendPrototype([BaseElement,TransformElement,CVBaseElement,IShapeElement,HierarchyElement,FrameElement,RenderableElement],CVShapeElement),CVShapeElement.prototype.initElement=RenderableDOMElement.prototype.initElement,CVShapeElement.prototype.transformHelper={opacity:1,_opMdf:!1},CVShapeElement.prototype.dashResetter=[],CVShapeElement.prototype.createContent=function(){this.searchShapes(this.shapesData,this.itemsData,this.prevViewData,!0,[])},CVShapeElement.prototype.createStyleElement=function(t,e){var n={data:t,type:t.ty,preTransforms:this.transformsManager.addTransformSequence(e),transforms:[],elements:[],closed:!0===t.hd},r={};if("fl"==t.ty||"st"==t.ty?(r.c=PropertyFactory.getProp(this,t.c,1,255,this),r.c.k||(n.co="rgb("+bm_floor(r.c.v[0])+","+bm_floor(r.c.v[1])+","+bm_floor(r.c.v[2])+")")):"gf"!==t.ty&&"gs"!==t.ty||(r.s=PropertyFactory.getProp(this,t.s,1,null,this),r.e=PropertyFactory.getProp(this,t.e,1,null,this),r.h=PropertyFactory.getProp(this,t.h||{k:0},0,.01,this),r.a=PropertyFactory.getProp(this,t.a||{k:0},0,degToRads,this),r.g=new GradientProperty(this,t.g,this)),r.o=PropertyFactory.getProp(this,t.o,0,.01,this),"st"==t.ty||"gs"==t.ty){if(n.lc=this.lcEnum[t.lc]||"round",n.lj=this.ljEnum[t.lj]||"round",1==t.lj&&(n.ml=t.ml),r.w=PropertyFactory.getProp(this,t.w,0,null,this),r.w.k||(n.wi=r.w.v),t.d){var i=new DashProperty(this,t.d,"canvas",this);r.d=i,r.d.k||(n.da=r.d.dashArray,n.do=r.d.dashoffset[0])}}else n.r=2===t.r?"evenodd":"nonzero";return this.stylesList.push(n),r.style=n,r},CVShapeElement.prototype.createGroupElement=function(t){return{it:[],prevViewData:[]}},CVShapeElement.prototype.createTransformElement=function(t){return{transform:{opacity:1,_opMdf:!1,key:this.transformsManager.getNewKey(),op:PropertyFactory.getProp(this,t.o,0,.01,this),mProps:TransformPropertyFactory.getTransformProperty(this,t,this)}}},CVShapeElement.prototype.createShapeElement=function(t){var e=new CVShapeData(this,t,this.stylesList,this.transformsManager);return this.shapes.push(e),this.addShapeToModifiers(e),e},CVShapeElement.prototype.reloadShapes=function(){this._isFirstFrame=!0;var t,e=this.itemsData.length;for(t=0;t<e;t+=1)this.prevViewData[t]=this.itemsData[t];for(this.searchShapes(this.shapesData,this.itemsData,this.prevViewData,!0,[]),e=this.dynamicProperties.length,t=0;t<e;t+=1)this.dynamicProperties[t].getValue();this.renderModifiers(),this.transformsManager.processSequences(this._isFirstFrame)},CVShapeElement.prototype.addTransformToStyleList=function(t){var e,n=this.stylesList.length;for(e=0;e<n;e+=1)this.stylesList[e].closed||this.stylesList[e].transforms.push(t)},CVShapeElement.prototype.removeTransformFromStyleList=function(){var t,e=this.stylesList.length;for(t=0;t<e;t+=1)this.stylesList[t].closed||this.stylesList[t].transforms.pop()},CVShapeElement.prototype.closeStyles=function(t){var e,n=t.length;for(e=0;e<n;e+=1)t[e].closed=!0},CVShapeElement.prototype.searchShapes=function(t,e,n,r,i){var o,a,s,u,c,l,h=t.length-1,f=[],p=[],d=[].concat(i);for(o=h;o>=0;o-=1){if((u=this.searchProcessedElement(t[o]))?e[o]=n[u-1]:t[o]._shouldRender=r,"fl"==t[o].ty||"st"==t[o].ty||"gf"==t[o].ty||"gs"==t[o].ty)u?e[o].style.closed=!1:e[o]=this.createStyleElement(t[o],d),f.push(e[o].style);else if("gr"==t[o].ty){if(u)for(s=e[o].it.length,a=0;a<s;a+=1)e[o].prevViewData[a]=e[o].it[a];else e[o]=this.createGroupElement(t[o]);this.searchShapes(t[o].it,e[o].it,e[o].prevViewData,r,d)}else"tr"==t[o].ty?(u||(l=this.createTransformElement(t[o]),e[o]=l),d.push(e[o]),this.addTransformToStyleList(e[o])):"sh"==t[o].ty||"rc"==t[o].ty||"el"==t[o].ty||"sr"==t[o].ty?u||(e[o]=this.createShapeElement(t[o])):"tm"==t[o].ty||"rd"==t[o].ty?(u?(c=e[o]).closed=!1:((c=ShapeModifiers.getModifier(t[o].ty)).init(this,t[o]),e[o]=c,this.shapeModifiers.push(c)),p.push(c)):"rp"==t[o].ty&&(u?(c=e[o]).closed=!0:(c=ShapeModifiers.getModifier(t[o].ty),e[o]=c,c.init(this,t,o,e),this.shapeModifiers.push(c),r=!1),p.push(c));this.addProcessedElement(t[o],o+1)}for(this.removeTransformFromStyleList(),this.closeStyles(f),h=p.length,o=0;o<h;o+=1)p[o].closed=!0},CVShapeElement.prototype.renderInnerContent=function(){this.transformHelper.opacity=1,this.transformHelper._opMdf=!1,this.renderModifiers(),this.transformsManager.processSequences(this._isFirstFrame),this.renderShape(this.transformHelper,this.shapesData,this.itemsData,!0)},CVShapeElement.prototype.renderShapeTransform=function(t,e){(t._opMdf||e.op._mdf||this._isFirstFrame)&&(e.opacity=t.opacity,e.opacity*=e.op.v,e._opMdf=!0)},CVShapeElement.prototype.drawLayer=function(){var t,e,n,r,i,o,a,s,u,c=this.stylesList.length,l=this.globalData.renderer,h=this.globalData.canvasContext;for(t=0;t<c;t+=1)if(("st"!==(s=(u=this.stylesList[t]).type)&&"gs"!==s||0!==u.wi)&&u.data._shouldRender&&0!==u.coOp&&0!==this.globalData.currentGlobalAlpha){for(l.save(),o=u.elements,"st"===s||"gs"===s?(h.strokeStyle="st"===s?u.co:u.grd,h.lineWidth=u.wi,h.lineCap=u.lc,h.lineJoin=u.lj,h.miterLimit=u.ml||0):h.fillStyle="fl"===s?u.co:u.grd,l.ctxOpacity(u.coOp),"st"!==s&&"gs"!==s&&h.beginPath(),l.ctxTransform(u.preTransforms.finalTransform.props),n=o.length,e=0;e<n;e+=1){for("st"!==s&&"gs"!==s||(h.beginPath(),u.da&&(h.setLineDash(u.da),h.lineDashOffset=u.do)),i=(a=o[e].trNodes).length,r=0;r<i;r+=1)"m"==a[r].t?h.moveTo(a[r].p[0],a[r].p[1]):"c"==a[r].t?h.bezierCurveTo(a[r].pts[0],a[r].pts[1],a[r].pts[2],a[r].pts[3],a[r].pts[4],a[r].pts[5]):h.closePath();"st"!==s&&"gs"!==s||(h.stroke(),u.da&&h.setLineDash(this.dashResetter))}"st"!==s&&"gs"!==s&&h.fill(u.r),l.restore()}},CVShapeElement.prototype.renderShape=function(t,e,n,r){var i,o;for(o=t,i=e.length-1;i>=0;i-=1)"tr"==e[i].ty?(o=n[i].transform,this.renderShapeTransform(t,o)):"sh"==e[i].ty||"el"==e[i].ty||"rc"==e[i].ty||"sr"==e[i].ty?this.renderPath(e[i],n[i]):"fl"==e[i].ty?this.renderFill(e[i],n[i],o):"st"==e[i].ty?this.renderStroke(e[i],n[i],o):"gf"==e[i].ty||"gs"==e[i].ty?this.renderGradientFill(e[i],n[i],o):"gr"==e[i].ty?this.renderShape(o,e[i].it,n[i].it):e[i].ty;r&&this.drawLayer()},CVShapeElement.prototype.renderStyledShape=function(t,e){if(this._isFirstFrame||e._mdf||t.transforms._mdf){var n,r,i,o=t.trNodes,a=e.paths,s=a._length;o.length=0;var u=t.transforms.finalTransform;for(i=0;i<s;i+=1){var c=a.shapes[i];if(c&&c.v){for(r=c._length,n=1;n<r;n+=1)1===n&&o.push({t:"m",p:u.applyToPointArray(c.v[0][0],c.v[0][1],0)}),o.push({t:"c",pts:u.applyToTriplePoints(c.o[n-1],c.i[n],c.v[n])});1===r&&o.push({t:"m",p:u.applyToPointArray(c.v[0][0],c.v[0][1],0)}),c.c&&r&&(o.push({t:"c",pts:u.applyToTriplePoints(c.o[n-1],c.i[0],c.v[0])}),o.push({t:"z"}))}}t.trNodes=o}},CVShapeElement.prototype.renderPath=function(t,e){if(!0!==t.hd&&t._shouldRender){var n,r=e.styledShapes.length;for(n=0;n<r;n+=1)this.renderStyledShape(e.styledShapes[n],e.sh)}},CVShapeElement.prototype.renderFill=function(t,e,n){var r=e.style;(e.c._mdf||this._isFirstFrame)&&(r.co="rgb("+bm_floor(e.c.v[0])+","+bm_floor(e.c.v[1])+","+bm_floor(e.c.v[2])+")"),(e.o._mdf||n._opMdf||this._isFirstFrame)&&(r.coOp=e.o.v*n.opacity)},CVShapeElement.prototype.renderGradientFill=function(t,e,n){var r=e.style;if(!r.grd||e.g._mdf||e.s._mdf||e.e._mdf||1!==t.t&&(e.h._mdf||e.a._mdf)){var i=this.globalData.canvasContext,o=e.s.v,a=e.e.v;if(1===t.t)f=i.createLinearGradient(o[0],o[1],a[0],a[1]);else var s=Math.sqrt(Math.pow(o[0]-a[0],2)+Math.pow(o[1]-a[1],2)),u=Math.atan2(a[1]-o[1],a[0]-o[0]),c=s*(e.h.v>=1?.99:e.h.v<=-1?-.99:e.h.v),l=Math.cos(u+e.a.v)*c+o[0],h=Math.sin(u+e.a.v)*c+o[1],f=i.createRadialGradient(l,h,0,o[0],o[1],s);var p,d=t.g.p,m=e.g.c,y=1;for(p=0;p<d;p+=1)e.g._hasOpacity&&e.g._collapsable&&(y=e.g.o[2*p+1]),f.addColorStop(m[4*p]/100,"rgba("+m[4*p+1]+","+m[4*p+2]+","+m[4*p+3]+","+y+")");r.grd=f}r.coOp=e.o.v*n.opacity},CVShapeElement.prototype.renderStroke=function(t,e,n){var r=e.style,i=e.d;i&&(i._mdf||this._isFirstFrame)&&(r.da=i.dashArray,r.do=i.dashoffset[0]),(e.c._mdf||this._isFirstFrame)&&(r.co="rgb("+bm_floor(e.c.v[0])+","+bm_floor(e.c.v[1])+","+bm_floor(e.c.v[2])+")"),(e.o._mdf||n._opMdf||this._isFirstFrame)&&(r.coOp=e.o.v*n.opacity),(e.w._mdf||this._isFirstFrame)&&(r.wi=e.w.v)},CVShapeElement.prototype.destroy=function(){this.shapesData=null,this.globalData=null,this.canvasContext=null,this.stylesList.length=0,this.itemsData.length=0},extendPrototype([BaseElement,TransformElement,CVBaseElement,HierarchyElement,FrameElement,RenderableElement],CVSolidElement),CVSolidElement.prototype.initElement=SVGShapeElement.prototype.initElement,CVSolidElement.prototype.prepareFrame=IImageElement.prototype.prepareFrame,CVSolidElement.prototype.renderInnerContent=function(){var t=this.canvasContext;t.fillStyle=this.data.sc,t.fillRect(0,0,this.data.sw,this.data.sh)},extendPrototype([BaseElement,TransformElement,CVBaseElement,HierarchyElement,FrameElement,RenderableElement,ITextElement],CVTextElement),CVTextElement.prototype.tHelper=createTag("canvas").getContext("2d"),CVTextElement.prototype.buildNewText=function(){var t=this.textProperty.currentData;this.renderedLetters=createSizedArray(t.l?t.l.length:0);var e=!1;t.fc?(e=!0,this.values.fill=this.buildColor(t.fc)):this.values.fill="rgba(0,0,0,0)",this.fill=e;var n=!1;t.sc&&(n=!0,this.values.stroke=this.buildColor(t.sc),this.values.sWidth=t.sw);var r,i,o=this.globalData.fontManager.getFontByName(t.f),a=t.l,s=this.mHelper;this.stroke=n,this.values.fValue=t.finalSize+"px "+this.globalData.fontManager.getFontByName(t.f).fFamily,i=t.finalText.length;var u,c,l,h,f,p,d,m,y,g,v=this.data.singleShape,b=t.tr/1e3*t.finalSize,_=0,w=0,E=!0,S=0;for(r=0;r<i;r+=1){for(c=(u=this.globalData.fontManager.getCharData(t.finalText[r],o.fStyle,this.globalData.fontManager.getFontByName(t.f).fFamily))&&u.data||{},s.reset(),v&&a[r].n&&(_=-b,w+=t.yOffset,w+=E?1:0,E=!1),d=(f=c.shapes?c.shapes[0].it:[]).length,s.scale(t.finalSize/100,t.finalSize/100),v&&this.applyTextPropertiesToMatrix(t,s,a[r].line,_,w),y=createSizedArray(d),p=0;p<d;p+=1){for(h=f[p].ks.k.i.length,m=f[p].ks.k,g=[],l=1;l<h;l+=1)1==l&&g.push(s.applyToX(m.v[0][0],m.v[0][1],0),s.applyToY(m.v[0][0],m.v[0][1],0)),g.push(s.applyToX(m.o[l-1][0],m.o[l-1][1],0),s.applyToY(m.o[l-1][0],m.o[l-1][1],0),s.applyToX(m.i[l][0],m.i[l][1],0),s.applyToY(m.i[l][0],m.i[l][1],0),s.applyToX(m.v[l][0],m.v[l][1],0),s.applyToY(m.v[l][0],m.v[l][1],0));g.push(s.applyToX(m.o[l-1][0],m.o[l-1][1],0),s.applyToY(m.o[l-1][0],m.o[l-1][1],0),s.applyToX(m.i[0][0],m.i[0][1],0),s.applyToY(m.i[0][0],m.i[0][1],0),s.applyToX(m.v[0][0],m.v[0][1],0),s.applyToY(m.v[0][0],m.v[0][1],0)),y[p]=g}v&&(_+=a[r].l,_+=b),this.textSpans[S]?this.textSpans[S].elem=y:this.textSpans[S]={elem:y},S+=1}},CVTextElement.prototype.renderInnerContent=function(){var t,e,n,r,i,o,a=this.canvasContext;this.finalTransform.mat.props;a.font=this.values.fValue,a.lineCap="butt",a.lineJoin="miter",a.miterLimit=4,this.data.singleShape||this.textAnimator.getMeasures(this.textProperty.currentData,this.lettersChangedFlag);var s,u=this.textAnimator.renderedLetters,c=this.textProperty.currentData.l;e=c.length;var l,h,f=null,p=null,d=null;for(t=0;t<e;t+=1)if(!c[t].n){if((s=u[t])&&(this.globalData.renderer.save(),this.globalData.renderer.ctxTransform(s.p),this.globalData.renderer.ctxOpacity(s.o)),this.fill){for(s&&s.fc?f!==s.fc&&(f=s.fc,a.fillStyle=s.fc):f!==this.values.fill&&(f=this.values.fill,a.fillStyle=this.values.fill),r=(l=this.textSpans[t].elem).length,this.globalData.canvasContext.beginPath(),n=0;n<r;n+=1)for(o=(h=l[n]).length,this.globalData.canvasContext.moveTo(h[0],h[1]),i=2;i<o;i+=6)this.globalData.canvasContext.bezierCurveTo(h[i],h[i+1],h[i+2],h[i+3],h[i+4],h[i+5]);this.globalData.canvasContext.closePath(),this.globalData.canvasContext.fill()}if(this.stroke){for(s&&s.sw?d!==s.sw&&(d=s.sw,a.lineWidth=s.sw):d!==this.values.sWidth&&(d=this.values.sWidth,a.lineWidth=this.values.sWidth),s&&s.sc?p!==s.sc&&(p=s.sc,a.strokeStyle=s.sc):p!==this.values.stroke&&(p=this.values.stroke,a.strokeStyle=this.values.stroke),r=(l=this.textSpans[t].elem).length,this.globalData.canvasContext.beginPath(),n=0;n<r;n+=1)for(o=(h=l[n]).length,this.globalData.canvasContext.moveTo(h[0],h[1]),i=2;i<o;i+=6)this.globalData.canvasContext.bezierCurveTo(h[i],h[i+1],h[i+2],h[i+3],h[i+4],h[i+5]);this.globalData.canvasContext.closePath(),this.globalData.canvasContext.stroke()}s&&this.globalData.renderer.restore()}},CVEffects.prototype.renderFrame=function(){},HBaseElement.prototype={checkBlendMode:function(){},initRendererElement:function(){this.baseElement=createTag(this.data.tg||"div"),this.data.hasMask?(this.svgElement=createNS("svg"),this.layerElement=createNS("g"),this.maskedElement=this.layerElement,this.svgElement.appendChild(this.layerElement),this.baseElement.appendChild(this.svgElement)):this.layerElement=this.baseElement,styleDiv(this.baseElement)},createContainerElements:function(){this.renderableEffectsManager=new CVEffects(this),this.transformedElement=this.baseElement,this.maskedElement=this.layerElement,this.data.ln&&this.layerElement.setAttribute("id",this.data.ln),this.data.cl&&this.layerElement.setAttribute("class",this.data.cl),0!==this.data.bm&&this.setBlendMode()},renderElement:function(){this.finalTransform._matMdf&&(this.transformedElement.style.transform=this.transformedElement.style.webkitTransform=this.finalTransform.mat.toCSS()),this.finalTransform._opMdf&&(this.transformedElement.style.opacity=this.finalTransform.mProp.o.v)},renderFrame:function(){this.data.hd||this.hidden||(this.renderTransform(),this.renderRenderable(),this.renderElement(),this.renderInnerContent(),this._isFirstFrame&&(this._isFirstFrame=!1))},destroy:function(){this.layerElement=null,this.transformedElement=null,this.matteElement&&(this.matteElement=null),this.maskManager&&(this.maskManager.destroy(),this.maskManager=null)},createRenderableComponents:function(){this.maskManager=new MaskElement(this.data,this,this.globalData)},addEffects:function(){},setMatte:function(){}},HBaseElement.prototype.getBaseElement=SVGBaseElement.prototype.getBaseElement,HBaseElement.prototype.destroyBaseElement=HBaseElement.prototype.destroy,HBaseElement.prototype.buildElementParenting=HybridRenderer.prototype.buildElementParenting,extendPrototype([BaseElement,TransformElement,HBaseElement,HierarchyElement,FrameElement,RenderableDOMElement],HSolidElement),HSolidElement.prototype.createContent=function(){var t;this.data.hasMask?((t=createNS("rect")).setAttribute("width",this.data.sw),t.setAttribute("height",this.data.sh),t.setAttribute("fill",this.data.sc),this.svgElement.setAttribute("width",this.data.sw),this.svgElement.setAttribute("height",this.data.sh)):((t=createTag("div")).style.width=this.data.sw+"px",t.style.height=this.data.sh+"px",t.style.backgroundColor=this.data.sc),this.layerElement.appendChild(t)},extendPrototype([HybridRenderer,ICompElement,HBaseElement],HCompElement),HCompElement.prototype._createBaseContainerElements=HCompElement.prototype.createContainerElements,HCompElement.prototype.createContainerElements=function(){this._createBaseContainerElements(),this.data.hasMask?(this.svgElement.setAttribute("width",this.data.w),this.svgElement.setAttribute("height",this.data.h),this.transformedElement=this.baseElement):this.transformedElement=this.layerElement},HCompElement.prototype.addTo3dContainer=function(t,e){for(var n,r=0;r<e;)this.elements[r]&&this.elements[r].getBaseElement&&(n=this.elements[r].getBaseElement()),r+=1;n?this.layerElement.insertBefore(t,n):this.layerElement.appendChild(t)},extendPrototype([BaseElement,TransformElement,HSolidElement,SVGShapeElement,HBaseElement,HierarchyElement,FrameElement,RenderableElement],HShapeElement),HShapeElement.prototype._renderShapeFrame=HShapeElement.prototype.renderInnerContent,HShapeElement.prototype.createContent=function(){var t;if(this.baseElement.style.fontSize=0,this.data.hasMask)this.layerElement.appendChild(this.shapesContainer),t=this.svgElement;else{t=createNS("svg");var e=this.comp.data?this.comp.data:this.globalData.compSize;t.setAttribute("width",e.w),t.setAttribute("height",e.h),t.appendChild(this.shapesContainer),this.layerElement.appendChild(t)}this.searchShapes(this.shapesData,this.itemsData,this.prevViewData,this.shapesContainer,0,[],!0),this.filterUniqueShapes(),this.shapeCont=t},HShapeElement.prototype.getTransformedPoint=function(t,e){var n,r=t.length;for(n=0;n<r;n+=1)e=t[n].mProps.v.applyToPointArray(e[0],e[1],0);return e},HShapeElement.prototype.calculateShapeBoundingBox=function(t,e){var n,r,i,o,a,s=t.sh.v,u=t.transformers,c=s._length;if(!(c<=1)){for(n=0;n<c-1;n+=1)r=this.getTransformedPoint(u,s.v[n]),i=this.getTransformedPoint(u,s.o[n]),o=this.getTransformedPoint(u,s.i[n+1]),a=this.getTransformedPoint(u,s.v[n+1]),this.checkBounds(r,i,o,a,e);s.c&&(r=this.getTransformedPoint(u,s.v[n]),i=this.getTransformedPoint(u,s.o[n]),o=this.getTransformedPoint(u,s.i[0]),a=this.getTransformedPoint(u,s.v[0]),this.checkBounds(r,i,o,a,e))}},HShapeElement.prototype.checkBounds=function(t,e,n,r,i){this.getBoundsOfCurve(t,e,n,r);var o=this.shapeBoundingBox;i.x=bm_min(o.left,i.x),i.xMax=bm_max(o.right,i.xMax),i.y=bm_min(o.top,i.y),i.yMax=bm_max(o.bottom,i.yMax)},HShapeElement.prototype.shapeBoundingBox={left:0,right:0,top:0,bottom:0},HShapeElement.prototype.tempBoundingBox={x:0,xMax:0,y:0,yMax:0,width:0,height:0},HShapeElement.prototype.getBoundsOfCurve=function(t,e,n,r){for(var i,o,a,s,u,c,l,h=[[t[0],r[0]],[t[1],r[1]]],f=0;f<2;++f)if(o=6*t[f]-12*e[f]+6*n[f],i=-3*t[f]+9*e[f]-9*n[f]+3*r[f],a=3*e[f]-3*t[f],o|=0,a|=0,0!==(i|=0))(u=o*o-4*a*i)<0||(0<(c=(-o+bm_sqrt(u))/(2*i))&&c<1&&h[f].push(this.calculateF(c,t,e,n,r,f)),0<(l=(-o-bm_sqrt(u))/(2*i))&&l<1&&h[f].push(this.calculateF(l,t,e,n,r,f)));else{if(0===o)continue;0<(s=-a/o)&&s<1&&h[f].push(this.calculateF(s,t,e,n,r,f))}this.shapeBoundingBox.left=bm_min.apply(null,h[0]),this.shapeBoundingBox.top=bm_min.apply(null,h[1]),this.shapeBoundingBox.right=bm_max.apply(null,h[0]),this.shapeBoundingBox.bottom=bm_max.apply(null,h[1])},HShapeElement.prototype.calculateF=function(t,e,n,r,i,o){return bm_pow(1-t,3)*e[o]+3*bm_pow(1-t,2)*t*n[o]+3*(1-t)*bm_pow(t,2)*r[o]+bm_pow(t,3)*i[o]},HShapeElement.prototype.calculateBoundingBox=function(t,e){var n,r=t.length;for(n=0;n<r;n+=1)t[n]&&t[n].sh?this.calculateShapeBoundingBox(t[n],e):t[n]&&t[n].it&&this.calculateBoundingBox(t[n].it,e)},HShapeElement.prototype.currentBoxContains=function(t){return this.currentBBox.x<=t.x&&this.currentBBox.y<=t.y&&this.currentBBox.width+this.currentBBox.x>=t.x+t.width&&this.currentBBox.height+this.currentBBox.y>=t.y+t.height},HShapeElement.prototype.renderInnerContent=function(){if(this._renderShapeFrame(),!this.hidden&&(this._isFirstFrame||this._mdf)){var t=this.tempBoundingBox,e=999999;if(t.x=e,t.xMax=-e,t.y=e,t.yMax=-e,this.calculateBoundingBox(this.itemsData,t),t.width=t.xMax<t.x?0:t.xMax-t.x,t.height=t.yMax<t.y?0:t.yMax-t.y,this.currentBoxContains(t))return;var n=!1;this.currentBBox.w!==t.width&&(this.currentBBox.w=t.width,this.shapeCont.setAttribute("width",t.width),n=!0),this.currentBBox.h!==t.height&&(this.currentBBox.h=t.height,this.shapeCont.setAttribute("height",t.height),n=!0),(n||this.currentBBox.x!==t.x||this.currentBBox.y!==t.y)&&(this.currentBBox.w=t.width,this.currentBBox.h=t.height,this.currentBBox.x=t.x,this.currentBBox.y=t.y,this.shapeCont.setAttribute("viewBox",this.currentBBox.x+" "+this.currentBBox.y+" "+this.currentBBox.w+" "+this.currentBBox.h),this.shapeCont.style.transform=this.shapeCont.style.webkitTransform="translate("+this.currentBBox.x+"px,"+this.currentBBox.y+"px)")}},extendPrototype([BaseElement,TransformElement,HBaseElement,HierarchyElement,FrameElement,RenderableDOMElement,ITextElement],HTextElement),HTextElement.prototype.createContent=function(){if(this.isMasked=this.checkMasks(),this.isMasked){this.renderType="svg",this.compW=this.comp.data.w,this.compH=this.comp.data.h,this.svgElement.setAttribute("width",this.compW),this.svgElement.setAttribute("height",this.compH);var t=createNS("g");this.maskedElement.appendChild(t),this.innerElem=t}else this.renderType="html",this.innerElem=this.layerElement;this.checkParenting()},HTextElement.prototype.buildNewText=function(){var t=this.textProperty.currentData;this.renderedLetters=createSizedArray(t.l?t.l.length:0);var e=this.innerElem.style;e.color=e.fill=t.fc?this.buildColor(t.fc):"rgba(0,0,0,0)",t.sc&&(e.stroke=this.buildColor(t.sc),e.strokeWidth=t.sw+"px");var n,r,i=this.globalData.fontManager.getFontByName(t.f);if(!this.globalData.fontManager.chars)if(e.fontSize=t.finalSize+"px",e.lineHeight=t.finalSize+"px",i.fClass)this.innerElem.className=i.fClass;else{e.fontFamily=i.fFamily;var o=t.fWeight,a=t.fStyle;e.fontStyle=a,e.fontWeight=o}var s,u,c,l=t.l;r=l.length;var h,f=this.mHelper,p="",d=0;for(n=0;n<r;n+=1){if(this.globalData.fontManager.chars?(this.textPaths[d]?s=this.textPaths[d]:((s=createNS("path")).setAttribute("stroke-linecap","butt"),s.setAttribute("stroke-linejoin","round"),s.setAttribute("stroke-miterlimit","4")),this.isMasked||(this.textSpans[d]?c=(u=this.textSpans[d]).children[0]:(u=createTag("div"),(c=createNS("svg")).appendChild(s),styleDiv(u)))):this.isMasked?s=this.textPaths[d]?this.textPaths[d]:createNS("text"):this.textSpans[d]?(u=this.textSpans[d],s=this.textPaths[d]):(styleDiv(u=createTag("span")),styleDiv(s=createTag("span")),u.appendChild(s)),this.globalData.fontManager.chars){var m,y=this.globalData.fontManager.getCharData(t.finalText[n],i.fStyle,this.globalData.fontManager.getFontByName(t.f).fFamily);if(m=y?y.data:null,f.reset(),m&&m.shapes&&(h=m.shapes[0].it,f.scale(t.finalSize/100,t.finalSize/100),p=this.createPathShape(f,h),s.setAttribute("d",p)),this.isMasked)this.innerElem.appendChild(s);else{if(this.innerElem.appendChild(u),m&&m.shapes){document.body.appendChild(c);var g=c.getBBox();c.setAttribute("width",g.width+2),c.setAttribute("height",g.height+2),c.setAttribute("viewBox",g.x-1+" "+(g.y-1)+" "+(g.width+2)+" "+(g.height+2)),c.style.transform=c.style.webkitTransform="translate("+(g.x-1)+"px,"+(g.y-1)+"px)",l[n].yOffset=g.y-1}else c.setAttribute("width",1),c.setAttribute("height",1);u.appendChild(c)}}else s.textContent=l[n].val,s.setAttributeNS("http://www.w3.org/XML/1998/namespace","xml:space","preserve"),this.isMasked?this.innerElem.appendChild(s):(this.innerElem.appendChild(u),s.style.transform=s.style.webkitTransform="translate3d(0,"+-t.finalSize/1.2+"px,0)");this.isMasked?this.textSpans[d]=s:this.textSpans[d]=u,this.textSpans[d].style.display="block",this.textPaths[d]=s,d+=1}for(;d<this.textSpans.length;)this.textSpans[d].style.display="none",d+=1},HTextElement.prototype.renderInnerContent=function(){if(this.data.singleShape){if(!this._isFirstFrame&&!this.lettersChangedFlag)return;this.isMasked&&this.finalTransform._matMdf&&(this.svgElement.setAttribute("viewBox",-this.finalTransform.mProp.p.v[0]+" "+-this.finalTransform.mProp.p.v[1]+" "+this.compW+" "+this.compH),this.svgElement.style.transform=this.svgElement.style.webkitTransform="translate("+-this.finalTransform.mProp.p.v[0]+"px,"+-this.finalTransform.mProp.p.v[1]+"px)")}if(this.textAnimator.getMeasures(this.textProperty.currentData,this.lettersChangedFlag),this.lettersChangedFlag||this.textAnimator.lettersChangedFlag){var t,e,n,r,i,o=0,a=this.textAnimator.renderedLetters,s=this.textProperty.currentData.l;for(e=s.length,t=0;t<e;t+=1)s[t].n?o+=1:(r=this.textSpans[t],i=this.textPaths[t],n=a[o],o+=1,n._mdf.m&&(this.isMasked?r.setAttribute("transform",n.m):r.style.transform=r.style.webkitTransform=n.m),r.style.opacity=n.o,n.sw&&n._mdf.sw&&i.setAttribute("stroke-width",n.sw),n.sc&&n._mdf.sc&&i.setAttribute("stroke",n.sc),n.fc&&n._mdf.fc&&(i.setAttribute("fill",n.fc),i.style.color=n.fc));if(this.innerElem.getBBox&&!this.hidden&&(this._isFirstFrame||this._mdf)){var u=this.innerElem.getBBox();this.currentBBox.w!==u.width&&(this.currentBBox.w=u.width,this.svgElement.setAttribute("width",u.width)),this.currentBBox.h!==u.height&&(this.currentBBox.h=u.height,this.svgElement.setAttribute("height",u.height));this.currentBBox.w===u.width+2&&this.currentBBox.h===u.height+2&&this.currentBBox.x===u.x-1&&this.currentBBox.y===u.y-1||(this.currentBBox.w=u.width+2,this.currentBBox.h=u.height+2,this.currentBBox.x=u.x-1,this.currentBBox.y=u.y-1,this.svgElement.setAttribute("viewBox",this.currentBBox.x+" "+this.currentBBox.y+" "+this.currentBBox.w+" "+this.currentBBox.h),this.svgElement.style.transform=this.svgElement.style.webkitTransform="translate("+this.currentBBox.x+"px,"+this.currentBBox.y+"px)")}}},extendPrototype([BaseElement,TransformElement,HBaseElement,HSolidElement,HierarchyElement,FrameElement,RenderableElement],HImageElement),HImageElement.prototype.createContent=function(){var t=this.globalData.getAssetsPath(this.assetData),e=new Image;this.data.hasMask?(this.imageElem=createNS("image"),this.imageElem.setAttribute("width",this.assetData.w+"px"),this.imageElem.setAttribute("height",this.assetData.h+"px"),this.imageElem.setAttributeNS("http://www.w3.org/1999/xlink","href",t),this.layerElement.appendChild(this.imageElem),this.baseElement.setAttribute("width",this.assetData.w),this.baseElement.setAttribute("height",this.assetData.h)):this.layerElement.appendChild(e),e.src=t,this.data.ln&&this.baseElement.setAttribute("id",this.data.ln)},extendPrototype([BaseElement,FrameElement,HierarchyElement],HCameraElement),HCameraElement.prototype.setup=function(){var t,e,n=this.comp.threeDElements.length;for(t=0;t<n;t+=1)"3d"===(e=this.comp.threeDElements[t]).type&&(e.perspectiveElem.style.perspective=e.perspectiveElem.style.webkitPerspective=this.pe.v+"px",e.container.style.transformOrigin=e.container.style.mozTransformOrigin=e.container.style.webkitTransformOrigin="0px 0px 0px",e.perspectiveElem.style.transform=e.perspectiveElem.style.webkitTransform="matrix3d(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1)")},HCameraElement.prototype.createElements=function(){},HCameraElement.prototype.hide=function(){},HCameraElement.prototype.renderFrame=function(){var t,e,n=this._isFirstFrame;if(this.hierarchy)for(e=this.hierarchy.length,t=0;t<e;t+=1)n=this.hierarchy[t].finalTransform.mProp._mdf||n;if(n||this.pe._mdf||this.p&&this.p._mdf||this.px&&(this.px._mdf||this.py._mdf||this.pz._mdf)||this.rx._mdf||this.ry._mdf||this.rz._mdf||this.or._mdf||this.a&&this.a._mdf){if(this.mat.reset(),this.hierarchy)for(t=e=this.hierarchy.length-1;t>=0;t-=1){var r=this.hierarchy[t].finalTransform.mProp;this.mat.translate(-r.p.v[0],-r.p.v[1],r.p.v[2]),this.mat.rotateX(-r.or.v[0]).rotateY(-r.or.v[1]).rotateZ(r.or.v[2]),this.mat.rotateX(-r.rx.v).rotateY(-r.ry.v).rotateZ(r.rz.v),this.mat.scale(1/r.s.v[0],1/r.s.v[1],1/r.s.v[2]),this.mat.translate(r.a.v[0],r.a.v[1],r.a.v[2])}if(this.p?this.mat.translate(-this.p.v[0],-this.p.v[1],this.p.v[2]):this.mat.translate(-this.px.v,-this.py.v,this.pz.v),this.a){var i=[this.p.v[0]-this.a.v[0],this.p.v[1]-this.a.v[1],this.p.v[2]-this.a.v[2]],o=Math.sqrt(Math.pow(i[0],2)+Math.pow(i[1],2)+Math.pow(i[2],2)),a=[i[0]/o,i[1]/o,i[2]/o],s=Math.sqrt(a[2]*a[2]+a[0]*a[0]),u=Math.atan2(a[1],s),c=Math.atan2(a[0],-a[2]);this.mat.rotateY(c).rotateX(-u)}this.mat.rotateX(-this.rx.v).rotateY(-this.ry.v).rotateZ(this.rz.v),this.mat.rotateX(-this.or.v[0]).rotateY(-this.or.v[1]).rotateZ(this.or.v[2]),this.mat.translate(this.globalData.compSize.w/2,this.globalData.compSize.h/2,0),this.mat.translate(0,0,this.pe.v);var l=!this._prevMat.equals(this.mat);if((l||this.pe._mdf)&&this.comp.threeDElements){var h;for(e=this.comp.threeDElements.length,t=0;t<e;t+=1)"3d"===(h=this.comp.threeDElements[t]).type&&(l&&(h.container.style.transform=h.container.style.webkitTransform=this.mat.toCSS()),this.pe._mdf&&(h.perspectiveElem.style.perspective=h.perspectiveElem.style.webkitPerspective=this.pe.v+"px"));this.mat.clone(this._prevMat)}}this._isFirstFrame=!1},HCameraElement.prototype.prepareFrame=function(t){this.prepareProperties(t,!0)},HCameraElement.prototype.destroy=function(){},HCameraElement.prototype.getBaseElement=function(){return null},HEffects.prototype.renderFrame=function(){};var animationManager=function(){var t={},e=[],n=0,r=0,i=0,o=!0,a=!1;function s(t){for(var n=0,i=t.target;n<r;)e[n].animation===i&&(e.splice(n,1),n-=1,r-=1,i.isPaused||l()),n+=1}function u(t,n){if(!t)return null;for(var i=0;i<r;){if(e[i].elem==t&&null!==e[i].elem)return e[i].animation;i+=1}var o=new AnimationItem;return h(o,t),o.setData(t,n),o}function c(){i+=1,d()}function l(){i-=1}function h(t,n){t.addEventListener("destroy",s),t.addEventListener("_active",c),t.addEventListener("_idle",l),e.push({elem:n,animation:t}),r+=1}function f(t){var s,u=t-n;for(s=0;s<r;s+=1)e[s].animation.advanceTime(u);n=t,i&&!a?window.requestAnimationFrame(f):o=!0}function p(t){n=t,window.requestAnimationFrame(f)}function d(){!a&&i&&o&&(window.requestAnimationFrame(p),o=!1)}return t.registerAnimation=u,t.loadAnimation=function(t){var e=new AnimationItem;return h(e,null),e.setParams(t),e},t.setSpeed=function(t,n){var i;for(i=0;i<r;i+=1)e[i].animation.setSpeed(t,n)},t.setDirection=function(t,n){var i;for(i=0;i<r;i+=1)e[i].animation.setDirection(t,n)},t.play=function(t){var n;for(n=0;n<r;n+=1)e[n].animation.play(t)},t.pause=function(t){var n;for(n=0;n<r;n+=1)e[n].animation.pause(t)},t.stop=function(t){var n;for(n=0;n<r;n+=1)e[n].animation.stop(t)},t.togglePause=function(t){var n;for(n=0;n<r;n+=1)e[n].animation.togglePause(t)},t.searchAnimations=function(t,e,n){var r,i=[].concat([].slice.call(document.getElementsByClassName("lottie")),[].slice.call(document.getElementsByClassName("bodymovin"))),o=i.length;for(r=0;r<o;r+=1)n&&i[r].setAttribute("data-bm-type",n),u(i[r],t);if(e&&0===o){n||(n="svg");var a=document.getElementsByTagName("body")[0];a.innerHTML="";var s=createTag("div");s.style.width="100%",s.style.height="100%",s.setAttribute("data-bm-type",n),a.appendChild(s),u(s,t)}},t.resize=function(){var t;for(t=0;t<r;t+=1)e[t].animation.resize()},t.goToAndStop=function(t,n,i){var o;for(o=0;o<r;o+=1)e[o].animation.goToAndStop(t,n,i)},t.destroy=function(t){var n;for(n=r-1;n>=0;n-=1)e[n].animation.destroy(t)},t.freeze=function(){a=!0},t.unfreeze=function(){a=!1,d()},t.getRegisteredAnimations=function(){var t,n=e.length,r=[];for(t=0;t<n;t+=1)r.push(e[t].animation);return r},t}(),AnimationItem=function(){this._cbs=[],this.name="",this.path="",this.isLoaded=!1,this.currentFrame=0,this.currentRawFrame=0,this.totalFrames=0,this.frameRate=0,this.frameMult=0,this.playSpeed=1,this.playDirection=1,this.playCount=0,this.animationData={},this.assets=[],this.isPaused=!0,this.autoplay=!1,this.loop=!0,this.renderer=null,this.animationID=createElementID(),this.assetsPath="",this.timeCompleted=0,this.segmentPos=0,this.subframeEnabled=subframeEnabled,this.segments=[],this._idle=!0,this._completedLoop=!1,this.projectInterface=ProjectInterface(),this.imagePreloader=new ImagePreloader};extendPrototype([BaseEvent],AnimationItem),AnimationItem.prototype.setParams=function(t){t.context&&(this.context=t.context),(t.wrapper||t.container)&&(this.wrapper=t.wrapper||t.container);var e=t.animType?t.animType:t.renderer?t.renderer:"svg";switch(e){case"canvas":this.renderer=new CanvasRenderer(this,t.rendererSettings);break;case"svg":this.renderer=new SVGRenderer(this,t.rendererSettings);break;default:this.renderer=new HybridRenderer(this,t.rendererSettings)}this.renderer.setProjectInterface(this.projectInterface),this.animType=e,""===t.loop||null===t.loop||(!1===t.loop?this.loop=!1:!0===t.loop?this.loop=!0:this.loop=parseInt(t.loop)),this.autoplay=!("autoplay"in t)||t.autoplay,this.name=t.name?t.name:"",this.autoloadSegments=!t.hasOwnProperty("autoloadSegments")||t.autoloadSegments,this.assetsPath=t.assetsPath,t.animationData?this.configAnimation(t.animationData):t.path&&("json"!=t.path.substr(-4)&&("/"!=t.path.substr(-1,1)&&(t.path+="/"),t.path+="data.json"),-1!=t.path.lastIndexOf("\\")?this.path=t.path.substr(0,t.path.lastIndexOf("\\")+1):this.path=t.path.substr(0,t.path.lastIndexOf("/")+1),this.fileName=t.path.substr(t.path.lastIndexOf("/")+1),this.fileName=this.fileName.substr(0,this.fileName.lastIndexOf(".json")),assetLoader.load(t.path,this.configAnimation.bind(this),function(){this.trigger("data_failed")}.bind(this)))},AnimationItem.prototype.setData=function(t,e){var n={wrapper:t,animationData:e?"object"===typeof e?e:JSON.parse(e):null},r=t.attributes;n.path=r.getNamedItem("data-animation-path")?r.getNamedItem("data-animation-path").value:r.getNamedItem("data-bm-path")?r.getNamedItem("data-bm-path").value:r.getNamedItem("bm-path")?r.getNamedItem("bm-path").value:"",n.animType=r.getNamedItem("data-anim-type")?r.getNamedItem("data-anim-type").value:r.getNamedItem("data-bm-type")?r.getNamedItem("data-bm-type").value:r.getNamedItem("bm-type")?r.getNamedItem("bm-type").value:r.getNamedItem("data-bm-renderer")?r.getNamedItem("data-bm-renderer").value:r.getNamedItem("bm-renderer")?r.getNamedItem("bm-renderer").value:"canvas";var i=r.getNamedItem("data-anim-loop")?r.getNamedItem("data-anim-loop").value:r.getNamedItem("data-bm-loop")?r.getNamedItem("data-bm-loop").value:r.getNamedItem("bm-loop")?r.getNamedItem("bm-loop").value:"";""===i||(n.loop="false"!==i&&("true"===i||parseInt(i)));var o=r.getNamedItem("data-anim-autoplay")?r.getNamedItem("data-anim-autoplay").value:r.getNamedItem("data-bm-autoplay")?r.getNamedItem("data-bm-autoplay").value:!r.getNamedItem("bm-autoplay")||r.getNamedItem("bm-autoplay").value;n.autoplay="false"!==o,n.name=r.getNamedItem("data-name")?r.getNamedItem("data-name").value:r.getNamedItem("data-bm-name")?r.getNamedItem("data-bm-name").value:r.getNamedItem("bm-name")?r.getNamedItem("bm-name").value:"","false"===(r.getNamedItem("data-anim-prerender")?r.getNamedItem("data-anim-prerender").value:r.getNamedItem("data-bm-prerender")?r.getNamedItem("data-bm-prerender").value:r.getNamedItem("bm-prerender")?r.getNamedItem("bm-prerender").value:"")&&(n.prerender=!1),this.setParams(n)},AnimationItem.prototype.includeLayers=function(t){t.op>this.animationData.op&&(this.animationData.op=t.op,this.totalFrames=Math.floor(t.op-this.animationData.ip));var e,n,r=this.animationData.layers,i=r.length,o=t.layers,a=o.length;for(n=0;n<a;n+=1)for(e=0;e<i;){if(r[e].id==o[n].id){r[e]=o[n];break}e+=1}if((t.chars||t.fonts)&&(this.renderer.globalData.fontManager.addChars(t.chars),this.renderer.globalData.fontManager.addFonts(t.fonts,this.renderer.globalData.defs)),t.assets)for(i=t.assets.length,e=0;e<i;e+=1)this.animationData.assets.push(t.assets[e]);this.animationData.__complete=!1,dataManager.completeData(this.animationData,this.renderer.globalData.fontManager),this.renderer.includeLayers(t.layers),expressionsPlugin&&expressionsPlugin.initExpressions(this),this.loadNextSegment()},AnimationItem.prototype.loadNextSegment=function(){var t=this.animationData.segments;if(!t||0===t.length||!this.autoloadSegments)return this.trigger("data_ready"),void(this.timeCompleted=this.totalFrames);var e=t.shift();this.timeCompleted=e.time*this.frameRate;var n=this.path+this.fileName+"_"+this.segmentPos+".json";this.segmentPos+=1,assetLoader.load(n,this.includeLayers.bind(this),function(){this.trigger("data_failed")}.bind(this))},AnimationItem.prototype.loadSegments=function(){this.animationData.segments||(this.timeCompleted=this.totalFrames),this.loadNextSegment()},AnimationItem.prototype.imagesLoaded=function(){this.trigger("loaded_images"),this.checkLoaded()},AnimationItem.prototype.preloadImages=function(){this.imagePreloader.setAssetsPath(this.assetsPath),this.imagePreloader.setPath(this.path),this.imagePreloader.loadAssets(this.animationData.assets,this.imagesLoaded.bind(this))},AnimationItem.prototype.configAnimation=function(t){this.renderer&&(this.animationData=t,this.totalFrames=Math.floor(this.animationData.op-this.animationData.ip),this.renderer.configAnimation(t),t.assets||(t.assets=[]),this.renderer.searchExtraCompositions(t.assets),this.assets=this.animationData.assets,this.frameRate=this.animationData.fr,this.firstFrame=Math.round(this.animationData.ip),this.frameMult=this.animationData.fr/1e3,this.trigger("config_ready"),this.preloadImages(),this.loadSegments(),this.updaFrameModifier(),this.waitForFontsLoaded())},AnimationItem.prototype.waitForFontsLoaded=function(){this.renderer&&(this.renderer.globalData.fontManager.loaded()?this.checkLoaded():setTimeout(this.waitForFontsLoaded.bind(this),20))},AnimationItem.prototype.checkLoaded=function(){this.isLoaded||!this.renderer.globalData.fontManager.loaded()||!this.imagePreloader.loaded()&&"canvas"===this.renderer.rendererType||(this.isLoaded=!0,dataManager.completeData(this.animationData,this.renderer.globalData.fontManager),expressionsPlugin&&expressionsPlugin.initExpressions(this),this.renderer.initItems(),setTimeout(function(){this.trigger("DOMLoaded")}.bind(this),0),this.gotoFrame(),this.autoplay&&this.play())},AnimationItem.prototype.resize=function(){this.renderer.updateContainerSize()},AnimationItem.prototype.setSubframe=function(t){this.subframeEnabled=!!t},AnimationItem.prototype.gotoFrame=function(){this.currentFrame=this.subframeEnabled?this.currentRawFrame:~~this.currentRawFrame,this.timeCompleted!==this.totalFrames&&this.currentFrame>this.timeCompleted&&(this.currentFrame=this.timeCompleted),this.trigger("enterFrame"),this.renderFrame()},AnimationItem.prototype.renderFrame=function(){!1!==this.isLoaded&&this.renderer.renderFrame(this.currentFrame+this.firstFrame)},AnimationItem.prototype.play=function(t){t&&this.name!=t||!0===this.isPaused&&(this.isPaused=!1,this._idle&&(this._idle=!1,this.trigger("_active")))},AnimationItem.prototype.pause=function(t){t&&this.name!=t||!1===this.isPaused&&(this.isPaused=!0,this._idle=!0,this.trigger("_idle"))},AnimationItem.prototype.togglePause=function(t){t&&this.name!=t||(!0===this.isPaused?this.play():this.pause())},AnimationItem.prototype.stop=function(t){t&&this.name!=t||(this.pause(),this.playCount=0,this._completedLoop=!1,this.setCurrentRawFrameValue(0))},AnimationItem.prototype.goToAndStop=function(t,e,n){n&&this.name!=n||(e?this.setCurrentRawFrameValue(t):this.setCurrentRawFrameValue(t*this.frameModifier),this.pause())},AnimationItem.prototype.goToAndPlay=function(t,e,n){this.goToAndStop(t,e,n),this.play()},AnimationItem.prototype.advanceTime=function(t){if(!0!==this.isPaused&&!1!==this.isLoaded){var e=this.currentRawFrame+t*this.frameModifier,n=!1;e>=this.totalFrames-1&&this.frameModifier>0?this.loop&&this.playCount!==this.loop?e>=this.totalFrames?(this.playCount+=1,this.checkSegments(e%this.totalFrames)||(this.setCurrentRawFrameValue(e%this.totalFrames),this._completedLoop=!0,this.trigger("loopComplete"))):this.setCurrentRawFrameValue(e):this.checkSegments(e>this.totalFrames?e%this.totalFrames:0)||(n=!0,e=this.totalFrames-1):e<0?this.checkSegments(e%this.totalFrames)||(!this.loop||this.playCount--<=0&&!0!==this.loop?(n=!0,e=0):(this.setCurrentRawFrameValue(this.totalFrames+e%this.totalFrames),this._completedLoop?this.trigger("loopComplete"):this._completedLoop=!0)):this.setCurrentRawFrameValue(e),n&&(this.setCurrentRawFrameValue(e),this.pause(),this.trigger("complete"))}},AnimationItem.prototype.adjustSegment=function(t,e){this.playCount=0,t[1]<t[0]?(this.frameModifier>0&&(this.playSpeed<0?this.setSpeed(-this.playSpeed):this.setDirection(-1)),this.timeCompleted=this.totalFrames=t[0]-t[1],this.firstFrame=t[1],this.setCurrentRawFrameValue(this.totalFrames-.001-e)):t[1]>t[0]&&(this.frameModifier<0&&(this.playSpeed<0?this.setSpeed(-this.playSpeed):this.setDirection(1)),this.timeCompleted=this.totalFrames=t[1]-t[0],this.firstFrame=t[0],this.setCurrentRawFrameValue(.001+e)),this.trigger("segmentStart")},AnimationItem.prototype.setSegment=function(t,e){var n=-1;this.isPaused&&(this.currentRawFrame+this.firstFrame<t?n=t:this.currentRawFrame+this.firstFrame>e&&(n=e-t)),this.firstFrame=t,this.timeCompleted=this.totalFrames=e-t,-1!==n&&this.goToAndStop(n,!0)},AnimationItem.prototype.playSegments=function(t,e){if(e&&(this.segments.length=0),"object"===typeof t[0]){var n,r=t.length;for(n=0;n<r;n+=1)this.segments.push(t[n])}else this.segments.push(t);this.segments.length&&e&&this.adjustSegment(this.segments.shift(),0),this.isPaused&&this.play()},AnimationItem.prototype.resetSegments=function(t){this.segments.length=0,this.segments.push([this.animationData.ip,this.animationData.op]),t&&this.checkSegments(0)},AnimationItem.prototype.checkSegments=function(t){return!!this.segments.length&&(this.adjustSegment(this.segments.shift(),t),!0)},AnimationItem.prototype.destroy=function(t){t&&this.name!=t||!this.renderer||(this.renderer.destroy(),this.imagePreloader.destroy(),this.trigger("destroy"),this._cbs=null,this.onEnterFrame=this.onLoopComplete=this.onComplete=this.onSegmentStart=this.onDestroy=null,this.renderer=null)},AnimationItem.prototype.setCurrentRawFrameValue=function(t){this.currentRawFrame=t,this.gotoFrame()},AnimationItem.prototype.setSpeed=function(t){this.playSpeed=t,this.updaFrameModifier()},AnimationItem.prototype.setDirection=function(t){this.playDirection=t<0?-1:1,this.updaFrameModifier()},AnimationItem.prototype.updaFrameModifier=function(){this.frameModifier=this.frameMult*this.playSpeed*this.playDirection},AnimationItem.prototype.getPath=function(){return this.path},AnimationItem.prototype.getAssetsPath=function(t){var e="";if(t.e)e=t.p;else if(this.assetsPath){var n=t.p;-1!==n.indexOf("images/")&&(n=n.split("/")[1]),e=this.assetsPath+n}else e=this.path,e+=t.u?t.u:"",e+=t.p;return e},AnimationItem.prototype.getAssetData=function(t){for(var e=0,n=this.assets.length;e<n;){if(t==this.assets[e].id)return this.assets[e];e+=1}},AnimationItem.prototype.hide=function(){this.renderer.hide()},AnimationItem.prototype.show=function(){this.renderer.show()},AnimationItem.prototype.getDuration=function(t){return t?this.totalFrames:this.totalFrames/this.frameRate},AnimationItem.prototype.trigger=function(t){if(this._cbs&&this._cbs[t])switch(t){case"enterFrame":this.triggerEvent(t,new BMEnterFrameEvent(t,this.currentFrame,this.totalFrames,this.frameModifier));break;case"loopComplete":this.triggerEvent(t,new BMCompleteLoopEvent(t,this.loop,this.playCount,this.frameMult));break;case"complete":this.triggerEvent(t,new BMCompleteEvent(t,this.frameMult));break;case"segmentStart":this.triggerEvent(t,new BMSegmentStartEvent(t,this.firstFrame,this.totalFrames));break;case"destroy":this.triggerEvent(t,new BMDestroyEvent(t,this));break;default:this.triggerEvent(t)}"enterFrame"===t&&this.onEnterFrame&&this.onEnterFrame.call(this,new BMEnterFrameEvent(t,this.currentFrame,this.totalFrames,this.frameMult)),"loopComplete"===t&&this.onLoopComplete&&this.onLoopComplete.call(this,new BMCompleteLoopEvent(t,this.loop,this.playCount,this.frameMult)),"complete"===t&&this.onComplete&&this.onComplete.call(this,new BMCompleteEvent(t,this.frameMult)),"segmentStart"===t&&this.onSegmentStart&&this.onSegmentStart.call(this,new BMSegmentStartEvent(t,this.firstFrame,this.totalFrames)),"destroy"===t&&this.onDestroy&&this.onDestroy.call(this,new BMDestroyEvent(t,this))};var Expressions=function(){var t={};return t.initExpressions=function(t){var e=0,n=[];t.renderer.compInterface=CompExpressionInterface(t.renderer),t.renderer.globalData.projectInterface.registerComposition(t.renderer),t.renderer.globalData.pushExpression=function(){e+=1},t.renderer.globalData.popExpression=function(){0===(e-=1)&&function(){var t,e=n.length;for(t=0;t<e;t+=1)n[t].release();n.length=0}()},t.renderer.globalData.registerExpressionProperty=function(t){-1===n.indexOf(t)&&n.push(t)}},t}();expressionsPlugin=Expressions;var ExpressionManager=function(){var ob={},Math=BMMath,window=null,document=null;function $bm_isInstanceOfArray(t){return t.constructor===Array||t.constructor===Float32Array}function isNumerable(t,e){return"number"===t||"boolean"===t||"string"===t||e instanceof Number}function $bm_neg(t){var e=typeof t;if("number"===e||"boolean"===e||t instanceof Number)return-t;if($bm_isInstanceOfArray(t)){var n,r=t.length,i=[];for(n=0;n<r;n+=1)i[n]=-t[n];return i}return t.propType?t.v:void 0}var easeInBez=BezierFactory.getBezierEasing(.333,0,.833,.833,"easeIn").get,easeOutBez=BezierFactory.getBezierEasing(.167,.167,.667,1,"easeOut").get,easeInOutBez=BezierFactory.getBezierEasing(.33,0,.667,1,"easeInOut").get;function sum(t,e){var n=typeof t,r=typeof e;if("string"===n||"string"===r)return t+e;if(isNumerable(n,t)&&isNumerable(r,e))return t+e;if($bm_isInstanceOfArray(t)&&isNumerable(r,e))return(t=t.slice(0))[0]=t[0]+e,t;if(isNumerable(n,t)&&$bm_isInstanceOfArray(e))return(e=e.slice(0))[0]=t+e[0],e;if($bm_isInstanceOfArray(t)&&$bm_isInstanceOfArray(e)){for(var i=0,o=t.length,a=e.length,s=[];i<o||i<a;)("number"===typeof t[i]||t[i]instanceof Number)&&("number"===typeof e[i]||e[i]instanceof Number)?s[i]=t[i]+e[i]:s[i]=void 0===e[i]?t[i]:t[i]||e[i],i+=1;return s}return 0}var add=sum;function sub(t,e){var n=typeof t,r=typeof e;if(isNumerable(n,t)&&isNumerable(r,e))return"string"===n&&(t=parseInt(t)),"string"===r&&(e=parseInt(e)),t-e;if($bm_isInstanceOfArray(t)&&isNumerable(r,e))return(t=t.slice(0))[0]=t[0]-e,t;if(isNumerable(n,t)&&$bm_isInstanceOfArray(e))return(e=e.slice(0))[0]=t-e[0],e;if($bm_isInstanceOfArray(t)&&$bm_isInstanceOfArray(e)){for(var i=0,o=t.length,a=e.length,s=[];i<o||i<a;)("number"===typeof t[i]||t[i]instanceof Number)&&("number"===typeof e[i]||e[i]instanceof Number)?s[i]=t[i]-e[i]:s[i]=void 0===e[i]?t[i]:t[i]||e[i],i+=1;return s}return 0}function mul(t,e){var n,r,i,o=typeof t,a=typeof e;if(isNumerable(o,t)&&isNumerable(a,e))return t*e;if($bm_isInstanceOfArray(t)&&isNumerable(a,e)){for(i=t.length,n=createTypedArray("float32",i),r=0;r<i;r+=1)n[r]=t[r]*e;return n}if(isNumerable(o,t)&&$bm_isInstanceOfArray(e)){for(i=e.length,n=createTypedArray("float32",i),r=0;r<i;r+=1)n[r]=t*e[r];return n}return 0}function div(t,e){var n,r,i,o=typeof t,a=typeof e;if(isNumerable(o,t)&&isNumerable(a,e))return t/e;if($bm_isInstanceOfArray(t)&&isNumerable(a,e)){for(i=t.length,n=createTypedArray("float32",i),r=0;r<i;r+=1)n[r]=t[r]/e;return n}if(isNumerable(o,t)&&$bm_isInstanceOfArray(e)){for(i=e.length,n=createTypedArray("float32",i),r=0;r<i;r+=1)n[r]=t/e[r];return n}return 0}function mod(t,e){return"string"===typeof t&&(t=parseInt(t)),"string"===typeof e&&(e=parseInt(e)),t%e}var $bm_sum=sum,$bm_sub=sub,$bm_mul=mul,$bm_div=div,$bm_mod=mod;function clamp(t,e,n){if(e>n){var r=n;n=e,e=r}return Math.min(Math.max(t,e),n)}function radiansToDegrees(t){return t/degToRads}var radians_to_degrees=radiansToDegrees;function degreesToRadians(t){return t*degToRads}var degrees_to_radians=radiansToDegrees,helperLengthArray=[0,0,0,0,0,0];function length(t,e){if("number"===typeof t||t instanceof Number)return e=e||0,Math.abs(t-e);e||(e=helperLengthArray);var n,r=Math.min(t.length,e.length),i=0;for(n=0;n<r;n+=1)i+=Math.pow(e[n]-t[n],2);return Math.sqrt(i)}function normalize(t){return div(t,length(t))}function rgbToHsl(t){var e,n,r=t[0],i=t[1],o=t[2],a=Math.max(r,i,o),s=Math.min(r,i,o),u=(a+s)/2;if(a==s)e=n=0;else{var c=a-s;switch(n=u>.5?c/(2-a-s):c/(a+s),a){case r:e=(i-o)/c+(i<o?6:0);break;case i:e=(o-r)/c+2;break;case o:e=(r-i)/c+4}e/=6}return[e,n,u,t[3]]}function hue2rgb(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+6*(e-t)*n:n<.5?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function hslToRgb(t){var e,n,r,i=t[0],o=t[1],a=t[2];if(0===o)e=n=r=a;else{var s=a<.5?a*(1+o):a+o-a*o,u=2*a-s;e=hue2rgb(u,s,i+1/3),n=hue2rgb(u,s,i),r=hue2rgb(u,s,i-1/3)}return[e,n,r,t[3]]}function linear(t,e,n,r,i){if(void 0!==r&&void 0!==i||(r=e,i=n,e=0,n=1),n<e){var o=n;n=e,e=o}if(t<=e)return r;if(t>=n)return i;var a=n===e?0:(t-e)/(n-e);if(!r.length)return r+(i-r)*a;var s,u=r.length,c=createTypedArray("float32",u);for(s=0;s<u;s+=1)c[s]=r[s]+(i[s]-r[s])*a;return c}function random(t,e){if(void 0===e&&(void 0===t?(t=0,e=1):(e=t,t=void 0)),e.length){var n,r=e.length;t||(t=createTypedArray("float32",r));var i=createTypedArray("float32",r),o=BMMath.random();for(n=0;n<r;n+=1)i[n]=t[n]+o*(e[n]-t[n]);return i}return void 0===t&&(t=0),t+BMMath.random()*(e-t)}function createPath(t,e,n,r){var i,o=t.length,a=shape_pool.newElement();a.setPathData(!!r,o);var s,u,c=[0,0];for(i=0;i<o;i+=1)s=e&&e[i]?e[i]:c,u=n&&n[i]?n[i]:c,a.setTripleAt(t[i][0],t[i][1],u[0]+t[i][0],u[1]+t[i][1],s[0]+t[i][0],s[1]+t[i][1],i,!0);return a}function initiateExpression(elem,data,property){var val=data.x,needsVelocity=/velocity(?![\w\d])/.test(val),_needsRandom=-1!==val.indexOf("random"),elemType=elem.data.ty,transform,$bm_transform,content,effect,thisProperty=property;thisProperty.valueAtTime=thisProperty.getValueAtTime,Object.defineProperty(thisProperty,"value",{get:function(){return thisProperty.v}}),elem.comp.frameDuration=1/elem.comp.globalData.frameRate,elem.comp.displayStartTime=0;var inPoint=elem.data.ip/elem.comp.globalData.frameRate,outPoint=elem.data.op/elem.comp.globalData.frameRate,width=elem.data.sw?elem.data.sw:0,height=elem.data.sh?elem.data.sh:0,name=elem.data.nm,loopIn,loop_in,loopOut,loop_out,smooth,toWorld,fromWorld,fromComp,toComp,fromCompToSurface,position,rotation,anchorPoint,scale,thisLayer,thisComp,mask,valueAtTime,velocityAtTime,__expression_functions=[],scoped_bm_rt;if(data.xf){var i,len=data.xf.length;for(i=0;i<len;i+=1)__expression_functions[i]=eval("(function(){ return "+data.xf[i]+"}())")}var expression_function=eval("[function _expression_function(){"+val+";scoped_bm_rt=$bm_rt}]")[0],numKeys=property.kf?data.k.length:0,active=!this.data||!0!==this.data.hd,wiggle=function(t,e){var n,r,i=this.pv.length?this.pv.length:1,o=createTypedArray("float32",i);var a=Math.floor(5*time);for(n=0,r=0;n<a;){for(r=0;r<i;r+=1)o[r]+=-e+2*e*BMMath.random();n+=1}var s=5*time,u=s-Math.floor(s),c=createTypedArray("float32",i);if(i>1){for(r=0;r<i;r+=1)c[r]=this.pv[r]+o[r]+(-e+2*e*BMMath.random())*u;return c}return this.pv+o[0]+(-e+2*e*BMMath.random())*u}.bind(this);function loopInDuration(t,e){return loopIn(t,e,!0)}function loopOutDuration(t,e){return loopOut(t,e,!0)}thisProperty.loopIn&&(loopIn=thisProperty.loopIn.bind(thisProperty),loop_in=loopIn),thisProperty.loopOut&&(loopOut=thisProperty.loopOut.bind(thisProperty),loop_out=loopOut),thisProperty.smooth&&(smooth=thisProperty.smooth.bind(thisProperty)),this.getValueAtTime&&(valueAtTime=this.getValueAtTime.bind(this)),this.getVelocityAtTime&&(velocityAtTime=this.getVelocityAtTime.bind(this));var comp=elem.comp.globalData.projectInterface.bind(elem.comp.globalData.projectInterface),time,velocity,value,text,textIndex,textTotal,selectorValue;function lookAt(t,e){var n=[e[0]-t[0],e[1]-t[1],e[2]-t[2]],r=Math.atan2(n[0],Math.sqrt(n[1]*n[1]+n[2]*n[2]))/degToRads;return[-Math.atan2(n[1],n[2])/degToRads,r,0]}function easeOut(t,e,n,r,i){return applyEase(easeOutBez,t,e,n,r,i)}function easeIn(t,e,n,r,i){return applyEase(easeInBez,t,e,n,r,i)}function ease(t,e,n,r,i){return applyEase(easeInOutBez,t,e,n,r,i)}function applyEase(t,e,n,r,i,o){void 0===i?(i=n,o=r):e=(e-n)/(r-n);var a=t(e=e>1?1:e<0?0:e);if($bm_isInstanceOfArray(i)){var s,u=i.length,c=createTypedArray("float32",u);for(s=0;s<u;s+=1)c[s]=(o[s]-i[s])*a+i[s];return c}return(o-i)*a+i}function nearestKey(t){var e,n,r,i=data.k.length;if(data.k.length&&"number"!==typeof data.k[0])if(n=-1,(t*=elem.comp.globalData.frameRate)<data.k[0].t)n=1,r=data.k[0].t;else{for(e=0;e<i-1;e+=1){if(t===data.k[e].t){n=e+1,r=data.k[e].t;break}if(t>data.k[e].t&&t<data.k[e+1].t){t-data.k[e].t>data.k[e+1].t-t?(n=e+2,r=data.k[e+1].t):(n=e+1,r=data.k[e].t);break}}-1===n&&(n=e+1,r=data.k[e].t)}else n=0,r=0;var o={};return o.index=n,o.time=r/elem.comp.globalData.frameRate,o}function key(t){var e,n,r,i;if(!data.k.length||"number"===typeof data.k[0])throw new Error("The property has no keyframe at index "+t);for(t-=1,e={time:data.k[t].t/elem.comp.globalData.frameRate,value:[]},r=(i=t!==data.k.length-1||data.k[t].h?data.k[t].s:data.k[t].s||0===data.k[t].s?data.k[t-1].s:data.k[t].e).length,n=0;n<r;n+=1)e[n]=i[n],e.value[n]=i[n];return e}function framesToTime(t,e){return e||(e=elem.comp.globalData.frameRate),t/e}function timeToFrames(t,e){return t||0===t||(t=time),e||(e=elem.comp.globalData.frameRate),t*e}function seedRandom(t){BMMath.seedrandom(randSeed+t)}function sourceRectAtTime(){return elem.sourceRectAtTime()}function substring(t,e){return"string"===typeof value?void 0===e?value.substring(t):value.substring(t,e):""}function substr(t,e){return"string"===typeof value?void 0===e?value.substr(t):value.substr(t,e):""}var index=elem.data.ind,hasParent=!(!elem.hierarchy||!elem.hierarchy.length),parent,randSeed=Math.floor(1e6*Math.random()),globalData=elem.globalData;function executeExpression(t){return value=t,_needsRandom&&seedRandom(randSeed),this.frameExpressionId===elem.globalData.frameId&&"textSelector"!==this.propType?value:("textSelector"===this.propType&&(textIndex=this.textIndex,textTotal=this.textTotal,selectorValue=this.selectorValue),thisLayer||(text=elem.layerInterface.text,thisLayer=elem.layerInterface,thisComp=elem.comp.compInterface,toWorld=thisLayer.toWorld.bind(thisLayer),fromWorld=thisLayer.fromWorld.bind(thisLayer),fromComp=thisLayer.fromComp.bind(thisLayer),toComp=thisLayer.toComp.bind(thisLayer),mask=thisLayer.mask?thisLayer.mask.bind(thisLayer):null,fromCompToSurface=fromComp),transform||(transform=elem.layerInterface("ADBE Transform Group"),$bm_transform=transform,transform&&(anchorPoint=transform.anchorPoint)),4!==elemType||content||(content=thisLayer("ADBE Root Vectors Group")),effect||(effect=thisLayer(4)),(hasParent=!(!elem.hierarchy||!elem.hierarchy.length))&&!parent&&(parent=elem.hierarchy[0].layerInterface),time=this.comp.renderedFrame/this.comp.globalData.frameRate,needsVelocity&&(velocity=velocityAtTime(time)),expression_function(),this.frameExpressionId=elem.globalData.frameId,"shape"===scoped_bm_rt.propType&&(scoped_bm_rt=scoped_bm_rt.v),scoped_bm_rt)}return executeExpression}return ob.initiateExpression=initiateExpression,ob}(),expressionHelpers=function(){return{searchExpressions:function(t,e,n){e.x&&(n.k=!0,n.x=!0,n.initiateExpression=ExpressionManager.initiateExpression,n.effectsSequence.push(n.initiateExpression(t,e,n).bind(n)))},getSpeedAtTime:function(t){var e=this.getValueAtTime(t),n=this.getValueAtTime(t+-.01),r=0;if(e.length){var i;for(i=0;i<e.length;i+=1)r+=Math.pow(n[i]-e[i],2);r=100*Math.sqrt(r)}else r=0;return r},getVelocityAtTime:function(t){if(void 0!==this.vel)return this.vel;var e,n,r=this.getValueAtTime(t),i=this.getValueAtTime(t+-.001);if(r.length)for(e=createTypedArray("float32",r.length),n=0;n<r.length;n+=1)e[n]=(i[n]-r[n])/-.001;else e=(i-r)/-.001;return e},getValueAtTime:function(t){return t*=this.elem.globalData.frameRate,(t-=this.offsetTime)!==this._cachingAtTime.lastFrame&&(this._cachingAtTime.lastIndex=this._cachingAtTime.lastFrame<t?this._cachingAtTime.lastIndex:0,this._cachingAtTime.value=this.interpolateValue(t,this._cachingAtTime),this._cachingAtTime.lastFrame=t),this._cachingAtTime.value},getStaticValueAtTime:function(){return this.pv},setGroupProperty:function(t){this.propertyGroup=t}}}();!function(){function t(t,e,n){if(!this.k||!this.keyframes)return this.pv;t=t?t.toLowerCase():"";var r,i,o,a,s,u=this.comp.renderedFrame,c=this.keyframes,l=c[c.length-1].t;if(u<=l)return this.pv;if(n?i=l-(r=e?Math.abs(l-elem.comp.globalData.frameRate*e):Math.max(0,l-this.elem.data.ip)):((!e||e>c.length-1)&&(e=c.length-1),r=l-(i=c[c.length-1-e].t)),"pingpong"===t){if(Math.floor((u-i)/r)%2!==0)return this.getValueAtTime((r-(u-i)%r+i)/this.comp.globalData.frameRate,0)}else{if("offset"===t){var h=this.getValueAtTime(i/this.comp.globalData.frameRate,0),f=this.getValueAtTime(l/this.comp.globalData.frameRate,0),p=this.getValueAtTime(((u-i)%r+i)/this.comp.globalData.frameRate,0),d=Math.floor((u-i)/r);if(this.pv.length){for(a=(s=new Array(h.length)).length,o=0;o<a;o+=1)s[o]=(f[o]-h[o])*d+p[o];return s}return(f-h)*d+p}if("continue"===t){var m=this.getValueAtTime(l/this.comp.globalData.frameRate,0),y=this.getValueAtTime((l-.001)/this.comp.globalData.frameRate,0);if(this.pv.length){for(a=(s=new Array(m.length)).length,o=0;o<a;o+=1)s[o]=m[o]+(m[o]-y[o])*((u-l)/this.comp.globalData.frameRate)/5e-4;return s}return m+(u-l)/.001*(m-y)}}return this.getValueAtTime(((u-i)%r+i)/this.comp.globalData.frameRate,0)}function e(t,e,n){if(!this.k)return this.pv;t=t?t.toLowerCase():"";var r,i,o,a,s,u=this.comp.renderedFrame,c=this.keyframes,l=c[0].t;if(u>=l)return this.pv;if(n?i=l+(r=e?Math.abs(elem.comp.globalData.frameRate*e):Math.max(0,this.elem.data.op-l)):((!e||e>c.length-1)&&(e=c.length-1),r=(i=c[e].t)-l),"pingpong"===t){if(Math.floor((l-u)/r)%2===0)return this.getValueAtTime(((l-u)%r+l)/this.comp.globalData.frameRate,0)}else{if("offset"===t){var h=this.getValueAtTime(l/this.comp.globalData.frameRate,0),f=this.getValueAtTime(i/this.comp.globalData.frameRate,0),p=this.getValueAtTime((r-(l-u)%r+l)/this.comp.globalData.frameRate,0),d=Math.floor((l-u)/r)+1;if(this.pv.length){for(a=(s=new Array(h.length)).length,o=0;o<a;o+=1)s[o]=p[o]-(f[o]-h[o])*d;return s}return p-(f-h)*d}if("continue"===t){var m=this.getValueAtTime(l/this.comp.globalData.frameRate,0),y=this.getValueAtTime((l+.001)/this.comp.globalData.frameRate,0);if(this.pv.length){for(a=(s=new Array(m.length)).length,o=0;o<a;o+=1)s[o]=m[o]+(m[o]-y[o])*(l-u)/.001;return s}return m+(m-y)*(l-u)/.001}}return this.getValueAtTime((r-(l-u)%r+l)/this.comp.globalData.frameRate,0)}function n(t,e){if(!this.k)return this.pv;if(t=.5*(t||.4),(e=Math.floor(e||5))<=1)return this.pv;var n,r,i=this.comp.renderedFrame/this.comp.globalData.frameRate,o=i-t,a=e>1?(i+t-o)/(e-1):1,s=0,u=0;for(n=this.pv.length?createTypedArray("float32",this.pv.length):0;s<e;){if(r=this.getValueAtTime(o+s*a),this.pv.length)for(u=0;u<this.pv.length;u+=1)n[u]+=r[u];else n+=r;s+=1}if(this.pv.length)for(u=0;u<this.pv.length;u+=1)n[u]/=e;else n/=e;return n}var r=TransformPropertyFactory.getTransformProperty;TransformPropertyFactory.getTransformProperty=function(t,e,n){var i=r(t,e,n);return i.dynamicProperties.length?i.getValueAtTime=function(t){console.warn("Transform at time not supported")}.bind(i):i.getValueAtTime=function(t){}.bind(i),i.setGroupProperty=expressionHelpers.setGroupProperty,i};var i=PropertyFactory.getProp;PropertyFactory.getProp=function(r,o,a,s,u){var c=i(r,o,a,s,u);c.kf?c.getValueAtTime=expressionHelpers.getValueAtTime.bind(c):c.getValueAtTime=expressionHelpers.getStaticValueAtTime.bind(c),c.setGroupProperty=expressionHelpers.setGroupProperty,c.loopOut=t,c.loopIn=e,c.smooth=n,c.getVelocityAtTime=expressionHelpers.getVelocityAtTime.bind(c),c.getSpeedAtTime=expressionHelpers.getSpeedAtTime.bind(c),c.numKeys=1===o.a?o.k.length:0,c.propertyIndex=o.ix;var l=0;return 0!==a&&(l=createTypedArray("float32",1===o.a?o.k[0].s.length:o.k.length)),c._cachingAtTime={lastFrame:initialDefaultFrame,lastIndex:0,value:l},expressionHelpers.searchExpressions(r,o,c),c.k&&u.addDynamicProperty(c),c};var o=ShapePropertyFactory.getConstructorFunction(),a=ShapePropertyFactory.getKeyframedConstructorFunction();function s(){}s.prototype={vertices:function(t,e){this.k&&this.getValue();var n=this.v;void 0!==e&&(n=this.getValueAtTime(e,0));var r,i=n._length,o=n[t],a=n.v,s=createSizedArray(i);for(r=0;r<i;r+=1)s[r]="i"===t||"o"===t?[o[r][0]-a[r][0],o[r][1]-a[r][1]]:[o[r][0],o[r][1]];return s},points:function(t){return this.vertices("v",t)},inTangents:function(t){return this.vertices("i",t)},outTangents:function(t){return this.vertices("o",t)},isClosed:function(){return this.v.c},pointOnPath:function(t,e){var n=this.v;void 0!==e&&(n=this.getValueAtTime(e,0)),this._segmentsLength||(this._segmentsLength=bez.getSegmentsLength(n));for(var r,i=this._segmentsLength,o=i.lengths,a=i.totalLength*t,s=0,u=o.length,c=0;s<u;){if(c+o[s].addedLength>a){var l=s,h=n.c&&s===u-1?0:s+1,f=(a-c)/o[s].addedLength;r=bez.getPointInSegment(n.v[l],n.v[h],n.o[l],n.i[h],f,o[s]);break}c+=o[s].addedLength,s+=1}return r||(r=n.c?[n.v[0][0],n.v[0][1]]:[n.v[n._length-1][0],n.v[n._length-1][1]]),r},vectorOnPath:function(t,e,n){t=1==t?this.v.c?0:.999:t;var r=this.pointOnPath(t,e),i=this.pointOnPath(t+.001,e),o=i[0]-r[0],a=i[1]-r[1],s=Math.sqrt(Math.pow(o,2)+Math.pow(a,2));return"tangent"===n?[o/s,a/s]:[-a/s,o/s]},tangentOnPath:function(t,e){return this.vectorOnPath(t,e,"tangent")},normalOnPath:function(t,e){return this.vectorOnPath(t,e,"normal")},setGroupProperty:expressionHelpers.setGroupProperty,getValueAtTime:expressionHelpers.getStaticValueAtTime},extendPrototype([s],o),extendPrototype([s],a),a.prototype.getValueAtTime=function(t){return this._cachingAtTime||(this._cachingAtTime={shapeValue:shape_pool.clone(this.pv),lastIndex:0,lastTime:initialDefaultFrame}),t*=this.elem.globalData.frameRate,(t-=this.offsetTime)!==this._cachingAtTime.lastTime&&(this._cachingAtTime.lastIndex=this._cachingAtTime.lastTime<t?this._caching.lastIndex:0,this._cachingAtTime.lastTime=t,this.interpolateShape(t,this._cachingAtTime.shapeValue,this._cachingAtTime)),this._cachingAtTime.shapeValue},a.prototype.initiateExpression=ExpressionManager.initiateExpression;var u=ShapePropertyFactory.getShapeProp;ShapePropertyFactory.getShapeProp=function(t,e,n,r,i){var o=u(t,e,n,r,i);return o.propertyIndex=e.ix,o.lock=!1,3===n?expressionHelpers.searchExpressions(t,e.pt,o):4===n&&expressionHelpers.searchExpressions(t,e.ks,o),o.k&&t.addDynamicProperty(o),o}}(),function(){TextProperty.prototype.getExpressionValue=function(t,e){var n=this.calculateExpression(e);if(t.t!==n){var r={};return this.copyData(r,t),r.t=n.toString(),r.__complete=!1,r}return t},TextProperty.prototype.searchProperty=function(){var t=this.searchKeyframes(),e=this.searchExpressions();return this.kf=t||e,this.kf},TextProperty.prototype.searchExpressions=function(){if(this.data.d.x)return this.calculateExpression=ExpressionManager.initiateExpression.bind(this)(this.elem,this.data.d,this),this.addEffect(this.getExpressionValue.bind(this)),!0}}();var ShapeExpressionInterface=function(){function t(t,h,f){var p,d=[],m=t?t.length:0;for(p=0;p<m;p+=1)"gr"==t[p].ty?d.push(e(t[p],h[p],f)):"fl"==t[p].ty?d.push(n(t[p],h[p],f)):"st"==t[p].ty?d.push(r(t[p],h[p],f)):"tm"==t[p].ty?d.push(i(t[p],h[p],f)):"tr"==t[p].ty||("el"==t[p].ty?d.push(o(t[p],h[p],f)):"sr"==t[p].ty?d.push(a(t[p],h[p],f)):"sh"==t[p].ty?d.push(l(t[p],h[p],f)):"rc"==t[p].ty?d.push(s(t[p],h[p],f)):"rd"==t[p].ty?d.push(u(t[p],h[p],f)):"rp"==t[p].ty&&d.push(c(t[p],h[p],f)));return d}function e(e,n,r){var i=function(t){switch(t){case"ADBE Vectors Group":case"Contents":case 2:return i.content;default:return i.transform}};i.propertyGroup=function(t){return 1===t?i:r(t-1)};var o=function(e,n,r){var i,o=function(t){for(var e=0,n=i.length;e<n;){if(i[e]._name===t||i[e].mn===t||i[e].propertyIndex===t||i[e].ix===t||i[e].ind===t)return i[e];e+=1}if("number"===typeof t)return i[t-1]};return o.propertyGroup=function(t){return 1===t?o:r(t-1)},i=t(e.it,n.it,o.propertyGroup),o.numProperties=i.length,o.propertyIndex=e.cix,o._name=e.nm,o}(e,n,i.propertyGroup),a=function(t,e,n){function r(t){return 1==t?i:n(--t)}e.transform.mProps.o.setGroupProperty(r),e.transform.mProps.p.setGroupProperty(r),e.transform.mProps.a.setGroupProperty(r),e.transform.mProps.s.setGroupProperty(r),e.transform.mProps.r.setGroupProperty(r),e.transform.mProps.sk&&(e.transform.mProps.sk.setGroupProperty(r),e.transform.mProps.sa.setGroupProperty(r));function i(e){return t.a.ix===e||"Anchor Point"===e?i.anchorPoint:t.o.ix===e||"Opacity"===e?i.opacity:t.p.ix===e||"Position"===e?i.position:t.r.ix===e||"Rotation"===e||"ADBE Vector Rotation"===e?i.rotation:t.s.ix===e||"Scale"===e?i.scale:t.sk&&t.sk.ix===e||"Skew"===e?i.skew:t.sa&&t.sa.ix===e||"Skew Axis"===e?i.skewAxis:void 0}return e.transform.op.setGroupProperty(r),Object.defineProperties(i,{opacity:{get:ExpressionPropertyInterface(e.transform.mProps.o)},position:{get:ExpressionPropertyInterface(e.transform.mProps.p)},anchorPoint:{get:ExpressionPropertyInterface(e.transform.mProps.a)},scale:{get:ExpressionPropertyInterface(e.transform.mProps.s)},rotation:{get:ExpressionPropertyInterface(e.transform.mProps.r)},skew:{get:ExpressionPropertyInterface(e.transform.mProps.sk)},skewAxis:{get:ExpressionPropertyInterface(e.transform.mProps.sa)},_name:{value:t.nm}}),i.ty="tr",i.mn=t.mn,i.propertyGroup=n,i}(e.it[e.it.length-1],n.it[n.it.length-1],i.propertyGroup);return i.content=o,i.transform=a,Object.defineProperty(i,"_name",{get:function(){return e.nm}}),i.numProperties=e.np,i.propertyIndex=e.ix,i.nm=e.nm,i.mn=e.mn,i}function n(t,e,n){function r(t){return"Color"===t||"color"===t?r.color:"Opacity"===t||"opacity"===t?r.opacity:void 0}return Object.defineProperties(r,{color:{get:ExpressionPropertyInterface(e.c)},opacity:{get:ExpressionPropertyInterface(e.o)},_name:{value:t.nm},mn:{value:t.mn}}),e.c.setGroupProperty(n),e.o.setGroupProperty(n),r}function r(t,e,n){function r(t){return 1===t?ob:n(t-1)}function i(t){return 1===t?u:r(t-1)}function o(n){Object.defineProperty(u,t.d[n].nm,{get:ExpressionPropertyInterface(e.d.dataProps[n].p)})}var a,s=t.d?t.d.length:0,u={};for(a=0;a<s;a+=1)o(a),e.d.dataProps[a].p.setGroupProperty(i);function c(t){return"Color"===t||"color"===t?c.color:"Opacity"===t||"opacity"===t?c.opacity:"Stroke Width"===t||"stroke width"===t?c.strokeWidth:void 0}return Object.defineProperties(c,{color:{get:ExpressionPropertyInterface(e.c)},opacity:{get:ExpressionPropertyInterface(e.o)},strokeWidth:{get:ExpressionPropertyInterface(e.w)},dash:{get:function(){return u}},_name:{value:t.nm},mn:{value:t.mn}}),e.c.setGroupProperty(r),e.o.setGroupProperty(r),e.w.setGroupProperty(r),c}function i(t,e,n){function r(t){return 1==t?i:n(--t)}function i(e){return e===t.e.ix||"End"===e||"end"===e?i.end:e===t.s.ix?i.start:e===t.o.ix?i.offset:void 0}return i.propertyIndex=t.ix,e.s.setGroupProperty(r),e.e.setGroupProperty(r),e.o.setGroupProperty(r),i.propertyIndex=t.ix,i.propertyGroup=n,Object.defineProperties(i,{start:{get:ExpressionPropertyInterface(e.s)},end:{get:ExpressionPropertyInterface(e.e)},offset:{get:ExpressionPropertyInterface(e.o)},_name:{value:t.nm}}),i.mn=t.mn,i}function o(t,e,n){function r(t){return 1==t?o:n(--t)}o.propertyIndex=t.ix;var i="tm"===e.sh.ty?e.sh.prop:e.sh;function o(e){return t.p.ix===e?o.position:t.s.ix===e?o.size:void 0}return i.s.setGroupProperty(r),i.p.setGroupProperty(r),Object.defineProperties(o,{size:{get:ExpressionPropertyInterface(i.s)},position:{get:ExpressionPropertyInterface(i.p)},_name:{value:t.nm}}),o.mn=t.mn,o}function a(t,e,n){function r(t){return 1==t?o:n(--t)}var i="tm"===e.sh.ty?e.sh.prop:e.sh;function o(e){return t.p.ix===e?o.position:t.r.ix===e?o.rotation:t.pt.ix===e?o.points:t.or.ix===e||"ADBE Vector Star Outer Radius"===e?o.outerRadius:t.os.ix===e?o.outerRoundness:!t.ir||t.ir.ix!==e&&"ADBE Vector Star Inner Radius"!==e?t.is&&t.is.ix===e?o.innerRoundness:void 0:o.innerRadius}return o.propertyIndex=t.ix,i.or.setGroupProperty(r),i.os.setGroupProperty(r),i.pt.setGroupProperty(r),i.p.setGroupProperty(r),i.r.setGroupProperty(r),t.ir&&(i.ir.setGroupProperty(r),i.is.setGroupProperty(r)),Object.defineProperties(o,{position:{get:ExpressionPropertyInterface(i.p)},rotation:{get:ExpressionPropertyInterface(i.r)},points:{get:ExpressionPropertyInterface(i.pt)},outerRadius:{get:ExpressionPropertyInterface(i.or)},outerRoundness:{get:ExpressionPropertyInterface(i.os)},innerRadius:{get:ExpressionPropertyInterface(i.ir)},innerRoundness:{get:ExpressionPropertyInterface(i.is)},_name:{value:t.nm}}),o.mn=t.mn,o}function s(t,e,n){function r(t){return 1==t?o:n(--t)}var i="tm"===e.sh.ty?e.sh.prop:e.sh;function o(e){return t.p.ix===e?o.position:t.r.ix===e?o.roundness:t.s.ix===e||"Size"===e||"ADBE Vector Rect Size"===e?o.size:void 0}return o.propertyIndex=t.ix,i.p.setGroupProperty(r),i.s.setGroupProperty(r),i.r.setGroupProperty(r),Object.defineProperties(o,{position:{get:ExpressionPropertyInterface(i.p)},roundness:{get:ExpressionPropertyInterface(i.r)},size:{get:ExpressionPropertyInterface(i.s)},_name:{value:t.nm}}),o.mn=t.mn,o}function u(t,e,n){var r=e;function i(e){if(t.r.ix===e||"Round Corners 1"===e)return i.radius}return i.propertyIndex=t.ix,r.rd.setGroupProperty(function(t){return 1==t?i:n(--t)}),Object.defineProperties(i,{radius:{get:ExpressionPropertyInterface(r.rd)},_name:{value:t.nm}}),i.mn=t.mn,i}function c(t,e,n){function r(t){return 1==t?o:n(--t)}var i=e;function o(e){return t.c.ix===e||"Copies"===e?o.copies:t.o.ix===e||"Offset"===e?o.offset:void 0}return o.propertyIndex=t.ix,i.c.setGroupProperty(r),i.o.setGroupProperty(r),Object.defineProperties(o,{copies:{get:ExpressionPropertyInterface(i.c)},offset:{get:ExpressionPropertyInterface(i.o)},_name:{value:t.nm}}),o.mn=t.mn,o}function l(t,e,n){var r=e.sh;function i(t){if("Shape"===t||"shape"===t||"Path"===t||"path"===t||"ADBE Vector Shape"===t||2===t)return i.path}return r.setGroupProperty(function(t){return 1==t?i:n(--t)}),Object.defineProperties(i,{path:{get:function(){return r.k&&r.getValue(),r}},shape:{get:function(){return r.k&&r.getValue(),r}},_name:{value:t.nm},ix:{value:t.ix},mn:{value:t.mn}}),i}return function(e,n,r){var i;function o(t){if("number"===typeof t)return i[t-1];for(var e=0,n=i.length;e<n;){if(i[e]._name===t)return i[e];e+=1}}return o.propertyGroup=r,i=t(e,n,o),o.numProperties=i.length,o}}(),TextExpressionInterface=function(t){var e;function n(){}return Object.defineProperty(n,"sourceText",{get:function(){t.textProperty.getValue();var n=t.textProperty.currentData.t;return void 0!==n&&(t.textProperty.currentData.t=void 0,(e=new String(n)).value=n||new String(n)),e}}),n},LayerExpressionInterface=function(){function t(t,e){var n=new Matrix;if(n.reset(),this._elem.finalTransform.mProp.applyToMatrix(n),this._elem.hierarchy&&this._elem.hierarchy.length){var r,i=this._elem.hierarchy.length;for(r=0;r<i;r+=1)this._elem.hierarchy[r].finalTransform.mProp.applyToMatrix(n);return n.applyToPointArray(t[0],t[1],t[2]||0)}return n.applyToPointArray(t[0],t[1],t[2]||0)}function e(t,e){var n=new Matrix;if(n.reset(),this._elem.finalTransform.mProp.applyToMatrix(n),this._elem.hierarchy&&this._elem.hierarchy.length){var r,i=this._elem.hierarchy.length;for(r=0;r<i;r+=1)this._elem.hierarchy[r].finalTransform.mProp.applyToMatrix(n);return n.inversePoint(t)}return n.inversePoint(t)}function n(t){var e=new Matrix;if(e.reset(),this._elem.finalTransform.mProp.applyToMatrix(e),this._elem.hierarchy&&this._elem.hierarchy.length){var n,r=this._elem.hierarchy.length;for(n=0;n<r;n+=1)this._elem.hierarchy[n].finalTransform.mProp.applyToMatrix(e);return e.inversePoint(t)}return e.inversePoint(t)}function r(){return[1,1,1,1]}return function(i){var o;function a(t){switch(t){case"ADBE Root Vectors Group":case"Contents":case 2:return a.shapeInterface;case 1:case 6:case"Transform":case"transform":case"ADBE Transform Group":return o;case 4:case"ADBE Effect Parade":case"effects":case"Effects":return a.effect}}a.toWorld=t,a.fromWorld=e,a.toComp=t,a.fromComp=n,a.sampleImage=r,a.sourceRectAtTime=i.sourceRectAtTime.bind(i),a._elem=i;var s=getDescriptor(o=TransformExpressionInterface(i.finalTransform.mProp),"anchorPoint");return Object.defineProperties(a,{hasParent:{get:function(){return i.hierarchy.length}},parent:{get:function(){return i.hierarchy[0].layerInterface}},rotation:getDescriptor(o,"rotation"),scale:getDescriptor(o,"scale"),position:getDescriptor(o,"position"),opacity:getDescriptor(o,"opacity"),anchorPoint:s,anchor_point:s,transform:{get:function(){return o}},active:{get:function(){return i.isInRange}}}),a.startTime=i.data.st,a.index=i.data.ind,a.source=i.data.refId,a.height=0===i.data.ty?i.data.h:100,a.width=0===i.data.ty?i.data.w:100,a.inPoint=i.data.ip/i.comp.globalData.frameRate,a.outPoint=i.data.op/i.comp.globalData.frameRate,a._name=i.data.nm,a.registerMaskInterface=function(t){a.mask=new MaskManagerInterface(t,i)},a.registerEffectsInterface=function(t){a.effect=t},a}}(),CompExpressionInterface=function(t){function e(e){for(var n=0,r=t.layers.length;n<r;){if(t.layers[n].nm===e||t.layers[n].ind===e)return t.elements[n].layerInterface;n+=1}return null}return Object.defineProperty(e,"_name",{value:t.data.nm}),e.layer=e,e.pixelAspect=1,e.height=t.data.h||t.globalData.compSize.h,e.width=t.data.w||t.globalData.compSize.w,e.pixelAspect=1,e.frameDuration=1/t.globalData.frameRate,e.displayStartTime=0,e.numLayers=t.layers.length,e},TransformExpressionInterface=function(t){function e(t){switch(t){case"scale":case"Scale":case"ADBE Scale":case 6:return e.scale;case"rotation":case"Rotation":case"ADBE Rotation":case"ADBE Rotate Z":case 10:return e.rotation;case"ADBE Rotate X":return e.xRotation;case"ADBE Rotate Y":return e.yRotation;case"position":case"Position":case"ADBE Position":case 2:return e.position;case"ADBE Position_0":return e.xPosition;case"ADBE Position_1":return e.yPosition;case"ADBE Position_2":return e.zPosition;case"anchorPoint":case"AnchorPoint":case"Anchor Point":case"ADBE AnchorPoint":case 1:return e.anchorPoint;case"opacity":case"Opacity":case 11:return e.opacity}}if(Object.defineProperty(e,"rotation",{get:ExpressionPropertyInterface(t.r||t.rz)}),Object.defineProperty(e,"zRotation",{get:ExpressionPropertyInterface(t.rz||t.r)}),Object.defineProperty(e,"xRotation",{get:ExpressionPropertyInterface(t.rx)}),Object.defineProperty(e,"yRotation",{get:ExpressionPropertyInterface(t.ry)}),Object.defineProperty(e,"scale",{get:ExpressionPropertyInterface(t.s)}),t.p)var n=ExpressionPropertyInterface(t.p);return Object.defineProperty(e,"position",{get:function(){return t.p?n():[t.px.v,t.py.v,t.pz?t.pz.v:0]}}),Object.defineProperty(e,"xPosition",{get:ExpressionPropertyInterface(t.px)}),Object.defineProperty(e,"yPosition",{get:ExpressionPropertyInterface(t.py)}),Object.defineProperty(e,"zPosition",{get:ExpressionPropertyInterface(t.pz)}),Object.defineProperty(e,"anchorPoint",{get:ExpressionPropertyInterface(t.a)}),Object.defineProperty(e,"opacity",{get:ExpressionPropertyInterface(t.o)}),Object.defineProperty(e,"skew",{get:ExpressionPropertyInterface(t.sk)}),Object.defineProperty(e,"skewAxis",{get:ExpressionPropertyInterface(t.sa)}),Object.defineProperty(e,"orientation",{get:ExpressionPropertyInterface(t.or)}),e},ProjectInterface=function(){function t(t){this.compositions.push(t)}return function(){function e(t){for(var e=0,n=this.compositions.length;e<n;){if(this.compositions[e].data&&this.compositions[e].data.nm===t)return this.compositions[e].prepareFrame&&this.compositions[e].data.xt&&this.compositions[e].prepareFrame(this.currentFrame),this.compositions[e].compInterface;e+=1}}return e.compositions=[],e.currentFrame=0,e.registerComposition=t,e}}(),EffectsExpressionInterface=function(){function t(n,r,i,o){var a,s=[],u=n.ef.length;for(a=0;a<u;a+=1)5===n.ef[a].ty?s.push(t(n.ef[a],r.effectElements[a],r.effectElements[a].propertyGroup,o)):s.push(e(r.effectElements[a],n.ef[a].ty,o,c));function c(t){return 1===t?l:i(t-1)}var l=function(t){for(var e=n.ef,r=0,i=e.length;r<i;){if(t===e[r].nm||t===e[r].mn||t===e[r].ix)return 5===e[r].ty?s[r]:s[r]();r+=1}return s[0]()};return l.propertyGroup=c,"ADBE Color Control"===n.mn&&Object.defineProperty(l,"color",{get:function(){return s[0]()}}),Object.defineProperty(l,"numProperties",{get:function(){return n.np}}),l.active=l.enabled=0!==n.en,l}function e(t,e,n,r){var i=ExpressionPropertyInterface(t.p);return t.p.setGroupProperty&&t.p.setGroupProperty(r),function(){return 10===e?n.comp.compInterface(t.p.v):i()}}return{createEffectsInterface:function(e,n){if(e.effectsManager){var r,i=[],o=e.data.ef,a=e.effectsManager.effectElements.length;for(r=0;r<a;r+=1)i.push(t(o[r],e.effectsManager.effectElements[r],n,e));return function(t){for(var n=e.data.ef||[],r=0,o=n.length;r<o;){if(t===n[r].nm||t===n[r].mn||t===n[r].ix)return i[r];r+=1}}}}}}(),MaskManagerInterface=function(){function t(t,e){this._mask=t,this._data=e}Object.defineProperty(t.prototype,"maskPath",{get:function(){return this._mask.prop.k&&this._mask.prop.getValue(),this._mask.prop}});return function(e,n){var r,i=createSizedArray(e.viewData.length),o=e.viewData.length;for(r=0;r<o;r+=1)i[r]=new t(e.viewData[r],e.masksProperties[r]);return function(t){for(r=0;r<o;){if(e.masksProperties[r].nm===t)return i[r];r+=1}}}}(),ExpressionPropertyInterface=function(){var t={pv:0,v:0,mult:1},e={pv:[0,0,0],v:[0,0,0],mult:1};function n(t,e,n){Object.defineProperty(t,"velocity",{get:function(){return e.getVelocityAtTime(e.comp.currentFrame)}}),t.numKeys=e.keyframes?e.keyframes.length:0,t.key=function(r){if(t.numKeys){var i="";i="s"in e.keyframes[r-1]?e.keyframes[r-1].s:"e"in e.keyframes[r-2]?e.keyframes[r-2].e:e.keyframes[r-2].s;var o="unidimensional"===n?new Number(i):Object.assign({},i);return o.time=e.keyframes[r-1].t/e.elem.comp.globalData.frameRate,o}return 0},t.valueAtTime=e.getValueAtTime,t.speedAtTime=e.getSpeedAtTime,t.velocityAtTime=e.getVelocityAtTime,t.propertyGroup=e.propertyGroup}function r(){return t}return function(i){return i?"unidimensional"===i.propType?function(e){e&&"pv"in e||(e=t);var r=1/e.mult,i=e.pv*r,o=new Number(i);return o.value=i,n(o,e,"unidimensional"),function(){return e.k&&e.getValue(),i=e.v*r,o.value!==i&&((o=new Number(i)).value=i,n(o,e,"unidimensional")),o}}(i):function(t){t&&"pv"in t||(t=e);var r=1/t.mult,i=t.pv.length,o=createTypedArray("float32",i),a=createTypedArray("float32",i);return o.value=a,n(o,t,"multidimensional"),function(){t.k&&t.getValue();for(var e=0;e<i;e+=1)o[e]=a[e]=t.v[e]*r;return o}}(i):r}}();function SliderEffect(t,e,n){this.p=PropertyFactory.getProp(e,t.v,0,0,n)}function AngleEffect(t,e,n){this.p=PropertyFactory.getProp(e,t.v,0,0,n)}function ColorEffect(t,e,n){this.p=PropertyFactory.getProp(e,t.v,1,0,n)}function PointEffect(t,e,n){this.p=PropertyFactory.getProp(e,t.v,1,0,n)}function LayerIndexEffect(t,e,n){this.p=PropertyFactory.getProp(e,t.v,0,0,n)}function MaskIndexEffect(t,e,n){this.p=PropertyFactory.getProp(e,t.v,0,0,n)}function CheckboxEffect(t,e,n){this.p=PropertyFactory.getProp(e,t.v,0,0,n)}function NoValueEffect(){this.p={}}function EffectsManager(){}function EffectsManager(t,e){var n=t.ef||[];this.effectElements=[];var r,i,o=n.length;for(r=0;r<o;r++)i=new GroupEffect(n[r],e),this.effectElements.push(i)}function GroupEffect(t,e){this.init(t,e)}!function(){var t=function(){function t(t,e){return this.textIndex=t+1,this.textTotal=e,this.v=this.getValue()*this.mult,this.v}return function(e,n){this.pv=1,this.comp=e.comp,this.elem=e,this.mult=.01,this.propType="textSelector",this.textTotal=n.totalChars,this.selectorValue=100,this.lastValue=[1,1,1],this.k=!0,this.x=!0,this.getValue=ExpressionManager.initiateExpression.bind(this)(e,n,this),this.getMult=t,this.getVelocityAtTime=expressionHelpers.getVelocityAtTime,this.kf?this.getValueAtTime=expressionHelpers.getValueAtTime.bind(this):this.getValueAtTime=expressionHelpers.getStaticValueAtTime.bind(this),this.setGroupProperty=expressionHelpers.setGroupProperty}}(),e=TextSelectorProp.getTextSelectorProp;TextSelectorProp.getTextSelectorProp=function(n,r,i){return 1===r.t?new t(n,r,i):e(n,r,i)}}(),extendPrototype([DynamicPropertyContainer],GroupEffect),GroupEffect.prototype.getValue=GroupEffect.prototype.iterateDynamicProperties,GroupEffect.prototype.init=function(t,e){this.data=t,this.effectElements=[],this.initDynamicPropertyContainer(e);var n,r,i=this.data.ef.length,o=this.data.ef;for(n=0;n<i;n+=1){switch(r=null,o[n].ty){case 0:r=new SliderEffect(o[n],e,this);break;case 1:r=new AngleEffect(o[n],e,this);break;case 2:r=new ColorEffect(o[n],e,this);break;case 3:r=new PointEffect(o[n],e,this);break;case 4:case 7:r=new CheckboxEffect(o[n],e,this);break;case 10:r=new LayerIndexEffect(o[n],e,this);break;case 11:r=new MaskIndexEffect(o[n],e,this);break;case 5:r=new EffectsManager(o[n],e,this);break;default:r=new NoValueEffect(o[n],e,this)}r&&this.effectElements.push(r)}};var lottiejs={},_isFrozen=!1;function setLocationHref(t){locationHref=t}function searchAnimations(){!0===standalone?animationManager.searchAnimations(animationData,standalone,renderer):animationManager.searchAnimations()}function setSubframeRendering(t){subframeEnabled=t}function loadAnimation(t){return!0===standalone&&(t.animationData=JSON.parse(animationData)),animationManager.loadAnimation(t)}function setQuality(t){if("string"===typeof t)switch(t){case"high":defaultCurveSegments=200;break;case"medium":defaultCurveSegments=50;break;case"low":defaultCurveSegments=10}else!isNaN(t)&&t>1&&(defaultCurveSegments=t);roundValues(!(defaultCurveSegments>=50))}function inBrowser(){return"undefined"!==typeof navigator}function installPlugin(t,e){"expressions"===t&&(expressionsPlugin=e)}function getFactory(t){switch(t){case"propertyFactory":return PropertyFactory;case"shapePropertyFactory":return ShapePropertyFactory;case"matrix":return Matrix}}function checkReady(){"complete"===document.readyState&&(clearInterval(readyStateCheckInterval),searchAnimations())}function getQueryVariable(t){for(var e=queryString.split("&"),n=0;n<e.length;n++){var r=e[n].split("=");if(decodeURIComponent(r[0])==t)return decodeURIComponent(r[1])}}lottiejs.play=animationManager.play,lottiejs.pause=animationManager.pause,lottiejs.setLocationHref=setLocationHref,lottiejs.togglePause=animationManager.togglePause,lottiejs.setSpeed=animationManager.setSpeed,lottiejs.setDirection=animationManager.setDirection,lottiejs.stop=animationManager.stop,lottiejs.searchAnimations=searchAnimations,lottiejs.registerAnimation=animationManager.registerAnimation,lottiejs.loadAnimation=loadAnimation,lottiejs.setSubframeRendering=setSubframeRendering,lottiejs.resize=animationManager.resize,lottiejs.goToAndStop=animationManager.goToAndStop,lottiejs.destroy=animationManager.destroy,lottiejs.setQuality=setQuality,lottiejs.inBrowser=inBrowser,lottiejs.installPlugin=installPlugin,lottiejs.freeze=animationManager.freeze,lottiejs.unfreeze=animationManager.unfreeze,lottiejs.getRegisteredAnimations=animationManager.getRegisteredAnimations,lottiejs.__getFactory=getFactory,lottiejs.version="5.5.2";var standalone="__[STANDALONE]__",animationData="__[ANIMATIONDATA]__",renderer="";if(standalone){var scripts=document.getElementsByTagName("script"),index=scripts.length-1,myScript=scripts[index]||{src:""},queryString=myScript.src.replace(/^[^\?]+\??/,"");renderer=getQueryVariable("renderer")}var readyStateCheckInterval=setInterval(checkReady,100);return lottiejs},void 0===(__WEBPACK_AMD_DEFINE_RESULT__=function(){return factory(root)}.call(exports,__webpack_require__,exports,module))||(module.exports=__WEBPACK_AMD_DEFINE_RESULT__))},function(t,e,n){"use strict";n.r(e);n(91),n(92),n(95),n(106),n(109),n(113),n(119),n(123),n(151)},function(t,e){!function(t){"use strict";if(!t.fetch){var e={searchParams:"URLSearchParams"in t,iterable:"Symbol"in t&&"iterator"in Symbol,blob:"FileReader"in t&&"Blob"in t&&function(){try{return new Blob,!0}catch(t){return!1}}(),formData:"FormData"in t,arrayBuffer:"ArrayBuffer"in t};if(e.arrayBuffer)var n=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],r=function(t){return t&&DataView.prototype.isPrototypeOf(t)},i=ArrayBuffer.isView||function(t){return t&&n.indexOf(Object.prototype.toString.call(t))>-1};l.prototype.append=function(t,e){t=s(t),e=u(e);var n=this.map[t];this.map[t]=n?n+","+e:e},l.prototype.delete=function(t){delete this.map[s(t)]},l.prototype.get=function(t){return t=s(t),this.has(t)?this.map[t]:null},l.prototype.has=function(t){return this.map.hasOwnProperty(s(t))},l.prototype.set=function(t,e){this.map[s(t)]=u(e)},l.prototype.forEach=function(t,e){for(var n in this.map)this.map.hasOwnProperty(n)&&t.call(e,this.map[n],n,this)},l.prototype.keys=function(){var t=[];return this.forEach(function(e,n){t.push(n)}),c(t)},l.prototype.values=function(){var t=[];return this.forEach(function(e){t.push(e)}),c(t)},l.prototype.entries=function(){var t=[];return this.forEach(function(e,n){t.push([n,e])}),c(t)},e.iterable&&(l.prototype[Symbol.iterator]=l.prototype.entries);var o=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];y.prototype.clone=function(){return new y(this,{body:this._bodyInit})},m.call(y.prototype),m.call(b.prototype),b.prototype.clone=function(){return new b(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new l(this.headers),url:this.url})},b.error=function(){var t=new b(null,{status:0,statusText:""});return t.type="error",t};var a=[301,302,303,307,308];b.redirect=function(t,e){if(-1===a.indexOf(e))throw new RangeError("Invalid status code");return new b(null,{status:e,headers:{location:t}})},t.Headers=l,t.Request=y,t.Response=b,t.fetch=function(t,n){return new Promise(function(r,i){var o=new y(t,n),a=new XMLHttpRequest;a.onload=function(){var t={status:a.status,statusText:a.statusText,headers:v(a.getAllResponseHeaders()||"")};t.url="responseURL"in a?a.responseURL:t.headers.get("X-Request-URL");var e="response"in a?a.response:a.responseText;r(new b(e,t))},a.onerror=function(){i(new TypeError("Network request failed"))},a.ontimeout=function(){i(new TypeError("Network request failed"))},a.open(o.method,o.url,!0),"include"===o.credentials?a.withCredentials=!0:"omit"===o.credentials&&(a.withCredentials=!1),"responseType"in a&&e.blob&&(a.responseType="blob"),o.headers.forEach(function(t,e){a.setRequestHeader(e,t)}),a.send("undefined"===typeof o._bodyInit?null:o._bodyInit)})},t.fetch.polyfill=!0}function s(t){if("string"!==typeof t&&(t=String(t)),/[^a-z0-9\-#$%&'*+.\^_`|~]/i.test(t))throw new TypeError("Invalid character in header field name");return t.toLowerCase()}function u(t){return"string"!==typeof t&&(t=String(t)),t}function c(t){var n={next:function(){var e=t.shift();return{done:void 0===e,value:e}}};return e.iterable&&(n[Symbol.iterator]=function(){return n}),n}function l(t){this.map={},t instanceof l?t.forEach(function(t,e){this.append(e,t)},this):Array.isArray(t)?t.forEach(function(t){this.append(t[0],t[1])},this):t&&Object.getOwnPropertyNames(t).forEach(function(e){this.append(e,t[e])},this)}function h(t){if(t.bodyUsed)return Promise.reject(new TypeError("Already read"));t.bodyUsed=!0}function f(t){return new Promise(function(e,n){t.onload=function(){e(t.result)},t.onerror=function(){n(t.error)}})}function p(t){var e=new FileReader,n=f(e);return e.readAsArrayBuffer(t),n}function d(t){if(t.slice)return t.slice(0);var e=new Uint8Array(t.byteLength);return e.set(new Uint8Array(t)),e.buffer}function m(){return this.bodyUsed=!1,this._initBody=function(t){if(this._bodyInit=t,t)if("string"===typeof t)this._bodyText=t;else if(e.blob&&Blob.prototype.isPrototypeOf(t))this._bodyBlob=t;else if(e.formData&&FormData.prototype.isPrototypeOf(t))this._bodyFormData=t;else if(e.searchParams&&URLSearchParams.prototype.isPrototypeOf(t))this._bodyText=t.toString();else if(e.arrayBuffer&&e.blob&&r(t))this._bodyArrayBuffer=d(t.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer]);else{if(!e.arrayBuffer||!ArrayBuffer.prototype.isPrototypeOf(t)&&!i(t))throw new Error("unsupported BodyInit type");this._bodyArrayBuffer=d(t)}else this._bodyText="";this.headers.get("content-type")||("string"===typeof t?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):e.searchParams&&URLSearchParams.prototype.isPrototypeOf(t)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},e.blob&&(this.blob=function(){var t=h(this);if(t)return t;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?h(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(p)}),this.text=function(){var t=h(this);if(t)return t;if(this._bodyBlob)return function(t){var e=new FileReader,n=f(e);return e.readAsText(t),n}(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(function(t){for(var e=new Uint8Array(t),n=new Array(e.length),r=0;r<e.length;r++)n[r]=String.fromCharCode(e[r]);return n.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},e.formData&&(this.formData=function(){return this.text().then(g)}),this.json=function(){return this.text().then(JSON.parse)},this}function y(t,e){var n=(e=e||{}).body;if(t instanceof y){if(t.bodyUsed)throw new TypeError("Already read");this.url=t.url,this.credentials=t.credentials,e.headers||(this.headers=new l(t.headers)),this.method=t.method,this.mode=t.mode,n||null==t._bodyInit||(n=t._bodyInit,t.bodyUsed=!0)}else this.url=String(t);if(this.credentials=e.credentials||this.credentials||"omit",!e.headers&&this.headers||(this.headers=new l(e.headers)),this.method=function(t){var e=t.toUpperCase();return o.indexOf(e)>-1?e:t}(e.method||this.method||"GET"),this.mode=e.mode||this.mode||null,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&n)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(n)}function g(t){var e=new FormData;return t.trim().split("&").forEach(function(t){if(t){var n=t.split("="),r=n.shift().replace(/\+/g," "),i=n.join("=").replace(/\+/g," ");e.append(decodeURIComponent(r),decodeURIComponent(i))}}),e}function v(t){var e=new l;return t.replace(/\r?\n[\t ]+/g," ").split(/\r?\n/).forEach(function(t){var n=t.split(":"),r=n.shift().trim();if(r){var i=n.join(":").trim();e.append(r,i)}}),e}function b(t,e){e||(e={}),this.type="default",this.status=void 0===e.status?200:e.status,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in e?e.statusText:"OK",this.headers=new l(e.headers),this.url=e.url||"",this._initBody(t)}}("undefined"!==typeof self?self:this)},function(t,e,n){"use strict";(function(t,e){function n(t){var e=this.constructor;return this.then(function(n){return e.resolve(t()).then(function(){return n})},function(n){return e.resolve(t()).then(function(){return e.reject(n)})})}var r=setTimeout;function i(){}function o(t){if(!(this instanceof o))throw new TypeError("Promises must be constructed via new");if("function"!==typeof t)throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],h(t,this)}function a(t,e){for(;3===t._state;)t=t._value;0!==t._state?(t._handled=!0,o._immediateFn(function(){var n=1===t._state?e.onFulfilled:e.onRejected;if(null!==n){var r;try{r=n(t._value)}catch(i){return void u(e.promise,i)}s(e.promise,r)}else(1===t._state?s:u)(e.promise,t._value)})):t._deferreds.push(e)}function s(t,e){try{if(e===t)throw new TypeError("A promise cannot be resolved with itself.");if(e&&("object"===typeof e||"function"===typeof e)){var n=e.then;if(e instanceof o)return t._state=3,t._value=e,void c(t);if("function"===typeof n)return void h((r=n,i=e,function(){r.apply(i,arguments)}),t)}t._state=1,t._value=e,c(t)}catch(a){u(t,a)}var r,i}function u(t,e){t._state=2,t._value=e,c(t)}function c(t){2===t._state&&0===t._deferreds.length&&o._immediateFn(function(){t._handled||o._unhandledRejectionFn(t._value)});for(var e=0,n=t._deferreds.length;e<n;e++)a(t,t._deferreds[e]);t._deferreds=null}function l(t,e,n){this.onFulfilled="function"===typeof t?t:null,this.onRejected="function"===typeof e?e:null,this.promise=n}function h(t,e){var n=!1;try{t(function(t){n||(n=!0,s(e,t))},function(t){n||(n=!0,u(e,t))})}catch(r){if(n)return;n=!0,u(e,r)}}o.prototype.catch=function(t){return this.then(null,t)},o.prototype.then=function(t,e){var n=new this.constructor(i);return a(this,new l(t,e,n)),n},o.prototype.finally=n,o.all=function(t){return new o(function(e,n){if(!t||"undefined"===typeof t.length)throw new TypeError("Promise.all accepts an array");var r=Array.prototype.slice.call(t);if(0===r.length)return e([]);var i=r.length;function o(t,a){try{if(a&&("object"===typeof a||"function"===typeof a)){var s=a.then;if("function"===typeof s)return void s.call(a,function(e){o(t,e)},n)}r[t]=a,0===--i&&e(r)}catch(u){n(u)}}for(var a=0;a<r.length;a++)o(a,r[a])})},o.resolve=function(t){return t&&"object"===typeof t&&t.constructor===o?t:new o(function(e){e(t)})},o.reject=function(t){return new o(function(e,n){n(t)})},o.race=function(t){return new o(function(e,n){for(var r=0,i=t.length;r<i;r++)t[r].then(e,n)})},o._immediateFn="function"===typeof t&&function(e){t(e)}||function(t){r(t,0)},o._unhandledRejectionFn=function(t){"undefined"!==typeof console&&console&&console.warn("Possible Unhandled Promise Rejection:",t)};var f=function(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof e)return e;throw new Error("unable to locate global object")}();"Promise"in f?f.Promise.prototype.finally||(f.Promise.prototype.finally=n):f.Promise=o}).call(this,n(93).setImmediate,n(18))},function(t,e,n){(function(t){var r="undefined"!==typeof t&&t||"undefined"!==typeof self&&self||window,i=Function.prototype.apply;function o(t,e){this._id=t,this._clearFn=e}e.setTimeout=function(){return new o(i.call(setTimeout,r,arguments),clearTimeout)},e.setInterval=function(){return new o(i.call(setInterval,r,arguments),clearInterval)},e.clearTimeout=e.clearInterval=function(t){t&&t.close()},o.prototype.unref=o.prototype.ref=function(){},o.prototype.close=function(){this._clearFn.call(r,this._id)},e.enroll=function(t,e){clearTimeout(t._idleTimeoutId),t._idleTimeout=e},e.unenroll=function(t){clearTimeout(t._idleTimeoutId),t._idleTimeout=-1},e._unrefActive=e.active=function(t){clearTimeout(t._idleTimeoutId);var e=t._idleTimeout;e>=0&&(t._idleTimeoutId=setTimeout(function(){t._onTimeout&&t._onTimeout()},e))},n(94),e.setImmediate="undefined"!==typeof self&&self.setImmediate||"undefined"!==typeof t&&t.setImmediate||this&&this.setImmediate,e.clearImmediate="undefined"!==typeof self&&self.clearImmediate||"undefined"!==typeof t&&t.clearImmediate||this&&this.clearImmediate}).call(this,n(18))},function(t,e,n){(function(t,e){!function(t,n){"use strict";if(!t.setImmediate){var r,i=1,o={},a=!1,s=t.document,u=Object.getPrototypeOf&&Object.getPrototypeOf(t);u=u&&u.setTimeout?u:t,"[object process]"==={}.toString.call(t.process)?r=function(t){e.nextTick(function(){l(t)})}:function(){if(t.postMessage&&!t.importScripts){var e=!0,n=t.onmessage;return t.onmessage=function(){e=!1},t.postMessage("","*"),t.onmessage=n,e}}()?function(){var e="setImmediate$"+Math.random()+"$",n=function(n){n.source===t&&"string"===typeof n.data&&0===n.data.indexOf(e)&&l(+n.data.slice(e.length))};t.addEventListener?t.addEventListener("message",n,!1):t.attachEvent("onmessage",n),r=function(n){t.postMessage(e+n,"*")}}():t.MessageChannel?function(){var t=new MessageChannel;t.port1.onmessage=function(t){l(t.data)},r=function(e){t.port2.postMessage(e)}}():s&&"onreadystatechange"in s.createElement("script")?function(){var t=s.documentElement;r=function(e){var n=s.createElement("script");n.onreadystatechange=function(){l(e),n.onreadystatechange=null,t.removeChild(n),n=null},t.appendChild(n)}}():r=function(t){setTimeout(l,0,t)},u.setImmediate=function(t){"function"!==typeof t&&(t=new Function(""+t));for(var e=new Array(arguments.length-1),n=0;n<e.length;n++)e[n]=arguments[n+1];var a={callback:t,args:e};return o[i]=a,r(i),i++},u.clearImmediate=c}function c(t){delete o[t]}function l(t){if(a)setTimeout(l,0,t);else{var e=o[t];if(e){a=!0;try{!function(t){var e=t.callback,r=t.args;switch(r.length){case 0:e();break;case 1:e(r[0]);break;case 2:e(r[0],r[1]);break;case 3:e(r[0],r[1],r[2]);break;default:e.apply(n,r)}}(e)}finally{c(t),a=!1}}}}}("undefined"===typeof self?"undefined"===typeof t?this:t:self)}).call(this,n(18),n(56))},function(t,e,n){t.exports=n(96)},function(t,e,n){n(97),t.exports=n(41)("Array","find")},function(t,e,n){"use strict";var r=n(57)(5),i=!0;"find"in[]&&Array(1).find(function(){i=!1}),n(11)({target:"Array",proto:!0,forced:i},{find:function(t){return r(this,t,arguments.length>1?arguments[1]:void 0)}}),n(49)("find")},function(t,e){t.exports=function(t){if("function"!=typeof t)throw TypeError(String(t)+" is not a function");return t}},function(t,e,n){var r=n(63),i=n(3).WeakMap;t.exports="function"===typeof i&&/native code/.test(r.call(i))},function(t,e,n){var r=n(47),i=n(39),o=n(21),a=n(3).Reflect;t.exports=a&&a.ownKeys||function(t){var e=r.f(o(t)),n=i.f;return n?e.concat(n(t)):e}},function(t,e,n){var r=n(22),i=n(30),o=n(102);t.exports=function(t){return function(e,n,a){var s,u=r(e),c=i(u.length),l=o(a,c);if(t&&n!=n){for(;c>l;)if((s=u[l++])!=s)return!0}else for(;c>l;l++)if((t||l in u)&&u[l]===n)return t||l||0;return!t&&-1}}},function(t,e,n){var r=n(31),i=Math.max,o=Math.min;t.exports=function(t,e){var n=r(t);return n<0?i(n+e,0):o(n,e)}},function(t,e,n){var r=n(8),i=/#|\.prototype\./,o=function(t,e){var n=s[a(t)];return n==c||n!=u&&("function"==typeof e?r(e):!!e)},a=o.normalize=function(t){return String(t).replace(i,".").toLowerCase()},s=o.data={},u=o.NATIVE="N",c=o.POLYFILL="P";t.exports=o},function(t,e,n){var r=n(19),i=n(12),o=n(21),a=n(40);t.exports=r?Object.defineProperties:function(t,e){o(t);for(var n,r=a(e),s=r.length,u=0;s>u;)i.f(t,n=r[u++],e[n]);return t}},function(t,e,n){var r=n(3).document;t.exports=r&&r.documentElement},function(t,e,n){t.exports=n(107)},function(t,e,n){n(108),t.exports=n(41)("Array","findIndex")},function(t,e,n){"use strict";var r=n(57)(6),i=!0;"findIndex"in[]&&Array(1).findIndex(function(){i=!1}),n(11)({target:"Array",proto:!0,forced:i},{findIndex:function(t){return r(this,t,arguments.length>1?arguments[1]:void 0)}}),n(49)("findIndex")},function(t,e,n){t.exports=n(110)},function(t,e,n){n(111),t.exports=n(51).Object.assign},function(t,e,n){var r=n(112);n(11)({target:"Object",stat:!0,forced:Object.assign!==r},{assign:r})},function(t,e,n){"use strict";var r=n(40),i=n(39),o=n(34),a=n(29),s=n(42),u=Object.assign;t.exports=!u||n(8)(function(){var t={},e={},n=Symbol();return t[n]=7,"abcdefghijklmnopqrst".split("").forEach(function(t){e[t]=t}),7!=u({},t)[n]||"abcdefghijklmnopqrst"!=r(u({},e)).join("")})?function(t,e){for(var n=a(t),u=arguments.length,c=1,l=i.f,h=o.f;u>c;)for(var f,p=s(arguments[c++]),d=l?r(p).concat(l(p)):r(p),m=d.length,y=0;m>y;)h.call(p,f=d[y++])&&(n[f]=p[f]);return n}:u},function(t,e,n){t.exports=n(114)},function(t,e,n){n(115),t.exports=n(41)("String","startsWith")},function(t,e,n){"use strict";var r=n(30),i=n(116),o=n(118)("startsWith"),a="".startsWith;n(11)({target:"String",proto:!0,forced:!o},{startsWith:function(t){var e=i(this,t,"startsWith"),n=r(Math.min(arguments.length>1?arguments[1]:void 0,e.length)),o=String(t);return a?a.call(e,o,n):e.slice(n,n+o.length)===o}})},function(t,e,n){var r=n(117),i=n(23);t.exports=function(t,e,n){if(r(e))throw TypeError("String.prototype."+n+" doesn't accept regex");return String(i(t))}},function(t,e,n){var r=n(9),i=n(28),o=n(6)("match");t.exports=function(t){var e;return r(t)&&(void 0!==(e=t[o])?!!e:"RegExp"==i(t))}},function(t,e,n){var r=n(6)("match");t.exports=function(t){var e=/./;try{"/./"[t](e)}catch(n){try{return e[r]=!1,"/./"[t](e)}catch(i){}}return!1}},function(t,e,n){t.exports=n(120)},function(t,e,n){n(121),t.exports=n(41)("String","repeat")},function(t,e,n){n(11)({target:"String",proto:!0},{repeat:n(122)})},function(t,e,n){"use strict";var r=n(31),i=n(23);t.exports="".repeat||function(t){var e=String(i(this)),n="",o=r(t);if(o<0||o==1/0)throw RangeError("Wrong number of repetitions");for(;o>0;(o>>>=1)&&(e+=e))1&o&&(n+=e);return n}},function(t,e,n){t.exports=n(124),n(148),n(149),n(150)},function(t,e,n){n(125),n(128),n(131),n(134),n(135),n(136),n(137),n(66),n(138),n(139),n(140),n(141),n(142),n(143),n(144),n(145),n(146),n(147),t.exports=n(51).Symbol},function(t,e,n){"use strict";var r=n(43),i=n(9),o=n(29),a=n(30),s=n(126),u=n(59),c=n(6)("isConcatSpreadable"),l=!n(8)(function(){var t=[];return t[c]=!1,t.concat()[0]!==t}),h=n(127)("concat"),f=function(t){if(!i(t))return!1;var e=t[c];return void 0!==e?!!e:r(t)},p=!l||!h;n(11)({target:"Array",proto:!0,forced:p},{concat:function(t){var e,n,r,i,c,l=o(this),h=u(l,0),p=0;for(e=-1,r=arguments.length;e<r;e++)if(c=-1===e?l:arguments[e],f(c)){if(p+(i=a(c.length))>9007199254740991)throw TypeError("Maximum allowed index exceeded");for(n=0;n<i;n++,p++)n in c&&s(h,p,c[n])}else{if(p>=9007199254740991)throw TypeError("Maximum allowed index exceeded");s(h,p++,c)}return h.length=p,h}})},function(t,e,n){"use strict";var r=n(32),i=n(12),o=n(25);t.exports=function(t,e,n){var a=r(e);a in t?i.f(t,a,o(0,n)):t[a]=n}},function(t,e,n){var r=n(8),i=n(6)("species");t.exports=function(t){return!r(function(){var e=[];return(e.constructor={})[i]=function(){return{foo:1}},1!==e[t](Boolean).foo})}},function(t,e,n){var r=n(129),i=Object.prototype;r!==i.toString&&n(35)(i,"toString",r,{unsafe:!0})},function(t,e,n){"use strict";var r=n(130),i={};i[n(6)("toStringTag")]="z",t.exports="[object z]"!==String(i)?function(){return"[object "+r(this)+"]"}:i.toString},function(t,e,n){var r=n(28),i=n(6)("toStringTag"),o="Arguments"==r(function(){return arguments}());t.exports=function(t){var e,n,a;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(n=function(t,e){try{return t[e]}catch(n){}}(e=Object(t),i))?n:o?r(e):"Object"==(a=r(e))&&"function"==typeof e.callee?"Arguments":a}},function(t,e,n){"use strict";var r=n(3),i=n(7),o=n(19),a=n(33),s=n(11),u=n(35),c=n(38),l=n(8),h=n(24),f=n(26),p=n(45),d=n(6),m=n(52),y=n(4),g=n(132),v=n(43),b=n(21),_=n(9),w=n(22),E=n(32),S=n(25),T=n(50),C=n(133),k=n(46),x=n(12),I=n(34),A=n(10),P=n(40),D=n(37)("hidden"),N=n(36),R=N.set,O=N.getterFor("Symbol"),M=k.f,F=x.f,L=C.f,V=r.Symbol,B=r.JSON,U=B&&B.stringify,j=d("toPrimitive"),q=I.f,G=h("symbol-registry"),W=h("symbols"),z=h("op-symbols"),H=h("wks"),K=Object.prototype,Q=r.QObject,Y=n(62),X=!Q||!Q.prototype||!Q.prototype.findChild,$=o&&l(function(){return 7!=T(F({},"a",{get:function(){return F(this,"a",{value:7}).a}})).a})?function(t,e,n){var r=M(K,e);r&&delete K[e],F(t,e,n),r&&t!==K&&F(K,e,r)}:F,J=function(t,e){var n=W[t]=T(V.prototype);return R(n,{type:"Symbol",tag:t,description:e}),o||(n.description=e),n},Z=Y&&"symbol"==typeof V.iterator?function(t){return"symbol"==typeof t}:function(t){return Object(t)instanceof V},tt=function(t,e,n){return t===K&&tt(z,e,n),b(t),e=E(e,!0),b(n),i(W,e)?(n.enumerable?(i(t,D)&&t[D][e]&&(t[D][e]=!1),n=T(n,{enumerable:S(0,!1)})):(i(t,D)||F(t,D,S(1,{})),t[D][e]=!0),$(t,e,n)):F(t,e,n)},et=function(t,e){b(t);for(var n,r=g(e=w(e)),i=0,o=r.length;o>i;)tt(t,n=r[i++],e[n]);return t},nt=function(t){var e=q.call(this,t=E(t,!0));return!(this===K&&i(W,t)&&!i(z,t))&&(!(e||!i(this,t)||!i(W,t)||i(this,D)&&this[D][t])||e)},rt=function(t,e){if(t=w(t),e=E(e,!0),t!==K||!i(W,e)||i(z,e)){var n=M(t,e);return!n||!i(W,e)||i(t,D)&&t[D][e]||(n.enumerable=!0),n}},it=function(t){for(var e,n=L(w(t)),r=[],o=0;n.length>o;)i(W,e=n[o++])||i(c,e)||r.push(e);return r},ot=function(t){for(var e,n=t===K,r=L(n?z:w(t)),o=[],a=0;r.length>a;)!i(W,e=r[a++])||n&&!i(K,e)||o.push(W[e]);return o};Y||(u((V=function(){if(this instanceof V)throw TypeError("Symbol is not a constructor");var t=void 0===arguments[0]?void 0:String(arguments[0]),e=p(t);return o&&X&&$(K,e,{configurable:!0,set:function t(n){this===K&&t.call(z,n),i(this,D)&&i(this[D],e)&&(this[D][e]=!1),$(this,e,S(1,n))}}),J(e,t)}).prototype,"toString",function(){return O(this).tag}),I.f=nt,x.f=tt,k.f=rt,n(47).f=C.f=it,n(39).f=ot,o&&(F(V.prototype,"description",{configurable:!0,get:function(){return O(this).description}}),a||u(K,"propertyIsEnumerable",nt,{unsafe:!0})),m.f=function(t){return J(d(t),t)}),s({global:!0,wrap:!0,forced:!Y,sham:!Y},{Symbol:V});for(var at=P(H),st=0;at.length>st;)y(at[st++]);s({target:"Symbol",stat:!0,forced:!Y},{for:function(t){return i(G,t+="")?G[t]:G[t]=V(t)},keyFor:function(t){if(!Z(t))throw TypeError(t+" is not a symbol");for(var e in G)if(G[e]===t)return e},useSetter:function(){X=!0},useSimple:function(){X=!1}}),s({target:"Object",stat:!0,forced:!Y,sham:!o},{create:function(t,e){return void 0===e?T(t):et(T(t),e)},defineProperty:tt,defineProperties:et,getOwnPropertyDescriptor:rt}),s({target:"Object",stat:!0,forced:!Y},{getOwnPropertyNames:it,getOwnPropertySymbols:ot}),B&&s({target:"JSON",stat:!0,forced:!Y||l(function(){var t=V();return"[null]"!=U([t])||"{}"!=U({a:t})||"{}"!=U(Object(t))})},{stringify:function(t){for(var e,n,r=[t],i=1;arguments.length>i;)r.push(arguments[i++]);if(n=e=r[1],(_(e)||void 0!==t)&&!Z(t))return v(e)||(e=function(t,e){if("function"==typeof n&&(e=n.call(this,t,e)),!Z(e))return e}),r[1]=e,U.apply(B,r)}}),V.prototype[j]||A(V.prototype,j,V.prototype.valueOf),f(V,"Symbol"),c[D]=!0},function(t,e,n){var r=n(40),i=n(39),o=n(34);t.exports=function(t){var e=r(t),n=i.f;if(n)for(var a,s=n(t),u=o.f,c=0;s.length>c;)u.call(t,a=s[c++])&&e.push(a);return e}},function(t,e,n){var r=n(22),i=n(47).f,o={}.toString,a="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];t.exports.f=function(t){return a&&"[object Window]"==o.call(t)?function(t){try{return i(t)}catch(e){return a.slice()}}(t):i(r(t))}},function(t,e,n){n(4)("asyncIterator")},function(t,e,n){"use strict";var r=n(19),i=n(7),o=n(9),a=n(12).f,s=n(64),u=n(3).Symbol;if(r&&"function"==typeof u&&(!("description"in u.prototype)||void 0!==u().description)){var c={},l=function(){var t=arguments.length<1||void 0===arguments[0]?void 0:String(arguments[0]),e=this instanceof l?new u(t):void 0===t?u():u(t);return""===t&&(c[e]=!0),e};s(l,u);var h=l.prototype=u.prototype;h.constructor=l;var f=h.toString,p="Symbol(test)"==String(u("test")),d=/^Symbol\((.*)\)[^)]+$/;a(h,"description",{configurable:!0,get:function(){var t=o(this)?this.valueOf():this,e=f.call(t);if(i(c,t))return"";var n=p?e.slice(7,-1):e.replace(d,"$1");return""===n?void 0:n}}),n(11)({global:!0,forced:!0},{Symbol:l})}},function(t,e,n){n(4)("hasInstance")},function(t,e,n){n(4)("isConcatSpreadable")},function(t,e,n){n(4)("match")},function(t,e,n){n(4)("replace")},function(t,e,n){n(4)("search")},function(t,e,n){n(4)("species")},function(t,e,n){n(4)("split")},function(t,e,n){n(4)("toPrimitive")},function(t,e,n){n(4)("toStringTag")},function(t,e,n){n(4)("unscopables")},function(t,e,n){n(26)(Math,"Math",!0)},function(t,e,n){n(26)(n(3).JSON,"JSON",!0)},function(t,e,n){n(4)("dispose")},function(t,e,n){n(4)("observable")},function(t,e,n){n(4)("patternMatch")},function(t,e,n){t.exports=n(152)},function(t,e,n){n(66),n(153),n(159),t.exports=n(52).f("iterator")},function(t,e,n){"use strict";var r=n(154),i=n(36),o=n(67),a=i.set,s=i.getterFor("String Iterator");o(String,"String",function(t){a(this,{type:"String Iterator",string:String(t),index:0})},function(){var t,e=s(this),n=e.string,i=e.index;return i>=n.length?{value:void 0,done:!0}:(t=r(n,i,!0),e.index+=t.length,{value:t,done:!1})})},function(t,e,n){var r=n(31),i=n(23);t.exports=function(t,e,n){var o,a,s=String(i(t)),u=r(e),c=s.length;return u<0||u>=c?n?"":void 0:(o=s.charCodeAt(u))<55296||o>56319||u+1===c||(a=s.charCodeAt(u+1))<56320||a>57343?n?s.charAt(u):o:n?s.slice(u,u+2):a-56320+(o-55296<<10)+65536}},function(t,e,n){"use strict";var r=n(68).IteratorPrototype,i=n(50),o=n(25),a=n(26),s=n(53),u=function(){return this};t.exports=function(t,e,n){var c=e+" Iterator";return t.prototype=i(r,{next:o(1,n)}),a(t,c,!1,!0),s[c]=u,t}},function(t,e,n){t.exports=!n(8)(function(){function t(){}return t.prototype.constructor=null,Object.getPrototypeOf(new t)!==t.prototype})},function(t,e,n){var r=n(158);t.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var t,e=!1,n={};try{(t=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set).call(n,[]),e=n instanceof Array}catch(i){}return function(n,i){return r(n,i),e?t.call(n,i):n.__proto__=i,n}}():void 0)},function(t,e,n){var r=n(9),i=n(21);t.exports=function(t,e){if(i(t),!r(e)&&null!==e)throw TypeError("Can't set "+String(e)+" as a prototype")}},function(t,e,n){var r=n(160),i=n(161),o=n(3),a=n(10),s=n(6),u=s("iterator"),c=s("toStringTag"),l=i.values;for(var h in r){var f=o[h],p=f&&f.prototype;if(p){if(p[u]!==l)try{a(p,u,l)}catch(m){p[u]=l}if(p[c]||a(p,c,h),r[h])for(var d in i)if(p[d]!==i[d])try{a(p,d,i[d])}catch(m){p[d]=i[d]}}}},function(t,e){t.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},function(t,e,n){"use strict";var r=n(22),i=n(49),o=n(53),a=n(36),s=n(67),u=a.set,c=a.getterFor("Array Iterator");t.exports=s(Array,"Array",function(t,e){u(this,{type:"Array Iterator",target:r(t),index:0,kind:e})},function(){var t=c(this),e=t.target,n=t.kind,r=t.index++;return!e||r>=e.length?(t.target=void 0,{value:void 0,done:!0}):"keys"==n?{value:r,done:!1}:"values"==n?{value:e[r],done:!1}:{value:[r,e[r]],done:!1}},"values"),o.Arguments=o.Array,i("keys"),i("values"),i("entries")},function(t,e,n){"use strict";n.r(e),function(t){var e=n(2),r=n.n(e);(function(){var t,e=e||{},n=this;function i(t){return"string"==typeof t}function o(t){return"boolean"==typeof t}var a=/^[\w+\/_-]+[=]{0,2}$/,s=null;function u(){}function c(t){var e=typeof t;if("object"==e){if(!t)return"null";if(t instanceof Array)return"array";if(t instanceof Object)return e;var n=Object.prototype.toString.call(t);if("[object Window]"==n)return"object";if("[object Array]"==n||"number"==typeof t.length&&"undefined"!=typeof t.splice&&"undefined"!=typeof t.propertyIsEnumerable&&!t.propertyIsEnumerable("splice"))return"array";if("[object Function]"==n||"undefined"!=typeof t.call&&"undefined"!=typeof t.propertyIsEnumerable&&!t.propertyIsEnumerable("call"))return"function"}else if("function"==e&&"undefined"==typeof t.call)return"object";return e}function l(t){return null===t}function h(t){return"array"==c(t)}function f(t){var e=c(t);return"array"==e||"object"==e&&"number"==typeof t.length}function p(t){return"function"==c(t)}function d(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}var m="closure_uid_"+(1e9*Math.random()>>>0),y=0;function g(t,e,n){return t.call.apply(t.bind,arguments)}function v(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),t.apply(e,n)}}return function(){return t.apply(e,arguments)}}function b(t,e,n){return(b=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?g:v).apply(null,arguments)}function _(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var e=n.slice();return e.push.apply(e,arguments),t.apply(this,e)}}var w=Date.now||function(){return+new Date};function E(t,e){function n(){}n.prototype=e.prototype,t.pb=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.gd=function(t,n,r){for(var i=Array(arguments.length-2),o=2;o<arguments.length;o++)i[o-2]=arguments[o];return e.prototype[n].apply(t,i)}}function S(t){if(!t)return!1;try{return!!t.$goog_Thenable}catch(e){return!1}}function T(t){if(Error.captureStackTrace)Error.captureStackTrace(this,T);else{var e=Error().stack;e&&(this.stack=e)}t&&(this.message=String(t))}function C(t,e){for(var n="",r=(t=t.split("%s")).length-1,i=0;i<r;i++)n+=t[i]+(i<e.length?e[i]:"%s");T.call(this,n+t[r])}function k(t,e){throw new C("Failure"+(t?": "+t:""),Array.prototype.slice.call(arguments,1))}function x(t,e){this.c=t,this.f=e,this.b=0,this.a=null}function I(t,e){t.f(e),100>t.b&&(t.b++,e.next=t.a,t.a=e)}function A(){this.b=this.a=null}E(T,Error),T.prototype.name="CustomError",E(C,T),C.prototype.name="AssertionError",x.prototype.get=function(){if(0<this.b){this.b--;var t=this.a;this.a=t.next,t.next=null}else t=this.c();return t};var P=new x(function(){return new N},function(t){t.reset()});function D(){var t=dt,e=null;return t.a&&(e=t.a,t.a=t.a.next,t.a||(t.b=null),e.next=null),e}function N(){this.next=this.b=this.a=null}A.prototype.add=function(t,e){var n=P.get();n.set(t,e),this.b?this.b.next=n:this.a=n,this.b=n},N.prototype.set=function(t,e){this.a=t,this.b=e,this.next=null},N.prototype.reset=function(){this.next=this.b=this.a=null};var R=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if(i(t))return i(e)&&1==e.length?t.indexOf(e,0):-1;for(var n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1},O=Array.prototype.forEach?function(t,e,n){Array.prototype.forEach.call(t,e,n)}:function(t,e,n){for(var r=t.length,o=i(t)?t.split(""):t,a=0;a<r;a++)a in o&&e.call(n,o[a],a,t)};var M=Array.prototype.map?function(t,e){return Array.prototype.map.call(t,e,void 0)}:function(t,e){for(var n=t.length,r=Array(n),o=i(t)?t.split(""):t,a=0;a<n;a++)a in o&&(r[a]=e.call(void 0,o[a],a,t));return r},F=Array.prototype.some?function(t,e){return Array.prototype.some.call(t,e,void 0)}:function(t,e){for(var n=t.length,r=i(t)?t.split(""):t,o=0;o<n;o++)if(o in r&&e.call(void 0,r[o],o,t))return!0;return!1};function L(t,e){return 0<=R(t,e)}function V(t,e){var n;return(n=0<=(e=R(t,e)))&&Array.prototype.splice.call(t,e,1),n}function B(t,e){!function(t,e){var n=t.length,r=i(t)?t.split(""):t;for(--n;0<=n;--n)n in r&&e.call(void 0,r[n],n,t)}(t,function(n,r){e.call(void 0,n,r,t)&&1==Array.prototype.splice.call(t,r,1).length&&0})}function U(t){return Array.prototype.concat.apply([],arguments)}function j(t){var e=t.length;if(0<e){for(var n=Array(e),r=0;r<e;r++)n[r]=t[r];return n}return[]}var q,G=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]},W=/&/g,z=/</g,H=/>/g,K=/"/g,Q=/'/g,Y=/\x00/g,X=/[\x00&<>"']/;function $(t,e){return-1!=t.indexOf(e)}function J(t,e){return t<e?-1:t>e?1:0}t:{var Z=n.navigator;if(Z){var tt=Z.userAgent;if(tt){q=tt;break t}}q=""}function et(t){return $(q,t)}function nt(t,e){for(var n in t)e.call(void 0,t[n],n,t)}function rt(t){for(var e in t)return!1;return!0}function it(t){var e,n={};for(e in t)n[e]=t[e];return n}var ot,at,st="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function ut(t,e){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])t[n]=r[n];for(var o=0;o<st.length;o++)n=st[o],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function ct(t,e){for(var n=t.split("%s"),r="",i=Array.prototype.slice.call(arguments,1);i.length&&1<n.length;)r+=n.shift()+i.shift();return r+n.join("%s")}function lt(t){return X.test(t)&&(-1!=t.indexOf("&")&&(t=t.replace(W,"&amp;")),-1!=t.indexOf("<")&&(t=t.replace(z,"&lt;")),-1!=t.indexOf(">")&&(t=t.replace(H,"&gt;")),-1!=t.indexOf('"')&&(t=t.replace(K,"&quot;")),-1!=t.indexOf("'")&&(t=t.replace(Q,"&#39;")),-1!=t.indexOf("\0")&&(t=t.replace(Y,"&#0;"))),t}function ht(t){n.setTimeout(function(){throw t},0)}function ft(t,e){at||function(){if(n.Promise&&n.Promise.resolve){var t=n.Promise.resolve(void 0);at=function(){t.then(mt)}}else at=function(){var t=mt;!p(n.setImmediate)||n.Window&&n.Window.prototype&&!et("Edge")&&n.Window.prototype.setImmediate==n.setImmediate?(ot||(ot=function(){var t=n.MessageChannel;if("undefined"===typeof t&&"undefined"!==typeof window&&window.postMessage&&window.addEventListener&&!et("Presto")&&(t=function(){var t=document.createElement("IFRAME");t.style.display="none",t.src="",document.documentElement.appendChild(t);var e=t.contentWindow;(t=e.document).open(),t.write(""),t.close();var n="callImmediate"+Math.random(),r="file:"==e.location.protocol?"*":e.location.protocol+"//"+e.location.host;t=b(function(t){"*"!=r&&t.origin!=r||t.data!=n||this.port1.onmessage()},this),e.addEventListener("message",t,!1),this.port1={},this.port2={postMessage:function(){e.postMessage(n,r)}}}),"undefined"!==typeof t&&!et("Trident")&&!et("MSIE")){var e=new t,r={},i=r;return e.port1.onmessage=function(){if(void 0!==r.next){var t=(r=r.next).xb;r.xb=null,t()}},function(t){i.next={xb:t},i=i.next,e.port2.postMessage(0)}}return"undefined"!==typeof document&&"onreadystatechange"in document.createElement("SCRIPT")?function(t){var e=document.createElement("SCRIPT");e.onreadystatechange=function(){e.onreadystatechange=null,e.parentNode.removeChild(e),e=null,t(),t=null},document.documentElement.appendChild(e)}:function(t){n.setTimeout(t,0)}}()),ot(t)):n.setImmediate(t)}}(),pt||(at(),pt=!0),dt.add(t,e)}var pt=!1,dt=new A;function mt(){for(var t;t=D();){try{t.a.call(t.b)}catch(e){ht(e)}I(P,t)}pt=!1}function yt(t,e){if(this.a=gt,this.i=void 0,this.f=this.b=this.c=null,this.g=this.h=!1,t!=u)try{var n=this;t.call(e,function(t){At(n,vt,t)},function(t){if(!(t instanceof Ft))try{if(t instanceof Error)throw t;throw Error("Promise rejected.")}catch(e){}At(n,bt,t)})}catch(r){At(this,bt,r)}}var gt=0,vt=2,bt=3;function _t(){this.next=this.f=this.b=this.g=this.a=null,this.c=!1}_t.prototype.reset=function(){this.f=this.b=this.g=this.a=null,this.c=!1};var wt=new x(function(){return new _t},function(t){t.reset()});function Et(t,e,n){var r=wt.get();return r.g=t,r.b=e,r.f=n,r}function St(t){if(t instanceof yt)return t;var e=new yt(u);return At(e,vt,t),e}function Tt(t){return new yt(function(e,n){n(t)})}function Ct(t,e,n){Pt(t,e,n,null)||ft(_(e,t))}function kt(t){return new yt(function(e){var n=t.length,r=[];if(n)for(var i=function(t,i,o){n--,r[t]=i?{Eb:!0,value:o}:{Eb:!1,reason:o},0==n&&e(r)},o=0;o<t.length;o++)Ct(t[o],_(i,o,!0),_(i,o,!1));else e(r)})}function xt(t,e){t.b||t.a!=vt&&t.a!=bt||Dt(t),t.f?t.f.next=e:t.b=e,t.f=e}function It(t,e,n,r){var i=Et(null,null,null);return i.a=new yt(function(t,o){i.g=e?function(n){try{var i=e.call(r,n);t(i)}catch(a){o(a)}}:t,i.b=n?function(e){try{var i=n.call(r,e);void 0===i&&e instanceof Ft?o(e):t(i)}catch(a){o(a)}}:o}),i.a.c=t,xt(t,i),i.a}function At(t,e,n){t.a==gt&&(t===n&&(e=bt,n=new TypeError("Promise cannot resolve to itself")),t.a=1,Pt(n,t.Pc,t.Qc,t)||(t.i=n,t.a=e,t.c=null,Dt(t),e!=bt||n instanceof Ft||function(t,e){t.g=!0,ft(function(){t.g&&Mt.call(null,e)})}(t,n)))}function Pt(t,e,n,r){if(t instanceof yt)return xt(t,Et(e||u,n||null,r)),!0;if(S(t))return t.then(e,n,r),!0;if(d(t))try{var i=t.then;if(p(i))return function(t,e,n,r,i){function o(t){a||(a=!0,r.call(i,t))}var a=!1;try{e.call(t,function(t){a||(a=!0,n.call(i,t))},o)}catch(s){o(s)}}(t,i,e,n,r),!0}catch(o){return n.call(r,o),!0}return!1}function Dt(t){t.h||(t.h=!0,ft(t.Yb,t))}function Nt(t){var e=null;return t.b&&(e=t.b,t.b=e.next,e.next=null),t.b||(t.f=null),e}function Rt(t,e,n,r){if(n==bt&&e.b&&!e.c)for(;t&&t.g;t=t.c)t.g=!1;if(e.a)e.a.c=null,Ot(e,n,r);else try{e.c?e.g.call(e.f):Ot(e,n,r)}catch(i){Mt.call(null,i)}I(wt,e)}function Ot(t,e,n){e==vt?t.g.call(t.f,n):t.b&&t.b.call(t.f,n)}yt.prototype.then=function(t,e,n){return It(this,p(t)?t:null,p(e)?e:null,n)},yt.prototype.$goog_Thenable=!0,(t=yt.prototype).ia=function(t,e){return(t=Et(t,t,e)).c=!0,xt(this,t),this},t.s=function(t,e){return It(this,null,t,e)},t.cancel=function(t){this.a==gt&&ft(function(){!function t(e,n){if(e.a==gt)if(e.c){var r=e.c;if(r.b){for(var i=0,o=null,a=null,s=r.b;s&&(s.c||(i++,s.a==e&&(o=s),!(o&&1<i)));s=s.next)o||(a=s);o&&(r.a==gt&&1==i?t(r,n):(a?((i=a).next==r.f&&(r.f=i),i.next=i.next.next):Nt(r),Rt(r,o,bt,n)))}e.c=null}else At(e,bt,n)}(this,new Ft(t))},this)},t.Pc=function(t){this.a=gt,At(this,vt,t)},t.Qc=function(t){this.a=gt,At(this,bt,t)},t.Yb=function(){for(var t;t=Nt(this);)Rt(this,t,this.a,this.i);this.h=!1};var Mt=ht;function Ft(t){T.call(this,t)}function Lt(){0!=Vt&&(Bt[this[m]||(this[m]=++y)]=this),this.qa=this.qa,this.ja=this.ja}E(Ft,T),Ft.prototype.name="cancel";var Vt=0,Bt={};function Ut(t){if(!t.qa&&(t.qa=!0,t.va(),0!=Vt)){var e=t[m]||(t[m]=++y);if(0!=Vt&&t.ja&&0<t.ja.length)throw Error(t+" did not empty its onDisposeCallbacks queue. This probably means it overrode dispose() or disposeInternal() without calling the superclass' method.");delete Bt[e]}}function jt(t){return jt[" "](t),t}Lt.prototype.qa=!1,Lt.prototype.va=function(){if(this.ja)for(;this.ja.length;)this.ja.shift()()},jt[" "]=u;var qt,Gt=et("Opera"),Wt=et("Trident")||et("MSIE"),zt=et("Edge"),Ht=zt||Wt,Kt=et("Gecko")&&!($(q.toLowerCase(),"webkit")&&!et("Edge"))&&!(et("Trident")||et("MSIE"))&&!et("Edge"),Qt=$(q.toLowerCase(),"webkit")&&!et("Edge");function Yt(){var t=n.document;return t?t.documentMode:void 0}t:{var Xt="",$t=function(){var t=q;return Kt?/rv:([^\);]+)(\)|;)/.exec(t):zt?/Edge\/([\d\.]+)/.exec(t):Wt?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(t):Qt?/WebKit\/(\S+)/.exec(t):Gt?/(?:Version)[ \/]?(\S+)/.exec(t):void 0}();if($t&&(Xt=$t?$t[1]:""),Wt){var Jt=Yt();if(null!=Jt&&Jt>parseFloat(Xt)){qt=String(Jt);break t}}qt=Xt}var Zt,te={};function ee(t){return function(t,e){var n=te;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e(t)}(t,function(){for(var e=0,n=G(String(qt)).split("."),r=G(String(t)).split("."),i=Math.max(n.length,r.length),o=0;0==e&&o<i;o++){var a=n[o]||"",s=r[o]||"";do{if(a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],0==a[0].length&&0==s[0].length)break;e=J(0==a[1].length?0:parseInt(a[1],10),0==s[1].length?0:parseInt(s[1],10))||J(0==a[2].length,0==s[2].length)||J(a[2],s[2]),a=a[3],s=s[3]}while(0==e)}return 0<=e})}var ne=n.document;Zt=ne&&Wt?Yt()||("CSS1Compat"==ne.compatMode?parseInt(qt,10):5):void 0;var re=Object.freeze||function(t){return t},ie=!Wt||9<=Number(Zt),oe=Wt&&!ee("9"),ae=function(){if(!n.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{n.addEventListener("test",u,e),n.removeEventListener("test",u,e)}catch(r){}return t}();function se(t,e){this.type=t,this.b=this.target=e,this.Kb=!0}function ue(t,e){if(se.call(this,t?t.type:""),this.relatedTarget=this.b=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.a=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.b=e,e=t.relatedTarget){if(Kt){t:{try{jt(e.nodeName);var o=!0;break t}catch(a){}o=!1}o||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType=i(t.pointerType)?t.pointerType:ce[t.pointerType]||"",this.a=t,t.defaultPrevented&&this.preventDefault()}}se.prototype.preventDefault=function(){this.Kb=!1},E(ue,se);var ce=re({2:"touch",3:"pen",4:"mouse"});ue.prototype.preventDefault=function(){ue.pb.preventDefault.call(this);var t=this.a;if(t.preventDefault)t.preventDefault();else if(t.returnValue=!1,oe)try{(t.ctrlKey||112<=t.keyCode&&123>=t.keyCode)&&(t.keyCode=-1)}catch(e){}},ue.prototype.f=function(){return this.a};var le="closure_listenable_"+(1e6*Math.random()|0),he=0;function fe(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.Ma=i,this.key=++he,this.oa=this.Ia=!1}function pe(t){t.oa=!0,t.listener=null,t.proxy=null,t.src=null,t.Ma=null}function de(t){this.src=t,this.a={},this.b=0}function me(t,e){var n=e.type;n in t.a&&V(t.a[n],e)&&(pe(e),0==t.a[n].length&&(delete t.a[n],t.b--))}function ye(t,e,n,r){for(var i=0;i<t.length;++i){var o=t[i];if(!o.oa&&o.listener==e&&o.capture==!!n&&o.Ma==r)return i}return-1}de.prototype.add=function(t,e,n,r,i){var o=t.toString();(t=this.a[o])||(t=this.a[o]=[],this.b++);var a=ye(t,e,r,i);return-1<a?(e=t[a],n||(e.Ia=!1)):((e=new fe(e,this.src,o,!!r,i)).Ia=n,t.push(e)),e};var ge="closure_lm_"+(1e6*Math.random()|0),ve={};function be(t,e,n,r,i){if(r&&r.once)we(t,e,n,r,i);else if(h(e))for(var o=0;o<e.length;o++)be(t,e[o],n,r,i);else n=Pe(n),t&&t[le]?Ne(t,e,n,d(r)?!!r.capture:!!r,i):_e(t,e,n,!1,r,i)}function _e(t,e,n,r,i,o){if(!e)throw Error("Invalid event type");var a=d(i)?!!i.capture:!!i,s=Ie(t);if(s||(t[ge]=s=new de(t)),!(n=s.add(e,n,r,a,o)).proxy){if(r=function(){var t=xe,e=ie?function(n){return t.call(e.src,e.listener,n)}:function(n){if(!(n=t.call(e.src,e.listener,n)))return n};return e}(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)ae||(i=a),void 0===i&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(Te(e.toString()),r);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(r)}0}}function we(t,e,n,r,i){if(h(e))for(var o=0;o<e.length;o++)we(t,e[o],n,r,i);else n=Pe(n),t&&t[le]?Re(t,e,n,d(r)?!!r.capture:!!r,i):_e(t,e,n,!0,r,i)}function Ee(t,e,n,r,i){if(h(e))for(var o=0;o<e.length;o++)Ee(t,e[o],n,r,i);else r=d(r)?!!r.capture:!!r,n=Pe(n),t&&t[le]?(t=t.o,(e=String(e).toString())in t.a&&(-1<(n=ye(o=t.a[e],n,r,i))&&(pe(o[n]),Array.prototype.splice.call(o,n,1),0==o.length&&(delete t.a[e],t.b--)))):t&&(t=Ie(t))&&(e=t.a[e.toString()],t=-1,e&&(t=ye(e,n,r,i)),(n=-1<t?e[t]:null)&&Se(n))}function Se(t){if("number"!=typeof t&&t&&!t.oa){var e=t.src;if(e&&e[le])me(e.o,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(Te(n),r):e.addListener&&e.removeListener&&e.removeListener(r),0,(n=Ie(e))?(me(n,t),0==n.b&&(n.src=null,e[ge]=null)):pe(t)}}}function Te(t){return t in ve?ve[t]:ve[t]="on"+t}function Ce(t,e,n,r){var i=!0;if((t=Ie(t))&&(e=t.a[e.toString()]))for(e=e.concat(),t=0;t<e.length;t++){var o=e[t];o&&o.capture==n&&!o.oa&&(o=ke(o,r),i=i&&!1!==o)}return i}function ke(t,e){var n=t.listener,r=t.Ma||t.src;return t.Ia&&Se(t),n.call(r,e)}function xe(t,e){if(t.oa)return!0;if(!ie){if(!e)t:{e=["window","event"];for(var r=n,i=0;i<e.length;i++)if(null==(r=r[e[i]])){e=null;break t}e=r}if(e=new ue(i=e,this),r=!0,!(0>i.keyCode||void 0!=i.returnValue)){t:{var o=!1;if(0==i.keyCode)try{i.keyCode=-1;break t}catch(s){o=!0}(o||void 0==i.returnValue)&&(i.returnValue=!0)}for(i=[],o=e.b;o;o=o.parentNode)i.push(o);for(t=t.type,o=i.length-1;0<=o;o--){e.b=i[o];var a=Ce(i[o],t,!0,e);r=r&&a}for(o=0;o<i.length;o++)e.b=i[o],a=Ce(i[o],t,!1,e),r=r&&a}return r}return ke(t,new ue(e,this))}function Ie(t){return(t=t[ge])instanceof de?t:null}var Ae="__closure_events_fn_"+(1e9*Math.random()>>>0);function Pe(t){return p(t)?t:(t[Ae]||(t[Ae]=function(e){return t.handleEvent(e)}),t[Ae])}function De(){Lt.call(this),this.o=new de(this),this.Rb=this,this.Wa=null}function Ne(t,e,n,r,i){t.o.add(String(e),n,!1,r,i)}function Re(t,e,n,r,i){t.o.add(String(e),n,!0,r,i)}function Oe(t,e,n,r){if(!(e=t.o.a[String(e)]))return!0;e=e.concat();for(var i=!0,o=0;o<e.length;++o){var a=e[o];if(a&&!a.oa&&a.capture==n){var s=a.listener,u=a.Ma||a.src;a.Ia&&me(t.o,a),i=!1!==s.call(u,r)&&i}}return i&&0!=r.Kb}function Me(t,e,r){if(p(t))r&&(t=b(t,r));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=b(t.handleEvent,t)}return 2147483647<Number(e)?-1:n.setTimeout(t,e||0)}function Fe(t){var e=null;return new yt(function(n,r){-1==(e=Me(function(){n(void 0)},t))&&r(Error("Failed to schedule timer."))}).s(function(t){throw n.clearTimeout(e),t})}function Le(t){if(t.S&&"function"==typeof t.S)return t.S();if(i(t))return t.split("");if(f(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}for(r in e=[],n=0,t)e[n++]=t[r];return e}function Ve(t){if(t.U&&"function"==typeof t.U)return t.U();if(!t.S||"function"!=typeof t.S){if(f(t)||i(t)){var e=[];t=t.length;for(var n=0;n<t;n++)e.push(n);return e}for(var r in e=[],n=0,t)e[n++]=r;return e}}function Be(t,e){this.b={},this.a=[],this.c=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(t)if(t instanceof Be)for(n=t.U(),r=0;r<n.length;r++)this.set(n[r],t.get(n[r]));else for(r in t)this.set(r,t[r])}function Ue(t){if(t.c!=t.a.length){for(var e=0,n=0;e<t.a.length;){var r=t.a[e];je(t.b,r)&&(t.a[n++]=r),e++}t.a.length=n}if(t.c!=t.a.length){var i={};for(n=e=0;e<t.a.length;)je(i,r=t.a[e])||(t.a[n++]=r,i[r]=1),e++;t.a.length=n}}function je(t,e){return Object.prototype.hasOwnProperty.call(t,e)}E(De,Lt),De.prototype[le]=!0,De.prototype.addEventListener=function(t,e,n,r){be(this,t,e,n,r)},De.prototype.removeEventListener=function(t,e,n,r){Ee(this,t,e,n,r)},De.prototype.dispatchEvent=function(t){var e,n=this.Wa;if(n)for(e=[];n;n=n.Wa)e.push(n);n=this.Rb;var r=t.type||t;if(i(t))t=new se(t,n);else if(t instanceof se)t.target=t.target||n;else{var o=t;ut(t=new se(r,n),o)}if(o=!0,e)for(var a=e.length-1;0<=a;a--){var s=t.b=e[a];o=Oe(s,r,!0,t)&&o}if(o=Oe(s=t.b=n,r,!0,t)&&o,o=Oe(s,r,!1,t)&&o,e)for(a=0;a<e.length;a++)o=Oe(s=t.b=e[a],r,!1,t)&&o;return o},De.prototype.va=function(){if(De.pb.va.call(this),this.o){var t,e=this.o;for(t in e.a){for(var n=e.a[t],r=0;r<n.length;r++)0,pe(n[r]);delete e.a[t],e.b--}}this.Wa=null},(t=Be.prototype).S=function(){Ue(this);for(var t=[],e=0;e<this.a.length;e++)t.push(this.b[this.a[e]]);return t},t.U=function(){return Ue(this),this.a.concat()},t.clear=function(){this.b={},this.c=this.a.length=0},t.get=function(t,e){return je(this.b,t)?this.b[t]:e},t.set=function(t,e){je(this.b,t)||(this.c++,this.a.push(t)),this.b[t]=e},t.forEach=function(t,e){for(var n=this.U(),r=0;r<n.length;r++){var i=n[r],o=this.get(i);t.call(e,o,i,this)}};var qe=/^(?:([^:\/?#.]+):)?(?:\/\/(?:([^\/?#]*)@)?([^\/#?]*?)(?::([0-9]+))?(?=[\/#?]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Ge(t,e){if(this.b=this.o=this.c="",this.i=null,this.h=this.g="",this.f=!1,t instanceof Ge){this.f=void 0!==e?e:t.f,We(this,t.c),this.o=t.o,this.b=t.b,ze(this,t.i),this.g=t.g,e=t.a;var n=new an;n.c=e.c,e.a&&(n.a=new Be(e.a),n.b=e.b),He(this,n),this.h=t.h}else t&&(n=String(t).match(qe))?(this.f=!!e,We(this,n[1]||"",!0),this.o=$e(n[2]||""),this.b=$e(n[3]||"",!0),ze(this,n[4]),this.g=$e(n[5]||"",!0),He(this,n[6]||"",!0),this.h=$e(n[7]||"")):(this.f=!!e,this.a=new an(null,this.f))}function We(t,e,n){t.c=n?$e(e,!0):e,t.c&&(t.c=t.c.replace(/:$/,""))}function ze(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.i=e}else t.i=null}function He(t,e,n){e instanceof an?(t.a=e,function(t,e){e&&!t.f&&(sn(t),t.c=null,t.a.forEach(function(t,e){var n=e.toLowerCase();e!=n&&(cn(this,e),hn(this,n,t))},t)),t.f=e}(t.a,t.f)):(n||(e=Je(e,rn)),t.a=new an(e,t.f))}function Ke(t,e,n){t.a.set(e,n)}function Qe(t,e){return t.a.get(e)}function Ye(t){return t instanceof Ge?new Ge(t):new Ge(t,void 0)}function Xe(t,e){var n=new Ge(null,void 0);return We(n,"https"),t&&(n.b=t),e&&(n.g=e),n}function $e(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function Je(t,e,n){return i(t)?(t=encodeURI(t).replace(e,Ze),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function Ze(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}Ge.prototype.toString=function(){var t=[],e=this.c;e&&t.push(Je(e,tn,!0),":");var n=this.b;return(n||"file"==e)&&(t.push("//"),(e=this.o)&&t.push(Je(e,tn,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.i)&&t.push(":",String(n))),(n=this.g)&&(this.b&&"/"!=n.charAt(0)&&t.push("/"),t.push(Je(n,"/"==n.charAt(0)?nn:en,!0))),(n=this.a.toString())&&t.push("?",n),(n=this.h)&&t.push("#",Je(n,on)),t.join("")};var tn=/[#\/\?@]/g,en=/[#\?:]/g,nn=/[#\?]/g,rn=/[#\?@]/g,on=/#/g;function an(t,e){this.b=this.a=null,this.c=t||null,this.f=!!e}function sn(t){t.a||(t.a=new Be,t.b=0,t.c&&function(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var o=t[n].substring(0,r);i=t[n].substring(r+1)}else o=t[n];e(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(t.c,function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)}))}function un(t){var e=Ve(t);if("undefined"==typeof e)throw Error("Keys are undefined");var n=new an(null,void 0);t=Le(t);for(var r=0;r<e.length;r++){var i=e[r],o=t[r];h(o)?hn(n,i,o):n.add(i,o)}return n}function cn(t,e){sn(t),e=fn(t,e),je(t.a.b,e)&&(t.c=null,t.b-=t.a.get(e).length,je((t=t.a).b,e)&&(delete t.b[e],t.c--,t.a.length>2*t.c&&Ue(t)))}function ln(t,e){return sn(t),e=fn(t,e),je(t.a.b,e)}function hn(t,e,n){cn(t,e),0<n.length&&(t.c=null,t.a.set(fn(t,e),j(n)),t.b+=n.length)}function fn(t,e){return e=String(e),t.f&&(e=e.toLowerCase()),e}(t=an.prototype).add=function(t,e){sn(this),this.c=null,t=fn(this,t);var n=this.a.get(t);return n||this.a.set(t,n=[]),n.push(e),this.b+=1,this},t.clear=function(){this.a=this.c=null,this.b=0},t.forEach=function(t,e){sn(this),this.a.forEach(function(n,r){O(n,function(n){t.call(e,n,r,this)},this)},this)},t.U=function(){sn(this);for(var t=this.a.S(),e=this.a.U(),n=[],r=0;r<e.length;r++)for(var i=t[r],o=0;o<i.length;o++)n.push(e[r]);return n},t.S=function(t){sn(this);var e=[];if(i(t))ln(this,t)&&(e=U(e,this.a.get(fn(this,t))));else{t=this.a.S();for(var n=0;n<t.length;n++)e=U(e,t[n])}return e},t.set=function(t,e){return sn(this),this.c=null,ln(this,t=fn(this,t))&&(this.b-=this.a.get(t).length),this.a.set(t,[e]),this.b+=1,this},t.get=function(t,e){return t&&0<(t=this.S(t)).length?String(t[0]):e},t.toString=function(){if(this.c)return this.c;if(!this.a)return"";for(var t=[],e=this.a.U(),n=0;n<e.length;n++){var r=e[n],i=encodeURIComponent(String(r));r=this.S(r);for(var o=0;o<r.length;o++){var a=i;""!==r[o]&&(a+="="+encodeURIComponent(String(r[o]))),t.push(a)}}return this.c=t.join("&")};var pn=!Wt||9<=Number(Zt);function dn(t,e){this.a=t===gn&&e||"",this.b=yn}function mn(t){return t instanceof dn&&t.constructor===dn&&t.b===yn?t.a:(k("expected object of type Const, got '"+t+"'"),"type_error:Const")}dn.prototype.na=!0,dn.prototype.ma=function(){return this.a},dn.prototype.toString=function(){return"Const{"+this.a+"}"};var yn={},gn={};function vn(){this.a="",this.b=Sn}function bn(t){return t instanceof vn&&t.constructor===vn&&t.b===Sn?t.a:(k("expected object of type TrustedResourceUrl, got '"+t+"' of type "+c(t)),"type_error:TrustedResourceUrl")}function _n(t,e){var n=mn(t);if(!En.test(n))throw Error("Invalid TrustedResourceUrl format: "+n);return function(t){var e=new vn;return e.a=t,e}(t=n.replace(wn,function(t,r){if(!Object.prototype.hasOwnProperty.call(e,r))throw Error('Found marker, "'+r+'", in format string, "'+n+'", but no valid label mapping found in args: '+JSON.stringify(e));return(t=e[r])instanceof dn?mn(t):encodeURIComponent(String(t))}))}vn.prototype.na=!0,vn.prototype.ma=function(){return this.a.toString()},vn.prototype.toString=function(){return"TrustedResourceUrl{"+this.a+"}"};var wn=/%{(\w+)}/g,En=/^((https:)?\/\/[0-9a-z.:[\]-]+\/|\/[^\/\\]|[^:\/\\%]+\/|[^:\/\\%]*[?#]|about:blank#)/i,Sn={};function Tn(){this.a="",this.b=In}function Cn(t){return t instanceof Tn&&t.constructor===Tn&&t.b===In?t.a:(k("expected object of type SafeUrl, got '"+t+"' of type "+c(t)),"type_error:SafeUrl")}Tn.prototype.na=!0,Tn.prototype.ma=function(){return this.a.toString()},Tn.prototype.toString=function(){return"SafeUrl{"+this.a+"}"};var kn=/^(?:(?:https?|mailto|ftp):|[^:\/?#]*(?:[\/?#]|$))/i;function xn(t){return t instanceof Tn?t:(t="object"==typeof t&&t.na?t.ma():String(t),kn.test(t)||(t="about:invalid#zClosurez"),An(t))}var In={};function An(t){var e=new Tn;return e.a=t,e}function Pn(){this.a="",this.b=Dn}An("about:blank"),Pn.prototype.na=!0,Pn.prototype.ma=function(){return this.a.toString()},Pn.prototype.toString=function(){return"SafeHtml{"+this.a+"}"};var Dn={};function Nn(t){var e=new Pn;return e.a=t,e}function Rn(t){var e=document;return i(t)?e.getElementById(t):t}function On(t,e){nt(e,function(e,n){e&&"object"==typeof e&&e.na&&(e=e.ma()),"style"==n?t.style.cssText=e:"class"==n?t.className=e:"for"==n?t.htmlFor=e:Mn.hasOwnProperty(n)?t.setAttribute(Mn[n],e):0==n.lastIndexOf("aria-",0)||0==n.lastIndexOf("data-",0)?t.setAttribute(n,e):t[n]=e})}Nn("<!DOCTYPE html>"),Nn(""),Nn("<br>");var Mn={cellpadding:"cellPadding",cellspacing:"cellSpacing",colspan:"colSpan",frameborder:"frameBorder",height:"height",maxlength:"maxLength",nonce:"nonce",role:"role",rowspan:"rowSpan",type:"type",usemap:"useMap",valign:"vAlign",width:"width"};function Fn(t,e,n){var r=arguments,o=document,a=String(r[0]),s=r[1];if(!pn&&s&&(s.name||s.type)){if(a=["<",a],s.name&&a.push(' name="',lt(s.name),'"'),s.type){a.push(' type="',lt(s.type),'"');var u={};ut(u,s),delete u.type,s=u}a.push(">"),a=a.join("")}return a=o.createElement(a),s&&(i(s)?a.className=s:h(s)?a.className=s.join(" "):On(a,s)),2<r.length&&function(t,e,n){function r(n){n&&e.appendChild(i(n)?t.createTextNode(n):n)}for(var o=2;o<n.length;o++){var a=n[o];!f(a)||d(a)&&0<a.nodeType?r(a):O(Ln(a)?j(a):a,r)}}(o,a,r),a}function Ln(t){if(t&&"number"==typeof t.length){if(d(t))return"function"==typeof t.item||"string"==typeof t.item;if(p(t))return"function"==typeof t.item}return!1}function Vn(t){var e=[];return function t(e,n,r){if(null==n)r.push("null");else{if("object"==typeof n){if(h(n)){var i=n;n=i.length,r.push("[");for(var o="",a=0;a<n;a++)r.push(o),t(e,i[a],r),o=",";return void r.push("]")}if(!(n instanceof String||n instanceof Number||n instanceof Boolean)){for(i in r.push("{"),o="",n)Object.prototype.hasOwnProperty.call(n,i)&&("function"!=typeof(a=n[i])&&(r.push(o),qn(i,r),r.push(":"),t(e,a,r),o=","));return void r.push("}")}n=n.valueOf()}switch(typeof n){case"string":qn(n,r);break;case"number":r.push(isFinite(n)&&!isNaN(n)?String(n):"null");break;case"boolean":r.push(String(n));break;case"function":r.push("null");break;default:throw Error("Unknown type: "+typeof n)}}}(new Bn,t,e),e.join("")}function Bn(){}var Un={'"':'\\"',"\\":"\\\\","/":"\\/","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","\t":"\\t","\v":"\\u000b"},jn=/\uffff/.test("\uffff")?/[\\"\x00-\x1f\x7f-\uffff]/g:/[\\"\x00-\x1f\x7f-\xff]/g;function qn(t,e){e.push('"',t.replace(jn,function(t){var e=Un[t];return e||(e="\\u"+(65536|t.charCodeAt(0)).toString(16).substr(1),Un[t]=e),e}),'"')}function Gn(){var t=ur();return Wt&&!!Zt&&11==Zt||/Edge\/\d+/.test(t)}function Wn(){return n.window&&n.window.location.href||self&&self.location&&self.location.href||""}function zn(t,e){e=e||n.window;var r="about:blank";t&&(r=Cn(xn(t)).toString()),e.location.href=r}function Hn(t){return!!((t=(t||ur()).toLowerCase()).match(/android/)||t.match(/webos/)||t.match(/iphone|ipad|ipod/)||t.match(/blackberry/)||t.match(/windows phone/)||t.match(/iemobile/))}function Kn(t){t=t||n.window;try{t.close()}catch(e){}}function Qn(t,e,n){var r=Math.floor(1e9*Math.random()).toString();e=e||500,n=n||600;var i=(window.screen.availHeight-n)/2,o=(window.screen.availWidth-e)/2;for(a in e={width:e,height:n,top:0<i?i:0,left:0<o?o:0,location:!0,resizable:!0,statusbar:!0,toolbar:!1},n=ur().toLowerCase(),r&&(e.target=r,$(n,"crios/")&&(e.target="_blank")),or(ur())==rr&&(t=t||"http://localhost",e.scrollbars=!0),n=t||"",(t=e)||(t={}),r=window,e=n instanceof Tn?n:xn("undefined"!=typeof n.href?n.href:String(n)),n=t.target||n.target,i=[],t)switch(a){case"width":case"height":case"top":case"left":i.push(a+"="+t[a]);break;case"target":case"noopener":case"noreferrer":break;default:i.push(a+"="+(t[a]?1:0))}var a=i.join(",");if((et("iPhone")&&!et("iPod")&&!et("iPad")||et("iPad")||et("iPod"))&&r.navigator&&r.navigator.standalone&&n&&"_self"!=n?(a=r.document.createElement("A"),e instanceof Tn||e instanceof Tn||(e="object"==typeof e&&e.na?e.ma():String(e),kn.test(e)||(e="about:invalid#zClosurez"),e=An(e)),a.href=Cn(e),a.setAttribute("target",n),t.noreferrer&&a.setAttribute("rel","noreferrer"),(t=document.createEvent("MouseEvent")).initMouseEvent("click",!0,!0,r,1),a.dispatchEvent(t),a={}):t.noreferrer?(a=r.open("",n,a),t=Cn(e).toString(),a&&(Ht&&$(t,";")&&(t="'"+t.replace(/'/g,"%27")+"'"),a.opener=null,t=Nn('<meta name="referrer" content="no-referrer"><meta http-equiv="refresh" content="0; url='+lt(t)+'">'),a.document.write(function(t){return t instanceof Pn&&t.constructor===Pn&&t.b===Dn?t.a:(k("expected object of type SafeHtml, got '"+t+"' of type "+c(t)),"type_error:SafeHtml")}(t)),a.document.close())):(a=r.open(Cn(e).toString(),n,a))&&t.noopener&&(a.opener=null),a)try{a.focus()}catch(s){}return a}var Yn=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Xn=/^[^@]+@[^@]+$/;function $n(){var t=null;return new yt(function(e){"complete"==n.document.readyState?e():(t=function(){e()},we(window,"load",t))}).s(function(e){throw Ee(window,"load",t),e})}function Jn(t){return t=t||ur(),!("file:"!==pr()||!t.toLowerCase().match(/iphone|ipad|ipod|android/))}function Zn(){var t=n.window;try{return!(!t||t==t.top)}catch(e){return!1}}function tr(){return"object"!==typeof n.window&&"function"===typeof n.importScripts}function er(){return r.a.INTERNAL.hasOwnProperty("reactNative")?"ReactNative":r.a.INTERNAL.hasOwnProperty("node")?"Node":tr()?"Worker":"Browser"}function nr(){var t=er();return"ReactNative"===t||"Node"===t}var rr="Firefox",ir="Chrome";function or(t){var e=t.toLowerCase();return $(e,"opera/")||$(e,"opr/")||$(e,"opios/")?"Opera":$(e,"iemobile")?"IEMobile":$(e,"msie")||$(e,"trident/")?"IE":$(e,"edge/")?"Edge":$(e,"firefox/")?rr:$(e,"silk/")?"Silk":$(e,"blackberry")?"Blackberry":$(e,"webos")?"Webos":!$(e,"safari/")||$(e,"chrome/")||$(e,"crios/")||$(e,"android")?!$(e,"chrome/")&&!$(e,"crios/")||$(e,"edge/")?$(e,"android")?"Android":(t=t.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/))&&2==t.length?t[1]:"Other":ir:"Safari"}var ar={Wc:"FirebaseCore-web",Yc:"FirebaseUI-web"};function sr(t,e){e=e||[];var n,r=[],i={};for(n in ar)i[ar[n]]=!0;for(n=0;n<e.length;n++)"undefined"!==typeof i[e[n]]&&(delete i[e[n]],r.push(e[n]));return r.sort(),(e=r).length||(e=["FirebaseCore-web"]),"Browser"===(r=er())?r=or(i=ur()):"Worker"===r&&(r=or(i=ur())+"-"+r),r+"/JsCore/"+t+"/"+e.join(",")}function ur(){return n.navigator&&n.navigator.userAgent||""}function cr(t,e){t=t.split("."),e=e||n;for(var r=0;r<t.length&&"object"==typeof e&&null!=e;r++)e=e[t[r]];return r!=t.length&&(e=void 0),e}function lr(){try{var t=n.localStorage,e=vr();if(t)return t.setItem(e,"1"),t.removeItem(e),!Gn()||!!n.indexedDB}catch(r){return tr()&&!!n.indexedDB}return!1}function hr(){return(fr()||"chrome-extension:"===pr()||Jn())&&!nr()&&lr()&&!tr()}function fr(){return"http:"===pr()||"https:"===pr()}function pr(){return n.location&&n.location.protocol||null}function dr(t){return!Hn(t=t||ur())&&or(t)!=rr}function mr(t){return"undefined"===typeof t?null:Vn(t)}function yr(t){var e,n={};for(e in t)t.hasOwnProperty(e)&&null!==t[e]&&void 0!==t[e]&&(n[e]=t[e]);return n}function gr(t){if(null!==t)return JSON.parse(t)}function vr(t){return t||Math.floor(1e9*Math.random()).toString()}function br(t){return"Safari"!=or(t=t||ur())&&!t.toLowerCase().match(/iphone|ipad|ipod/)}function _r(){var t=n.___jsl;if(t&&t.H)for(var e in t.H)if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=t.H[e].L.concat(),t.CP)for(var r=0;r<t.CP.length;r++)t.CP[r]=null}function wr(t,e){if(t>e)throw Error("Short delay should be less than long delay!");this.a=t,this.c=e,t=ur(),e=er(),this.b=Hn(t)||"ReactNative"===e}function Er(){var t=n.document;return!t||"undefined"===typeof t.visibilityState||"visible"==t.visibilityState}function Sr(t){try{var e=new Date(parseInt(t,10));if(!isNaN(e.getTime())&&!/[^0-9]/.test(t))return e.toUTCString()}catch(n){}return null}function Tr(){return!(!cr("fireauth.oauthhelper",n)&&!cr("fireauth.iframe",n))}wr.prototype.get=function(){var t=n.navigator;return!t||"boolean"!==typeof t.onLine||!fr()&&"chrome-extension:"!==pr()&&"undefined"===typeof t.connection||t.onLine?this.b?this.c:this.a:Math.min(5e3,this.a)};var Cr,kr={};function xr(t){kr[t]||(kr[t]=!0,"undefined"!==typeof console&&"function"===typeof console.warn&&console.warn(t))}try{var Ir={};Object.defineProperty(Ir,"abcd",{configurable:!0,enumerable:!0,value:1}),Object.defineProperty(Ir,"abcd",{configurable:!0,enumerable:!0,value:2}),Cr=2==Ir.abcd}catch(xo){Cr=!1}function Ar(t,e,n){Cr?Object.defineProperty(t,e,{configurable:!0,enumerable:!0,value:n}):t[e]=n}function Pr(t,e){if(e)for(var n in e)e.hasOwnProperty(n)&&Ar(t,n,e[n])}function Dr(t){var e={};return Pr(e,t),e}function Nr(t){var e=t;if("object"==typeof t&&null!=t)for(var n in e="length"in t?[]:{},t)Ar(e,n,Nr(t[n]));return e}function Rr(t){var e={},n=t[Mr],r=t[Fr];if(!(t=t[Lr])||t!=Or&&!n)throw Error("Invalid provider user info!");e[Br]=r||null,e[Vr]=n||null,Ar(this,jr,t),Ar(this,Ur,Nr(e))}var Or="EMAIL_SIGNIN",Mr="email",Fr="newEmail",Lr="requestType",Vr="email",Br="fromEmail",Ur="data",jr="operation";function qr(t,e){this.code=Wr+t,this.message=e||zr[t]||""}function Gr(t){var e=t&&t.code;return e?new qr(e.substring(Wr.length),t.message):null}E(qr,Error),qr.prototype.v=function(){return{code:this.code,message:this.message}},qr.prototype.toJSON=function(){return this.v()};var Wr="auth/",zr={"argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-already-in-use":"The email address is already in use by another account.","expired-action-code":"The action code has expired. ","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal error has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal error has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal error has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The OIDC ID token requires a valid unhashed nonce.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network error (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal error has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","user-cancelled":"User did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled."};function Hr(t){var e=t[$r];if("undefined"===typeof e)throw new qr("missing-continue-uri");if("string"!==typeof e||"string"===typeof e&&!e.length)throw new qr("invalid-continue-uri");this.h=e,this.b=this.a=null,this.g=!1;var n=t[Kr];if(n&&"object"===typeof n){e=n[ti];var r=n[Jr];if(n=n[Zr],"string"===typeof e&&e.length){if(this.a=e,"undefined"!==typeof r&&"boolean"!==typeof r)throw new qr("argument-error",Jr+" property must be a boolean when specified.");if(this.g=!!r,"undefined"!==typeof n&&("string"!==typeof n||"string"===typeof n&&!n.length))throw new qr("argument-error",Zr+" property must be a non empty string when specified.");this.b=n||null}else{if("undefined"!==typeof e)throw new qr("argument-error",ti+" property must be a non empty string when specified.");if("undefined"!==typeof r||"undefined"!==typeof n)throw new qr("missing-android-pkg-name")}}else if("undefined"!==typeof n)throw new qr("argument-error",Kr+" property must be a non null object when specified.");if(this.f=null,(e=t[Xr])&&"object"===typeof e){if("string"===typeof(e=e[ei])&&e.length)this.f=e;else if("undefined"!==typeof e)throw new qr("argument-error",ei+" property must be a non empty string when specified.")}else if("undefined"!==typeof e)throw new qr("argument-error",Xr+" property must be a non null object when specified.");if("undefined"!==typeof(e=t[Yr])&&"boolean"!==typeof e)throw new qr("argument-error",Yr+" property must be a boolean when specified.");if(this.c=!!e,"undefined"!==typeof(t=t[Qr])&&("string"!==typeof t||"string"===typeof t&&!t.length))throw new qr("argument-error",Qr+" property must be a non empty string when specified.");this.i=t||null}var Kr="android",Qr="dynamicLinkDomain",Yr="handleCodeInApp",Xr="iOS",$r="url",Jr="installApp",Zr="minimumVersion",ti="packageName",ei="bundleId";function ni(t){var e={};for(var n in e.continueUrl=t.h,e.canHandleCodeInApp=t.c,(e.androidPackageName=t.a)&&(e.androidMinimumVersion=t.b,e.androidInstallApp=t.g),e.iOSBundleId=t.f,e.dynamicLinkDomain=t.i,e)null===e[n]&&delete e[n];return e}var ri=null,ii=null;function oi(t){var e="";return function(t,e){function n(e){for(;r<t.length;){var n=t.charAt(r++),i=ii[n];if(null!=i)return i;if(!/^[\s\xa0]*$/.test(n))throw Error("Unknown base64 encoding at char: "+n)}return e}!function(){if(!ri){ri={},ii={};for(var t=0;65>t;t++)ri[t]="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(t),ii[ri[t]]=t,62<=t&&(ii["ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_.".charAt(t)]=t)}}();for(var r=0;;){var i=n(-1),o=n(0),a=n(64),s=n(64);if(64===s&&-1===i)break;e(i<<2|o>>4),64!=a&&(e(o<<4&240|a>>2),64!=s&&e(a<<6&192|s))}}(t,function(t){e+=String.fromCharCode(t)}),e}function ai(t){this.c=t.sub,w(),this.a=t.provider_id||t.firebase&&t.firebase.sign_in_provider||null,this.b=!!t.is_anonymous||"anonymous"==this.a}function si(t){return(t=ui(t))&&t.sub&&t.iss&&t.aud&&t.exp?new ai(t):null}function ui(t){if(!t)return null;if(3!=(t=t.split(".")).length)return null;for(var e=(4-(t=t[1]).length%4)%4,n=0;n<e;n++)t+=".";try{return JSON.parse(oi(t))}catch(r){}return null}ai.prototype.f=function(){return this.b};var ci,li={bd:{bb:"https://www.googleapis.com/identitytoolkit/v3/relyingparty/",jb:"https://securetoken.googleapis.com/v1/token",id:"p"},dd:{bb:"https://staging-www.sandbox.googleapis.com/identitytoolkit/v3/relyingparty/",jb:"https://staging-securetoken.sandbox.googleapis.com/v1/token",id:"s"},ed:{bb:"https://www-googleapis-test.sandbox.google.com/identitytoolkit/v3/relyingparty/",jb:"https://test-securetoken.sandbox.googleapis.com/v1/token",id:"t"}};function hi(t){for(var e in li)if(li[e].id===t)return{firebaseEndpoint:(t=li[e]).bb,secureTokenEndpoint:t.jb};return null}ci=hi("__EID__")?"__EID__":void 0;var fi="oauth_consumer_key oauth_nonce oauth_signature oauth_signature_method oauth_timestamp oauth_token oauth_version".split(" "),pi=["client_id","response_type","scope","redirect_uri","state"],di={Xc:{Na:"locale",Ba:500,Aa:600,Oa:"facebook.com",ib:pi},Zc:{Na:null,Ba:500,Aa:620,Oa:"github.com",ib:pi},$c:{Na:"hl",Ba:515,Aa:680,Oa:"google.com",ib:pi},fd:{Na:"lang",Ba:485,Aa:705,Oa:"twitter.com",ib:fi}};function mi(t){for(var e in di)if(di[e].Oa==t)return di[e];return null}function yi(t){var e={};e["facebook.com"]=wi,e["google.com"]=Si,e["github.com"]=Ei,e["twitter.com"]=Ti;var n=t&&t[vi];try{if(n)return e[n]?new e[n](t):new _i(t);if("undefined"!==typeof t[gi])return new bi(t)}catch(r){}return null}var gi="idToken",vi="providerId";function bi(t){var e=t[vi];if(!e&&t[gi]){var n=si(t[gi]);n&&n.a&&(e=n.a)}if(!e)throw Error("Invalid additional user info!");"anonymous"!=e&&"custom"!=e||(e=null),n=!1,"undefined"!==typeof t.isNewUser?n=!!t.isNewUser:"identitytoolkit#SignupNewUserResponse"===t.kind&&(n=!0),Ar(this,"providerId",e),Ar(this,"isNewUser",n)}function _i(t){bi.call(this,t),Ar(this,"profile",Nr((t=gr(t.rawUserInfo||"{}"))||{}))}function wi(t){if(_i.call(this,t),"facebook.com"!=this.providerId)throw Error("Invalid provider ID!")}function Ei(t){if(_i.call(this,t),"github.com"!=this.providerId)throw Error("Invalid provider ID!");Ar(this,"username",this.profile&&this.profile.login||null)}function Si(t){if(_i.call(this,t),"google.com"!=this.providerId)throw Error("Invalid provider ID!")}function Ti(t){if(_i.call(this,t),"twitter.com"!=this.providerId)throw Error("Invalid provider ID!");Ar(this,"username",t.screenName||null)}function Ci(t){this.a=Ye(t)}function ki(t){var e=Ye(t),n=Qe(e,"link"),r=Qe(Ye(n),"link");return e=Qe(e,"deep_link_id"),Qe(Ye(e),"link")||e||r||n||t}function xi(){}function Ii(t,e){return t.then(function(t){if(t[ga]){var n=si(t[ga]);if(!n||e!=n.c)throw new qr("user-mismatch");return t}throw new qr("user-mismatch")}).s(function(t){throw t&&t.code&&t.code==Wr+"user-not-found"?new qr("user-mismatch"):t})}function Ai(t,e){if(!e)throw new qr("internal-error","failed to construct a credential");this.a=e,Ar(this,"providerId",t),Ar(this,"signInMethod",t)}function Pi(t){return{pendingToken:t.a,requestUri:"http://localhost"}}function Di(t){if(t&&t.providerId&&t.signInMethod&&0==t.providerId.indexOf("saml.")&&t.pendingToken)try{return new Ai(t.providerId,t.pendingToken)}catch(e){}return null}function Ni(t,e,n){if(this.a=null,e.idToken||e.accessToken)e.idToken&&Ar(this,"idToken",e.idToken),e.accessToken&&Ar(this,"accessToken",e.accessToken),e.nonce&&!e.pendingToken&&Ar(this,"nonce",e.nonce),e.pendingToken&&(this.a=e.pendingToken);else{if(!e.oauthToken||!e.oauthTokenSecret)throw new qr("internal-error","failed to construct a credential");Ar(this,"accessToken",e.oauthToken),Ar(this,"secret",e.oauthTokenSecret)}Ar(this,"providerId",t),Ar(this,"signInMethod",n)}function Ri(t){var e={};return t.idToken&&(e.id_token=t.idToken),t.accessToken&&(e.access_token=t.accessToken),t.secret&&(e.oauth_token_secret=t.secret),e.providerId=t.providerId,t.nonce&&!t.a&&(e.nonce=t.nonce),e={postBody:un(e).toString(),requestUri:"http://localhost"},t.a&&(delete e.postBody,e.pendingToken=t.a),e}function Oi(t){if(t&&t.providerId&&t.signInMethod){var e={idToken:t.oauthIdToken,accessToken:t.oauthTokenSecret?null:t.oauthAccessToken,oauthTokenSecret:t.oauthTokenSecret,oauthToken:t.oauthTokenSecret&&t.oauthAccessToken,nonce:t.nonce,pendingToken:t.pendingToken};try{return new Ni(t.providerId,e,t.signInMethod)}catch(n){}}return null}function Mi(t,e){this.Fc=e||[],Pr(this,{providerId:t,isOAuthProvider:!0}),this.zb={},this.eb=(mi(t)||{}).Na||null,this.ab=null}function Fi(t){if("string"!==typeof t||0!=t.indexOf("saml."))throw new qr("argument-error",'SAML provider IDs must be prefixed with "saml."');Mi.call(this,t,[])}function Li(t){Mi.call(this,t,pi),this.a=[]}function Vi(){Li.call(this,"facebook.com")}function Bi(t){if(!t)throw new qr("argument-error","credential failed: expected 1 argument (the OAuth access token).");var e=t;return d(t)&&(e=t.accessToken),(new Vi).credential({accessToken:e})}function Ui(){Li.call(this,"github.com")}function ji(t){if(!t)throw new qr("argument-error","credential failed: expected 1 argument (the OAuth access token).");var e=t;return d(t)&&(e=t.accessToken),(new Ui).credential({accessToken:e})}function qi(){Li.call(this,"google.com"),this.ua("profile")}function Gi(t,e){var n=t;return d(t)&&(n=t.idToken,e=t.accessToken),(new qi).credential({idToken:n,accessToken:e})}function Wi(){Mi.call(this,"twitter.com",fi)}function zi(t,e){var n=t;if(d(n)||(n={oauthToken:t,oauthTokenSecret:e}),!n.oauthToken||!n.oauthTokenSecret)throw new qr("argument-error","credential failed: expected 2 arguments (the OAuth access token and secret).");return new Ni("twitter.com",n,"twitter.com")}function Hi(t,e,n){this.a=t,this.c=e,Ar(this,"providerId","password"),Ar(this,"signInMethod",n===Qi.EMAIL_LINK_SIGN_IN_METHOD?Qi.EMAIL_LINK_SIGN_IN_METHOD:Qi.EMAIL_PASSWORD_SIGN_IN_METHOD)}function Ki(t){return t&&t.email&&t.password?new Hi(t.email,t.password,t.signInMethod):null}function Qi(){Pr(this,{providerId:"password",isOAuthProvider:!1})}function Yi(t,e){if(!(e=Xi(e)))throw new qr("argument-error","Invalid email link!");return new Hi(t,e,Qi.EMAIL_LINK_SIGN_IN_METHOD)}function Xi(t){var e=Qe((t=new Ci(t=ki(t))).a,"oobCode")||null;return"signIn"===(Qe(t.a,"mode")||null)&&e?e:null}function $i(t){if(!(t.Ua&&t.Ta||t.Fa&&t.$))throw new qr("internal-error");this.a=t,Ar(this,"providerId","phone"),Ar(this,"signInMethod","phone")}function Ji(t){if(t&&"phone"===t.providerId&&(t.verificationId&&t.verificationCode||t.temporaryProof&&t.phoneNumber)){var e={};return O(["verificationId","verificationCode","temporaryProof","phoneNumber"],function(n){t[n]&&(e[n]=t[n])}),new $i(e)}return null}function Zi(t){return t.a.Fa&&t.a.$?{temporaryProof:t.a.Fa,phoneNumber:t.a.$}:{sessionInfo:t.a.Ua,code:t.a.Ta}}function to(t){try{this.a=t||r.a.auth()}catch(e){throw new qr("argument-error","Either an instance of firebase.auth.Auth must be passed as an argument to the firebase.auth.PhoneAuthProvider constructor, or the default firebase App instance must be initialized via firebase.initializeApp().")}Pr(this,{providerId:"phone",isOAuthProvider:!1})}function eo(t,e){if(!t)throw new qr("missing-verification-id");if(!e)throw new qr("missing-verification-code");return new $i({Ua:t,Ta:e})}function no(t){if(t.temporaryProof&&t.phoneNumber)return new $i({Fa:t.temporaryProof,$:t.phoneNumber});var e=t&&t.providerId;if(!e||"password"===e)return null;var n=t&&t.oauthAccessToken,r=t&&t.oauthTokenSecret,i=t&&t.nonce,o=t&&t.oauthIdToken,a=t&&t.pendingToken;try{switch(e){case"google.com":return Gi(o,n);case"facebook.com":return Bi(n);case"github.com":return ji(n);case"twitter.com":return zi(n,r);default:return n||r||o||a?a?0==e.indexOf("saml.")?new Ai(e,a):new Ni(e,{pendingToken:a,idToken:t.oauthIdToken,accessToken:t.oauthAccessToken},e):new Li(e).credential({idToken:o,accessToken:n,rawNonce:i}):null}}catch(s){return null}}function ro(t){if(!t.isOAuthProvider)throw new qr("invalid-oauth-provider")}function io(t,e,n,r,i,o){if(this.b=t,this.c=e||null,this.f=n||null,this.g=r||null,this.h=o||null,this.a=i||null,!this.f&&!this.a)throw new qr("invalid-auth-event");if(this.f&&this.a)throw new qr("invalid-auth-event");if(this.f&&!this.g)throw new qr("invalid-auth-event")}function oo(t){return(t=t||{}).type?new io(t.type,t.eventId,t.urlResponse,t.sessionId,t.error&&Gr(t.error),t.postBody):null}function ao(){this.b=null,this.a=[]}E(_i,bi),E(wi,_i),E(Ei,_i),E(Si,_i),E(Ti,_i),Ai.prototype.la=function(t){return Ma(t,Pi(this))},Ai.prototype.b=function(t,e){var n=Pi(this);return n.idToken=e,Fa(t,n)},Ai.prototype.f=function(t,e){return Ii(La(t,Pi(this)),e)},Ai.prototype.v=function(){return{providerId:this.providerId,signInMethod:this.signInMethod,pendingToken:this.a}},Ni.prototype.la=function(t){return Ma(t,Ri(this))},Ni.prototype.b=function(t,e){var n=Ri(this);return n.idToken=e,Fa(t,n)},Ni.prototype.f=function(t,e){return Ii(La(t,Ri(this)),e)},Ni.prototype.v=function(){var t={providerId:this.providerId,signInMethod:this.signInMethod};return this.idToken&&(t.oauthIdToken=this.idToken),this.accessToken&&(t.oauthAccessToken=this.accessToken),this.secret&&(t.oauthTokenSecret=this.secret),this.nonce&&(t.nonce=this.nonce),this.a&&(t.pendingToken=this.a),t},Mi.prototype.Da=function(t){return this.zb=it(t),this},E(Fi,Mi),E(Li,Mi),Li.prototype.ua=function(t){return L(this.a,t)||this.a.push(t),this},Li.prototype.Fb=function(){return j(this.a)},Li.prototype.credential=function(t,e){var n;if(!(n=d(t)?{idToken:t.idToken||null,accessToken:t.accessToken||null,nonce:t.rawNonce||null}:{idToken:t||null,accessToken:e||null}).idToken&&!n.accessToken)throw new qr("argument-error","credential failed: must provide the ID token and/or the access token.");return new Ni(this.providerId,n,this.providerId)},E(Vi,Li),Ar(Vi,"PROVIDER_ID","facebook.com"),Ar(Vi,"FACEBOOK_SIGN_IN_METHOD","facebook.com"),E(Ui,Li),Ar(Ui,"PROVIDER_ID","github.com"),Ar(Ui,"GITHUB_SIGN_IN_METHOD","github.com"),E(qi,Li),Ar(qi,"PROVIDER_ID","google.com"),Ar(qi,"GOOGLE_SIGN_IN_METHOD","google.com"),E(Wi,Mi),Ar(Wi,"PROVIDER_ID","twitter.com"),Ar(Wi,"TWITTER_SIGN_IN_METHOD","twitter.com"),Hi.prototype.la=function(t){return this.signInMethod==Qi.EMAIL_LINK_SIGN_IN_METHOD?fs(t,za,{email:this.a,oobCode:this.c}):fs(t,us,{email:this.a,password:this.c})},Hi.prototype.b=function(t,e){return this.signInMethod==Qi.EMAIL_LINK_SIGN_IN_METHOD?fs(t,Ha,{idToken:e,email:this.a,oobCode:this.c}):fs(t,ns,{idToken:e,email:this.a,password:this.c})},Hi.prototype.f=function(t,e){return Ii(this.la(t),e)},Hi.prototype.v=function(){return{email:this.a,password:this.c,signInMethod:this.signInMethod}},Pr(Qi,{PROVIDER_ID:"password"}),Pr(Qi,{EMAIL_LINK_SIGN_IN_METHOD:"emailLink"}),Pr(Qi,{EMAIL_PASSWORD_SIGN_IN_METHOD:"password"}),$i.prototype.la=function(t){return t.Va(Zi(this))},$i.prototype.b=function(t,e){var n=Zi(this);return n.idToken=e,fs(t,ls,n)},$i.prototype.f=function(t,e){var n=Zi(this);return n.operation="REAUTH",Ii(t=fs(t,hs,n),e)},$i.prototype.v=function(){var t={providerId:"phone"};return this.a.Ua&&(t.verificationId=this.a.Ua),this.a.Ta&&(t.verificationCode=this.a.Ta),this.a.Fa&&(t.temporaryProof=this.a.Fa),this.a.$&&(t.phoneNumber=this.a.$),t},to.prototype.Va=function(t,e){var n=this.a.b;return St(e.verify()).then(function(r){if(!i(r))throw new qr("argument-error","An implementation of firebase.auth.ApplicationVerifier.prototype.verify() must return a firebase.Promise that resolves with a string.");switch(e.type){case"recaptcha":return function(t,e){return fs(t,ts,e)}(n,{phoneNumber:t,recaptchaToken:r}).then(function(t){return"function"===typeof e.reset&&e.reset(),t},function(t){throw"function"===typeof e.reset&&e.reset(),t});default:throw new qr("argument-error",'Only firebase.auth.ApplicationVerifiers with type="recaptcha" are currently supported.')}})},Pr(to,{PROVIDER_ID:"phone"}),Pr(to,{PHONE_SIGN_IN_METHOD:"phone"}),io.prototype.v=function(){return{type:this.b,eventId:this.c,urlResponse:this.f,sessionId:this.g,postBody:this.h,error:this.a&&this.a.v()}};var so,uo=null;function co(t){var e="unauthorized-domain",n=void 0,r=Ye(t);t=r.b,"chrome-extension"==(r=r.c)?n=ct("This chrome extension ID (chrome-extension://%s) is not authorized to run this operation. Add it to the OAuth redirect domains list in the Firebase console -> Auth section -> Sign in method tab.",t):"http"==r||"https"==r?n=ct("This domain (%s) is not authorized to run this operation. Add it to the OAuth redirect domains list in the Firebase console -> Auth section -> Sign in method tab.",t):e="operation-not-supported-in-this-environment",qr.call(this,e,n)}function lo(t,e,n){qr.call(this,t,n),(t=e||{}).Ab&&Ar(this,"email",t.Ab),t.$&&Ar(this,"phoneNumber",t.$),t.credential&&Ar(this,"credential",t.credential)}function ho(t){if(t.code){var e=t.code||"";0==e.indexOf(Wr)&&(e=e.substring(Wr.length));var n={credential:no(t)};if(t.email)n.Ab=t.email;else if(t.phoneNumber)n.$=t.phoneNumber;else if(!n.credential)return new qr(e,t.message||void 0);return new lo(e,n,t.message)}return null}function fo(){}function po(t){return t.c||(t.c=t.b())}function mo(){}function yo(t){if(!t.f&&"undefined"==typeof XMLHttpRequest&&"undefined"!=typeof ActiveXObject){for(var e=["MSXML2.XMLHTTP.6.0","MSXML2.XMLHTTP.3.0","MSXML2.XMLHTTP","Microsoft.XMLHTTP"],n=0;n<e.length;n++){var r=e[n];try{return new ActiveXObject(r),t.f=r}catch(i){}}throw Error("Could not create ActiveXObject. ActiveX might be disabled, or MSXML might not be installed")}return t.f}function go(){}function vo(){this.a=new XDomainRequest,this.readyState=0,this.onreadystatechange=null,this.responseType=this.responseText=this.response="",this.status=-1,this.statusText="",this.a.onload=b(this.fc,this),this.a.onerror=b(this.Gb,this),this.a.onprogress=b(this.gc,this),this.a.ontimeout=b(this.kc,this)}function bo(t,e){t.readyState=e,t.onreadystatechange&&t.onreadystatechange()}function _o(t,e,n){this.reset(t,e,n,void 0,void 0)}ao.prototype.subscribe=function(t){var e=this;this.a.push(t),this.b||(this.b=function(t){for(var n=0;n<e.a.length;n++)e.a[n](t)},"function"===typeof(t=cr("universalLinks.subscribe",n))&&t(null,this.b))},ao.prototype.unsubscribe=function(t){B(this.a,function(e){return e==t})},E(co,qr),E(lo,qr),lo.prototype.v=function(){var t={code:this.code,message:this.message};this.email&&(t.email=this.email),this.phoneNumber&&(t.phoneNumber=this.phoneNumber);var e=this.credential&&this.credential.v();return e&&ut(t,e),t},lo.prototype.toJSON=function(){return this.v()},fo.prototype.c=null,E(mo,fo),mo.prototype.a=function(){var t=yo(this);return t?new ActiveXObject(t):new XMLHttpRequest},mo.prototype.b=function(){var t={};return yo(this)&&(t[0]=!0,t[1]=!0),t},so=new mo,E(go,fo),go.prototype.a=function(){var t=new XMLHttpRequest;if("withCredentials"in t)return t;if("undefined"!=typeof XDomainRequest)return new vo;throw Error("Unsupported browser")},go.prototype.b=function(){return{}},(t=vo.prototype).open=function(t,e,n){if(null!=n&&!n)throw Error("Only async requests are supported.");this.a.open(t,e)},t.send=function(t){if(t){if("string"!=typeof t)throw Error("Only string data is supported");this.a.send(t)}else this.a.send()},t.abort=function(){this.a.abort()},t.setRequestHeader=function(){},t.getResponseHeader=function(t){return"content-type"==t.toLowerCase()?this.a.contentType:""},t.fc=function(){this.status=200,this.response=this.responseText=this.a.responseText,bo(this,4)},t.Gb=function(){this.status=500,this.response=this.responseText="",bo(this,4)},t.kc=function(){this.Gb()},t.gc=function(){this.status=200,bo(this,1)},t.getAllResponseHeaders=function(){return"content-type: "+this.a.contentType},_o.prototype.a=null;function wo(t){this.f=t,this.b=this.c=this.a=null}function Eo(t,e){this.name=t,this.value=e}_o.prototype.reset=function(t,e,n,r,i){"number"==typeof i||0,r||w(),delete this.a},Eo.prototype.toString=function(){return this.name};var So=new Eo("SEVERE",1e3),To=new Eo("WARNING",900),Co=new Eo("CONFIG",700),ko=new Eo("FINE",500);wo.prototype.log=function(t,e,n){if(t.value>=function t(e){return e.c?e.c:e.a?t(e.a):(k("Root logger has no level set."),null)}(this).value)for(p(e)&&(e=e()),t=new _o(t,String(e),this.f),n&&(t.a=n),n=this;n;)n=n.a};var xo,Io={},Ao=null;function Po(t){var e;if(Ao||(Ao=new wo(""),Io[""]=Ao,Ao.c=Co),!(e=Io[t])){e=new wo(t);var n=t.lastIndexOf("."),r=t.substr(n+1);(n=Po(t.substr(0,n))).b||(n.b={}),n.b[r]=e,e.a=n,Io[t]=e}return e}function Do(t,e){t&&t.log(ko,e,void 0)}function No(t){this.f=t}function Ro(t){De.call(this),this.u=t,this.readyState=Oo,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.i=new Headers,this.b=null,this.m="GET",this.g="",this.a=!1,this.h=Po("goog.net.FetchXmlHttp"),this.l=this.c=this.f=null}E(No,fo),No.prototype.a=function(){return new Ro(this.f)},No.prototype.b=(xo={},function(){return xo}),E(Ro,De);var Oo=0;function Mo(t){t.c.read().then(t.ec.bind(t)).catch(t.La.bind(t))}function Fo(t,e){e&&t.f&&(t.status=t.f.status,t.statusText=t.f.statusText),t.readyState=4,t.f=null,t.c=null,t.l=null,Lo(t)}function Lo(t){t.onreadystatechange&&t.onreadystatechange.call(t)}function Vo(t){De.call(this),this.headers=new Be,this.D=t||null,this.c=!1,this.A=this.a=null,this.h=this.N=this.l="",this.f=this.I=this.i=this.G=!1,this.g=0,this.u=null,this.m=Bo,this.w=this.O=!1}(t=Ro.prototype).open=function(t,e){if(this.readyState!=Oo)throw this.abort(),Error("Error reopening a connection");this.m=t,this.g=e,this.readyState=1,Lo(this)},t.send=function(t){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.a=!0;var e={headers:this.i,method:this.m,credentials:void 0,cache:void 0};t&&(e.body=t),this.u.fetch(new Request(this.g,e)).then(this.jc.bind(this),this.La.bind(this))},t.abort=function(){this.response=this.responseText="",this.i=new Headers,this.status=0,this.c&&this.c.cancel("Request was aborted."),1<=this.readyState&&this.a&&4!=this.readyState&&(this.a=!1,Fo(this,!1)),this.readyState=Oo},t.jc=function(t){this.a&&(this.f=t,this.b||(this.b=t.headers,this.readyState=2,Lo(this)),this.a&&(this.readyState=3,Lo(this),this.a&&("arraybuffer"===this.responseType?t.arrayBuffer().then(this.hc.bind(this),this.La.bind(this)):"undefined"!==typeof n.ReadableStream&&"body"in t?(this.response=this.responseText="",this.c=t.body.getReader(),this.l=new TextDecoder,Mo(this)):t.text().then(this.ic.bind(this),this.La.bind(this)))))},t.ec=function(t){if(this.a){var e=this.l.decode(t.value?t.value:new Uint8Array(0),{stream:!t.done});e&&(this.response=this.responseText+=e),t.done?Fo(this,!0):Lo(this),3==this.readyState&&Mo(this)}},t.ic=function(t){this.a&&(this.response=this.responseText=t,Fo(this,!0))},t.hc=function(t){this.a&&(this.response=t,Fo(this,!0))},t.La=function(t){var e=this.h;e&&e.log(To,"Failed to fetch url "+this.g,t instanceof Error?t:Error(t)),this.a&&Fo(this,!0)},t.setRequestHeader=function(t,e){this.i.append(t,e)},t.getResponseHeader=function(t){return this.b?this.b.get(t.toLowerCase())||"":((t=this.h)&&t.log(To,"Attempting to get response header but no headers have been received for url: "+this.g,void 0),"")},t.getAllResponseHeaders=function(){if(!this.b){var t=this.h;return t&&t.log(To,"Attempting to get all response headers but no headers have been received for url: "+this.g,void 0),""}t=[];for(var e=this.b.entries(),n=e.next();!n.done;)n=n.value,t.push(n[0]+": "+n[1]),n=e.next();return t.join("\r\n")},E(Vo,De);var Bo="";Vo.prototype.b=Po("goog.net.XhrIo");var Uo=/^https?$/i,jo=["POST","PUT"];function qo(t,e,r,o,a){if(t.a)throw Error("[goog.net.XhrIo] Object is active with another request="+t.l+"; newUri="+e);r=r?r.toUpperCase():"GET",t.l=e,t.h="",t.N=r,t.G=!1,t.c=!0,t.a=t.D?t.D.a():so.a(),t.A=t.D?po(t.D):po(so),t.a.onreadystatechange=b(t.Jb,t);try{Do(t.b,$o(t,"Opening Xhr")),t.I=!0,t.a.open(r,String(e),!0),t.I=!1}catch(u){return Do(t.b,$o(t,"Error opening Xhr: "+u.message)),void Wo(t,u)}e=o||"";var s=new Be(t.headers);a&&function(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(f(t)||i(t))O(t,e,void 0);else for(var n=Ve(t),r=Le(t),o=r.length,a=0;a<o;a++)e.call(void 0,r[a],n&&n[a],t)}(a,function(t,e){s.set(e,t)}),a=function(t){t:{for(var e=Go,n=t.length,r=i(t)?t.split(""):t,o=0;o<n;o++)if(o in r&&e.call(void 0,r[o],o,t)){e=o;break t}e=-1}return 0>e?null:i(t)?t.charAt(e):t[e]}(s.U()),o=n.FormData&&e instanceof n.FormData,!L(jo,r)||a||o||s.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),s.forEach(function(t,e){this.a.setRequestHeader(e,t)},t),t.m&&(t.a.responseType=t.m),"withCredentials"in t.a&&t.a.withCredentials!==t.O&&(t.a.withCredentials=t.O);try{Qo(t),0<t.g&&(t.w=function(t){return Wt&&ee(9)&&"number"==typeof t.timeout&&void 0!==t.ontimeout}(t.a),Do(t.b,$o(t,"Will abort after "+t.g+"ms if incomplete, xhr2 "+t.w)),t.w?(t.a.timeout=t.g,t.a.ontimeout=b(t.Ga,t)):t.u=Me(t.Ga,t.g,t)),Do(t.b,$o(t,"Sending request")),t.i=!0,t.a.send(e),t.i=!1}catch(u){Do(t.b,$o(t,"Send error: "+u.message)),Wo(t,u)}}function Go(t){return"content-type"==t.toLowerCase()}function Wo(t,e){t.c=!1,t.a&&(t.f=!0,t.a.abort(),t.f=!1),t.h=e,zo(t),Ko(t)}function zo(t){t.G||(t.G=!0,t.dispatchEvent("complete"),t.dispatchEvent("error"))}function Ho(t){if(t.c&&"undefined"!=typeof e)if(t.A[1]&&4==Yo(t)&&2==Xo(t))Do(t.b,$o(t,"Local request error detected and ignored"));else if(t.i&&4==Yo(t))Me(t.Jb,0,t);else if(t.dispatchEvent("readystatechange"),4==Yo(t)){Do(t.b,$o(t,"Request complete")),t.c=!1;try{var r,i=Xo(t);t:switch(i){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var o=!0;break t;default:o=!1}if(!(r=o)){var a;if(a=0===i){var s=String(t.l).match(qe)[1]||null;if(!s&&n.self&&n.self.location){var u=n.self.location.protocol;s=u.substr(0,u.length-1)}a=!Uo.test(s?s.toLowerCase():"")}r=a}if(r)t.dispatchEvent("complete"),t.dispatchEvent("success");else{try{var c=2<Yo(t)?t.a.statusText:""}catch(l){Do(t.b,"Can not get status: "+l.message),c=""}t.h=c+" ["+Xo(t)+"]",zo(t)}}finally{Ko(t)}}}function Ko(t,e){if(t.a){Qo(t);var n=t.a,r=t.A[0]?u:null;t.a=null,t.A=null,e||t.dispatchEvent("ready");try{n.onreadystatechange=r}catch(i){(t=t.b)&&t.log(So,"Problem encountered resetting onreadystatechange: "+i.message,void 0)}}}function Qo(t){t.a&&t.w&&(t.a.ontimeout=null),t.u&&(n.clearTimeout(t.u),t.u=null)}function Yo(t){return t.a?t.a.readyState:0}function Xo(t){try{return 2<Yo(t)?t.a.status:-1}catch(e){return-1}}function $o(t,e){return e+" ["+t.N+" "+t.l+" "+Xo(t)+"]"}function Jo(t){var e=ca;this.g=[],this.w=e,this.u=t||null,this.f=this.a=!1,this.c=void 0,this.l=this.A=this.i=!1,this.h=0,this.b=null,this.o=0}function Zo(t,e,n){t.a=!0,t.c=n,t.f=!e,ra(t)}function ta(t){if(t.a){if(!t.l)throw new ia(t);t.l=!1}}function ea(t,e,n,r){t.g.push([e,n,r]),t.a&&ra(t)}function na(t){return F(t.g,function(t){return p(t[1])})}function ra(t){if(t.h&&t.a&&na(t)){var e=t.h,r=sa[e];r&&(n.clearTimeout(r.a),delete sa[e]),t.h=0}t.b&&(t.b.o--,delete t.b),e=t.c;for(var i=r=!1;t.g.length&&!t.i;){var o=t.g.shift(),a=o[0],s=o[1];if(o=o[2],a=t.f?s:a)try{var u=a.call(o||t.u,e);void 0!==u&&(t.f=t.f&&(u==e||u instanceof Error),t.c=e=u),(S(e)||"function"===typeof n.Promise&&e instanceof n.Promise)&&(i=!0,t.i=!0)}catch(c){e=c,t.f=!0,na(t)||(r=!0)}}t.c=e,i&&(u=b(t.m,t,!0),i=b(t.m,t,!1),e instanceof Jo?(ea(e,u,i),e.A=!0):e.then(u,i)),r&&(e=new aa(e),sa[e.a]=e,t.h=e.a)}function ia(){T.call(this)}function oa(){T.call(this)}function aa(t){this.a=n.setTimeout(b(this.c,this),0),this.b=t}(t=Vo.prototype).Ga=function(){"undefined"!=typeof e&&this.a&&(this.h="Timed out after "+this.g+"ms, aborting",Do(this.b,$o(this,this.h)),this.dispatchEvent("timeout"),this.abort(8))},t.abort=function(){this.a&&this.c&&(Do(this.b,$o(this,"Aborting")),this.c=!1,this.f=!0,this.a.abort(),this.f=!1,this.dispatchEvent("complete"),this.dispatchEvent("abort"),Ko(this))},t.va=function(){this.a&&(this.c&&(this.c=!1,this.f=!0,this.a.abort(),this.f=!1),Ko(this,!0)),Vo.pb.va.call(this)},t.Jb=function(){this.qa||(this.I||this.i||this.f?Ho(this):this.yc())},t.yc=function(){Ho(this)},t.getResponse=function(){try{if(!this.a)return null;if("response"in this.a)return this.a.response;switch(this.m){case Bo:case"text":return this.a.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in this.a)return this.a.mozResponseArrayBuffer}var t=this.b;return t&&t.log(So,"Response type "+this.m+" is not supported on this browser",void 0),null}catch(e){return Do(this.b,"Can not get response: "+e.message),null}},Jo.prototype.cancel=function(t){if(this.a)this.c instanceof Jo&&this.c.cancel();else{if(this.b){var e=this.b;delete this.b,t?e.cancel(t):(e.o--,0>=e.o&&e.cancel())}this.w?this.w.call(this.u,this):this.l=!0,this.a||(t=new oa(this),ta(this),Zo(this,!1,t))}},Jo.prototype.m=function(t,e){this.i=!1,Zo(this,t,e)},Jo.prototype.then=function(t,e,n){var r,i,o=new yt(function(t,e){r=t,i=e});return ea(this,r,function(t){t instanceof oa?o.cancel():i(t)}),o.then(t,e,n)},Jo.prototype.$goog_Thenable=!0,E(ia,T),ia.prototype.message="Deferred has already fired",ia.prototype.name="AlreadyCalledError",E(oa,T),oa.prototype.message="Deferred was canceled",oa.prototype.name="CanceledError",aa.prototype.c=function(){throw delete sa[this.a],this.b};var sa={};function ua(t){var e={},r=e.document||document,i=bn(t).toString(),o=document.createElement("SCRIPT"),u={Lb:o,Ga:void 0},c=new Jo(u),l=null,h=null!=e.timeout?e.timeout:5e3;return 0<h&&(l=window.setTimeout(function(){la(o,!0);var t=new pa(fa,"Timeout reached for loading script "+i);ta(c),Zo(c,!1,t)},h),u.Ga=l),o.onload=o.onreadystatechange=function(){o.readyState&&"loaded"!=o.readyState&&"complete"!=o.readyState||(la(o,e.hd||!1,l),ta(c),Zo(c,!0,null))},o.onerror=function(){la(o,!0,l);var t=new pa(ha,"Error while loading script "+i);ta(c),Zo(c,!1,t)},ut(u=e.attributes||{},{type:"text/javascript",charset:"UTF-8"}),On(o,u),function(t,e){t.src=bn(e),null===s&&(s=(e=(e=n.document).querySelector&&e.querySelector("script[nonce]"))&&(e=e.nonce||e.getAttribute("nonce"))&&a.test(e)?e:""),(e=s)&&t.setAttribute("nonce",e)}(o,t),function(t){var e;return(e=(t||document).getElementsByTagName("HEAD"))&&0!=e.length?e[0]:t.documentElement}(r).appendChild(o),c}function ca(){if(this&&this.Lb){var t=this.Lb;t&&"SCRIPT"==t.tagName&&la(t,!0,this.Ga)}}function la(t,e,r){null!=r&&n.clearTimeout(r),t.onload=u,t.onerror=u,t.onreadystatechange=u,e&&window.setTimeout(function(){t&&t.parentNode&&t.parentNode.removeChild(t)},0)}var ha=0,fa=1;function pa(t,e){var n="Jsloader error (code #"+t+")";e&&(n+=": "+e),T.call(this,n),this.code=t}function da(t){this.f=t}function ma(t,e,i){if(this.b=t,t=e||{},this.i=t.secureTokenEndpoint||"https://securetoken.googleapis.com/v1/token",this.o=t.secureTokenTimeout||va,this.f=it(t.secureTokenHeaders||ba),this.g=t.firebaseEndpoint||"https://www.googleapis.com/identitytoolkit/v3/relyingparty/",this.h=t.firebaseTimeout||_a,this.a=it(t.firebaseHeaders||wa),i&&(this.a["X-Client-Version"]=i,this.f["X-Client-Version"]=i),i="Node"==er(),!(i=n.XMLHttpRequest||i&&r.a.INTERNAL.node&&r.a.INTERNAL.node.XMLHttpRequest)&&!tr())throw new qr("internal-error","The XMLHttpRequest compatibility library was not found.");this.c=void 0,tr()?this.c=new No(self):nr()?this.c=new da(i):this.c=new go}E(pa,T),E(da,fo),da.prototype.a=function(){return new this.f},da.prototype.b=function(){return{}};var ya,ga="idToken",va=new wr(3e4,6e4),ba={"Content-Type":"application/x-www-form-urlencoded"},_a=new wr(3e4,6e4),wa={"Content-Type":"application/json"};function Ea(t,e){e?t.a["X-Firebase-Locale"]=e:delete t.a["X-Firebase-Locale"]}function Sa(t,e){e?(t.a["X-Client-Version"]=e,t.f["X-Client-Version"]=e):(delete t.a["X-Client-Version"],delete t.f["X-Client-Version"])}function Ta(t,e,r,i,o,a,s){(function(){var t=ur();return!((t=or(t)!=ir?null:(t=t.match(/\sChrome\/(\d+)/i))&&2==t.length?parseInt(t[1],10):null)&&30>t)&&(!Wt||!Zt||9<Zt)})()||tr()?t=b(t.m,t):(ya||(ya=new yt(function(t,e){!function(t,e){if(((window.gapi||{}).client||{}).request)t();else{n[ka]=function(){((window.gapi||{}).client||{}).request?t():e(Error("CORS_UNSUPPORTED"))};var r=_n(Ca,{onload:ka});!function(t,e){ea(t,null,e,void 0)}(ua(r),function(){e(Error("CORS_UNSUPPORTED"))})}}(t,e)})),t=b(t.l,t)),t(e,r,i,o,a,s)}ma.prototype.m=function(t,e,r,i,o,a){if(tr()&&("undefined"===typeof n.fetch||"undefined"===typeof n.Headers||"undefined"===typeof n.Request))throw new qr("operation-not-supported-in-this-environment","fetch, Headers and Request native APIs or equivalent Polyfills must be available to support HTTP requests from a Worker environment.");var s=new Vo(this.c);if(a){s.g=Math.max(0,a);var u=setTimeout(function(){s.dispatchEvent("timeout")},a)}Ne(s,"complete",function(){u&&clearTimeout(u);var t=null;try{t=JSON.parse(function(t){try{return t.a?t.a.responseText:""}catch(e){return Do(t.b,"Can not get responseText: "+e.message),""}}(this))||null}catch(n){t=null}e&&e(t)}),Re(s,"ready",function(){u&&clearTimeout(u),Ut(this)}),Re(s,"timeout",function(){u&&clearTimeout(u),Ut(this),e&&e(null)}),qo(s,t,r,i,o)};var Ca=new dn(gn,"https://apis.google.com/js/client.js?onload=%{onload}"),ka="__fcb"+Math.floor(1e6*Math.random()).toString();function xa(t){if(!i(t=t.email)||!Xn.test(t))throw new qr("invalid-email")}function Ia(t){"email"in t&&xa(t)}function Aa(t){if(!t[ga])throw new qr("internal-error")}function Pa(t){if(t.phoneNumber||t.temporaryProof){if(!t.phoneNumber||!t.temporaryProof)throw new qr("internal-error")}else{if(!t.sessionInfo)throw new qr("missing-verification-id");if(!t.code)throw new qr("missing-verification-code")}}ma.prototype.l=function(t,e,n,r,i){var o=this;ya.then(function(){window.gapi.client.setApiKey(o.b);var a=window.gapi.auth.getToken();window.gapi.auth.setToken(null),window.gapi.client.request({path:t,method:n,body:r,headers:i,authType:"none",callback:function(t){window.gapi.auth.setToken(a),e&&e(t)}})}).s(function(t){e&&e({error:{message:t&&t.message||"CORS_UNSUPPORTED"}})})},ma.prototype.Ra=function(){return fs(this,rs,{})},ma.prototype.qb=function(t,e){return fs(this,es,{idToken:t,email:e})},ma.prototype.rb=function(t,e){return fs(this,ns,{idToken:t,password:e})};var Da={displayName:"DISPLAY_NAME",photoUrl:"PHOTO_URL"};function Na(t){if(!t.requestUri||!t.sessionId&&!t.postBody&&!t.pendingToken)throw new qr("internal-error")}function Ra(t,e){return e.oauthIdToken&&e.providerId&&0==e.providerId.indexOf("oidc.")&&!e.pendingToken&&(t.sessionId?e.nonce=t.sessionId:t.postBody&&(ln(t=new an(t.postBody),"nonce")&&(e.nonce=t.get("nonce")))),e}function Oa(t){var e=null;if(t.needConfirmation?(t.code="account-exists-with-different-credential",e=ho(t)):"FEDERATED_USER_ID_ALREADY_LINKED"==t.errorMessage?(t.code="credential-already-in-use",e=ho(t)):"EMAIL_EXISTS"==t.errorMessage?(t.code="email-already-in-use",e=ho(t)):t.errorMessage&&(e=ps(t.errorMessage)),e)throw e;if(!t[ga])throw new qr("internal-error")}function Ma(t,e){return e.returnIdpCredential=!0,fs(t,is,e)}function Fa(t,e){return e.returnIdpCredential=!0,fs(t,as,e)}function La(t,e){return e.returnIdpCredential=!0,e.autoCreate=!1,fs(t,os,e)}function Va(t){if(!t.oobCode)throw new qr("invalid-action-code")}(t=ma.prototype).sb=function(t,e){var n={idToken:t},r=[];return nt(Da,function(t,i){var o=e[i];null===o?r.push(t):i in e&&(n[i]=o)}),r.length&&(n.deleteAttribute=r),fs(this,es,n)},t.lb=function(t,e){return ut(t={requestType:"PASSWORD_RESET",email:t},e),fs(this,Xa,t)},t.mb=function(t,e){return ut(t={requestType:"EMAIL_SIGNIN",email:t},e),fs(this,Qa,t)},t.kb=function(t,e){return ut(t={requestType:"VERIFY_EMAIL",idToken:t},e),fs(this,Ya,t)},t.Va=function(t){return fs(this,cs,t)},t.$a=function(t,e){return fs(this,Za,{oobCode:t,newPassword:e})},t.Ja=function(t){return fs(this,Ua,{oobCode:t})},t.Xa=function(t){return fs(this,Ba,{oobCode:t})};var Ba={endpoint:"setAccountInfo",C:Va,da:"email"},Ua={endpoint:"resetPassword",C:Va,J:function(t){var e=t.requestType;if(!e||!t.email&&"EMAIL_SIGNIN"!=e)throw new qr("internal-error")}},ja={endpoint:"signupNewUser",C:function(t){if(xa(t),!t.password)throw new qr("weak-password")},J:Aa,R:!0},qa={endpoint:"createAuthUri"},Ga={endpoint:"deleteAccount",T:["idToken"]},Wa={endpoint:"setAccountInfo",T:["idToken","deleteProvider"],C:function(t){if(!h(t.deleteProvider))throw new qr("internal-error")}},za={endpoint:"emailLinkSignin",T:["email","oobCode"],C:xa,J:Aa,R:!0},Ha={endpoint:"emailLinkSignin",T:["idToken","email","oobCode"],C:xa,J:Aa,R:!0},Ka={endpoint:"getAccountInfo"},Qa={endpoint:"getOobConfirmationCode",T:["requestType"],C:function(t){if("EMAIL_SIGNIN"!=t.requestType)throw new qr("internal-error");xa(t)},da:"email"},Ya={endpoint:"getOobConfirmationCode",T:["idToken","requestType"],C:function(t){if("VERIFY_EMAIL"!=t.requestType)throw new qr("internal-error")},da:"email"},Xa={endpoint:"getOobConfirmationCode",T:["requestType"],C:function(t){if("PASSWORD_RESET"!=t.requestType)throw new qr("internal-error");xa(t)},da:"email"},$a={vb:!0,endpoint:"getProjectConfig",Ib:"GET"},Ja={vb:!0,endpoint:"getRecaptchaParam",Ib:"GET",J:function(t){if(!t.recaptchaSiteKey)throw new qr("internal-error")}},Za={endpoint:"resetPassword",C:Va,da:"email"},ts={endpoint:"sendVerificationCode",T:["phoneNumber","recaptchaToken"],da:"sessionInfo"},es={endpoint:"setAccountInfo",T:["idToken"],C:Ia,R:!0},ns={endpoint:"setAccountInfo",T:["idToken"],C:function(t){if(Ia(t),!t.password)throw new qr("weak-password")},J:Aa,R:!0},rs={endpoint:"signupNewUser",J:Aa,R:!0},is={endpoint:"verifyAssertion",C:Na,Pa:Ra,J:Oa,R:!0},os={endpoint:"verifyAssertion",C:Na,Pa:Ra,J:function(t){if(t.errorMessage&&"USER_NOT_FOUND"==t.errorMessage)throw new qr("user-not-found");if(t.errorMessage)throw ps(t.errorMessage);if(!t[ga])throw new qr("internal-error")},R:!0},as={endpoint:"verifyAssertion",C:function(t){if(Na(t),!t.idToken)throw new qr("internal-error")},Pa:Ra,J:Oa,R:!0},ss={endpoint:"verifyCustomToken",C:function(t){if(!t.token)throw new qr("invalid-custom-token")},J:Aa,R:!0},us={endpoint:"verifyPassword",C:function(t){if(xa(t),!t.password)throw new qr("wrong-password")},J:Aa,R:!0},cs={endpoint:"verifyPhoneNumber",C:Pa,J:Aa},ls={endpoint:"verifyPhoneNumber",C:function(t){if(!t.idToken)throw new qr("internal-error");Pa(t)},J:function(t){if(t.temporaryProof)throw t.code="credential-already-in-use",ho(t);Aa(t)}},hs={Xb:{USER_NOT_FOUND:"user-not-found"},endpoint:"verifyPhoneNumber",C:Pa,J:Aa};function fs(t,e,n){if(!function(t,e){if(!e||!e.length)return!0;if(!t)return!1;for(var n=0;n<e.length;n++){var r=t[e[n]];if(void 0===r||null===r||""===r)return!1}return!0}(n,e.T))return Tt(new qr("internal-error"));var r,i=e.Ib||"POST";return St(n).then(e.C).then(function(){return e.R&&(n.returnSecureToken=!0),function(t,e,n,r,i,o){var a=Ye(t.g+e);Ke(a,"key",t.b),o&&Ke(a,"cb",w().toString());var s="GET"==n;if(s)for(var u in r)r.hasOwnProperty(u)&&Ke(a,u,r[u]);return new yt(function(e,o){Ta(t,a.toString(),function(t){t?t.error?o(ds(t,i||{})):e(t):o(new qr("network-request-failed"))},n,s?void 0:Vn(yr(r)),t.a,t.h.get())})}(t,e.endpoint,i,n,e.Xb,e.vb||!1)}).then(function(t){return r=t,e.Pa?e.Pa(n,r):r}).then(e.J).then(function(){if(!e.da)return r;if(!(e.da in r))throw new qr("internal-error");return r[e.da]})}function ps(t){return ds({error:{errors:[{message:t}],code:400,message:t}})}function ds(t,e){var n=(t.error&&t.error.errors&&t.error.errors[0]||{}).reason||"",r={keyInvalid:"invalid-api-key",ipRefererBlocked:"app-not-authorized"};if(n=r[n]?new qr(r[n]):null)return n;for(var i in n=t.error&&t.error.message||"",ut(r={INVALID_CUSTOM_TOKEN:"invalid-custom-token",CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_EMAIL:"invalid-email",INVALID_PASSWORD:"wrong-password",USER_DISABLED:"user-disabled",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_OR_INVALID_NONCE:"missing-or-invalid-nonce",INVALID_MESSAGE_PAYLOAD:"invalid-message-payload",INVALID_RECIPIENT_EMAIL:"invalid-recipient-email",INVALID_SENDER:"invalid-sender",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",INVALID_PROVIDER_ID:"invalid-provider-id",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",CORS_UNSUPPORTED:"cors-unsupported",DYNAMIC_LINK_NOT_ACTIVATED:"dynamic-link-not-activated",INVALID_APP_ID:"invalid-app-id",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",WEAK_PASSWORD:"weak-password",OPERATION_NOT_ALLOWED:"operation-not-allowed",USER_CANCELLED:"user-cancelled",CAPTCHA_CHECK_FAILED:"captcha-check-failed",INVALID_APP_CREDENTIAL:"invalid-app-credential",INVALID_CODE:"invalid-verification-code",INVALID_PHONE_NUMBER:"invalid-phone-number",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_APP_CREDENTIAL:"missing-app-credential",MISSING_CODE:"missing-verification-code",MISSING_PHONE_NUMBER:"missing-phone-number",MISSING_SESSION_INFO:"missing-verification-id",QUOTA_EXCEEDED:"quota-exceeded",SESSION_EXPIRED:"code-expired",REJECTED_CREDENTIAL:"rejected-credential",INVALID_CONTINUE_URI:"invalid-continue-uri",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",MISSING_IOS_BUNDLE_ID:"missing-ios-bundle-id",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_DYNAMIC_LINK_DOMAIN:"invalid-dynamic-link-domain",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",INVALID_CERT_HASH:"invalid-cert-hash"},e||{}),e=(e=n.match(/^[^\s]+\s*:\s*(.*)$/))&&1<e.length?e[1]:void 0,r)if(0===n.indexOf(i))return new qr(r[i],e);return!e&&t&&(e=mr(t)),new qr("internal-error",e)}function ms(t){this.b=t,this.a=null,this.gb=function(t){return(bs||(bs=new yt(function(t,e){function r(){_r(),cr("gapi.load")("gapi.iframes",{callback:t,ontimeout:function(){_r(),e(Error("Network Error"))},timeout:gs.get()})}if(cr("gapi.iframes.Iframe"))t();else if(cr("gapi.load"))r();else{var i="__iframefcb"+Math.floor(1e6*Math.random()).toString();n[i]=function(){cr("gapi.load")?r():e(Error("Network Error"))},St(ua(i=_n(ys,{onload:i}))).s(function(){e(Error("Network Error"))})}}).s(function(t){throw bs=null,t}))).then(function(){return new yt(function(e,n){cr("gapi.iframes.getContext")().open({where:document.body,url:t.b,messageHandlersFilter:cr("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"),attributes:{style:{position:"absolute",top:"-100px",width:"1px",height:"1px"}},dontclear:!0},function(r){function i(){clearTimeout(o),e()}t.a=r,t.a.restyle({setHideOnLeave:!1});var o=setTimeout(function(){n(Error("Network Error"))},vs.get());r.ping(i).then(i,function(){n(Error("Network Error"))})})})})}(this)}var ys=new dn(gn,"https://apis.google.com/js/api.js?onload=%{onload}"),gs=new wr(3e4,6e4),vs=new wr(5e3,15e3),bs=null;function _s(t,e,n){this.i=t,this.g=e,this.h=n,this.f=null,this.a=Xe(this.i,"/__/auth/iframe"),Ke(this.a,"apiKey",this.g),Ke(this.a,"appName",this.h),this.b=null,this.c=[]}function ws(t,e,n,r,i){this.m=t,this.l=e,this.c=n,this.o=r,this.h=this.g=this.i=null,this.a=i,this.f=null}function Es(t){try{return r.a.app(t).auth().ya()}catch(e){return[]}}function Ss(t,e,n,r,i){this.l=t,this.f=e,this.b=n,this.c=r||null,this.h=i||null,this.m=this.u=this.w=null,this.g=[],this.o=this.a=null}function Ts(t){var e=Wn();return function(t){return fs(t,$a,{}).then(function(t){return t.authorizedDomains||[]})}(t).then(function(t){t:{var n=Ye(e),r=n.c;n=n.b;for(var i=0;i<t.length;i++){var o=t[i],a=n,s=r;if(0==o.indexOf("chrome-extension://")?a=Ye(o).b==a&&"chrome-extension"==s:"http"!=s&&"https"!=s?a=!1:Yn.test(o)?a=a==o:(o=o.split(".").join("\\."),a=new RegExp("^(.+\\."+o+"|"+o+")$","i").test(a)),a){t=!0;break t}}t=!1}if(!t)throw new co(Wn())})}function Cs(t){return t.o?t.o:(t.o=$n().then(function(){if(!t.u){var e=t.c,n=t.h,r=Es(t.b),i=new _s(t.l,t.f,t.b);i.f=e,i.b=n,i.c=j(r||[]),t.u=i.toString()}t.i=new ms(t.u),function(t){if(!t.i)throw Error("IfcHandler must be initialized!");!function(t,e){t.gb.then(function(){t.a.register("authEvent",e,cr("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"))})}(t.i,function(e){var n={};if(e&&e.authEvent){var r=!1;for(e=oo(e.authEvent),n=0;n<t.g.length;n++)r=t.g[n](e)||r;return(n={}).status=r?"ACK":"ERROR",St(n)}return n.status="ERROR",St(n)})}(t)}),t.o)}function ks(t){return t.m||(t.w=t.c?sr(t.c,Es(t.b)):null,t.m=new ma(t.f,hi(t.h),t.w)),t.m}function xs(t,e,n,r,i,o,a,s,u,c){return(t=new ws(t,e,n,r,i)).i=o,t.g=a,t.h=s,t.b=it(u||null),t.f=c,t.toString()}function Is(t){if(this.a=t||r.a.INTERNAL.reactNative&&r.a.INTERNAL.reactNative.AsyncStorage,!this.a)throw new qr("internal-error","The React Native compatibility library was not found.");this.type="asyncStorage"}function As(t){this.b=t,this.a={},this.c=b(this.f,this)}_s.prototype.toString=function(){return this.f?Ke(this.a,"v",this.f):cn(this.a.a,"v"),this.b?Ke(this.a,"eid",this.b):cn(this.a.a,"eid"),this.c.length?Ke(this.a,"fw",this.c.join(",")):cn(this.a.a,"fw"),this.a.toString()},ws.prototype.toString=function(){var t=Xe(this.m,"/__/auth/handler");if(Ke(t,"apiKey",this.l),Ke(t,"appName",this.c),Ke(t,"authType",this.o),this.a.isOAuthProvider){var e=this.a;try{var n=r.a.app(this.c).auth().ea()}catch(u){n=null}for(var i in e.ab=n,Ke(t,"providerId",this.a.providerId),n=yr((e=this.a).zb))n[i]=n[i].toString();i=e.Fc,n=it(n);for(var o=0;o<i.length;o++){var a=i[o];a in n&&delete n[a]}e.eb&&e.ab&&!n[e.eb]&&(n[e.eb]=e.ab),rt(n)||Ke(t,"customParameters",mr(n))}if("function"===typeof this.a.Fb&&((e=this.a.Fb()).length&&Ke(t,"scopes",e.join(","))),this.i?Ke(t,"redirectUrl",this.i):cn(t.a,"redirectUrl"),this.g?Ke(t,"eventId",this.g):cn(t.a,"eventId"),this.h?Ke(t,"v",this.h):cn(t.a,"v"),this.b)for(var s in this.b)this.b.hasOwnProperty(s)&&!Qe(t,s)&&Ke(t,s,this.b[s]);return this.f?Ke(t,"eid",this.f):cn(t.a,"eid"),(s=Es(this.c)).length&&Ke(t,"fw",s.join(",")),t.toString()},(t=Ss.prototype).Ea=function(t,e,n){var r=new qr("popup-closed-by-user"),i=new qr("web-storage-unsupported"),o=this,a=!1;return this.ga().then(function(){(function(t){var e={type:"webStorageSupport"};return Cs(t).then(function(){return function(t,e){return t.gb.then(function(){return new yt(function(n){t.a.send(e.type,e,n,cr("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"))})})}(t.i,e)}).then(function(t){if(t&&t.length&&"undefined"!==typeof t[0].webStorageSupport)return t[0].webStorageSupport;throw Error()})})(o).then(function(n){n||(t&&Kn(t),e(i),a=!0)})}).s(function(){}).then(function(){if(!a)return function(t){return new yt(function(e){return function n(){Fe(2e3).then(function(){if(t&&!t.closed)return n();e()})}()})}(t)}).then(function(){if(!a)return Fe(n).then(function(){e(r)})})},t.Mb=function(){var t=ur();return!dr(t)&&!br(t)},t.Hb=function(){return!1},t.Db=function(t,e,n,r,i,o,a){if(!t)return Tt(new qr("popup-blocked"));if(a&&!dr())return this.ga().s(function(e){Kn(t),i(e)}),r(),St();this.a||(this.a=Ts(ks(this)));var s=this;return this.a.then(function(){var e=s.ga().s(function(e){throw Kn(t),i(e),e});return r(),e}).then(function(){(ro(n),a)||zn(xs(s.l,s.f,s.b,e,n,null,o,s.c,void 0,s.h),t)}).s(function(t){throw"auth/network-request-failed"==t.code&&(s.a=null),t})},t.Ca=function(t,e,n){this.a||(this.a=Ts(ks(this)));var r=this;return this.a.then(function(){ro(e),zn(xs(r.l,r.f,r.b,t,e,Wn(),n,r.c,void 0,r.h))}).s(function(t){throw"auth/network-request-failed"==t.code&&(r.a=null),t})},t.ga=function(){var t=this;return Cs(this).then(function(){return t.i.gb}).s(function(){throw t.a=null,new qr("network-request-failed")})},t.Qb=function(){return!0},t.wa=function(t){this.g.push(t)},t.Ka=function(t){B(this.g,function(e){return e==t})},(t=Is.prototype).get=function(t){return St(this.a.getItem(t)).then(function(t){return t&&gr(t)})},t.set=function(t,e){return St(this.a.setItem(t,mr(e)))},t.P=function(t){return St(this.a.removeItem(t))},t.Y=function(){},t.ca=function(){};var Ps,Ds=[];function Ns(t){this.a=t}function Rs(t){this.c=t,this.b=!1,this.a=[]}function Os(t,e,n,r){var i,o,a,s,u=n||{},c=null;if(t.b)return Tt(Error("connection_unavailable"));var l=r?800:50,h="undefined"!==typeof MessageChannel?new MessageChannel:null;return new yt(function(n,r){h?(i=Math.floor(Math.random()*Math.pow(10,20)).toString(),h.port1.start(),a=setTimeout(function(){r(Error("unsupported_event"))},l),c={messageChannel:h,onMessage:o=function(t){t.data.eventId===i&&("ack"===t.data.status?(clearTimeout(a),s=setTimeout(function(){r(Error("timeout"))},3e3)):"done"===t.data.status?(clearTimeout(s),"undefined"!==typeof t.data.response?n(t.data.response):r(Error("unknown_error"))):(clearTimeout(a),clearTimeout(s),r(Error("invalid_response"))))}},t.a.push(c),h.port1.addEventListener("message",o),t.c.postMessage({eventType:e,eventId:i,data:u},[h.port2])):r(Error("connection_unavailable"))}).then(function(e){return Ms(t,c),e}).s(function(e){throw Ms(t,c),e})}function Ms(t,e){if(e){var n=e.messageChannel,r=e.onMessage;n&&(n.port1.removeEventListener("message",r),n.port1.close()),B(t.a,function(t){return t==e})}}function Fs(){if(!Bs())throw new qr("web-storage-unsupported");this.c={},this.a=[],this.b=0,this.l=n.indexedDB,this.type="indexedDB",this.g=this.o=this.f=this.i=null,this.u=!1,this.h=null;var t=this;tr()&&self?(this.o=function(){var t=tr()?self:null;if(O(Ds,function(n){n.b==t&&(e=n)}),!e){var e=new As(t);Ds.push(e)}return e}(),this.o.subscribe("keyChanged",function(e,n){return Ws(t).then(function(e){return 0<e.length&&O(t.a,function(t){t(e)}),{keyProcessed:L(e,n.key)}})}),this.o.subscribe("ping",function(){return St(["keyChanged"])})):function(){var t=n.navigator;return t&&t.serviceWorker?St().then(function(){return t.serviceWorker.ready}).then(function(t){return t.active||null}).s(function(){return null}):St(null)}().then(function(e){(t.h=e)&&(t.g=new Rs(new Ns(e)),Os(t.g,"ping",null,!0).then(function(e){e[0].fulfilled&&L(e[0].value,"keyChanged")&&(t.u=!0)}).s(function(){}))})}function Ls(t){return new yt(function(e,n){var r=t.l.open("firebaseLocalStorageDb",1);r.onerror=function(t){try{t.preventDefault()}catch(e){}n(Error(t.target.error))},r.onupgradeneeded=function(t){t=t.target.result;try{t.createObjectStore("firebaseLocalStorage",{keyPath:"fbase_key"})}catch(e){n(e)}},r.onsuccess=function(r){(r=r.target.result).objectStoreNames.contains("firebaseLocalStorage")?e(r):function(t){return new yt(function(e,n){var r=t.l.deleteDatabase("firebaseLocalStorageDb");r.onsuccess=function(){e()},r.onerror=function(t){n(Error(t.target.error))}})}(t).then(function(){return Ls(t)}).then(function(t){e(t)}).s(function(t){n(t)})}})}function Vs(t){return t.m||(t.m=Ls(t)),t.m}function Bs(){try{return!!n.indexedDB}catch(xo){return!1}}function Us(t){return t.objectStore("firebaseLocalStorage")}function js(t,e){return t.transaction(["firebaseLocalStorage"],e?"readwrite":"readonly")}function qs(t){return new yt(function(e,n){t.onsuccess=function(t){t&&t.target?e(t.target.result):e()},t.onerror=function(t){n(t.target.error)}})}function Gs(t,e){return t.g&&t.h&&function(){var t=n.navigator;return t&&t.serviceWorker&&t.serviceWorker.controller||null}()===t.h?Os(t.g,"keyChanged",{key:e},t.u).then(function(){}).s(function(){}):St()}function Ws(t){return Vs(t).then(function(t){var e=Us(js(t,!1));return e.getAll?qs(e.getAll()):new yt(function(t,n){var r=[],i=e.openCursor();i.onsuccess=function(e){(e=e.target.result)?(r.push(e.value),e.continue()):t(r)},i.onerror=function(t){n(t.target.error)}})}).then(function(e){var n={},r=[];if(0==t.b){for(r=0;r<e.length;r++)n[e[r].fbase_key]=e[r].value;r=function t(e,n){var r,i=[];for(r in e)r in n?typeof e[r]!=typeof n[r]?i.push(r):"object"==typeof e[r]&&null!=e[r]&&null!=n[r]?0<t(e[r],n[r]).length&&i.push(r):e[r]!==n[r]&&i.push(r):i.push(r);for(r in n)r in e||i.push(r);return i}(t.c,n),t.c=n}return r})}function zs(t){t.i&&t.i.cancel("STOP_EVENT"),t.f&&(clearTimeout(t.f),t.f=null)}function Hs(t){var e=this,n=null;this.a=[],this.type="indexedDB",this.c=t,this.b=St().then(function(){if(Bs()){var t=vr(),r="__sak"+t;return Ps||(Ps=new Fs),(n=Ps).set(r,t).then(function(){return n.get(r)}).then(function(e){if(e!==t)throw Error("indexedDB not supported!");return n.P(r)}).then(function(){return n}).s(function(){return e.c})}return e.c}).then(function(t){return e.type=t.type,t.Y(function(t){O(e.a,function(e){e(t)})}),t})}function Ks(){this.a={},this.type="inMemory"}function Qs(){if(!function(){var t="Node"==er();if(!(t=Ys()||t&&r.a.INTERNAL.node&&r.a.INTERNAL.node.localStorage))return!1;try{return t.setItem("__sak","1"),t.removeItem("__sak"),!0}catch(e){return!1}}()){if("Node"==er())throw new qr("internal-error","The LocalStorage compatibility library was not found.");throw new qr("web-storage-unsupported")}this.a=Ys()||r.a.INTERNAL.node.localStorage,this.type="localStorage"}function Ys(){try{var t=n.localStorage,e=vr();return t&&(t.setItem(e,"1"),t.removeItem(e)),t}catch(r){return null}}function Xs(){this.type="nullStorage"}function $s(){if(!function(){var t="Node"==er();if(!(t=Js()||t&&r.a.INTERNAL.node&&r.a.INTERNAL.node.sessionStorage))return!1;try{return t.setItem("__sak","1"),t.removeItem("__sak"),!0}catch(e){return!1}}()){if("Node"==er())throw new qr("internal-error","The SessionStorage compatibility library was not found.");throw new qr("web-storage-unsupported")}this.a=Js()||r.a.INTERNAL.node.sessionStorage,this.type="sessionStorage"}function Js(){try{var t=n.sessionStorage,e=vr();return t&&(t.setItem(e,"1"),t.removeItem(e)),t}catch(r){return null}}function Zs(){var t={};t.Browser=nu,t.Node=ru,t.ReactNative=iu,t.Worker=ou,this.a=t[er()]}As.prototype.f=function(t){var e=t.data.eventType,n=t.data.eventId,r=this.a[e];if(r&&0<r.length){t.ports[0].postMessage({status:"ack",eventId:n,eventType:e,response:null});var i=[];O(r,function(e){i.push(St().then(function(){return e(t.origin,t.data.data)}))}),kt(i).then(function(r){var i=[];O(r,function(t){i.push({fulfilled:t.Eb,value:t.value,reason:t.reason?t.reason.message:void 0})}),O(i,function(t){for(var e in t)"undefined"===typeof t[e]&&delete t[e]}),t.ports[0].postMessage({status:"done",eventId:n,eventType:e,response:i})})}},As.prototype.subscribe=function(t,e){rt(this.a)&&this.b.addEventListener("message",this.c),"undefined"===typeof this.a[t]&&(this.a[t]=[]),this.a[t].push(e)},As.prototype.unsubscribe=function(t,e){"undefined"!==typeof this.a[t]&&e?(B(this.a[t],function(t){return t==e}),0==this.a[t].length&&delete this.a[t]):e||delete this.a[t],rt(this.a)&&this.b.removeEventListener("message",this.c)},Ns.prototype.postMessage=function(t,e){this.a.postMessage(t,e)},Rs.prototype.close=function(){for(;0<this.a.length;)Ms(this,this.a[0]);this.b=!0},(t=Fs.prototype).set=function(t,e){var n,r=!1,i=this;return Vs(this).then(function(e){return qs((e=Us(js(n=e,!0))).get(t))}).then(function(o){var a=Us(js(n,!0));return o?(o.value=e,qs(a.put(o))):(i.b++,r=!0,(o={}).fbase_key=t,o.value=e,qs(a.add(o)))}).then(function(){return i.c[t]=e,Gs(i,t)}).ia(function(){r&&i.b--})},t.get=function(t){return Vs(this).then(function(e){return qs(Us(js(e,!1)).get(t))}).then(function(t){return t&&t.value})},t.P=function(t){var e=!1,n=this;return Vs(this).then(function(r){return e=!0,n.b++,qs(Us(js(r,!0)).delete(t))}).then(function(){return delete n.c[t],Gs(n,t)}).ia(function(){e&&n.b--})},t.Y=function(t){0==this.a.length&&function(t){zs(t),function e(){t.f=setTimeout(function(){t.i=Ws(t).then(function(e){0<e.length&&O(t.a,function(t){t(e)})}).then(function(){e()}).s(function(t){"STOP_EVENT"!=t.message&&e()})},800)}()}(this),this.a.push(t)},t.ca=function(t){B(this.a,function(e){return e==t}),0==this.a.length&&zs(this)},(t=Hs.prototype).get=function(t){return this.b.then(function(e){return e.get(t)})},t.set=function(t,e){return this.b.then(function(n){return n.set(t,e)})},t.P=function(t){return this.b.then(function(e){return e.P(t)})},t.Y=function(t){this.a.push(t)},t.ca=function(t){B(this.a,function(e){return e==t})},(t=Ks.prototype).get=function(t){return St(this.a[t])},t.set=function(t,e){return this.a[t]=e,St()},t.P=function(t){return delete this.a[t],St()},t.Y=function(){},t.ca=function(){},(t=Qs.prototype).get=function(t){var e=this;return St().then(function(){return gr(e.a.getItem(t))})},t.set=function(t,e){var n=this;return St().then(function(){var r=mr(e);null===r?n.P(t):n.a.setItem(t,r)})},t.P=function(t){var e=this;return St().then(function(){e.a.removeItem(t)})},t.Y=function(t){n.window&&be(n.window,"storage",t)},t.ca=function(t){n.window&&Ee(n.window,"storage",t)},(t=Xs.prototype).get=function(){return St(null)},t.set=function(){return St()},t.P=function(){return St()},t.Y=function(){},t.ca=function(){},(t=$s.prototype).get=function(t){var e=this;return St().then(function(){return gr(e.a.getItem(t))})},t.set=function(t,e){var n=this;return St().then(function(){var r=mr(e);null===r?n.P(t):n.a.setItem(t,r)})},t.P=function(t){var e=this;return St().then(function(){e.a.removeItem(t)})},t.Y=function(){},t.ca=function(){};var tu,eu,nu={B:Qs,Sa:$s},ru={B:Qs,Sa:$s},iu={B:Is,Sa:Xs},ou={B:Qs,Sa:Xs},au={ad:"local",NONE:"none",cd:"session"};function su(){var t=!(br(ur())||!Zn()),e=dr(),r=lr();this.m=t,this.h=e,this.o=r,this.a={},tu||(tu=new Zs),t=tu;try{this.g=!Gn()&&Tr()||!n.indexedDB?new t.a.B:new Hs(tr()?new Ks:new t.a.B)}catch(i){this.g=new Ks,this.h=!0}try{this.i=new t.a.Sa}catch(i){this.i=new Ks}this.l=new Ks,this.f=b(this.Pb,this),this.b={}}function uu(){return eu||(eu=new su),eu}function cu(t,e){switch(e){case"session":return t.i;case"none":return t.l;default:return t.g}}function lu(t,e){return"firebase:"+t.name+(e?":"+e:"")}function hu(t,e,n){return n=lu(e,n),"local"==e.B&&(t.b[n]=null),cu(t,e.B).P(n)}function fu(t){t.c&&(clearInterval(t.c),t.c=null)}function pu(t){this.a=t,this.b=uu()}(t=su.prototype).get=function(t,e){return cu(this,t.B).get(lu(t,e))},t.set=function(t,e,n){var r=lu(t,n),i=this,o=cu(this,t.B);return o.set(r,e).then(function(){return o.get(r)}).then(function(e){"local"==t.B&&(i.b[r]=e)})},t.addListener=function(t,e,r){t=lu(t,e),this.o&&(this.b[t]=n.localStorage.getItem(t)),rt(this.a)&&(cu(this,"local").Y(this.f),this.h||(Gn()||!Tr())&&n.indexedDB||!this.o||function(t){fu(t),t.c=setInterval(function(){for(var e in t.a){var r=n.localStorage.getItem(e),i=t.b[e];r!=i&&(t.b[e]=r,r=new ue({type:"storage",key:e,target:window,oldValue:i,newValue:r,a:!0}),t.Pb(r))}},1e3)}(this)),this.a[t]||(this.a[t]=[]),this.a[t].push(r)},t.removeListener=function(t,e,n){t=lu(t,e),this.a[t]&&(B(this.a[t],function(t){return t==n}),0==this.a[t].length&&delete this.a[t]),rt(this.a)&&(cu(this,"local").ca(this.f),fu(this))},t.Pb=function(t){if(t&&t.f){var e=t.a.key;if(null==e)for(var r in this.a){var i=this.b[r];"undefined"===typeof i&&(i=null);var o=n.localStorage.getItem(r);o!==i&&(this.b[r]=o,this.Ya(r))}else if(0==e.indexOf("firebase:")&&this.a[e]){if("undefined"!==typeof t.a.a?cu(this,"local").ca(this.f):fu(this),this.m)if(r=n.localStorage.getItem(e),(i=t.a.newValue)!==r)null!==i?n.localStorage.setItem(e,i):n.localStorage.removeItem(e);else if(this.b[e]===i&&"undefined"===typeof t.a.a)return;var a=this;r=function(){"undefined"===typeof t.a.a&&a.b[e]===n.localStorage.getItem(e)||(a.b[e]=n.localStorage.getItem(e),a.Ya(e))},Wt&&Zt&&10==Zt&&n.localStorage.getItem(e)!==t.a.newValue&&t.a.newValue!==t.a.oldValue?setTimeout(r,10):r()}}else O(t,b(this.Ya,this))},t.Ya=function(t){this.a[t]&&O(this.a[t],function(t){t()})};var du,mu={name:"authEvent",B:"local"};function yu(){this.a=uu()}function gu(t,e){this.b=vu,this.f=n.Uint8Array?new Uint8Array(this.b):Array(this.b),this.g=this.c=0,this.a=[],this.i=t,this.h=e,this.o=n.Int32Array?new Int32Array(64):Array(64),void 0!==du||(du=n.Int32Array?new Int32Array(Cu):Cu),this.reset()}E(gu,function(){this.b=-1});for(var vu=64,bu=vu-1,_u=[],wu=0;wu<bu;wu++)_u[wu]=0;var Eu=U(128,_u);function Su(t){for(var e=t.f,n=t.o,r=0,i=0;i<e.length;)n[r++]=e[i]<<24|e[i+1]<<16|e[i+2]<<8|e[i+3],i=4*r;for(e=16;64>e;e++){i=0|n[e-15],r=0|n[e-2];var o=(0|n[e-16])+((i>>>7|i<<25)^(i>>>18|i<<14)^i>>>3)|0,a=(0|n[e-7])+((r>>>17|r<<15)^(r>>>19|r<<13)^r>>>10)|0;n[e]=o+a|0}r=0|t.a[0],i=0|t.a[1];var s=0|t.a[2],u=0|t.a[3],c=0|t.a[4],l=0|t.a[5],h=0|t.a[6];for(o=0|t.a[7],e=0;64>e;e++){var f=((r>>>2|r<<30)^(r>>>13|r<<19)^(r>>>22|r<<10))+(r&i^r&s^i&s)|0;a=(o=o+((c>>>6|c<<26)^(c>>>11|c<<21)^(c>>>25|c<<7))|0)+((a=(a=c&l^~c&h)+(0|du[e])|0)+(0|n[e])|0)|0,o=h,h=l,l=c,c=u+a|0,u=s,s=i,i=r,r=a+f|0}t.a[0]=t.a[0]+r|0,t.a[1]=t.a[1]+i|0,t.a[2]=t.a[2]+s|0,t.a[3]=t.a[3]+u|0,t.a[4]=t.a[4]+c|0,t.a[5]=t.a[5]+l|0,t.a[6]=t.a[6]+h|0,t.a[7]=t.a[7]+o|0}function Tu(t,e,n){void 0===n&&(n=e.length);var r=0,o=t.c;if(i(e))for(;r<n;)t.f[o++]=e.charCodeAt(r++),o==t.b&&(Su(t),o=0);else{if(!f(e))throw Error("message must be string or array");for(;r<n;){var a=e[r++];if(!("number"==typeof a&&0<=a&&255>=a&&a==(0|a)))throw Error("message must be a byte array");t.f[o++]=a,o==t.b&&(Su(t),o=0)}}t.c=o,t.g+=n}gu.prototype.reset=function(){this.g=this.c=0,this.a=n.Int32Array?new Int32Array(this.h):j(this.h)};var Cu=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function ku(){gu.call(this,8,xu)}E(ku,gu);var xu=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225];function Iu(t,e,n,r,i){this.l=t,this.i=e,this.o=n,this.m=r||null,this.u=i||null,this.h=e+":"+n,this.w=new yu,this.g=new pu(this.h),this.f=null,this.b=[],this.a=this.c=null}function Au(t){return new qr("invalid-cordova-configuration",t)}function Pu(t){var e=new ku;Tu(e,t),t=[];var n=8*e.g;56>e.c?Tu(e,Eu,56-e.c):Tu(e,Eu,e.b-(e.c-56));for(var r=63;56<=r;r--)e.f[r]=255&n,n/=256;for(Su(e),r=n=0;r<e.i;r++)for(var i=24;0<=i;i-=8)t[n++]=e.a[r]>>i&255;return function(t){return M(t,function(t){return 1<(t=t.toString(16)).length?t:"0"+t}).join("")}(t)}function Du(t,e){for(var n=0;n<t.b.length;n++)try{t.b[n](e)}catch(r){}}function Nu(t){return t.f||(t.f=t.ga().then(function(){return new yt(function(e){t.wa(function n(r){return e(r),t.Ka(n),!1}),function(t){function e(e){i=!0,o&&o.cancel(),Ru(t).then(function(n){var i=r;if(n&&e&&e.url){var o=null;-1!=(i=ki(e.url)).indexOf("/__/auth/callback")&&(o=(o="object"===typeof(o=gr(Qe(o=Ye(i),"firebaseError")||null))?Gr(o):null)?new io(n.b,n.c,null,null,o):new io(n.b,n.c,i,n.g)),i=o||r}Du(t,i)})}var r=new io("unknown",null,null,null,new qr("no-auth-event")),i=!1,o=Fe(500).then(function(){return Ru(t).then(function(){i||Du(t,r)})}),a=n.handleOpenURL;n.handleOpenURL=function(t){if(0==t.toLowerCase().indexOf(cr("BuildInfo.packageName",n).toLowerCase()+"://")&&e({url:t}),"function"===typeof a)try{a(t)}catch(r){console.error(r)}},uo||(uo=new ao),uo.subscribe(e)}(t)})})),t.f}function Ru(t){var e=null;return function(t){return t.b.get(mu,t.a).then(function(t){return oo(t)})}(t.g).then(function(n){return e=n,hu((n=t.g).b,mu,n.a)}).then(function(){return e})}function Ou(t){this.a=t,this.b=uu()}(t=Iu.prototype).ga=function(){return this.za?this.za:this.za=(Jn(void 0)?$n().then(function(){return new yt(function(t,e){var r=n.document,i=setTimeout(function(){e(Error("Cordova framework is not ready."))},1e3);r.addEventListener("deviceready",function(){clearTimeout(i),t()},!1)})}):Tt(Error("Cordova must run in an Android or iOS file scheme."))).then(function(){if("function"!==typeof cr("universalLinks.subscribe",n))throw Au("cordova-universal-links-plugin-fix is not installed");if("undefined"===typeof cr("BuildInfo.packageName",n))throw Au("cordova-plugin-buildinfo is not installed");if("function"!==typeof cr("cordova.plugins.browsertab.openUrl",n))throw Au("cordova-plugin-browsertab is not installed");if("function"!==typeof cr("cordova.InAppBrowser.open",n))throw Au("cordova-plugin-inappbrowser is not installed")},function(){throw new qr("cordova-not-ready")})},t.Ea=function(t,e){return e(new qr("operation-not-supported-in-this-environment")),St()},t.Db=function(){return Tt(new qr("operation-not-supported-in-this-environment"))},t.Qb=function(){return!1},t.Mb=function(){return!0},t.Hb=function(){return!0},t.Ca=function(t,e,r){if(this.c)return Tt(new qr("redirect-operation-pending"));var i=this,o=n.document,a=null,s=null,u=null,c=null;return this.c=St().then(function(){return ro(e),Nu(i)}).then(function(){return function(t,e,r,i){var o=function(){for(var t=20,e=[];0<t;)e.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(Math.floor(62*Math.random()))),t--;return e.join("")}(),a=new io(e,i,null,o,new qr("no-auth-event")),s=cr("BuildInfo.packageName",n);if("string"!==typeof s)throw new qr("invalid-cordova-configuration");var u=cr("BuildInfo.displayName",n),c={};if(ur().toLowerCase().match(/iphone|ipad|ipod/))c.ibi=s;else{if(!ur().toLowerCase().match(/android/))return Tt(new qr("operation-not-supported-in-this-environment"));c.apn=s}u&&(c.appDisplayName=u),o=Pu(o),c.sessionId=o;var l=xs(t.l,t.i,t.o,e,r,null,i,t.m,c,t.u);return t.ga().then(function(){var e=t.h;return t.w.a.set(mu,a.v(),e)}).then(function(){var e=cr("cordova.plugins.browsertab.isAvailable",n);if("function"!==typeof e)throw new qr("invalid-cordova-configuration");var r=null;e(function(e){if(e){if("function"!==typeof(r=cr("cordova.plugins.browsertab.openUrl",n)))throw new qr("invalid-cordova-configuration");r(l)}else{if("function"!==typeof(r=cr("cordova.InAppBrowser.open",n)))throw new qr("invalid-cordova-configuration");e=!(!(e=ur()).match(/(iPad|iPhone|iPod).*OS 7_\d/i)&&!e.match(/(iPad|iPhone|iPod).*OS 8_\d/i)),t.a=r(l,e?"_blank":"_system","location=yes")}})})}(i,t,e,r)}).then(function(){return new yt(function(t,e){s=function(){var e=cr("cordova.plugins.browsertab.close",n);return t(),"function"===typeof e&&e(),i.a&&"function"===typeof i.a.close&&(i.a.close(),i.a=null),!1},i.wa(s),u=function(){a||(a=Fe(2e3).then(function(){e(new qr("redirect-cancelled-by-user"))}))},c=function(){Er()&&u()},o.addEventListener("resume",u,!1),ur().toLowerCase().match(/android/)||o.addEventListener("visibilitychange",c,!1)}).s(function(t){return Ru(i).then(function(){throw t})})}).ia(function(){u&&o.removeEventListener("resume",u,!1),c&&o.removeEventListener("visibilitychange",c,!1),a&&a.cancel(),s&&i.Ka(s),i.c=null})},t.wa=function(t){this.b.push(t),Nu(this).s(function(e){"auth/invalid-cordova-configuration"===e.code&&(e=new io("unknown",null,null,null,new qr("no-auth-event")),t(e))})},t.Ka=function(t){B(this.b,function(e){return e==t})};var Mu={name:"pendingRedirect",B:"session"};function Fu(t){return hu(t.b,Mu,t.a)}function Lu(t,e,n){this.u=t,this.o=e,this.l=n,this.h=[],this.f=!1,this.i=b(this.cb,this),this.b=new Ku,this.m=new $u,this.g=new Ou(this.o+":"+this.l),this.c={},this.c.unknown=this.b,this.c.signInViaRedirect=this.b,this.c.linkViaRedirect=this.b,this.c.reauthViaRedirect=this.b,this.c.signInViaPopup=this.m,this.c.linkViaPopup=this.m,this.c.reauthViaPopup=this.m,this.a=Vu(this.u,this.o,this.l,ci)}function Vu(t,e,n,i){var o=r.a.SDK_VERSION||null;return Jn()?new Iu(t,e,n,o,i):new Ss(t,e,n,o,i)}function Bu(t){t.f||(t.f=!0,t.a.wa(t.i));var e=t.a;return t.a.ga().s(function(n){throw t.a==e&&t.reset(),n})}function Uu(t){t.a.Mb()&&Bu(t).s(function(e){var n=new io("unknown",null,null,null,new qr("operation-not-supported-in-this-environment"));Wu(e)&&t.cb(n)}),t.a.Hb()||Qu(t.b)}(t=Lu.prototype).reset=function(){this.f=!1,this.a.Ka(this.i),this.a=Vu(this.u,this.o,this.l)},t.Za=function(){this.b.Za()},t.subscribe=function(t){if(L(this.h,t)||this.h.push(t),!this.f){var e=this;(function(t){return t.b.get(Mu,t.a).then(function(t){return"pending"==t})})(this.g).then(function(t){t?Fu(e.g).then(function(){Bu(e).s(function(t){var n=new io("unknown",null,null,null,new qr("operation-not-supported-in-this-environment"));Wu(t)&&e.cb(n)})}):Uu(e)}).s(function(){Uu(e)})}},t.unsubscribe=function(t){B(this.h,function(e){return e==t})},t.cb=function(t){if(!t)throw new qr("invalid-auth-event");for(var e=!1,n=0;n<this.h.length;n++){var r=this.h[n];if(r.wb(t.b,t.c)){(e=this.c[t.b])&&e.h(t,r),e=!0;break}}return Qu(this.b),e};var ju=new wr(2e3,1e4),qu=new wr(3e4,6e4);function Gu(t,e,n,r,i,o){return t.a.Db(e,n,r,function(){t.f||(t.f=!0,t.a.wa(t.i))},function(){t.reset()},i,o)}function Wu(t){return!(!t||"auth/cordova-not-ready"!=t.code)}Lu.prototype.fa=function(){return this.b.fa()},Lu.prototype.Ca=function(t,e,n){var r,i=this;return function(t){return t.b.set(Mu,"pending",t.a)}(this.g).then(function(){return i.a.Ca(t,e,n).s(function(t){if(Wu(t))throw new qr("operation-not-supported-in-this-environment");return r=t,Fu(i.g).then(function(){throw r})}).then(function(){return i.a.Qb()?new yt(function(){}):Fu(i.g).then(function(){return i.fa()}).then(function(){}).s(function(){})})})},Lu.prototype.Ea=function(t,e,n,r){return this.a.Ea(n,function(n){t.ha(e,null,n,r)},ju.get())};var zu={};function Hu(t,e,n){var r=e+":"+n;return zu[r]||(zu[r]=new Lu(t,e,n)),zu[r]}function Ku(){this.b=null,this.f=[],this.c=[],this.a=null,this.i=this.g=!1}function Qu(t){t.g||(t.g=!0,Xu(t,!1,null,null))}function Yu(t,e){if(t.b=function(){return St(e)},t.f.length)for(var n=0;n<t.f.length;n++)t.f[n](e)}function Xu(t,e,n,r){e?r?function(t,e){if(t.b=function(){return Tt(e)},t.c.length)for(var n=0;n<t.c.length;n++)t.c[n](e)}(t,r):Yu(t,n):Yu(t,{user:null}),t.f=[],t.c=[]}function $u(){}function Ju(){this.tb=!1,Object.defineProperty(this,"appVerificationDisabled",{get:function(){return this.tb},set:function(t){this.tb=t},enumerable:!1})}function Zu(t,e){this.a=e,Ar(this,"verificationId",t)}function tc(t,e,n,r){return new to(t).Va(e,n).then(function(t){return new Zu(t,r)})}function ec(t){var e=ui(t);if(!(e&&e.exp&&e.auth_time&&e.iat))throw new qr("internal-error","An internal error occurred. The token obtained by Firebase appears to be malformed. Please retry the operation.");Pr(this,{token:t,expirationTime:Sr(1e3*e.exp),authTime:Sr(1e3*e.auth_time),issuedAtTime:Sr(1e3*e.iat),signInProvider:e.firebase&&e.firebase.sign_in_provider?e.firebase.sign_in_provider:null,claims:e})}function nc(t,e,n){if(this.h=t,this.i=e,this.g=n,this.c=3e4,this.f=96e4,this.b=null,this.a=this.c,this.f<this.c)throw Error("Proactive refresh lower bound greater than upper bound!")}function rc(t){this.f=t,this.b=this.a=null,this.c=0}function ic(t,e){var n=e[ga],r=e.refreshToken;e=oc(e.expiresIn),t.b=n,t.c=e,t.a=r}function oc(t){return w()+1e3*parseInt(t,10)}function ac(t,e){return function(t,e){return new yt(function(n,r){"refresh_token"==e.grant_type&&e.refresh_token||"authorization_code"==e.grant_type&&e.code?Ta(t,t.i+"?key="+encodeURIComponent(t.b),function(t){t?t.error?r(ds(t)):t.access_token&&t.refresh_token?n(t):r(new qr("internal-error")):r(new qr("network-request-failed"))},"POST",un(e).toString(),t.f,t.o.get()):r(new qr("internal-error"))})}(t.f,e).then(function(e){return t.b=e.access_token,t.c=oc(e.expires_in),t.a=e.refresh_token,{accessToken:t.b,expirationTime:t.c,refreshToken:t.a}}).s(function(e){throw"auth/user-token-expired"==e.code&&(t.a=null),e})}function sc(t,e){this.a=t||null,this.b=e||null,Pr(this,{lastSignInTime:Sr(e||null),creationTime:Sr(t||null)})}function uc(t,e,n,r,i,o){Pr(this,{uid:t,displayName:r||null,photoURL:i||null,email:n||null,phoneNumber:o||null,providerId:e})}function cc(t,e){for(var n in se.call(this,t),e)this[n]=e[n]}function lc(t,e,n){this.G=[],this.l=t.apiKey,this.m=t.appName,this.u=t.authDomain||null,t=r.a.SDK_VERSION?sr(r.a.SDK_VERSION):null,this.b=new ma(this.l,hi(ci),t),this.h=new rc(this.b),gc(this,e[ga]),ic(this.h,e),Ar(this,"refreshToken",this.h.a),_c(this,n||{}),De.call(this),this.I=!1,this.u&&hr()&&(this.a=Hu(this.u,this.l,this.m)),this.N=[],this.i=null,this.A=function(t){return new nc(function(){return t.F(!0)},function(t){return!(!t||"auth/network-request-failed"!=t.code)},function(){var e=t.h.c-w()-3e5;return 0<e?e:0})}(this),this.V=b(this.Ha,this);var i=this;this.ka=null,this.ta=function(t){i.pa(t.g)},this.X=null,this.O=[],this.sa=function(t){fc(i,t.c)},this.W=null}function hc(t,e){t.X&&Ee(t.X,"languageCodeChanged",t.ta),(t.X=e)&&be(e,"languageCodeChanged",t.ta)}function fc(t,e){t.O=e,Sa(t.b,r.a.SDK_VERSION?sr(r.a.SDK_VERSION,t.O):null)}function pc(t,e){t.W&&Ee(t.W,"frameworkChanged",t.sa),(t.W=e)&&be(e,"frameworkChanged",t.sa)}function dc(t){try{return r.a.app(t.m).auth()}catch(e){throw new qr("internal-error","No firebase.auth.Auth instance is available for the Firebase App '"+t.m+"'!")}}function mc(t){t.D||t.A.b||(t.A.start(),Ee(t,"tokenChanged",t.V),be(t,"tokenChanged",t.V))}function yc(t){Ee(t,"tokenChanged",t.V),t.A.stop()}function gc(t,e){t.ra=e,Ar(t,"_lat",e)}function vc(t){for(var e=[],n=0;n<t.N.length;n++)e.push(t.N[n](t));return kt(e).then(function(){return t})}function bc(t){t.a&&!t.I&&(t.I=!0,t.a.subscribe(t))}function _c(t,e){Pr(t,{uid:e.uid,displayName:e.displayName||null,photoURL:e.photoURL||null,email:e.email||null,emailVerified:e.emailVerified||!1,phoneNumber:e.phoneNumber||null,isAnonymous:e.isAnonymous||!1,metadata:new sc(e.createdAt,e.lastLoginAt),providerData:[]})}function wc(){}function Ec(t){return St().then(function(){if(t.D)throw new qr("app-deleted")})}function Sc(t){return M(t.providerData,function(t){return t.providerId})}function Tc(t,e){e&&(Cc(t,e.providerId),t.providerData.push(e))}function Cc(t,e){B(t.providerData,function(t){return t.providerId==e})}function kc(t,e,n){("uid"!=e||n)&&t.hasOwnProperty(e)&&Ar(t,e,n)}function xc(t,e){t!=e&&(Pr(t,{uid:e.uid,displayName:e.displayName,photoURL:e.photoURL,email:e.email,emailVerified:e.emailVerified,phoneNumber:e.phoneNumber,isAnonymous:e.isAnonymous,providerData:[]}),e.metadata?Ar(t,"metadata",function(t){return new sc(t.a,t.b)}(e.metadata)):Ar(t,"metadata",new sc),O(e.providerData,function(e){Tc(t,e)}),function(t,e){t.b=e.b,t.a=e.a,t.c=e.c}(t.h,e.h),Ar(t,"refreshToken",t.h.a))}function Ic(t){return t.F().then(function(e){var n=t.isAnonymous;return function(t,e){return fs(t.b,Ka,{idToken:e}).then(b(t.zc,t))}(t,e).then(function(){return n||kc(t,"isAnonymous",!1),e})})}function Ac(t,e){e[ga]&&t.ra!=e[ga]&&(ic(t.h,e),t.dispatchEvent(new cc("tokenChanged")),gc(t,e[ga]),kc(t,"refreshToken",t.h.a))}function Pc(t,e){return Ic(t).then(function(){if(L(Sc(t),e))return vc(t).then(function(){throw new qr("provider-already-linked")})})}function Dc(t,e,n){return Dr({user:t,credential:no(e),additionalUserInfo:e=yi(e),operationType:n})}function Nc(t,e){return Ac(t,e),t.reload().then(function(){return t})}function Rc(t,e,n,i,o){if(!hr())return Tt(new qr("operation-not-supported-in-this-environment"));if(t.i&&!o)return Tt(t.i);var a=mi(n.providerId),s=vr(t.uid+":::"),u=null;(!dr()||Zn())&&t.u&&n.isOAuthProvider&&(u=xs(t.u,t.l,t.m,e,n,null,s,r.a.SDK_VERSION||null));var c=Qn(u,a&&a.Ba,a&&a.Aa);return i=i().then(function(){if(Mc(t),!o)return t.F().then(function(){})}).then(function(){return Gu(t.a,c,e,n,s,!!u)}).then(function(){return new yt(function(n,r){t.ha(e,null,new qr("cancelled-popup-request"),t.g||null),t.f=n,t.w=r,t.g=s,t.c=t.a.Ea(t,e,c,s)})}).then(function(t){return c&&Kn(c),t?Dr(t):null}).s(function(t){throw c&&Kn(c),t}),Fc(t,i,o)}function Oc(t,e,n,r,i){if(!hr())return Tt(new qr("operation-not-supported-in-this-environment"));if(t.i&&!i)return Tt(t.i);var o=null,a=vr(t.uid+":::");return r=r().then(function(){if(Mc(t),!i)return t.F().then(function(){})}).then(function(){return t.aa=a,vc(t)}).then(function(e){return t.ba&&(e=(e=t.ba).b.set(Bc,t.v(),e.a)),e}).then(function(){return t.a.Ca(e,n,a)}).s(function(e){if(o=e,t.ba)return Uc(t.ba);throw o}).then(function(){if(o)throw o}),Fc(t,r,i)}function Mc(t){if(!t.a||!t.I){if(t.a&&!t.I)throw new qr("internal-error");throw new qr("auth-domain-config-required")}}function Fc(t,e,n){var r=function(t,e,n){return t.i&&!n?(e.cancel(),Tt(t.i)):e.s(function(e){throw!e||"auth/user-disabled"!=e.code&&"auth/user-token-expired"!=e.code||(t.i||t.dispatchEvent(new cc("userInvalidated")),t.i=e),e})}(t,e,n);return t.G.push(r),r.ia(function(){V(t.G,r)}),r}function Lc(t){if(!t.apiKey)return null;var e={apiKey:t.apiKey,authDomain:t.authDomain,appName:t.appName},n={};if(!(t.stsTokenManager&&t.stsTokenManager.accessToken&&t.stsTokenManager.expirationTime))return null;n[ga]=t.stsTokenManager.accessToken,n.refreshToken=t.stsTokenManager.refreshToken||null,n.expiresIn=(t.stsTokenManager.expirationTime-w())/1e3;var r=new lc(e,n,t);return t.providerData&&O(t.providerData,function(t){t&&Tc(r,Dr(t))}),t.redirectEventId&&(r.aa=t.redirectEventId),r}function Vc(t){this.a=t,this.b=uu()}Ku.prototype.reset=function(){this.b=null,this.a&&(this.a.cancel(),this.a=null)},Ku.prototype.h=function(t,e){if(t){this.reset(),this.g=!0;var n=t.b,r=t.c,i=t.a&&"auth/web-storage-unsupported"==t.a.code,o=t.a&&"auth/operation-not-supported-in-this-environment"==t.a.code;this.i=!(!i&&!o),"unknown"!=n||i||o?t.a?(Xu(this,!0,null,t.a),St()):e.xa(n,r)?function(t,e,n){n=n.xa(e.b,e.c);var r=e.f,i=e.g,o=e.h,a=!!e.b.match(/Redirect$/);n(r,i,o).then(function(e){Xu(t,a,e,null)}).s(function(e){Xu(t,a,null,e)})}(this,t,e):Tt(new qr("invalid-auth-event")):(Xu(this,!1,null,null),St())}else Tt(new qr("invalid-auth-event"))},Ku.prototype.Za=function(){this.g&&!this.i&&Xu(this,!1,null,null)},Ku.prototype.fa=function(){var t=this;return new yt(function(e,n){t.b?t.b().then(e,n):(t.f.push(e),t.c.push(n),function(t){var e=new qr("timeout");t.a&&t.a.cancel(),t.a=Fe(qu.get()).then(function(){t.b||(t.g=!0,Xu(t,!0,null,e))})}(t))})},$u.prototype.h=function(t,e){if(t){var n=t.b,r=t.c;t.a?(e.ha(t.b,null,t.a,t.c),St()):e.xa(n,r)?function(t,e){var n=t.c,r=t.b;e.xa(r,n)(t.f,t.g,t.h).then(function(t){e.ha(r,t,null,n)}).s(function(t){e.ha(r,null,t,n)})}(t,e):Tt(new qr("invalid-auth-event"))}else Tt(new qr("invalid-auth-event"))},Zu.prototype.confirm=function(t){return t=eo(this.verificationId,t),this.a(t)},nc.prototype.start=function(){this.a=this.c,function t(e,r){e.stop();e.b=Fe(function(t,e){return e?(t.a=t.c,t.g()):(e=t.a,t.a*=2,t.a>t.f&&(t.a=t.f),e)}(e,r)).then(function(){return function(){var t=n.document,e=null;return Er()||!t?St():new yt(function(n){e=function(){Er()&&(t.removeEventListener("visibilitychange",e,!1),n())},t.addEventListener("visibilitychange",e,!1)}).s(function(n){throw t.removeEventListener("visibilitychange",e,!1),n})}()}).then(function(){return e.h()}).then(function(){t(e,!0)}).s(function(n){e.i(n)&&t(e,!1)})}(this,!0)},nc.prototype.stop=function(){this.b&&(this.b.cancel(),this.b=null)},rc.prototype.v=function(){return{apiKey:this.f.b,refreshToken:this.a,accessToken:this.b,expirationTime:this.c}},rc.prototype.getToken=function(t){return t=!!t,this.b&&!this.a?Tt(new qr("user-token-expired")):t||!this.b||w()>this.c-3e4?this.a?ac(this,{grant_type:"refresh_token",refresh_token:this.a}):St(null):St({accessToken:this.b,expirationTime:this.c,refreshToken:this.a})},sc.prototype.v=function(){return{lastLoginAt:this.b,createdAt:this.a}},E(cc,se),E(lc,De),lc.prototype.pa=function(t){this.ka=t,Ea(this.b,t)},lc.prototype.ea=function(){return this.ka},lc.prototype.ya=function(){return j(this.O)},lc.prototype.Ha=function(){this.A.b&&(this.A.stop(),this.A.start())},Ar(lc.prototype,"providerId","firebase"),(t=lc.prototype).reload=function(){var t=this;return Fc(this,Ec(this).then(function(){return Ic(t).then(function(){return vc(t)}).then(wc)}))},t.dc=function(t){return this.F(t).then(function(t){return new ec(t)})},t.F=function(t){var e=this;return Fc(this,Ec(this).then(function(){return e.h.getToken(t)}).then(function(t){if(!t)throw new qr("internal-error");return t.accessToken!=e.ra&&(gc(e,t.accessToken),e.dispatchEvent(new cc("tokenChanged"))),kc(e,"refreshToken",t.refreshToken),t.accessToken}))},t.zc=function(t){if(!(t=t.users)||!t.length)throw new qr("internal-error");_c(this,{uid:(t=t[0]).localId,displayName:t.displayName,photoURL:t.photoUrl,email:t.email,emailVerified:!!t.emailVerified,phoneNumber:t.phoneNumber,lastLoginAt:t.lastLoginAt,createdAt:t.createdAt});for(var e=function(t){return(t=t.providerUserInfo)&&t.length?M(t,function(t){return new uc(t.rawId,t.providerId,t.email,t.displayName,t.photoUrl,t.phoneNumber)}):[]}(t),n=0;n<e.length;n++)Tc(this,e[n]);kc(this,"isAnonymous",!(this.email&&t.passwordHash)&&!(this.providerData&&this.providerData.length))},t.hb=function(t){var e=this,n=null;return Fc(this,t.f(this.b,this.uid).then(function(t){return Ac(e,t),n=Dc(e,t,"reauthenticate"),e.i=null,e.reload()}).then(function(){return n}),!0)},t.Ac=function(t){return xr("firebase.User.prototype.reauthenticateWithCredential is deprecated. Please use firebase.User.prototype.reauthenticateAndRetrieveDataWithCredential instead."),this.hb(t).then(function(){})},t.fb=function(t){var e=this,n=null;return Fc(this,Pc(this,t.providerId).then(function(){return e.F()}).then(function(n){return t.b(e.b,n)}).then(function(t){return n=Dc(e,t,"link"),Nc(e,t)}).then(function(){return n}))},t.rc=function(t){return xr("firebase.User.prototype.linkWithCredential is deprecated. Please use firebase.User.prototype.linkAndRetrieveDataWithCredential instead."),this.fb(t).then(function(t){return t.user})},t.sc=function(t,e){var n=this;return Fc(this,Pc(this,"phone").then(function(){return tc(dc(n),t,e,b(n.fb,n))}))},t.Bc=function(t,e){var n=this;return Fc(this,St().then(function(){return tc(dc(n),t,e,b(n.hb,n))}),!0)},t.qb=function(t){var e=this;return Fc(this,this.F().then(function(n){return e.b.qb(n,t)}).then(function(t){return Ac(e,t),e.reload()}))},t.Tc=function(t){var e=this;return Fc(this,this.F().then(function(n){return t.b(e.b,n)}).then(function(t){return Ac(e,t),e.reload()}))},t.rb=function(t){var e=this;return Fc(this,this.F().then(function(n){return e.b.rb(n,t)}).then(function(t){return Ac(e,t),e.reload()}))},t.sb=function(t){if(void 0===t.displayName&&void 0===t.photoURL)return Ec(this);var e=this;return Fc(this,this.F().then(function(n){return e.b.sb(n,{displayName:t.displayName,photoUrl:t.photoURL})}).then(function(t){return Ac(e,t),kc(e,"displayName",t.displayName||null),kc(e,"photoURL",t.photoUrl||null),O(e.providerData,function(t){"password"===t.providerId&&(Ar(t,"displayName",e.displayName),Ar(t,"photoURL",e.photoURL))}),vc(e)}).then(wc))},t.Rc=function(t){var e=this;return Fc(this,Ic(this).then(function(n){return L(Sc(e),t)?function(t,e,n){return fs(t,Wa,{idToken:e,deleteProvider:n})}(e.b,n,[t]).then(function(t){var n={};return O(t.providerUserInfo||[],function(t){n[t.providerId]=!0}),O(Sc(e),function(t){n[t]||Cc(e,t)}),n[to.PROVIDER_ID]||Ar(e,"phoneNumber",null),vc(e)}):vc(e).then(function(){throw new qr("no-such-provider")})}))},t.delete=function(){var t=this;return Fc(this,this.F().then(function(e){return fs(t.b,Ga,{idToken:e})}).then(function(){t.dispatchEvent(new cc("userDeleted"))})).then(function(){for(var e=0;e<t.G.length;e++)t.G[e].cancel("app-deleted");hc(t,null),pc(t,null),t.G=[],t.D=!0,yc(t),Ar(t,"refreshToken",null),t.a&&t.a.unsubscribe(t)})},t.wb=function(t,e){return!!("linkViaPopup"==t&&(this.g||null)==e&&this.f||"reauthViaPopup"==t&&(this.g||null)==e&&this.f||"linkViaRedirect"==t&&(this.aa||null)==e||"reauthViaRedirect"==t&&(this.aa||null)==e)},t.ha=function(t,e,n,r){"linkViaPopup"!=t&&"reauthViaPopup"!=t||r!=(this.g||null)||(n&&this.w?this.w(n):e&&!n&&this.f&&this.f(e),this.c&&(this.c.cancel(),this.c=null),delete this.f,delete this.w)},t.xa=function(t,e){return"linkViaPopup"==t&&e==(this.g||null)?b(this.Bb,this):"reauthViaPopup"==t&&e==(this.g||null)?b(this.Cb,this):"linkViaRedirect"==t&&(this.aa||null)==e?b(this.Bb,this):"reauthViaRedirect"==t&&(this.aa||null)==e?b(this.Cb,this):null},t.tc=function(t){var e=this;return Rc(this,"linkViaPopup",t,function(){return Pc(e,t.providerId).then(function(){return vc(e)})},!1)},t.Cc=function(t){return Rc(this,"reauthViaPopup",t,function(){return St()},!0)},t.uc=function(t){var e=this;return Oc(this,"linkViaRedirect",t,function(){return Pc(e,t.providerId)},!1)},t.Dc=function(t){return Oc(this,"reauthViaRedirect",t,function(){return St()},!0)},t.Bb=function(t,e,n){var r=this;this.c&&(this.c.cancel(),this.c=null);var i=null;return Fc(this,this.F().then(function(i){return Fa(r.b,{requestUri:t,postBody:n,sessionId:e,idToken:i})}).then(function(t){return i=Dc(r,t,"link"),Nc(r,t)}).then(function(){return i}))},t.Cb=function(t,e,n){var r=this;this.c&&(this.c.cancel(),this.c=null);var i=null;return Fc(this,St().then(function(){return Ii(La(r.b,{requestUri:t,sessionId:e,postBody:n}),r.uid)}).then(function(t){return i=Dc(r,t,"reauthenticate"),Ac(r,t),r.i=null,r.reload()}).then(function(){return i}),!0)},t.kb=function(t){var e=this,n=null;return Fc(this,this.F().then(function(e){return n=e,"undefined"===typeof t||rt(t)?{}:ni(new Hr(t))}).then(function(t){return e.b.kb(n,t)}).then(function(t){if(e.email!=t)return e.reload()}).then(function(){}))},t.toJSON=function(){return this.v()},t.v=function(){var t={uid:this.uid,displayName:this.displayName,photoURL:this.photoURL,email:this.email,emailVerified:this.emailVerified,phoneNumber:this.phoneNumber,isAnonymous:this.isAnonymous,providerData:[],apiKey:this.l,appName:this.m,authDomain:this.u,stsTokenManager:this.h.v(),redirectEventId:this.aa||null};return this.metadata&&ut(t,this.metadata.v()),O(this.providerData,function(e){t.providerData.push(function(t){var e,n={};for(e in t)t.hasOwnProperty(e)&&(n[e]=t[e]);return n}(e))}),t};var Bc={name:"redirectUser",B:"session"};function Uc(t){return hu(t.b,Bc,t.a)}function jc(t){this.a=t,this.b=uu(),this.c=null,this.f=function(t){var e=Wc("local"),r=Wc("session"),i=Wc("none");return function(t,e,r){var i=lu(e,r),o=cu(t,e.B);return t.get(e,r).then(function(a){var s=null;try{s=gr(n.localStorage.getItem(i))}catch(u){}if(s&&!a)return n.localStorage.removeItem(i),t.set(e,s,r);s&&a&&"localStorage"!=o.type&&n.localStorage.removeItem(i)})}(t.b,e,t.a).then(function(){return t.b.get(r,t.a)}).then(function(n){return n?r:t.b.get(i,t.a).then(function(n){return n?i:t.b.get(e,t.a).then(function(n){return n?e:t.b.get(Gc,t.a).then(function(t){return t?Wc(t):e})})})}).then(function(e){return t.c=e,qc(t,e.B)}).s(function(){t.c||(t.c=e)})}(this),this.b.addListener(Wc("local"),this.a,b(this.g,this))}function qc(t,e){var n,r=[];for(n in au)au[n]!==e&&r.push(hu(t.b,Wc(au[n]),t.a));return r.push(hu(t.b,Gc,t.a)),function(t){return new yt(function(e,n){var r=t.length,i=[];if(r)for(var o=function(t,n){r--,i[t]=n,0==r&&e(i)},a=function(t){n(t)},s=0;s<t.length;s++)Ct(t[s],_(o,s),a);else e(i)})}(r)}jc.prototype.g=function(){var t=this,e=Wc("local");Qc(this,function(){return St().then(function(){return t.c&&"local"!=t.c.B?t.b.get(e,t.a):null}).then(function(n){if(n)return qc(t,"local").then(function(){t.c=e})})})};var Gc={name:"persistence",B:"session"};function Wc(t){return{name:"authUser",B:t}}function zc(t,e){return Qc(t,function(){return t.b.set(t.c,e.v(),t.a)})}function Hc(t){return Qc(t,function(){return hu(t.b,t.c,t.a)})}function Kc(t,e){return Qc(t,function(){return t.b.get(t.c,t.a).then(function(t){return t&&e&&(t.authDomain=e),Lc(t||{})})})}function Qc(t,e){return t.f=t.f.then(e,e),t.f}function Yc(t){if(this.l=!1,Ar(this,"settings",new Ju),Ar(this,"app",t),!nl(this).options||!nl(this).options.apiKey)throw new qr("invalid-api-key");t=r.a.SDK_VERSION?sr(r.a.SDK_VERSION):null,this.b=new ma(nl(this).options&&nl(this).options.apiKey,hi(ci),t),this.N=[],this.m=[],this.I=[],this.Tb=r.a.INTERNAL.createSubscribe(b(this.oc,this)),this.O=void 0,this.Ub=r.a.INTERNAL.createSubscribe(b(this.pc,this)),tl(this,null),this.h=new jc(nl(this).options.apiKey+":"+nl(this).name),this.A=new Vc(nl(this).options.apiKey+":"+nl(this).name),this.V=al(this,function(t){var e=nl(t).options.authDomain,n=function(t){var e=function(t,e){return t.b.get(Bc,t.a).then(function(t){return t&&e&&(t.authDomain=e),Lc(t||{})})}(t.A,nl(t).options.authDomain).then(function(e){return(t.D=e)&&(e.ba=t.A),Uc(t.A)});return al(t,e)}(t).then(function(){return Kc(t.h,e)}).then(function(e){return e?(e.ba=t.A,t.D&&(t.D.aa||null)==(e.aa||null)?e:e.reload().then(function(){return zc(t.h,e).then(function(){return e})}).s(function(n){return"auth/network-request-failed"==n.code?e:Hc(t.h)})):null}).then(function(e){tl(t,e||null)});return al(t,n)}(this)),this.i=al(this,function(t){return t.V.then(function(){return t.fa()}).s(function(){}).then(function(){if(!t.l)return t.ka()}).s(function(){}).then(function(){if(!t.l){t.X=!0;var e=t.h;e.b.addListener(Wc("local"),e.a,t.ka)}})}(this)),this.X=!1,this.ka=b(this.Oc,this),this.Ha=b(this.Z,this),this.ra=b(this.bc,this),this.sa=b(this.mc,this),this.ta=b(this.nc,this),function(t){var e=nl(t).options.authDomain,n=nl(t).options.apiKey;e&&hr()&&(t.Sb=t.V.then(function(){if(!t.l){if(t.a=Hu(e,n,nl(t).name),t.a.subscribe(t),rl(t)&&bc(rl(t)),t.D){bc(t.D);var r=t.D;r.pa(t.ea()),hc(r,t),fc(r=t.D,t.G),pc(r,t),t.D=null}return t.a}}))}(this),this.INTERNAL={},this.INTERNAL.delete=b(this.delete,this),this.INTERNAL.logFramework=b(this.vc,this),this.u=0,De.call(this),function(t){Object.defineProperty(t,"lc",{get:function(){return this.ea()},set:function(t){this.pa(t)},enumerable:!1}),t.W=null}(this),this.G=[]}function Xc(t){se.call(this,"languageCodeChanged"),this.g=t}function $c(t){se.call(this,"frameworkChanged"),this.c=t}function Jc(t){return t.Sb||Tt(new qr("auth-domain-config-required"))}function Zc(t,e){var n={};return n.apiKey=nl(t).options.apiKey,n.authDomain=nl(t).options.authDomain,n.appName=nl(t).name,t.V.then(function(){return function(t,e,n,r){var i=new lc(t,e);return n&&(i.ba=n),r&&fc(i,r),i.reload().then(function(){return i})}(n,e,t.A,t.ya())}).then(function(e){return rl(t)&&e.uid==rl(t).uid?(xc(rl(t),e),t.Z(e)):(tl(t,e),bc(e),t.Z(e))}).then(function(){ol(t)})}function tl(t,e){rl(t)&&(function(t,e){B(t.N,function(t){return t==e})}(rl(t),t.Ha),Ee(rl(t),"tokenChanged",t.ra),Ee(rl(t),"userDeleted",t.sa),Ee(rl(t),"userInvalidated",t.ta),yc(rl(t))),e&&(e.N.push(t.Ha),be(e,"tokenChanged",t.ra),be(e,"userDeleted",t.sa),be(e,"userInvalidated",t.ta),0<t.u&&mc(e)),Ar(t,"currentUser",e),e&&(e.pa(t.ea()),hc(e,t),fc(e,t.G),pc(e,t))}function el(t,e){var n=null,r=null;return al(t,e.then(function(e){return n=no(e),r=yi(e),Zc(t,e)}).then(function(){return Dr({user:rl(t),credential:n,additionalUserInfo:r,operationType:"signIn"})}))}function nl(t){return t.app}function rl(t){return t.currentUser}function il(t){return rl(t)&&rl(t)._lat||null}function ol(t){if(t.X){for(var e=0;e<t.m.length;e++)t.m[e]&&t.m[e](il(t));if(t.O!==t.getUid()&&t.I.length)for(t.O=t.getUid(),e=0;e<t.I.length;e++)t.I[e]&&t.I[e](il(t))}}function al(t,e){return t.N.push(e),e.ia(function(){V(t.N,e)}),e}function sl(){}function ul(){this.a={},this.b=1e12}jc.prototype.nb=function(t){var e=null,n=this;return function(t){var e=new qr("invalid-persistence-type"),n=new qr("unsupported-persistence-type");t:{for(r in au)if(au[r]==t){var r=!0;break t}r=!1}if(!r||"string"!==typeof t)throw e;switch(er()){case"ReactNative":if("session"===t)throw n;break;case"Node":if("none"!==t)throw n;break;default:if(!lr()&&"none"!==t)throw n}}(t),Qc(this,function(){return t!=n.c.B?n.b.get(n.c,n.a).then(function(r){return e=r,qc(n,t)}).then(function(){if(n.c=Wc(t),e)return n.b.set(n.c,e,n.a)}):St()})},E(Yc,De),E(Xc,se),E($c,se),(t=Yc.prototype).nb=function(t){return al(this,t=this.h.nb(t))},t.pa=function(t){this.W===t||this.l||(this.W=t,Ea(this.b,this.W),this.dispatchEvent(new Xc(this.ea())))},t.ea=function(){return this.W},t.Uc=function(){var t=n.navigator;this.pa(t&&(t.languages&&t.languages[0]||t.language||t.userLanguage)||null)},t.vc=function(t){this.G.push(t),Sa(this.b,r.a.SDK_VERSION?sr(r.a.SDK_VERSION,this.G):null),this.dispatchEvent(new $c(this.G))},t.ya=function(){return j(this.G)},t.toJSON=function(){return{apiKey:nl(this).options.apiKey,authDomain:nl(this).options.authDomain,appName:nl(this).name,currentUser:rl(this)&&rl(this).v()}},t.wb=function(t,e){switch(t){case"unknown":case"signInViaRedirect":return!0;case"signInViaPopup":return this.g==e&&!!this.f;default:return!1}},t.ha=function(t,e,n,r){"signInViaPopup"==t&&this.g==r&&(n&&this.w?this.w(n):e&&!n&&this.f&&this.f(e),this.c&&(this.c.cancel(),this.c=null),delete this.f,delete this.w)},t.xa=function(t,e){return"signInViaRedirect"==t||"signInViaPopup"==t&&this.g==e&&this.f?b(this.ac,this):null},t.ac=function(t,e,n){var r=this;t={requestUri:t,postBody:n,sessionId:e},this.c&&(this.c.cancel(),this.c=null);var i=null,o=null,a=Ma(r.b,t).then(function(t){return i=no(t),o=yi(t),t});return al(this,t=r.V.then(function(){return a}).then(function(t){return Zc(r,t)}).then(function(){return Dr({user:rl(r),credential:i,additionalUserInfo:o,operationType:"signIn"})}))},t.Mc=function(t){if(!hr())return Tt(new qr("operation-not-supported-in-this-environment"));var e=this,n=mi(t.providerId),i=vr(),o=null;(!dr()||Zn())&&nl(this).options.authDomain&&t.isOAuthProvider&&(o=xs(nl(this).options.authDomain,nl(this).options.apiKey,nl(this).name,"signInViaPopup",t,null,i,r.a.SDK_VERSION||null));var a=Qn(o,n&&n.Ba,n&&n.Aa);return al(this,n=Jc(this).then(function(e){return Gu(e,a,"signInViaPopup",t,i,!!o)}).then(function(){return new yt(function(t,n){e.ha("signInViaPopup",null,new qr("cancelled-popup-request"),e.g),e.f=t,e.w=n,e.g=i,e.c=e.a.Ea(e,"signInViaPopup",a,i)})}).then(function(t){return a&&Kn(a),t?Dr(t):null}).s(function(t){throw a&&Kn(a),t}))},t.Nc=function(t){if(!hr())return Tt(new qr("operation-not-supported-in-this-environment"));var e=this;return al(this,Jc(this).then(function(){return Qc(t=e.h,function(){return t.b.set(Gc,t.c.B,t.a)});var t}).then(function(){return e.a.Ca("signInViaRedirect",t)}))},t.fa=function(){if(!hr())return Tt(new qr("operation-not-supported-in-this-environment"));var t=this;return al(this,Jc(this).then(function(){return t.a.fa()}).then(function(t){return t?Dr(t):null}))},t.Sc=function(t){if(!t)return Tt(new qr("null-user"));var e=this,n={};n.apiKey=nl(this).options.apiKey,n.authDomain=nl(this).options.authDomain,n.appName=nl(this).name;var r=function(t,e,n,r){e=e||{apiKey:t.l,authDomain:t.u,appName:t.m};var i=t.h,o={};return o[ga]=i.b,o.refreshToken=i.a,o.expiresIn=(i.c-w())/1e3,e=new lc(e,o),n&&(e.ba=n),r&&fc(e,r),xc(e,t),e}(t,n,e.A,e.ya());return al(this,this.i.then(function(){if(nl(e).options.apiKey!=t.l)return r.reload()}).then(function(){return rl(e)&&t.uid==rl(e).uid?(xc(rl(e),t),e.Z(t)):(tl(e,r),bc(r),e.Z(r))}).then(function(){ol(e)}))},t.ob=function(){var t=this;return al(this,this.i.then(function(){return rl(t)?(tl(t,null),Hc(t.h).then(function(){ol(t)})):St()}))},t.Oc=function(){var t=this;return Kc(this.h,nl(this).options.authDomain).then(function(e){if(!t.l){var n;if(n=rl(t)&&e){n=rl(t).uid;var r=e.uid;n=void 0!==n&&null!==n&&""!==n&&void 0!==r&&null!==r&&""!==r&&n==r}if(n)return xc(rl(t),e),rl(t).F();(rl(t)||e)&&(tl(t,e),e&&(bc(e),e.ba=t.A),t.a&&t.a.subscribe(t),ol(t))}})},t.Z=function(t){return zc(this.h,t)},t.bc=function(){ol(this),this.Z(rl(this))},t.mc=function(){this.ob()},t.nc=function(){this.ob()},t.oc=function(t){var e=this;this.addAuthTokenListener(function(){t.next(rl(e))})},t.pc=function(t){var e=this;!function(t,e){t.I.push(e),al(t,t.i.then(function(){!t.l&&L(t.I,e)&&t.O!==t.getUid()&&(t.O=t.getUid(),e(il(t)))}))}(this,function(){t.next(rl(e))})},t.xc=function(t,e,n){var i=this;return this.X&&r.a.Promise.resolve().then(function(){p(t)?t(rl(i)):p(t.next)&&t.next(rl(i))}),this.Tb(t,e,n)},t.wc=function(t,e,n){var i=this;return this.X&&r.a.Promise.resolve().then(function(){i.O=i.getUid(),p(t)?t(rl(i)):p(t.next)&&t.next(rl(i))}),this.Ub(t,e,n)},t.cc=function(t){var e=this;return al(this,this.i.then(function(){return rl(e)?rl(e).F(t).then(function(t){return{accessToken:t}}):null}))},t.Nb=function(t){var e=this;return this.i.then(function(){return el(e,fs(e.b,ss,{token:t}))}).then(function(t){var n=t.user;return kc(n,"isAnonymous",!1),e.Z(n),t})},t.Gc=function(t){return xr("firebase.auth.Auth.prototype.signInAndRetrieveDataWithCustomToken is deprecated. Please use firebase.auth.Auth.prototype.signInWithCustomToken instead."),this.Nb(t)},t.Hc=function(t,e){return xr("firebase.auth.Auth.prototype.signInAndRetrieveDataWithEmailAndPassword is deprecated. Please use firebase.auth.Auth.prototype.signInWithEmailAndPassword instead."),this.Ob(t,e)},t.Ob=function(t,e){var n=this;return this.i.then(function(){return el(n,fs(n.b,us,{email:t,password:e}))})},t.yb=function(t,e){var n=this;return this.i.then(function(){return el(n,fs(n.b,ja,{email:t,password:e}))})},t.Wb=function(t,e){return xr("firebase.auth.Auth.prototype.createUserAndRetrieveDataWithEmailAndPassword is deprecated. Please use firebase.auth.Auth.prototype.createUserWithEmailAndPassword instead."),this.yb(t,e)},t.Jc=function(t){return xr("firebase.auth.Auth.prototype.signInWithCredential is deprecated. Please use firebase.auth.Auth.prototype.signInAndRetrieveDataWithCredential instead."),this.Qa(t).then(function(t){return t.user})},t.Qa=function(t){var e=this;return this.i.then(function(){return el(e,t.la(e.b))})},t.Ra=function(){var t=this;return this.i.then(function(){var e=rl(t);if(e&&e.isAnonymous){var n=Dr({providerId:null,isNewUser:!1});return Dr({user:e,credential:null,additionalUserInfo:n,operationType:"signIn"})}return el(t,t.b.Ra()).then(function(e){var n=e.user;return kc(n,"isAnonymous",!0),t.Z(n),e})})},t.Ic=function(){return xr("firebase.auth.Auth.prototype.signInAnonymouslyAndRetrieveData is deprecated. Please use firebase.auth.Auth.prototype.signInAnonymously instead."),this.Ra()},t.getUid=function(){return rl(this)&&rl(this).uid||null},t.Vb=function(t){this.addAuthTokenListener(t),this.u++,0<this.u&&rl(this)&&mc(rl(this))},t.Ec=function(t){var e=this;O(this.m,function(n){n==t&&e.u--}),0>this.u&&(this.u=0),0==this.u&&rl(this)&&yc(rl(this)),this.removeAuthTokenListener(t)},t.addAuthTokenListener=function(t){var e=this;this.m.push(t),al(this,this.i.then(function(){e.l||L(e.m,t)&&t(il(e))}))},t.removeAuthTokenListener=function(t){B(this.m,function(e){return e==t})},t.delete=function(){this.l=!0;for(var t=0;t<this.N.length;t++)this.N[t].cancel("app-deleted");return this.N=[],this.h&&(t=this.h).b.removeListener(Wc("local"),t.a,this.ka),this.a&&(this.a.unsubscribe(this),this.a.Za()),r.a.Promise.resolve()},t.Zb=function(t){return xr("firebase.auth.Auth.prototype.fetchProvidersForEmail is deprecated. Please use firebase.auth.Auth.prototype.fetchSignInMethodsForEmail instead."),al(this,function(t,e){return fs(t,qa,{identifier:e,continueUri:fr()?Wn():"http://localhost"}).then(function(t){return t.allProviders||[]})}(this.b,t))},t.$b=function(t){return al(this,function(t,e){return fs(t,qa,{identifier:e,continueUri:fr()?Wn():"http://localhost"}).then(function(t){return t.signinMethods||[]})}(this.b,t))},t.qc=function(t){return!!Xi(t)},t.mb=function(t,e){var n=this;return al(this,St().then(function(){var t=new Hr(e);if(!t.c)throw new qr("argument-error",Yr+" must be true when sending sign in link to email");return ni(t)}).then(function(e){return n.b.mb(t,e)}).then(function(){}))},t.Vc=function(t){return this.Ja(t).then(function(t){return t.data.email})},t.$a=function(t,e){return al(this,this.b.$a(t,e).then(function(){}))},t.Ja=function(t){return al(this,this.b.Ja(t).then(function(t){return new Rr(t)}))},t.Xa=function(t){return al(this,this.b.Xa(t).then(function(){}))},t.lb=function(t,e){var n=this;return al(this,St().then(function(){return"undefined"===typeof e||rt(e)?{}:ni(new Hr(e))}).then(function(e){return n.b.lb(t,e)}).then(function(){}))},t.Lc=function(t,e){return al(this,tc(this,t,e,b(this.Qa,this)))},t.Kc=function(t,e){var n=this;return al(this,St().then(function(){var r=Yi(t,e||Wn());return n.Qa(r)}))},sl.prototype.render=function(){},sl.prototype.reset=function(){},sl.prototype.getResponse=function(){},sl.prototype.execute=function(){};var cl=null;function ll(t,e){return(e=hl(e))&&t.a[e]||null}function hl(t){return(t="undefined"===typeof t?1e12:t)?t.toString():null}function fl(t,e){this.g=!1,this.c=e,this.a=this.b=null,this.h="invisible"!==this.c.size,this.f=Rn(t);var n=this;this.i=function(){n.execute()},this.h?this.execute():be(this.f,"click",this.i)}function pl(t){if(t.g)throw Error("reCAPTCHA mock was already deleted!")}function dl(){}ul.prototype.render=function(t,e){return this.a[this.b.toString()]=new fl(t,e),this.b++},ul.prototype.reset=function(t){var e=ll(this,t);t=hl(t),e&&t&&(e.delete(),delete this.a[t])},ul.prototype.getResponse=function(t){return(t=ll(this,t))?t.getResponse():null},ul.prototype.execute=function(t){(t=ll(this,t))&&t.execute()},fl.prototype.getResponse=function(){return pl(this),this.b},fl.prototype.execute=function(){pl(this);var t=this;this.a||(this.a=setTimeout(function(){t.b=function(){for(var t=50,e=[];0<t;)e.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(Math.floor(62*Math.random()))),t--;return e.join("")}();var e=t.c.callback,n=t.c["expired-callback"];if(e)try{e(t.b)}catch(r){}t.a=setTimeout(function(){if(t.a=null,t.b=null,n)try{n()}catch(r){}t.h&&t.execute()},6e4)},500))},fl.prototype.delete=function(){pl(this),this.g=!0,clearTimeout(this.a),this.a=null,Ee(this.f,"click",this.i)},dl.prototype.g=function(){return cl||(cl=new ul),St(cl)},dl.prototype.c=function(){};var ml=null;function yl(){this.b=n.grecaptcha?1/0:0,this.f=null,this.a="__rcb"+Math.floor(1e6*Math.random()).toString()}var gl=new dn(gn,"https://www.google.com/recaptcha/api.js?onload=%{onload}&render=explicit&hl=%{hl}"),vl=new wr(3e4,6e4);yl.prototype.g=function(t){var e=this;return new yt(function(r,i){var o=setTimeout(function(){i(new qr("network-request-failed"))},vl.get());!n.grecaptcha||t!==e.f&&!e.b?(n[e.a]=function(){if(n.grecaptcha){e.f=t;var a=n.grecaptcha.render;n.grecaptcha.render=function(t,n){return t=a(t,n),e.b++,t},clearTimeout(o),r(n.grecaptcha)}else clearTimeout(o),i(new qr("internal-error"));delete n[e.a]},St(ua(_n(gl,{onload:e.a,hl:t||""}))).s(function(){clearTimeout(o),i(new qr("internal-error","Unable to load external reCAPTCHA dependencies!"))})):(clearTimeout(o),r(n.grecaptcha))})},yl.prototype.c=function(){this.b--};var bl=null;function _l(t,e,r,i,o,a,s){if(Ar(this,"type","recaptcha"),this.c=this.f=null,this.D=!1,this.l=e,this.g=null,s?(ml||(ml=new dl),s=ml):(bl||(bl=new yl),s=bl),this.m=s,this.a=r||{theme:"light",type:"image"},this.h=[],this.a[Sl])throw new qr("argument-error","sitekey should not be provided for reCAPTCHA as one is automatically provisioned for the current project.");if(this.i="invisible"===this.a[Tl],!n.document)throw new qr("operation-not-supported-in-this-environment","RecaptchaVerifier is only supported in a browser HTTP/HTTPS environment with DOM support.");if(!Rn(e)||!this.i&&Rn(e).hasChildNodes())throw new qr("argument-error","reCAPTCHA container is either not found or already contains inner elements!");this.u=new ma(t,a||null,o||null),this.w=i||function(){return null};var u=this;this.o=[];var c=this.a[wl];this.a[wl]=function(t){if(Cl(u,t),"function"===typeof c)c(t);else if("string"===typeof c){var e=cr(c,n);"function"===typeof e&&e(t)}};var l=this.a[El];this.a[El]=function(){if(Cl(u,null),"function"===typeof l)l();else if("string"===typeof l){var t=cr(l,n);"function"===typeof t&&t()}}}var wl="callback",El="expired-callback",Sl="sitekey",Tl="size";function Cl(t,e){for(var n=0;n<t.o.length;n++)try{t.o[n](e)}catch(r){}}function kl(t,e){return t.h.push(e),e.ia(function(){V(t.h,e)}),e}function xl(t){if(t.D)throw new qr("internal-error","RecaptchaVerifier instance has been destroyed.")}function Il(t,e,n){var i=!1;try{this.b=n||r.a.app()}catch(s){throw new qr("argument-error","No firebase.app.App instance is currently initialized.")}if(!this.b.options||!this.b.options.apiKey)throw new qr("invalid-api-key");n=this.b.options.apiKey;var o=this,a=null;try{a=this.b.auth().ya()}catch(s){}try{i=this.b.auth().settings.appVerificationDisabledForTesting}catch(s){}a=r.a.SDK_VERSION?sr(r.a.SDK_VERSION,a):null,_l.call(this,n,t,e,function(){try{var t=o.b.auth().ea()}catch(e){t=null}return t},a,hi(ci),i)}function Al(t,e,n,r){t:{n=Array.prototype.slice.call(n);for(var i=0,o=!1,a=0;a<e.length;a++)if(e[a].optional)o=!0;else{if(o)throw new qr("internal-error","Argument validator encountered a required argument after an optional argument.");i++}if(o=e.length,n.length<i||o<n.length)r="Expected "+(i==o?1==i?"1 argument":i+" arguments":i+"-"+o+" arguments")+" but got "+n.length+".";else{for(i=0;i<n.length;i++)if(o=e[i].optional&&void 0===n[i],!e[i].M(n[i])&&!o){if(e=e[i],0>i||i>=Pl.length)throw new qr("internal-error","Argument validator received an unsupported number of arguments.");n=Pl[i],r=(r?"":n+" argument ")+(e.name?'"'+e.name+'" ':"")+"must be "+e.K+".";break t}r=null}}if(r)throw new qr("argument-error",t+" failed: "+r)}(t=_l.prototype).za=function(){var t=this;return this.f?this.f:this.f=kl(this,St().then(function(){if(fr()&&!tr())return $n();throw new qr("operation-not-supported-in-this-environment","RecaptchaVerifier is only supported in a browser HTTP/HTTPS environment.")}).then(function(){return t.m.g(t.w())}).then(function(e){return t.g=e,fs(t.u,Ja,{})}).then(function(e){t.a[Sl]=e.recaptchaSiteKey}).s(function(e){throw t.f=null,e}))},t.render=function(){xl(this);var t=this;return kl(this,this.za().then(function(){if(null===t.c){var e=t.l;if(!t.i){var n=Rn(e);e=Fn("DIV"),n.appendChild(e)}t.c=t.g.render(e,t.a)}return t.c}))},t.verify=function(){xl(this);var t=this;return kl(this,this.render().then(function(e){return new yt(function(n){var r=t.g.getResponse(e);if(r)n(r);else{t.o.push(function e(r){r&&(function(t,e){B(t.o,function(t){return t==e})}(t,e),n(r))}),t.i&&t.g.execute(t.c)}})}))},t.reset=function(){xl(this),null!==this.c&&this.g.reset(this.c)},t.clear=function(){xl(this),this.D=!0,this.m.c();for(var t=0;t<this.h.length;t++)this.h[t].cancel("RecaptchaVerifier instance has been destroyed.");if(!this.i){t=Rn(this.l);for(var e;e=t.firstChild;)t.removeChild(e)}},E(Il,_l);var Pl="First Second Third Fourth Fifth Sixth Seventh Eighth Ninth".split(" ");function Dl(t,e){return{name:t||"",K:"a valid string",optional:!!e,M:i}}function Nl(t,e){return{name:t||"",K:"a boolean",optional:!!e,M:o}}function Rl(t,e){return{name:t||"",K:"a valid object",optional:!!e,M:d}}function Ol(t,e){return{name:t||"",K:"a function",optional:!!e,M:p}}function Ml(t,e){return{name:t||"",K:"null",optional:!!e,M:l}}function Fl(t){return{name:t?t+"Credential":"credential",K:t?"a valid "+t+" credential":"a valid credential",optional:!1,M:function(e){if(!e)return!1;var n=!t||e.providerId===t;return!(!e.la||!n)}}}function Ll(){return{name:"applicationVerifier",K:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,M:function(t){return!!(t&&i(t.type)&&p(t.verify))}}}function Vl(t,e,n,r){return{name:n||"",K:t.K+" or "+e.K,optional:!!r,M:function(n){return t.M(n)||e.M(n)}}}function Bl(t,e){for(var n in e){var r=e[n].name;t[r]=ql(r,t[n],e[n].j)}}function Ul(t,e){for(var n in e){var r=e[n].name;r!==n&&Object.defineProperty(t,r,{get:_(function(t){return this[t]},n),set:_(function(t,e,n,r){Al(t,[n],[r],!0),this[e]=r},r,n,e[n].ub),enumerable:!0})}}function jl(t,e,n,r){t[e]=ql(e,n,r)}function ql(t,e,n){function r(){var t=Array.prototype.slice.call(arguments);return Al(o,n,t),e.apply(this,t)}if(!n)return e;var i,o=function(t){return(t=t.split("."))[t.length-1]}(t);for(i in e)r[i]=e[i];for(i in e.prototype)r.prototype[i]=e.prototype[i];return r}Bl(Yc.prototype,{Xa:{name:"applyActionCode",j:[Dl("code")]},Ja:{name:"checkActionCode",j:[Dl("code")]},$a:{name:"confirmPasswordReset",j:[Dl("code"),Dl("newPassword")]},yb:{name:"createUserWithEmailAndPassword",j:[Dl("email"),Dl("password")]},Wb:{name:"createUserAndRetrieveDataWithEmailAndPassword",j:[Dl("email"),Dl("password")]},Zb:{name:"fetchProvidersForEmail",j:[Dl("email")]},$b:{name:"fetchSignInMethodsForEmail",j:[Dl("email")]},fa:{name:"getRedirectResult",j:[]},qc:{name:"isSignInWithEmailLink",j:[Dl("emailLink")]},wc:{name:"onAuthStateChanged",j:[Vl(Rl(),Ol(),"nextOrObserver"),Ol("opt_error",!0),Ol("opt_completed",!0)]},xc:{name:"onIdTokenChanged",j:[Vl(Rl(),Ol(),"nextOrObserver"),Ol("opt_error",!0),Ol("opt_completed",!0)]},lb:{name:"sendPasswordResetEmail",j:[Dl("email"),Vl(Rl("opt_actionCodeSettings",!0),Ml(null,!0),"opt_actionCodeSettings",!0)]},mb:{name:"sendSignInLinkToEmail",j:[Dl("email"),Rl("actionCodeSettings")]},nb:{name:"setPersistence",j:[Dl("persistence")]},Qa:{name:"signInAndRetrieveDataWithCredential",j:[Fl()]},Ra:{name:"signInAnonymously",j:[]},Ic:{name:"signInAnonymouslyAndRetrieveData",j:[]},Jc:{name:"signInWithCredential",j:[Fl()]},Nb:{name:"signInWithCustomToken",j:[Dl("token")]},Gc:{name:"signInAndRetrieveDataWithCustomToken",j:[Dl("token")]},Ob:{name:"signInWithEmailAndPassword",j:[Dl("email"),Dl("password")]},Kc:{name:"signInWithEmailLink",j:[Dl("email"),Dl("emailLink",!0)]},Hc:{name:"signInAndRetrieveDataWithEmailAndPassword",j:[Dl("email"),Dl("password")]},Lc:{name:"signInWithPhoneNumber",j:[Dl("phoneNumber"),Ll()]},Mc:{name:"signInWithPopup",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},Nc:{name:"signInWithRedirect",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},Sc:{name:"updateCurrentUser",j:[Vl({name:"user",K:"an instance of Firebase User",optional:!1,M:function(t){return!!(t&&t instanceof lc)}},Ml(),"user")]},ob:{name:"signOut",j:[]},toJSON:{name:"toJSON",j:[Dl(null,!0)]},Uc:{name:"useDeviceLanguage",j:[]},Vc:{name:"verifyPasswordResetCode",j:[Dl("code")]}}),Ul(Yc.prototype,{lc:{name:"languageCode",ub:Vl(Dl(),Ml(),"languageCode")}}),Yc.Persistence=au,Yc.Persistence.LOCAL="local",Yc.Persistence.SESSION="session",Yc.Persistence.NONE="none",Bl(lc.prototype,{delete:{name:"delete",j:[]},dc:{name:"getIdTokenResult",j:[Nl("opt_forceRefresh",!0)]},F:{name:"getIdToken",j:[Nl("opt_forceRefresh",!0)]},fb:{name:"linkAndRetrieveDataWithCredential",j:[Fl()]},rc:{name:"linkWithCredential",j:[Fl()]},sc:{name:"linkWithPhoneNumber",j:[Dl("phoneNumber"),Ll()]},tc:{name:"linkWithPopup",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},uc:{name:"linkWithRedirect",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},hb:{name:"reauthenticateAndRetrieveDataWithCredential",j:[Fl()]},Ac:{name:"reauthenticateWithCredential",j:[Fl()]},Bc:{name:"reauthenticateWithPhoneNumber",j:[Dl("phoneNumber"),Ll()]},Cc:{name:"reauthenticateWithPopup",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},Dc:{name:"reauthenticateWithRedirect",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},reload:{name:"reload",j:[]},kb:{name:"sendEmailVerification",j:[Vl(Rl("opt_actionCodeSettings",!0),Ml(null,!0),"opt_actionCodeSettings",!0)]},toJSON:{name:"toJSON",j:[Dl(null,!0)]},Rc:{name:"unlink",j:[Dl("provider")]},qb:{name:"updateEmail",j:[Dl("email")]},rb:{name:"updatePassword",j:[Dl("password")]},Tc:{name:"updatePhoneNumber",j:[Fl("phone")]},sb:{name:"updateProfile",j:[Rl("profile")]}}),Bl(ul.prototype,{execute:{name:"execute"},render:{name:"render"},reset:{name:"reset"},getResponse:{name:"getResponse"}}),Bl(sl.prototype,{execute:{name:"execute"},render:{name:"render"},reset:{name:"reset"},getResponse:{name:"getResponse"}}),Bl(yt.prototype,{ia:{name:"finally"},s:{name:"catch"},then:{name:"then"}}),Ul(Ju.prototype,{appVerificationDisabled:{name:"appVerificationDisabledForTesting",ub:Nl("appVerificationDisabledForTesting")}}),Bl(Zu.prototype,{confirm:{name:"confirm",j:[Dl("verificationCode")]}}),jl(xi,"fromJSON",function(t){t=i(t)?JSON.parse(t):t;for(var e,n=[Oi,Ki,Ji,Di],r=0;r<n.length;r++)if(e=n[r](t))return e;return null},[Vl(Dl(),Rl(),"json")]),jl(Qi,"credential",function(t,e){return new Hi(t,e)},[Dl("email"),Dl("password")]),Bl(Hi.prototype,{v:{name:"toJSON",j:[Dl(null,!0)]}}),Bl(Vi.prototype,{ua:{name:"addScope",j:[Dl("scope")]},Da:{name:"setCustomParameters",j:[Rl("customOAuthParameters")]}}),jl(Vi,"credential",Bi,[Vl(Dl(),Rl(),"token")]),jl(Qi,"credentialWithLink",Yi,[Dl("email"),Dl("emailLink")]),Bl(Ui.prototype,{ua:{name:"addScope",j:[Dl("scope")]},Da:{name:"setCustomParameters",j:[Rl("customOAuthParameters")]}}),jl(Ui,"credential",ji,[Vl(Dl(),Rl(),"token")]),Bl(qi.prototype,{ua:{name:"addScope",j:[Dl("scope")]},Da:{name:"setCustomParameters",j:[Rl("customOAuthParameters")]}}),jl(qi,"credential",Gi,[Vl(Dl(),Vl(Rl(),Ml()),"idToken"),Vl(Dl(),Ml(),"accessToken",!0)]),Bl(Wi.prototype,{Da:{name:"setCustomParameters",j:[Rl("customOAuthParameters")]}}),jl(Wi,"credential",zi,[Vl(Dl(),Rl(),"token"),Dl("secret",!0)]),Bl(Li.prototype,{ua:{name:"addScope",j:[Dl("scope")]},credential:{name:"credential",j:[Vl(Dl(),Vl(Rl(),Ml()),"optionsOrIdToken"),Vl(Dl(),Ml(),"accessToken",!0)]},Da:{name:"setCustomParameters",j:[Rl("customOAuthParameters")]}}),Bl(Ni.prototype,{v:{name:"toJSON",j:[Dl(null,!0)]}}),Bl(Ai.prototype,{v:{name:"toJSON",j:[Dl(null,!0)]}}),jl(to,"credential",eo,[Dl("verificationId"),Dl("verificationCode")]),Bl(to.prototype,{Va:{name:"verifyPhoneNumber",j:[Dl("phoneNumber"),Ll()]}}),Bl($i.prototype,{v:{name:"toJSON",j:[Dl(null,!0)]}}),Bl(qr.prototype,{toJSON:{name:"toJSON",j:[Dl(null,!0)]}}),Bl(lo.prototype,{toJSON:{name:"toJSON",j:[Dl(null,!0)]}}),Bl(co.prototype,{toJSON:{name:"toJSON",j:[Dl(null,!0)]}}),Bl(Il.prototype,{clear:{name:"clear",j:[]},render:{name:"render",j:[]},verify:{name:"verify",j:[]}}),function(){if("undefined"===typeof r.a||!r.a.INTERNAL||!r.a.INTERNAL.registerService)throw Error("Cannot find the firebase namespace; be sure to include firebase-app.js before this library.");var t={Auth:Yc,AuthCredential:xi,Error:qr};jl(t,"EmailAuthProvider",Qi,[]),jl(t,"FacebookAuthProvider",Vi,[]),jl(t,"GithubAuthProvider",Ui,[]),jl(t,"GoogleAuthProvider",qi,[]),jl(t,"TwitterAuthProvider",Wi,[]),jl(t,"OAuthProvider",Li,[Dl("providerId")]),jl(t,"SAMLAuthProvider",Fi,[Dl("providerId")]),jl(t,"PhoneAuthProvider",to,[{name:"auth",K:"an instance of Firebase Auth",optional:!0,M:function(t){return!!(t&&t instanceof Yc)}}]),jl(t,"RecaptchaVerifier",Il,[Vl(Dl(),{name:"",K:"an HTML element",optional:!1,M:function(t){return!!(t&&t instanceof Element)}},"recaptchaContainer"),Rl("recaptchaParameters",!0),{name:"app",K:"an instance of Firebase App",optional:!0,M:function(t){return!!(t&&t instanceof r.a.app.App)}}]),r.a.INTERNAL.registerService("auth",function(t,e){return e({INTERNAL:{getUid:b((t=new Yc(t)).getUid,t),getToken:b(t.cc,t),addAuthTokenListener:b(t.Vb,t),removeAuthTokenListener:b(t.Ec,t)}}),t},t,function(t,e){if("create"===t)try{e.auth()}catch(n){}}),r.a.INTERNAL.extendNamespace({User:lc})}()}).apply("undefined"!==typeof t?t:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{})}.call(this,n(18))},function(t,e,n){"use strict";(function(r){Object.defineProperty(e,"__esModule",{value:!0});var i,o=(i=n(2))&&"object"===typeof i&&"default"in i?i.default:i,a=n(0),s=n(20),u=n(70),c=function(){function t(t){this.domStorage_=t,this.prefix_="firebase:"}return t.prototype.set=function(t,e){null==e?this.domStorage_.removeItem(this.prefixedName_(t)):this.domStorage_.setItem(this.prefixedName_(t),s.stringify(e))},t.prototype.get=function(t){var e=this.domStorage_.getItem(this.prefixedName_(t));return null==e?null:s.jsonEval(e)},t.prototype.remove=function(t){this.domStorage_.removeItem(this.prefixedName_(t))},t.prototype.prefixedName_=function(t){return this.prefix_+t},t.prototype.toString=function(){return this.domStorage_.toString()},t}(),l=function(){function t(){this.cache_={},this.isInMemoryStorage=!0}return t.prototype.set=function(t,e){null==e?delete this.cache_[t]:this.cache_[t]=e},t.prototype.get=function(t){return s.contains(this.cache_,t)?this.cache_[t]:null},t.prototype.remove=function(t){delete this.cache_[t]},t}(),h=function(t){try{if("undefined"!==typeof window&&"undefined"!==typeof window[t]){var e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new c(e)}}catch(n){}return new l},f=h("localStorage"),p=h("sessionStorage"),d=new u.Logger("@firebase/database"),m=function(){var t=1;return function(){return t++}}(),y=function(t){var e=s.stringToByteArray(t),n=new s.Sha1;n.update(e);var r=n.digest();return s.base64.encodeByteArray(r)},g=function t(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];for(var r="",i=0;i<e.length;i++)Array.isArray(e[i])||e[i]&&"object"===typeof e[i]&&"number"===typeof e[i].length?r+=t.apply(null,e[i]):"object"===typeof e[i]?r+=s.stringify(e[i]):r+=e[i],r+=" ";return r},v=null,b=!0,_=function(t,e){s.assert(!e||!0===t||!1===t,"Can't turn on custom loggers persistently."),!0===t?(d.logLevel=u.LogLevel.VERBOSE,v=d.log.bind(d),e&&p.set("logging_enabled",!0)):"function"===typeof t?v=t:(v=null,p.remove("logging_enabled"))},w=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(!0===b&&(b=!1,null===v&&!0===p.get("logging_enabled")&&_(!0)),v){var n=g.apply(null,t);v(n)}},E=function(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];w.apply(void 0,[t].concat(e))}},S=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="FIREBASE INTERNAL ERROR: "+g.apply(void 0,t);d.error(n)},T=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="FIREBASE FATAL ERROR: "+g.apply(void 0,t);throw d.error(n),new Error(n)},C=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="FIREBASE WARNING: "+g.apply(void 0,t);d.warn(n)},k=function(t){return"number"===typeof t&&(t!=t||t==Number.POSITIVE_INFINITY||t==Number.NEGATIVE_INFINITY)},x="[MIN_NAME]",I="[MAX_NAME]",A=function(t,e){if(t===e)return 0;if(t===x||e===I)return-1;if(e===x||t===I)return 1;var n=L(t),r=L(e);return null!==n?null!==r?n-r==0?t.length-e.length:n-r:-1:null!==r?1:t<e?-1:1},P=function(t,e){return t===e?0:t<e?-1:1},D=function(t,e){if(e&&t in e)return e[t];throw new Error("Missing required key ("+t+") in object: "+s.stringify(e))},N=function t(e){if("object"!==typeof e||null===e)return s.stringify(e);var n=[];for(var r in e)n.push(r);n.sort();for(var i="{",o=0;o<n.length;o++)0!==o&&(i+=","),i+=s.stringify(n[o]),i+=":",i+=t(e[n[o]]);return i+="}"},R=function(t,e){var n=t.length;if(n<=e)return[t];for(var r=[],i=0;i<n;i+=e)i+e>n?r.push(t.substring(i,n)):r.push(t.substring(i,i+e));return r},O=function(t,e){if(Array.isArray(t))for(var n=0;n<t.length;++n)e(n,t[n]);else s.forEach(t,function(t,n){return e(n,t)})},M=function(t){s.assert(!k(t),"Invalid JSON number");var e,n,r,i,o,a,u;for(0===t?(n=0,r=0,e=1/t===-1/0?1:0):(e=t<0,(t=Math.abs(t))>=Math.pow(2,-1022)?(n=(i=Math.min(Math.floor(Math.log(t)/Math.LN2),1023))+1023,r=Math.round(t*Math.pow(2,52-i)-Math.pow(2,52))):(n=0,r=Math.round(t/Math.pow(2,-1074)))),a=[],o=52;o;o-=1)a.push(r%2?1:0),r=Math.floor(r/2);for(o=11;o;o-=1)a.push(n%2?1:0),n=Math.floor(n/2);a.push(e?1:0),a.reverse(),u=a.join("");var c="";for(o=0;o<64;o+=8){var l=parseInt(u.substr(o,8),2).toString(16);1===l.length&&(l="0"+l),c+=l}return c.toLowerCase()},F=new RegExp("^-?\\d{1,10}$"),L=function(t){if(F.test(t)){var e=Number(t);if(e>=-2147483648&&e<=2147483647)return e}return null},V=function(t){try{t()}catch(e){setTimeout(function(){var t=e.stack||"";throw C("Exception was thrown by user callback.",t),e},Math.floor(0))}},B=function(){return("object"===typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},U=function(t,e){var n=setTimeout(t,e);return"object"===typeof n&&n.unref&&n.unref(),n},j=function(){function t(t,e){if(void 0===e){this.pieces_=t.split("/");for(var n=0,r=0;r<this.pieces_.length;r++)this.pieces_[r].length>0&&(this.pieces_[n]=this.pieces_[r],n++);this.pieces_.length=n,this.pieceNum_=0}else this.pieces_=t,this.pieceNum_=e}return Object.defineProperty(t,"Empty",{get:function(){return new t("")},enumerable:!0,configurable:!0}),t.prototype.getFront=function(){return this.pieceNum_>=this.pieces_.length?null:this.pieces_[this.pieceNum_]},t.prototype.getLength=function(){return this.pieces_.length-this.pieceNum_},t.prototype.popFront=function(){var e=this.pieceNum_;return e<this.pieces_.length&&e++,new t(this.pieces_,e)},t.prototype.getBack=function(){return this.pieceNum_<this.pieces_.length?this.pieces_[this.pieces_.length-1]:null},t.prototype.toString=function(){for(var t="",e=this.pieceNum_;e<this.pieces_.length;e++)""!==this.pieces_[e]&&(t+="/"+this.pieces_[e]);return t||"/"},t.prototype.toUrlEncodedString=function(){for(var t="",e=this.pieceNum_;e<this.pieces_.length;e++)""!==this.pieces_[e]&&(t+="/"+encodeURIComponent(String(this.pieces_[e])));return t||"/"},t.prototype.slice=function(t){return void 0===t&&(t=0),this.pieces_.slice(this.pieceNum_+t)},t.prototype.parent=function(){if(this.pieceNum_>=this.pieces_.length)return null;for(var e=[],n=this.pieceNum_;n<this.pieces_.length-1;n++)e.push(this.pieces_[n]);return new t(e,0)},t.prototype.child=function(e){for(var n=[],r=this.pieceNum_;r<this.pieces_.length;r++)n.push(this.pieces_[r]);if(e instanceof t)for(r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);else{var i=e.split("/");for(r=0;r<i.length;r++)i[r].length>0&&n.push(i[r])}return new t(n,0)},t.prototype.isEmpty=function(){return this.pieceNum_>=this.pieces_.length},t.relativePath=function(e,n){var r=e.getFront(),i=n.getFront();if(null===r)return n;if(r===i)return t.relativePath(e.popFront(),n.popFront());throw new Error("INTERNAL ERROR: innerPath ("+n+") is not within outerPath ("+e+")")},t.comparePaths=function(t,e){for(var n=t.slice(),r=e.slice(),i=0;i<n.length&&i<r.length;i++){var o=A(n[i],r[i]);if(0!==o)return o}return n.length===r.length?0:n.length<r.length?-1:1},t.prototype.equals=function(t){if(this.getLength()!==t.getLength())return!1;for(var e=this.pieceNum_,n=t.pieceNum_;e<=this.pieces_.length;e++,n++)if(this.pieces_[e]!==t.pieces_[n])return!1;return!0},t.prototype.contains=function(t){var e=this.pieceNum_,n=t.pieceNum_;if(this.getLength()>t.getLength())return!1;for(;e<this.pieces_.length;){if(this.pieces_[e]!==t.pieces_[n])return!1;++e,++n}return!0},t}(),q=function(){function t(t,e){this.errorPrefix_=e,this.parts_=t.slice(),this.byteLength_=Math.max(1,this.parts_.length);for(var n=0;n<this.parts_.length;n++)this.byteLength_+=s.stringLength(this.parts_[n]);this.checkValid_()}return Object.defineProperty(t,"MAX_PATH_DEPTH",{get:function(){return 32},enumerable:!0,configurable:!0}),Object.defineProperty(t,"MAX_PATH_LENGTH_BYTES",{get:function(){return 768},enumerable:!0,configurable:!0}),t.prototype.push=function(t){this.parts_.length>0&&(this.byteLength_+=1),this.parts_.push(t),this.byteLength_+=s.stringLength(t),this.checkValid_()},t.prototype.pop=function(){var t=this.parts_.pop();this.byteLength_-=s.stringLength(t),this.parts_.length>0&&(this.byteLength_-=1)},t.prototype.checkValid_=function(){if(this.byteLength_>t.MAX_PATH_LENGTH_BYTES)throw new Error(this.errorPrefix_+"has a key path longer than "+t.MAX_PATH_LENGTH_BYTES+" bytes ("+this.byteLength_+").");if(this.parts_.length>t.MAX_PATH_DEPTH)throw new Error(this.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+t.MAX_PATH_DEPTH+") or object contains a cycle "+this.toErrorString())},t.prototype.toErrorString=function(){return 0==this.parts_.length?"":"in property '"+this.parts_.join(".")+"'"},t}(),G="long_polling",W=function(){function t(t,e,n,r,i){void 0===i&&(i=""),this.secure=e,this.namespace=n,this.webSocketOnly=r,this.persistenceKey=i,this.host=t.toLowerCase(),this.domain=this.host.substr(this.host.indexOf(".")+1),this.internalHost=f.get("host:"+t)||this.host}return t.prototype.needsQueryParam=function(){return this.host!==this.internalHost||this.isCustomHost()},t.prototype.isCacheableHost=function(){return"s-"===this.internalHost.substr(0,2)},t.prototype.isDemoHost=function(){return"firebaseio-demo.com"===this.domain},t.prototype.isCustomHost=function(){return"firebaseio.com"!==this.domain&&"firebaseio-demo.com"!==this.domain},t.prototype.updateHost=function(t){t!==this.internalHost&&(this.internalHost=t,this.isCacheableHost()&&f.set("host:"+this.host,this.internalHost))},t.prototype.connectionURL=function(t,e){var n;if(s.assert("string"===typeof t,"typeof type must == string"),s.assert("object"===typeof e,"typeof params must == object"),"websocket"===t)n=(this.secure?"wss://":"ws://")+this.internalHost+"/.ws?";else{if(t!==G)throw new Error("Unknown connection type: "+t);n=(this.secure?"https://":"http://")+this.internalHost+"/.lp?"}this.needsQueryParam()&&(e.ns=this.namespace);var r=[];return s.forEach(e,function(t,e){r.push(t+"="+e)}),n+r.join("&")},t.prototype.toString=function(){var t=this.toURLString();return this.persistenceKey&&(t+="<"+this.persistenceKey+">"),t},t.prototype.toURLString=function(){return(this.secure?"https://":"http://")+this.host},t}();var z,H,K=function(t){var e=Q(t),n=e.subdomain;"firebase"===e.domain&&T(e.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),n&&"undefined"!=n||"localhost"===e.domain||T("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),e.secure||"undefined"!==typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&C("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().");var r="ws"===e.scheme||"wss"===e.scheme;return{repoInfo:new W(e.host,e.secure,n,r),path:new j(e.pathString)}},Q=function(t){var e="",n="",r="",i="",o=!0,a="https",s=443;if("string"===typeof t){var u=t.indexOf("//");u>=0&&(a=t.substring(0,u-1),t=t.substring(u+2));var c=t.indexOf("/");-1===c&&(c=t.length);var l=t.indexOf("?");-1===l&&(l=t.length),e=t.substring(0,Math.min(c,l)),c<l&&(i=function(t){for(var e="",n=t.split("/"),r=0;r<n.length;r++)if(n[r].length>0){var i=n[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch(o){}e+="/"+i}return e}(t.substring(c,l)));var h=function(t){var e={};"?"===t.charAt(0)&&(t=t.substring(1));for(var n=0,r=t.split("&");n<r.length;n++){var i=r[n];if(0!==i.length){var o=i.split("=");2===o.length?e[decodeURIComponent(o[0])]=decodeURIComponent(o[1]):C("Invalid query segment '"+i+"' in query '"+t+"'")}}return e}(t.substring(Math.min(t.length,l)));(u=e.indexOf(":"))>=0?(o="https"===a||"wss"===a,s=parseInt(e.substring(u+1),10)):u=t.length;var f=e.split(".");3===f.length?(n=f[1],r=f[0].toLowerCase()):2===f.length?n=f[0]:"localhost"===f[0].slice(0,u).toLowerCase()&&(n="localhost"),""===r&&"ns"in h&&(r=h.ns)}return{host:e,port:s,domain:n,subdomain:r,secure:o,scheme:a,pathString:i}},Y=/[\[\].#$\/\u0000-\u001F\u007F]/,X=/[\[\].#$\u0000-\u001F\u007F]/,$=function(t){return"string"===typeof t&&0!==t.length&&!Y.test(t)},J=function(t){return"string"===typeof t&&0!==t.length&&!X.test(t)},Z=function(t){return null===t||"string"===typeof t||"number"===typeof t&&!k(t)||t&&"object"===typeof t&&s.contains(t,".sv")},tt=function(t,e,n,r,i){i&&void 0===n||et(s.errorPrefix(t,e,i),n,r)},et=function t(e,n,r){var i=r instanceof j?new q(r,e):r;if(void 0===n)throw new Error(e+"contains undefined "+i.toErrorString());if("function"===typeof n)throw new Error(e+"contains a function "+i.toErrorString()+" with contents = "+n.toString());if(k(n))throw new Error(e+"contains "+n.toString()+" "+i.toErrorString());if("string"===typeof n&&n.length>10485760/3&&s.stringLength(n)>10485760)throw new Error(e+"contains a string greater than 10485760 utf8 bytes "+i.toErrorString()+" ('"+n.substring(0,50)+"...')");if(n&&"object"===typeof n){var o=!1,a=!1;if(s.forEach(n,function(n,r){if(".value"===n)o=!0;else if(".priority"!==n&&".sv"!==n&&(a=!0,!$(n)))throw new Error(e+" contains an invalid key ("+n+") "+i.toErrorString()+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');i.push(n),t(e,r,i),i.pop()}),o&&a)throw new Error(e+' contains ".value" child '+i.toErrorString()+" in addition to actual children.")}},nt=function(t,e,n,r,i){if(!i||void 0!==n){var o=s.errorPrefix(t,e,i);if(!n||"object"!==typeof n||Array.isArray(n))throw new Error(o+" must be an object containing the children to replace.");var a=[];s.forEach(n,function(t,e){var n=new j(t);if(et(o,e,r.child(n)),".priority"===n.getBack()&&!Z(e))throw new Error(o+"contains an invalid value for '"+n.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");a.push(n)}),function(t,e){var n,r;for(n=0;n<e.length;n++)for(var i=(r=e[n]).slice(),o=0;o<i.length;o++)if(".priority"===i[o]&&o===i.length-1);else if(!$(i[o]))throw new Error(t+"contains an invalid key ("+i[o]+") in path "+r.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');e.sort(j.comparePaths);var a=null;for(n=0;n<e.length;n++){if(r=e[n],null!==a&&a.contains(r))throw new Error(t+"contains a path "+a.toString()+" that is ancestor of another path "+r.toString());a=r}}(o,a)}},rt=function(t,e,n,r){if(!r||void 0!==n){if(k(n))throw new Error(s.errorPrefix(t,e,r)+"is "+n.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!Z(n))throw new Error(s.errorPrefix(t,e,r)+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},it=function(t,e,n,r){if(!r||void 0!==n)switch(n){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error(s.errorPrefix(t,e,r)+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}},ot=function(t,e,n,r){if((!r||void 0!==n)&&!$(n))throw new Error(s.errorPrefix(t,e,r)+'was an invalid key = "'+n+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},at=function(t,e,n,r){if((!r||void 0!==n)&&!J(n))throw new Error(s.errorPrefix(t,e,r)+'was an invalid path = "'+n+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},st=function(t,e){if(".info"===e.getFront())throw new Error(t+" failed = Can't modify data under /.info/")},ut=function(t,e,n){var r=n.path.toString();if("string"!==typeof n.repoInfo.host||0===n.repoInfo.host.length||!$(n.repoInfo.namespace)&&"localhost"!==n.repoInfo.host.split(":")[0]||0!==r.length&&!function(t){return t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),J(t)}(r))throw new Error(s.errorPrefix(t,e,!1)+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')},ct=function(){function t(t,e){this.repo_=t,this.path_=e}return t.prototype.cancel=function(t){s.validateArgCount("OnDisconnect.cancel",0,1,arguments.length),s.validateCallback("OnDisconnect.cancel",1,t,!0);var e=new s.Deferred;return this.repo_.onDisconnectCancel(this.path_,e.wrapCallback(t)),e.promise},t.prototype.remove=function(t){s.validateArgCount("OnDisconnect.remove",0,1,arguments.length),st("OnDisconnect.remove",this.path_),s.validateCallback("OnDisconnect.remove",1,t,!0);var e=new s.Deferred;return this.repo_.onDisconnectSet(this.path_,null,e.wrapCallback(t)),e.promise},t.prototype.set=function(t,e){s.validateArgCount("OnDisconnect.set",1,2,arguments.length),st("OnDisconnect.set",this.path_),tt("OnDisconnect.set",1,t,this.path_,!1),s.validateCallback("OnDisconnect.set",2,e,!0);var n=new s.Deferred;return this.repo_.onDisconnectSet(this.path_,t,n.wrapCallback(e)),n.promise},t.prototype.setWithPriority=function(t,e,n){s.validateArgCount("OnDisconnect.setWithPriority",2,3,arguments.length),st("OnDisconnect.setWithPriority",this.path_),tt("OnDisconnect.setWithPriority",1,t,this.path_,!1),rt("OnDisconnect.setWithPriority",2,e,!1),s.validateCallback("OnDisconnect.setWithPriority",3,n,!0);var r=new s.Deferred;return this.repo_.onDisconnectSetWithPriority(this.path_,t,e,r.wrapCallback(n)),r.promise},t.prototype.update=function(t,e){if(s.validateArgCount("OnDisconnect.update",1,2,arguments.length),st("OnDisconnect.update",this.path_),Array.isArray(t)){for(var n={},r=0;r<t.length;++r)n[""+r]=t[r];t=n,C("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}nt("OnDisconnect.update",1,t,this.path_,!1),s.validateCallback("OnDisconnect.update",2,e,!0);var i=new s.Deferred;return this.repo_.onDisconnectUpdate(this.path_,t,i.wrapCallback(e)),i.promise},t}(),lt=function(){function t(t,e){this.committed=t,this.snapshot=e}return t.prototype.toJSON=function(){return s.validateArgCount("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}},t}(),ht=function(){var t="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",e=0,n=[];return function(r){var i,o=r===e;e=r;var a=new Array(8);for(i=7;i>=0;i--)a[i]=t.charAt(r%64),r=Math.floor(r/64);s.assert(0===r,"Cannot push at time == 0");var u=a.join("");if(o){for(i=11;i>=0&&63===n[i];i--)n[i]=0;n[i]++}else for(i=0;i<12;i++)n[i]=Math.floor(64*Math.random());for(i=0;i<12;i++)u+=t.charAt(n[i]);return s.assert(20===u.length,"nextPushId: Length should be 20."),u}}(),ft=function(){function t(t,e){this.name=t,this.node=e}return t.Wrap=function(e,n){return new t(e,n)},t}(),pt=function(){function t(){}return t.prototype.getCompare=function(){return this.compare.bind(this)},t.prototype.indexedValueChanged=function(t,e){var n=new ft(x,t),r=new ft(x,e);return 0!==this.compare(n,r)},t.prototype.minPost=function(){return ft.MIN},t}(),dt=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a.__extends(e,t),Object.defineProperty(e,"__EMPTY_NODE",{get:function(){return z},set:function(t){z=t},enumerable:!0,configurable:!0}),e.prototype.compare=function(t,e){return A(t.name,e.name)},e.prototype.isDefinedOn=function(t){throw s.assertionError("KeyIndex.isDefinedOn not expected to be called.")},e.prototype.indexedValueChanged=function(t,e){return!1},e.prototype.minPost=function(){return ft.MIN},e.prototype.maxPost=function(){return new ft(I,z)},e.prototype.makePost=function(t,e){return s.assert("string"===typeof t,"KeyIndex indexValue must always be a string."),new ft(t,z)},e.prototype.toString=function(){return".key"},e}(pt),mt=new dt;var yt,gt,vt,bt=function(t){return"number"===typeof t?"number:"+M(t):"string:"+t},_t=function(t){if(t.isLeafNode()){var e=t.val();s.assert("string"===typeof e||"number"===typeof e||"object"===typeof e&&s.contains(e,".sv"),"Priority must be a string or number.")}else s.assert(t===H||t.isEmpty(),"priority of unexpected type.");s.assert(t===H||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")},wt=function(){function t(e,n){void 0===n&&(n=t.__childrenNodeConstructor.EMPTY_NODE),this.value_=e,this.priorityNode_=n,this.lazyHash_=null,s.assert(void 0!==this.value_&&null!==this.value_,"LeafNode shouldn't be created with null/undefined value."),_t(this.priorityNode_)}return Object.defineProperty(t,"__childrenNodeConstructor",{get:function(){return yt},set:function(t){yt=t},enumerable:!0,configurable:!0}),t.prototype.isLeafNode=function(){return!0},t.prototype.getPriority=function(){return this.priorityNode_},t.prototype.updatePriority=function(e){return new t(this.value_,e)},t.prototype.getImmediateChild=function(e){return".priority"===e?this.priorityNode_:t.__childrenNodeConstructor.EMPTY_NODE},t.prototype.getChild=function(e){return e.isEmpty()?this:".priority"===e.getFront()?this.priorityNode_:t.__childrenNodeConstructor.EMPTY_NODE},t.prototype.hasChild=function(){return!1},t.prototype.getPredecessorChildName=function(t,e){return null},t.prototype.updateImmediateChild=function(e,n){return".priority"===e?this.updatePriority(n):n.isEmpty()&&".priority"!==e?this:t.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,n).updatePriority(this.priorityNode_)},t.prototype.updateChild=function(e,n){var r=e.getFront();return null===r?n:n.isEmpty()&&".priority"!==r?this:(s.assert(".priority"!==r||1===e.getLength(),".priority must be the last token in a path"),this.updateImmediateChild(r,t.__childrenNodeConstructor.EMPTY_NODE.updateChild(e.popFront(),n)))},t.prototype.isEmpty=function(){return!1},t.prototype.numChildren=function(){return 0},t.prototype.forEachChild=function(t,e){return!1},t.prototype.val=function(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()},t.prototype.hash=function(){if(null===this.lazyHash_){var t="";this.priorityNode_.isEmpty()||(t+="priority:"+bt(this.priorityNode_.val())+":");var e=typeof this.value_;t+=e+":",t+="number"===e?M(this.value_):this.value_,this.lazyHash_=y(t)}return this.lazyHash_},t.prototype.getValue=function(){return this.value_},t.prototype.compareTo=function(e){return e===t.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof t.__childrenNodeConstructor?-1:(s.assert(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))},t.prototype.compareToLeafNode_=function(e){var n=typeof e.value_,r=typeof this.value_,i=t.VALUE_TYPE_ORDER.indexOf(n),o=t.VALUE_TYPE_ORDER.indexOf(r);return s.assert(i>=0,"Unknown leaf type: "+n),s.assert(o>=0,"Unknown leaf type: "+r),i===o?"object"===r?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:o-i},t.prototype.withIndex=function(){return this},t.prototype.isIndexed=function(){return!0},t.prototype.equals=function(t){if(t===this)return!0;if(t.isLeafNode()){var e=t;return this.value_===e.value_&&this.priorityNode_.equals(e.priorityNode_)}return!1},t.VALUE_TYPE_ORDER=["object","boolean","number","string"],t}();var Et,St,Tt=new(function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a.__extends(e,t),e.prototype.compare=function(t,e){var n=t.node.getPriority(),r=e.node.getPriority(),i=n.compareTo(r);return 0===i?A(t.name,e.name):i},e.prototype.isDefinedOn=function(t){return!t.getPriority().isEmpty()},e.prototype.indexedValueChanged=function(t,e){return!t.getPriority().equals(e.getPriority())},e.prototype.minPost=function(){return ft.MIN},e.prototype.maxPost=function(){return new ft(I,new wt("[PRIORITY-POST]",vt))},e.prototype.makePost=function(t,e){var n=gt(t);return new ft(e,new wt("[PRIORITY-POST]",n))},e.prototype.toString=function(){return".priority"},e}(pt)),Ct=function(){function t(t,e,n,r,i){void 0===i&&(i=null),this.isReverse_=r,this.resultGenerator_=i,this.nodeStack_=[];for(var o=1;!t.isEmpty();)if(t=t,o=e?n(t.key,e):1,r&&(o*=-1),o<0)t=this.isReverse_?t.left:t.right;else{if(0===o){this.nodeStack_.push(t);break}this.nodeStack_.push(t),t=this.isReverse_?t.right:t.left}}return t.prototype.getNext=function(){if(0===this.nodeStack_.length)return null;var t,e=this.nodeStack_.pop();if(t=this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return t},t.prototype.hasNext=function(){return this.nodeStack_.length>0},t.prototype.peek=function(){if(0===this.nodeStack_.length)return null;var t=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value}},t}(),kt=function(){function t(e,n,r,i,o){this.key=e,this.value=n,this.color=null!=r?r:t.RED,this.left=null!=i?i:It.EMPTY_NODE,this.right=null!=o?o:It.EMPTY_NODE}return t.prototype.copy=function(e,n,r,i,o){return new t(null!=e?e:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=o?o:this.right)},t.prototype.count=function(){return this.left.count()+1+this.right.count()},t.prototype.isEmpty=function(){return!1},t.prototype.inorderTraversal=function(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)},t.prototype.reverseTraversal=function(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)},t.prototype.min_=function(){return this.left.isEmpty()?this:this.left.min_()},t.prototype.minKey=function(){return this.min_().key},t.prototype.maxKey=function(){return this.right.isEmpty()?this.key:this.right.maxKey()},t.prototype.insert=function(t,e,n){var r,i;return(i=(r=n(t,(i=this).key))<0?i.copy(null,null,null,i.left.insert(t,e,n),null):0===r?i.copy(null,e,null,null,null):i.copy(null,null,null,null,i.right.insert(t,e,n))).fixUp_()},t.prototype.removeMin_=function(){if(this.left.isEmpty())return It.EMPTY_NODE;var t=this;return t.left.isRed_()||t.left.left.isRed_()||(t=t.moveRedLeft_()),(t=t.copy(null,null,null,t.left.removeMin_(),null)).fixUp_()},t.prototype.remove=function(t,e){var n,r;if(e(t,(n=this).key)<0)n.left.isEmpty()||n.left.isRed_()||n.left.left.isRed_()||(n=n.moveRedLeft_()),n=n.copy(null,null,null,n.left.remove(t,e),null);else{if(n.left.isRed_()&&(n=n.rotateRight_()),n.right.isEmpty()||n.right.isRed_()||n.right.left.isRed_()||(n=n.moveRedRight_()),0===e(t,n.key)){if(n.right.isEmpty())return It.EMPTY_NODE;r=n.right.min_(),n=n.copy(r.key,r.value,null,null,n.right.removeMin_())}n=n.copy(null,null,null,null,n.right.remove(t,e))}return n.fixUp_()},t.prototype.isRed_=function(){return this.color},t.prototype.fixUp_=function(){var t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t},t.prototype.moveRedLeft_=function(){var t=this.colorFlip_();return t.right.left.isRed_()&&(t=(t=(t=t.copy(null,null,null,null,t.right.rotateRight_())).rotateLeft_()).colorFlip_()),t},t.prototype.moveRedRight_=function(){var t=this.colorFlip_();return t.left.left.isRed_()&&(t=(t=t.rotateRight_()).colorFlip_()),t},t.prototype.rotateLeft_=function(){var e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)},t.prototype.rotateRight_=function(){var e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)},t.prototype.colorFlip_=function(){var t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)},t.prototype.checkMaxDepth_=function(){var t=this.check_();return Math.pow(2,t)<=this.count()+1},t.prototype.check_=function(){var t;if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");if((t=this.left.check_())!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)},t.RED=!0,t.BLACK=!1,t}(),xt=function(){function t(){}return t.prototype.copy=function(t,e,n,r,i){return this},t.prototype.insert=function(t,e,n){return new kt(t,e,null)},t.prototype.remove=function(t,e){return this},t.prototype.count=function(){return 0},t.prototype.isEmpty=function(){return!0},t.prototype.inorderTraversal=function(t){return!1},t.prototype.reverseTraversal=function(t){return!1},t.prototype.minKey=function(){return null},t.prototype.maxKey=function(){return null},t.prototype.check_=function(){return 0},t.prototype.isRed_=function(){return!1},t}(),It=function(){function t(e,n){void 0===n&&(n=t.EMPTY_NODE),this.comparator_=e,this.root_=n}return t.prototype.insert=function(e,n){return new t(this.comparator_,this.root_.insert(e,n,this.comparator_).copy(null,null,kt.BLACK,null,null))},t.prototype.remove=function(e){return new t(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,kt.BLACK,null,null))},t.prototype.get=function(t){for(var e,n=this.root_;!n.isEmpty();){if(0===(e=this.comparator_(t,n.key)))return n.value;e<0?n=n.left:e>0&&(n=n.right)}return null},t.prototype.getPredecessorKey=function(t){for(var e,n=this.root_,r=null;!n.isEmpty();){if(0===(e=this.comparator_(t,n.key))){if(n.left.isEmpty())return r?r.key:null;for(n=n.left;!n.right.isEmpty();)n=n.right;return n.key}e<0?n=n.left:e>0&&(r=n,n=n.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")},t.prototype.isEmpty=function(){return this.root_.isEmpty()},t.prototype.count=function(){return this.root_.count()},t.prototype.minKey=function(){return this.root_.minKey()},t.prototype.maxKey=function(){return this.root_.maxKey()},t.prototype.inorderTraversal=function(t){return this.root_.inorderTraversal(t)},t.prototype.reverseTraversal=function(t){return this.root_.reverseTraversal(t)},t.prototype.getIterator=function(t){return new Ct(this.root_,null,this.comparator_,!1,t)},t.prototype.getIteratorFrom=function(t,e){return new Ct(this.root_,t,this.comparator_,!1,e)},t.prototype.getReverseIteratorFrom=function(t,e){return new Ct(this.root_,t,this.comparator_,!0,e)},t.prototype.getReverseIterator=function(t){return new Ct(this.root_,null,this.comparator_,!0,t)},t.EMPTY_NODE=new xt,t}(),At=Math.log(2),Pt=function(){function t(t){var e;this.count=(e=t+1,parseInt(Math.log(e)/At,10)),this.current_=this.count-1;var n,r=(n=this.count,parseInt(Array(n+1).join("1"),2));this.bits_=t+1&r}return t.prototype.nextBitIsOne=function(){var t=!(this.bits_&1<<this.current_);return this.current_--,t},t}(),Dt=function(t,e,n,r){t.sort(e);var i=function(e){for(var r=null,i=null,o=t.length,a=function(e,r){var i=o-e,a=o;o-=e;var u=function e(r,i){var o,a,s=i-r;if(0==s)return null;if(1==s)return o=t[r],a=n?n(o):o,new kt(a,o.node,kt.BLACK,null,null);var u=parseInt(s/2,10)+r,c=e(r,u),l=e(u+1,i);return o=t[u],a=n?n(o):o,new kt(a,o.node,kt.BLACK,c,l)}(i+1,a),c=t[i],l=n?n(c):c;s(new kt(l,c.node,r,null,u))},s=function(t){r?(r.left=t,r=t):(i=t,r=t)},u=0;u<e.count;++u){var c=e.nextBitIsOne(),l=Math.pow(2,e.count-(u+1));c?a(l,kt.BLACK):(a(l,kt.BLACK),a(l,kt.RED))}return i}(new Pt(t.length));return new It(r||e,i)},Nt={},Rt=function(){function t(t,e){this.indexes_=t,this.indexSet_=e}return Object.defineProperty(t,"Default",{get:function(){return s.assert(Nt&&Tt,"ChildrenNode.ts has not been loaded"),Et=Et||new t({".priority":Nt},{".priority":Tt})},enumerable:!0,configurable:!0}),t.prototype.get=function(t){var e=s.safeGet(this.indexes_,t);if(!e)throw new Error("No index defined for "+t);return e===Nt?null:e},t.prototype.hasIndex=function(t){return s.contains(this.indexSet_,t.toString())},t.prototype.addIndex=function(e,n){s.assert(e!==mt,"KeyIndex always exists and isn't meant to be added to the IndexMap.");for(var r,i=[],o=!1,a=n.getIterator(ft.Wrap),u=a.getNext();u;)o=o||e.isDefinedOn(u.node),i.push(u),u=a.getNext();r=o?Dt(i,e.getCompare()):Nt;var c=e.toString(),l=s.clone(this.indexSet_);l[c]=e;var h=s.clone(this.indexes_);return h[c]=r,new t(h,l)},t.prototype.addToIndexes=function(e,n){var r=this;return new t(s.map(this.indexes_,function(t,i){var o=s.safeGet(r.indexSet_,i);if(s.assert(o,"Missing index implementation for "+i),t===Nt){if(o.isDefinedOn(e.node)){for(var a=[],u=n.getIterator(ft.Wrap),c=u.getNext();c;)c.name!=e.name&&a.push(c),c=u.getNext();return a.push(e),Dt(a,o.getCompare())}return Nt}var l=n.get(e.name),h=t;return l&&(h=h.remove(new ft(e.name,l))),h.insert(e,e.node)}),this.indexSet_)},t.prototype.removeFromIndexes=function(e,n){return new t(s.map(this.indexes_,function(t){if(t===Nt)return t;var r=n.get(e.name);return r?t.remove(new ft(e.name,r)):t}),this.indexSet_)},t}();function Ot(t,e){return A(t.name,e.name)}function Mt(t,e){return A(t,e)}var Ft=function(){function t(t,e,n){this.children_=t,this.priorityNode_=e,this.indexMap_=n,this.lazyHash_=null,this.priorityNode_&&_t(this.priorityNode_),this.children_.isEmpty()&&s.assert(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}return Object.defineProperty(t,"EMPTY_NODE",{get:function(){return St||(St=new t(new It(Mt),null,Rt.Default))},enumerable:!0,configurable:!0}),t.prototype.isLeafNode=function(){return!1},t.prototype.getPriority=function(){return this.priorityNode_||St},t.prototype.updatePriority=function(e){return this.children_.isEmpty()?this:new t(this.children_,e,this.indexMap_)},t.prototype.getImmediateChild=function(t){if(".priority"===t)return this.getPriority();var e=this.children_.get(t);return null===e?St:e},t.prototype.getChild=function(t){var e=t.getFront();return null===e?this:this.getImmediateChild(e).getChild(t.popFront())},t.prototype.hasChild=function(t){return null!==this.children_.get(t)},t.prototype.updateImmediateChild=function(e,n){if(s.assert(n,"We should always be passing snapshot nodes"),".priority"===e)return this.updatePriority(n);var r,i=new ft(e,n),o=void 0,a=void 0;return n.isEmpty()?(o=this.children_.remove(e),a=this.indexMap_.removeFromIndexes(i,this.children_)):(o=this.children_.insert(e,n),a=this.indexMap_.addToIndexes(i,this.children_)),r=o.isEmpty()?St:this.priorityNode_,new t(o,r,a)},t.prototype.updateChild=function(t,e){var n=t.getFront();if(null===n)return e;s.assert(".priority"!==t.getFront()||1===t.getLength(),".priority must be the last token in a path");var r=this.getImmediateChild(n).updateChild(t.popFront(),e);return this.updateImmediateChild(n,r)},t.prototype.isEmpty=function(){return this.children_.isEmpty()},t.prototype.numChildren=function(){return this.children_.count()},t.prototype.val=function(e){if(this.isEmpty())return null;var n={},r=0,i=0,o=!0;if(this.forEachChild(Tt,function(a,s){n[a]=s.val(e),r++,o&&t.INTEGER_REGEXP_.test(a)?i=Math.max(i,Number(a)):o=!1}),!e&&o&&i<2*r){var a=[];for(var s in n)a[s]=n[s];return a}return e&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n},t.prototype.hash=function(){if(null===this.lazyHash_){var t="";this.getPriority().isEmpty()||(t+="priority:"+bt(this.getPriority().val())+":"),this.forEachChild(Tt,function(e,n){var r=n.hash();""!==r&&(t+=":"+e+":"+r)}),this.lazyHash_=""===t?"":y(t)}return this.lazyHash_},t.prototype.getPredecessorChildName=function(t,e,n){var r=this.resolveIndex_(n);if(r){var i=r.getPredecessorKey(new ft(t,e));return i?i.name:null}return this.children_.getPredecessorKey(t)},t.prototype.getFirstChildName=function(t){var e=this.resolveIndex_(t);if(e){var n=e.minKey();return n&&n.name}return this.children_.minKey()},t.prototype.getFirstChild=function(t){var e=this.getFirstChildName(t);return e?new ft(e,this.children_.get(e)):null},t.prototype.getLastChildName=function(t){var e=this.resolveIndex_(t);if(e){var n=e.maxKey();return n&&n.name}return this.children_.maxKey()},t.prototype.getLastChild=function(t){var e=this.getLastChildName(t);return e?new ft(e,this.children_.get(e)):null},t.prototype.forEachChild=function(t,e){var n=this.resolveIndex_(t);return n?n.inorderTraversal(function(t){return e(t.name,t.node)}):this.children_.inorderTraversal(e)},t.prototype.getIterator=function(t){return this.getIteratorFrom(t.minPost(),t)},t.prototype.getIteratorFrom=function(t,e){var n=this.resolveIndex_(e);if(n)return n.getIteratorFrom(t,function(t){return t});for(var r=this.children_.getIteratorFrom(t.name,ft.Wrap),i=r.peek();null!=i&&e.compare(i,t)<0;)r.getNext(),i=r.peek();return r},t.prototype.getReverseIterator=function(t){return this.getReverseIteratorFrom(t.maxPost(),t)},t.prototype.getReverseIteratorFrom=function(t,e){var n=this.resolveIndex_(e);if(n)return n.getReverseIteratorFrom(t,function(t){return t});for(var r=this.children_.getReverseIteratorFrom(t.name,ft.Wrap),i=r.peek();null!=i&&e.compare(i,t)>0;)r.getNext(),i=r.peek();return r},t.prototype.compareTo=function(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===Lt?-1:0},t.prototype.withIndex=function(e){if(e===mt||this.indexMap_.hasIndex(e))return this;var n=this.indexMap_.addIndex(e,this.children_);return new t(this.children_,this.priorityNode_,n)},t.prototype.isIndexed=function(t){return t===mt||this.indexMap_.hasIndex(t)},t.prototype.equals=function(t){if(t===this)return!0;if(t.isLeafNode())return!1;var e=t;if(this.getPriority().equals(e.getPriority())){if(this.children_.count()===e.children_.count()){for(var n=this.getIterator(Tt),r=e.getIterator(Tt),i=n.getNext(),o=r.getNext();i&&o;){if(i.name!==o.name||!i.node.equals(o.node))return!1;i=n.getNext(),o=r.getNext()}return null===i&&null===o}return!1}return!1},t.prototype.resolveIndex_=function(t){return t===mt?null:this.indexMap_.get(t.toString())},t.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,t}(),Lt=new(function(t){function e(){return t.call(this,new It(Mt),Ft.EMPTY_NODE,Rt.Default)||this}return a.__extends(e,t),e.prototype.compareTo=function(t){return t===this?0:1},e.prototype.equals=function(t){return t===this},e.prototype.getPriority=function(){return this},e.prototype.getImmediateChild=function(t){return Ft.EMPTY_NODE},e.prototype.isEmpty=function(){return!1},e}(Ft));Object.defineProperties(ft,{MIN:{value:new ft(x,Ft.EMPTY_NODE)},MAX:{value:new ft(I,Lt)}}),dt.__EMPTY_NODE=Ft.EMPTY_NODE,wt.__childrenNodeConstructor=Ft,H=Lt,function(t){vt=t}(Lt);var Vt=!0;function Bt(t,e){if(void 0===e&&(e=null),null===t)return Ft.EMPTY_NODE;if("object"===typeof t&&".priority"in t&&(e=t[".priority"]),s.assert(null===e||"string"===typeof e||"number"===typeof e||"object"===typeof e&&".sv"in e,"Invalid priority type found: "+typeof e),"object"===typeof t&&".value"in t&&null!==t[".value"]&&(t=t[".value"]),"object"!==typeof t||".sv"in t)return new wt(t,Bt(e));if(t instanceof Array||!Vt){var n=Ft.EMPTY_NODE,r=t;return s.forEach(r,function(t,e){if(s.contains(r,t)&&"."!==t.substring(0,1)){var i=Bt(e);!i.isLeafNode()&&i.isEmpty()||(n=n.updateImmediateChild(t,i))}}),n.updatePriority(Bt(e))}var i=[],o=!1,a=t;if(s.forEach(a,function(t,e){if("string"!==typeof t||"."!==t.substring(0,1)){var n=Bt(a[t]);n.isEmpty()||(o=o||!n.getPriority().isEmpty(),i.push(new ft(t,n)))}}),0==i.length)return Ft.EMPTY_NODE;var u=Dt(i,Ot,function(t){return t.name},Mt);if(o){var c=Dt(i,Tt.getCompare());return new Ft(u,Bt(e),new Rt({".priority":c},{".priority":Tt}))}return new Ft(u,Bt(e),Rt.Default)}!function(t){gt=t}(Bt);var Ut,jt,qt=new(function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a.__extends(e,t),e.prototype.compare=function(t,e){var n=t.node.compareTo(e.node);return 0===n?A(t.name,e.name):n},e.prototype.isDefinedOn=function(t){return!0},e.prototype.indexedValueChanged=function(t,e){return!t.equals(e)},e.prototype.minPost=function(){return ft.MIN},e.prototype.maxPost=function(){return ft.MAX},e.prototype.makePost=function(t,e){var n=Bt(t);return new ft(e,n)},e.prototype.toString=function(){return".value"},e}(pt)),Gt=function(t){function e(e){var n=t.call(this)||this;return n.indexPath_=e,s.assert(!e.isEmpty()&&".priority"!==e.getFront(),"Can't create PathIndex with empty path or .priority key"),n}return a.__extends(e,t),e.prototype.extractChild=function(t){return t.getChild(this.indexPath_)},e.prototype.isDefinedOn=function(t){return!t.getChild(this.indexPath_).isEmpty()},e.prototype.compare=function(t,e){var n=this.extractChild(t.node),r=this.extractChild(e.node),i=n.compareTo(r);return 0===i?A(t.name,e.name):i},e.prototype.makePost=function(t,e){var n=Bt(t),r=Ft.EMPTY_NODE.updateChild(this.indexPath_,n);return new ft(e,r)},e.prototype.maxPost=function(){var t=Ft.EMPTY_NODE.updateChild(this.indexPath_,Lt);return new ft(I,t)},e.prototype.toString=function(){return this.indexPath_.slice().join("/")},e}(pt),Wt=function(){function t(t,e,n){this.node_=t,this.ref_=e,this.index_=n}return t.prototype.val=function(){return s.validateArgCount("DataSnapshot.val",0,0,arguments.length),this.node_.val()},t.prototype.exportVal=function(){return s.validateArgCount("DataSnapshot.exportVal",0,0,arguments.length),this.node_.val(!0)},t.prototype.toJSON=function(){return s.validateArgCount("DataSnapshot.toJSON",0,1,arguments.length),this.exportVal()},t.prototype.exists=function(){return s.validateArgCount("DataSnapshot.exists",0,0,arguments.length),!this.node_.isEmpty()},t.prototype.child=function(e){s.validateArgCount("DataSnapshot.child",0,1,arguments.length),e=String(e),at("DataSnapshot.child",1,e,!1);var n=new j(e),r=this.ref_.child(n);return new t(this.node_.getChild(n),r,Tt)},t.prototype.hasChild=function(t){s.validateArgCount("DataSnapshot.hasChild",1,1,arguments.length),at("DataSnapshot.hasChild",1,t,!1);var e=new j(t);return!this.node_.getChild(e).isEmpty()},t.prototype.getPriority=function(){return s.validateArgCount("DataSnapshot.getPriority",0,0,arguments.length),this.node_.getPriority().val()},t.prototype.forEach=function(e){var n=this;return s.validateArgCount("DataSnapshot.forEach",1,1,arguments.length),s.validateCallback("DataSnapshot.forEach",1,e,!1),!this.node_.isLeafNode()&&!!this.node_.forEachChild(this.index_,function(r,i){return e(new t(i,n.ref_.child(r),Tt))})},t.prototype.hasChildren=function(){return s.validateArgCount("DataSnapshot.hasChildren",0,0,arguments.length),!this.node_.isLeafNode()&&!this.node_.isEmpty()},Object.defineProperty(t.prototype,"key",{get:function(){return this.ref_.getKey()},enumerable:!0,configurable:!0}),t.prototype.numChildren=function(){return s.validateArgCount("DataSnapshot.numChildren",0,0,arguments.length),this.node_.numChildren()},t.prototype.getRef=function(){return s.validateArgCount("DataSnapshot.ref",0,0,arguments.length),this.ref_},Object.defineProperty(t.prototype,"ref",{get:function(){return this.getRef()},enumerable:!0,configurable:!0}),t}(),zt=function(){function t(t,e,n,r){this.eventType=t,this.eventRegistration=e,this.snapshot=n,this.prevName=r}return t.prototype.getPath=function(){var t=this.snapshot.getRef();return"value"===this.eventType?t.path:t.getParent().path},t.prototype.getEventType=function(){return this.eventType},t.prototype.getEventRunner=function(){return this.eventRegistration.getEventRunner(this)},t.prototype.toString=function(){return this.getPath().toString()+":"+this.eventType+":"+s.stringify(this.snapshot.exportVal())},t}(),Ht=function(){function t(t,e,n){this.eventRegistration=t,this.error=e,this.path=n}return t.prototype.getPath=function(){return this.path},t.prototype.getEventType=function(){return"cancel"},t.prototype.getEventRunner=function(){return this.eventRegistration.getEventRunner(this)},t.prototype.toString=function(){return this.path.toString()+":cancel"},t}(),Kt=function(){function t(t,e,n){this.callback_=t,this.cancelCallback_=e,this.context_=n}return t.prototype.respondsTo=function(t){return"value"===t},t.prototype.createEvent=function(t,e){var n=e.getQueryParams().getIndex();return new zt("value",this,new Wt(t.snapshotNode,e.getRef(),n))},t.prototype.getEventRunner=function(t){var e=this.context_;if("cancel"===t.getEventType()){s.assert(this.cancelCallback_,"Raising a cancel event on a listener with no cancel callback");var n=this.cancelCallback_;return function(){n.call(e,t.error)}}var r=this.callback_;return function(){r.call(e,t.snapshot)}},t.prototype.createCancelEvent=function(t,e){return this.cancelCallback_?new Ht(this,t,e):null},t.prototype.matches=function(e){return e instanceof t&&(!e.callback_||!this.callback_||e.callback_===this.callback_&&e.context_===this.context_)},t.prototype.hasAnyCallback=function(){return null!==this.callback_},t}(),Qt=function(){function t(t,e,n){this.callbacks_=t,this.cancelCallback_=e,this.context_=n}return t.prototype.respondsTo=function(t){var e="children_added"===t?"child_added":t;return e="children_removed"===e?"child_removed":e,s.contains(this.callbacks_,e)},t.prototype.createCancelEvent=function(t,e){return this.cancelCallback_?new Ht(this,t,e):null},t.prototype.createEvent=function(t,e){s.assert(null!=t.childName,"Child events should have a childName.");var n=e.getRef().child(t.childName),r=e.getQueryParams().getIndex();return new zt(t.type,this,new Wt(t.snapshotNode,n,r),t.prevName)},t.prototype.getEventRunner=function(t){var e=this.context_;if("cancel"===t.getEventType()){s.assert(this.cancelCallback_,"Raising a cancel event on a listener with no cancel callback");var n=this.cancelCallback_;return function(){n.call(e,t.error)}}var r=this.callbacks_[t.eventType];return function(){r.call(e,t.snapshot,t.prevName)}},t.prototype.matches=function(e){if(e instanceof t){if(!this.callbacks_||!e.callbacks_)return!0;if(this.context_===e.context_){var n=s.getCount(e.callbacks_);if(n===s.getCount(this.callbacks_)){if(1===n){var r=s.getAnyKey(e.callbacks_),i=s.getAnyKey(this.callbacks_);return i===r&&(!e.callbacks_[r]||!this.callbacks_[i]||e.callbacks_[r]===this.callbacks_[i])}return s.every(this.callbacks_,function(t,n){return e.callbacks_[t]===n})}}}return!1},t.prototype.hasAnyCallback=function(){return null!==this.callbacks_},t}(),Yt=function(){function t(t,e,n,r){this.repo=t,this.path=e,this.queryParams_=n,this.orderByCalled_=r}return Object.defineProperty(t,"__referenceConstructor",{get:function(){return s.assert(Ut,"Reference.ts has not been loaded"),Ut},set:function(t){Ut=t},enumerable:!0,configurable:!0}),t.validateQueryEndpoints_=function(t){var e=null,n=null;if(t.hasStart()&&(e=t.getIndexStartValue()),t.hasEnd()&&(n=t.getIndexEndValue()),t.getIndex()===mt){var r="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",i="Query: When ordering by key, the argument passed to startAt(), endAt(),or equalTo() must be a string.";if(t.hasStart()){if(t.getIndexStartName()!=x)throw new Error(r);if("string"!==typeof e)throw new Error(i)}if(t.hasEnd()){if(t.getIndexEndName()!=I)throw new Error(r);if("string"!==typeof n)throw new Error(i)}}else if(t.getIndex()===Tt){if(null!=e&&!Z(e)||null!=n&&!Z(n))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), endAt(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if(s.assert(t.getIndex()instanceof Gt||t.getIndex()===qt,"unknown index type."),null!=e&&"object"===typeof e||null!=n&&"object"===typeof n)throw new Error("Query: First argument passed to startAt(), endAt(), or equalTo() cannot be an object.")},t.validateLimit_=function(t){if(t.hasStart()&&t.hasEnd()&&t.hasLimit()&&!t.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), endAt(), and limit(). Use limitToFirst() or limitToLast() instead.")},t.prototype.validateNoPreviousOrderByCall_=function(t){if(!0===this.orderByCalled_)throw new Error(t+": You can't combine multiple orderBy calls.")},t.prototype.getQueryParams=function(){return this.queryParams_},t.prototype.getRef=function(){return s.validateArgCount("Query.ref",0,0,arguments.length),new t.__referenceConstructor(this.repo,this.path)},t.prototype.on=function(e,n,r,i){s.validateArgCount("Query.on",2,4,arguments.length),it("Query.on",1,e,!1),s.validateCallback("Query.on",2,n,!1);var o=t.getCancelAndContextArgs_("Query.on",r,i);if("value"===e)this.onValueEvent(n,o.cancel,o.context);else{var a={};a[e]=n,this.onChildEvent(a,o.cancel,o.context)}return n},t.prototype.onValueEvent=function(t,e,n){var r=new Kt(t,e||null,n||null);this.repo.addEventCallbackForQuery(this,r)},t.prototype.onChildEvent=function(t,e,n){var r=new Qt(t,e,n);this.repo.addEventCallbackForQuery(this,r)},t.prototype.off=function(t,e,n){s.validateArgCount("Query.off",0,3,arguments.length),it("Query.off",1,t,!0),s.validateCallback("Query.off",2,e,!0),s.validateContextObject("Query.off",3,n,!0);var r=null,i=null;"value"===t?r=new Kt(e||null,null,n||null):t&&(e&&((i={})[t]=e),r=new Qt(i,null,n||null));this.repo.removeEventCallbackForQuery(this,r)},t.prototype.once=function(e,n,r,i){var o=this;s.validateArgCount("Query.once",1,4,arguments.length),it("Query.once",1,e,!1),s.validateCallback("Query.once",2,n,!0);var a=t.getCancelAndContextArgs_("Query.once",r,i),u=!0,c=new s.Deferred;c.promise.catch(function(){});var l=function t(r){u&&(u=!1,o.off(e,t),n&&n.bind(a.context)(r),c.resolve(r))};return this.on(e,l,function(t){o.off(e,l),a.cancel&&a.cancel.bind(a.context)(t),c.reject(t)}),c.promise},t.prototype.limitToFirst=function(e){if(s.validateArgCount("Query.limitToFirst",1,1,arguments.length),"number"!==typeof e||Math.floor(e)!==e||e<=0)throw new Error("Query.limitToFirst: First argument must be a positive integer.");if(this.queryParams_.hasLimit())throw new Error("Query.limitToFirst: Limit was already set (by another call to limit, limitToFirst, or limitToLast).");return new t(this.repo,this.path,this.queryParams_.limitToFirst(e),this.orderByCalled_)},t.prototype.limitToLast=function(e){if(s.validateArgCount("Query.limitToLast",1,1,arguments.length),"number"!==typeof e||Math.floor(e)!==e||e<=0)throw new Error("Query.limitToLast: First argument must be a positive integer.");if(this.queryParams_.hasLimit())throw new Error("Query.limitToLast: Limit was already set (by another call to limit, limitToFirst, or limitToLast).");return new t(this.repo,this.path,this.queryParams_.limitToLast(e),this.orderByCalled_)},t.prototype.orderByChild=function(e){if(s.validateArgCount("Query.orderByChild",1,1,arguments.length),"$key"===e)throw new Error('Query.orderByChild: "$key" is invalid.  Use Query.orderByKey() instead.');if("$priority"===e)throw new Error('Query.orderByChild: "$priority" is invalid.  Use Query.orderByPriority() instead.');if("$value"===e)throw new Error('Query.orderByChild: "$value" is invalid.  Use Query.orderByValue() instead.');at("Query.orderByChild",1,e,!1),this.validateNoPreviousOrderByCall_("Query.orderByChild");var n=new j(e);if(n.isEmpty())throw new Error("Query.orderByChild: cannot pass in empty path.  Use Query.orderByValue() instead.");var r=new Gt(n),i=this.queryParams_.orderBy(r);return t.validateQueryEndpoints_(i),new t(this.repo,this.path,i,!0)},t.prototype.orderByKey=function(){s.validateArgCount("Query.orderByKey",0,0,arguments.length),this.validateNoPreviousOrderByCall_("Query.orderByKey");var e=this.queryParams_.orderBy(mt);return t.validateQueryEndpoints_(e),new t(this.repo,this.path,e,!0)},t.prototype.orderByPriority=function(){s.validateArgCount("Query.orderByPriority",0,0,arguments.length),this.validateNoPreviousOrderByCall_("Query.orderByPriority");var e=this.queryParams_.orderBy(Tt);return t.validateQueryEndpoints_(e),new t(this.repo,this.path,e,!0)},t.prototype.orderByValue=function(){s.validateArgCount("Query.orderByValue",0,0,arguments.length),this.validateNoPreviousOrderByCall_("Query.orderByValue");var e=this.queryParams_.orderBy(qt);return t.validateQueryEndpoints_(e),new t(this.repo,this.path,e,!0)},t.prototype.startAt=function(e,n){void 0===e&&(e=null),s.validateArgCount("Query.startAt",0,2,arguments.length),tt("Query.startAt",1,e,this.path,!0),ot("Query.startAt",2,n,!0);var r=this.queryParams_.startAt(e,n);if(t.validateLimit_(r),t.validateQueryEndpoints_(r),this.queryParams_.hasStart())throw new Error("Query.startAt: Starting point was already set (by another call to startAt or equalTo).");return void 0===e&&(e=null,n=null),new t(this.repo,this.path,r,this.orderByCalled_)},t.prototype.endAt=function(e,n){void 0===e&&(e=null),s.validateArgCount("Query.endAt",0,2,arguments.length),tt("Query.endAt",1,e,this.path,!0),ot("Query.endAt",2,n,!0);var r=this.queryParams_.endAt(e,n);if(t.validateLimit_(r),t.validateQueryEndpoints_(r),this.queryParams_.hasEnd())throw new Error("Query.endAt: Ending point was already set (by another call to endAt or equalTo).");return new t(this.repo,this.path,r,this.orderByCalled_)},t.prototype.equalTo=function(t,e){if(s.validateArgCount("Query.equalTo",1,2,arguments.length),tt("Query.equalTo",1,t,this.path,!1),ot("Query.equalTo",2,e,!0),this.queryParams_.hasStart())throw new Error("Query.equalTo: Starting point was already set (by another call to startAt or equalTo).");if(this.queryParams_.hasEnd())throw new Error("Query.equalTo: Ending point was already set (by another call to endAt or equalTo).");return this.startAt(t,e).endAt(t,e)},t.prototype.toString=function(){return s.validateArgCount("Query.toString",0,0,arguments.length),this.repo.toString()+this.path.toUrlEncodedString()},t.prototype.toJSON=function(){return s.validateArgCount("Query.toJSON",0,1,arguments.length),this.toString()},t.prototype.queryObject=function(){return this.queryParams_.getQueryObject()},t.prototype.queryIdentifier=function(){var t=this.queryObject(),e=N(t);return"{}"===e?"default":e},t.prototype.isEqual=function(e){if(s.validateArgCount("Query.isEqual",1,1,arguments.length),!(e instanceof t)){throw new Error("Query.isEqual failed: First argument must be an instance of firebase.database.Query.")}var n=this.repo===e.repo,r=this.path.equals(e.path),i=this.queryIdentifier()===e.queryIdentifier();return n&&r&&i},t.getCancelAndContextArgs_=function(t,e,n){var r={cancel:null,context:null};if(e&&n)r.cancel=e,s.validateCallback(t,3,r.cancel,!0),r.context=n,s.validateContextObject(t,4,r.context,!0);else if(e)if("object"===typeof e&&null!==e)r.context=e;else{if("function"!==typeof e)throw new Error(s.errorPrefix(t,3,!0)+" must either be a cancel callback or a context object.");r.cancel=e}return r},Object.defineProperty(t.prototype,"ref",{get:function(){return this.getRef()},enumerable:!0,configurable:!0}),t}(),Xt=function(){function t(){this.set={}}return t.prototype.add=function(t,e){this.set[t]=null===e||e},t.prototype.contains=function(t){return s.contains(this.set,t)},t.prototype.get=function(t){return this.contains(t)?this.set[t]:void 0},t.prototype.remove=function(t){delete this.set[t]},t.prototype.clear=function(){this.set={}},t.prototype.isEmpty=function(){return s.isEmpty(this.set)},t.prototype.count=function(){return s.getCount(this.set)},t.prototype.each=function(t){s.forEach(this.set,function(e,n){return t(e,n)})},t.prototype.keys=function(){var t=[];return s.forEach(this.set,function(e){t.push(e)}),t},t}(),$t=function(){function t(){this.value_=null,this.children_=null}return t.prototype.find=function(t){if(null!=this.value_)return this.value_.getChild(t);if(t.isEmpty()||null==this.children_)return null;var e=t.getFront();return t=t.popFront(),this.children_.contains(e)?this.children_.get(e).find(t):null},t.prototype.remember=function(e,n){if(e.isEmpty())this.value_=n,this.children_=null;else if(null!==this.value_)this.value_=this.value_.updateChild(e,n);else{null==this.children_&&(this.children_=new Xt);var r=e.getFront();this.children_.contains(r)||this.children_.add(r,new t);var i=this.children_.get(r);e=e.popFront(),i.remember(e,n)}},t.prototype.forget=function(t){if(t.isEmpty())return this.value_=null,this.children_=null,!0;if(null!==this.value_){if(this.value_.isLeafNode())return!1;var e=this.value_;this.value_=null;var n=this;return e.forEachChild(Tt,function(t,e){n.remember(new j(t),e)}),this.forget(t)}if(null!==this.children_){var r=t.getFront();if(t=t.popFront(),this.children_.contains(r))this.children_.get(r).forget(t)&&this.children_.remove(r);return!!this.children_.isEmpty()&&(this.children_=null,!0)}return!0},t.prototype.forEachTree=function(t,e){null!==this.value_?e(t,this.value_):this.forEachChild(function(n,r){var i=new j(t.toString()+"/"+n);r.forEachTree(i,e)})},t.prototype.forEachChild=function(t){null!==this.children_&&this.children_.each(function(e,n){t(e,n)})},t}(),Jt=function(t,e){return t&&"object"===typeof t?(s.assert(".sv"in t,"Unexpected leaf node or priority contents"),e[t[".sv"]]):t},Zt=function t(e,n){var r,i=e.getPriority().val(),o=Jt(i,n);if(e.isLeafNode()){var a=e,s=Jt(a.getValue(),n);return s!==a.getValue()||o!==a.getPriority().val()?new wt(s,Bt(o)):e}var u=e;return r=u,o!==u.getPriority().val()&&(r=r.updatePriority(new wt(o))),u.forEachChild(Tt,function(e,i){var o=t(i,n);o!==i&&(r=r.updateImmediateChild(e,o))}),r};!function(t){t[t.OVERWRITE=0]="OVERWRITE",t[t.MERGE=1]="MERGE",t[t.ACK_USER_WRITE=2]="ACK_USER_WRITE",t[t.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"}(jt||(jt={}));var te,ee,ne=function(){function t(t,e,n,r){this.fromUser=t,this.fromServer=e,this.queryId=n,this.tagged=r,s.assert(!r||e,"Tagged queries must be from server.")}return t.User=new t(!0,!1,null,!1),t.Server=new t(!1,!0,null,!1),t.forServerTaggedQuery=function(e){return new t(!1,!0,e,!0)},t}(),re=function(){function t(t,e,n){this.path=t,this.affectedTree=e,this.revert=n,this.type=jt.ACK_USER_WRITE,this.source=ne.User}return t.prototype.operationForChild=function(e){if(this.path.isEmpty()){if(null!=this.affectedTree.value)return s.assert(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;var n=this.affectedTree.subtree(new j(e));return new t(j.Empty,n,this.revert)}return s.assert(this.path.getFront()===e,"operationForChild called for unrelated child."),new t(this.path.popFront(),this.affectedTree,this.revert)},t}(),ie=function(){return te||(te=new It(P)),te},oe=function(){function t(t,e){void 0===e&&(e=ie()),this.value=t,this.children=e}return t.fromObject=function(e){var n=t.Empty;return s.forEach(e,function(t,e){n=n.set(new j(t),e)}),n},t.prototype.isEmpty=function(){return null===this.value&&this.children.isEmpty()},t.prototype.findRootMostMatchingPathAndValue=function(t,e){if(null!=this.value&&e(this.value))return{path:j.Empty,value:this.value};if(t.isEmpty())return null;var n=t.getFront(),r=this.children.get(n);if(null!==r){var i=r.findRootMostMatchingPathAndValue(t.popFront(),e);return null!=i?{path:new j(n).child(i.path),value:i.value}:null}return null},t.prototype.findRootMostValueAndPath=function(t){return this.findRootMostMatchingPathAndValue(t,function(){return!0})},t.prototype.subtree=function(e){if(e.isEmpty())return this;var n=e.getFront(),r=this.children.get(n);return null!==r?r.subtree(e.popFront()):t.Empty},t.prototype.set=function(e,n){if(e.isEmpty())return new t(n,this.children);var r=e.getFront(),i=(this.children.get(r)||t.Empty).set(e.popFront(),n),o=this.children.insert(r,i);return new t(this.value,o)},t.prototype.remove=function(e){if(e.isEmpty())return this.children.isEmpty()?t.Empty:new t(null,this.children);var n=e.getFront(),r=this.children.get(n);if(r){var i=r.remove(e.popFront()),o=void 0;return o=i.isEmpty()?this.children.remove(n):this.children.insert(n,i),null===this.value&&o.isEmpty()?t.Empty:new t(this.value,o)}return this},t.prototype.get=function(t){if(t.isEmpty())return this.value;var e=t.getFront(),n=this.children.get(e);return n?n.get(t.popFront()):null},t.prototype.setTree=function(e,n){if(e.isEmpty())return n;var r=e.getFront(),i=(this.children.get(r)||t.Empty).setTree(e.popFront(),n),o=void 0;return o=i.isEmpty()?this.children.remove(r):this.children.insert(r,i),new t(this.value,o)},t.prototype.fold=function(t){return this.fold_(j.Empty,t)},t.prototype.fold_=function(t,e){var n={};return this.children.inorderTraversal(function(r,i){n[r]=i.fold_(t.child(r),e)}),e(t,this.value,n)},t.prototype.findOnPath=function(t,e){return this.findOnPath_(t,j.Empty,e)},t.prototype.findOnPath_=function(t,e,n){var r=!!this.value&&n(e,this.value);if(r)return r;if(t.isEmpty())return null;var i=t.getFront(),o=this.children.get(i);return o?o.findOnPath_(t.popFront(),e.child(i),n):null},t.prototype.foreachOnPath=function(t,e){return this.foreachOnPath_(t,j.Empty,e)},t.prototype.foreachOnPath_=function(e,n,r){if(e.isEmpty())return this;this.value&&r(n,this.value);var i=e.getFront(),o=this.children.get(i);return o?o.foreachOnPath_(e.popFront(),n.child(i),r):t.Empty},t.prototype.foreach=function(t){this.foreach_(j.Empty,t)},t.prototype.foreach_=function(t,e){this.children.inorderTraversal(function(n,r){r.foreach_(t.child(n),e)}),this.value&&e(t,this.value)},t.prototype.foreachChild=function(t){this.children.inorderTraversal(function(e,n){n.value&&t(e,n.value)})},t.Empty=new t(null),t}(),ae=function(){function t(t,e){this.source=t,this.path=e,this.type=jt.LISTEN_COMPLETE}return t.prototype.operationForChild=function(e){return this.path.isEmpty()?new t(this.source,j.Empty):new t(this.source,this.path.popFront())},t}(),se=function(){function t(t,e,n){this.source=t,this.path=e,this.snap=n,this.type=jt.OVERWRITE}return t.prototype.operationForChild=function(e){return this.path.isEmpty()?new t(this.source,j.Empty,this.snap.getImmediateChild(e)):new t(this.source,this.path.popFront(),this.snap)},t}(),ue=function(){function t(t,e,n){this.source=t,this.path=e,this.children=n,this.type=jt.MERGE}return t.prototype.operationForChild=function(e){if(this.path.isEmpty()){var n=this.children.subtree(new j(e));return n.isEmpty()?null:n.value?new se(this.source,j.Empty,n.value):new t(this.source,j.Empty,n)}return s.assert(this.path.getFront()===e,"Can't get a merge for a child not on the path of the operation"),new t(this.source,this.path.popFront(),this.children)},t.prototype.toString=function(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"},t}(),ce=function(){function t(t,e,n){this.node_=t,this.fullyInitialized_=e,this.filtered_=n}return t.prototype.isFullyInitialized=function(){return this.fullyInitialized_},t.prototype.isFiltered=function(){return this.filtered_},t.prototype.isCompleteForPath=function(t){if(t.isEmpty())return this.isFullyInitialized()&&!this.filtered_;var e=t.getFront();return this.isCompleteForChild(e)},t.prototype.isCompleteForChild=function(t){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(t)},t.prototype.getNode=function(){return this.node_},t}(),le=function(){function t(t,e){this.eventCache_=t,this.serverCache_=e}return t.prototype.updateEventSnap=function(e,n,r){return new t(new ce(e,n,r),this.serverCache_)},t.prototype.updateServerSnap=function(e,n,r){return new t(this.eventCache_,new ce(e,n,r))},t.prototype.getEventCache=function(){return this.eventCache_},t.prototype.getCompleteEventSnap=function(){return this.eventCache_.isFullyInitialized()?this.eventCache_.getNode():null},t.prototype.getServerCache=function(){return this.serverCache_},t.prototype.getCompleteServerSnap=function(){return this.serverCache_.isFullyInitialized()?this.serverCache_.getNode():null},t.Empty=new t(new ce(Ft.EMPTY_NODE,!1,!1),new ce(Ft.EMPTY_NODE,!1,!1)),t}(),he=function(){function t(t,e,n,r,i){this.type=t,this.snapshotNode=e,this.childName=n,this.oldSnap=r,this.prevName=i}return t.valueChange=function(e){return new t(t.VALUE,e)},t.childAddedChange=function(e,n){return new t(t.CHILD_ADDED,n,e)},t.childRemovedChange=function(e,n){return new t(t.CHILD_REMOVED,n,e)},t.childChangedChange=function(e,n,r){return new t(t.CHILD_CHANGED,n,e,r)},t.childMovedChange=function(e,n){return new t(t.CHILD_MOVED,n,e)},t.CHILD_ADDED="child_added",t.CHILD_REMOVED="child_removed",t.CHILD_CHANGED="child_changed",t.CHILD_MOVED="child_moved",t.VALUE="value",t}(),fe=function(){function t(t){this.index_=t}return t.prototype.updateChild=function(t,e,n,r,i,o){s.assert(t.isIndexed(this.index_),"A node must be indexed if only a child is updated");var a=t.getImmediateChild(e);return a.getChild(r).equals(n.getChild(r))&&a.isEmpty()==n.isEmpty()?t:(null!=o&&(n.isEmpty()?t.hasChild(e)?o.trackChildChange(he.childRemovedChange(e,a)):s.assert(t.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):a.isEmpty()?o.trackChildChange(he.childAddedChange(e,n)):o.trackChildChange(he.childChangedChange(e,n,a))),t.isLeafNode()&&n.isEmpty()?t:t.updateImmediateChild(e,n).withIndex(this.index_))},t.prototype.updateFullNode=function(t,e,n){return null!=n&&(t.isLeafNode()||t.forEachChild(Tt,function(t,r){e.hasChild(t)||n.trackChildChange(he.childRemovedChange(t,r))}),e.isLeafNode()||e.forEachChild(Tt,function(e,r){if(t.hasChild(e)){var i=t.getImmediateChild(e);i.equals(r)||n.trackChildChange(he.childChangedChange(e,r,i))}else n.trackChildChange(he.childAddedChange(e,r))})),e.withIndex(this.index_)},t.prototype.updatePriority=function(t,e){return t.isEmpty()?Ft.EMPTY_NODE:t.updatePriority(e)},t.prototype.filtersNodes=function(){return!1},t.prototype.getIndexedFilter=function(){return this},t.prototype.getIndex=function(){return this.index_},t}(),pe=function(){function t(){this.changeMap_={}}return t.prototype.trackChildChange=function(t){var e=t.type,n=t.childName;s.assert(e==he.CHILD_ADDED||e==he.CHILD_CHANGED||e==he.CHILD_REMOVED,"Only child changes supported for tracking"),s.assert(".priority"!==n,"Only non-priority child changes can be tracked.");var r=s.safeGet(this.changeMap_,n);if(r){var i=r.type;if(e==he.CHILD_ADDED&&i==he.CHILD_REMOVED)this.changeMap_[n]=he.childChangedChange(n,t.snapshotNode,r.snapshotNode);else if(e==he.CHILD_REMOVED&&i==he.CHILD_ADDED)delete this.changeMap_[n];else if(e==he.CHILD_REMOVED&&i==he.CHILD_CHANGED)this.changeMap_[n]=he.childRemovedChange(n,r.oldSnap);else if(e==he.CHILD_CHANGED&&i==he.CHILD_ADDED)this.changeMap_[n]=he.childAddedChange(n,t.snapshotNode);else{if(e!=he.CHILD_CHANGED||i!=he.CHILD_CHANGED)throw s.assertionError("Illegal combination of changes: "+t+" occurred after "+r);this.changeMap_[n]=he.childChangedChange(n,t.snapshotNode,r.oldSnap)}}else this.changeMap_[n]=t},t.prototype.getChanges=function(){return s.getValues(this.changeMap_)},t}(),de=new(function(){function t(){}return t.prototype.getCompleteChild=function(t){return null},t.prototype.getChildAfterChild=function(t,e,n){return null},t}()),me=function(){function t(t,e,n){void 0===n&&(n=null),this.writes_=t,this.viewCache_=e,this.optCompleteServerCache_=n}return t.prototype.getCompleteChild=function(t){var e=this.viewCache_.getEventCache();if(e.isCompleteForChild(t))return e.getNode().getImmediateChild(t);var n=null!=this.optCompleteServerCache_?new ce(this.optCompleteServerCache_,!0,!1):this.viewCache_.getServerCache();return this.writes_.calcCompleteChild(t,n)},t.prototype.getChildAfterChild=function(t,e,n){var r=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:this.viewCache_.getCompleteServerSnap(),i=this.writes_.calcIndexedSlice(r,e,1,n,t);return 0===i.length?null:i[0]},t}(),ye=function(){return function(t,e){this.viewCache=t,this.changes=e}}(),ge=function(){function t(t){this.filter_=t}return t.prototype.assertIndexed=function(t){s.assert(t.getEventCache().getNode().isIndexed(this.filter_.getIndex()),"Event snap not indexed"),s.assert(t.getServerCache().getNode().isIndexed(this.filter_.getIndex()),"Server snap not indexed")},t.prototype.applyOperation=function(e,n,r,i){var o,a,u=new pe;if(n.type===jt.OVERWRITE){var c=n;c.source.fromUser?o=this.applyUserOverwrite_(e,c.path,c.snap,r,i,u):(s.assert(c.source.fromServer,"Unknown source."),a=c.source.tagged||e.getServerCache().isFiltered()&&!c.path.isEmpty(),o=this.applyServerOverwrite_(e,c.path,c.snap,r,i,a,u))}else if(n.type===jt.MERGE){var l=n;l.source.fromUser?o=this.applyUserMerge_(e,l.path,l.children,r,i,u):(s.assert(l.source.fromServer,"Unknown source."),a=l.source.tagged||e.getServerCache().isFiltered(),o=this.applyServerMerge_(e,l.path,l.children,r,i,a,u))}else if(n.type===jt.ACK_USER_WRITE){var h=n;o=h.revert?this.revertUserWrite_(e,h.path,r,i,u):this.ackUserWrite_(e,h.path,h.affectedTree,r,i,u)}else{if(n.type!==jt.LISTEN_COMPLETE)throw s.assertionError("Unknown operation type: "+n.type);o=this.listenComplete_(e,n.path,r,u)}var f=u.getChanges();return t.maybeAddValueEvent_(e,o,f),new ye(o,f)},t.maybeAddValueEvent_=function(t,e,n){var r=e.getEventCache();if(r.isFullyInitialized()){var i=r.getNode().isLeafNode()||r.getNode().isEmpty(),o=t.getCompleteEventSnap();(n.length>0||!t.getEventCache().isFullyInitialized()||i&&!r.getNode().equals(o)||!r.getNode().getPriority().equals(o.getPriority()))&&n.push(he.valueChange(e.getCompleteEventSnap()))}},t.prototype.generateEventCacheAfterServerEvent_=function(t,e,n,r,i){var o=t.getEventCache();if(null!=n.shadowingWrite(e))return t;var a=void 0,u=void 0;if(e.isEmpty())if(s.assert(t.getServerCache().isFullyInitialized(),"If change path is empty, we must have complete server data"),t.getServerCache().isFiltered()){var c=t.getCompleteServerSnap(),l=c instanceof Ft?c:Ft.EMPTY_NODE,h=n.calcCompleteEventChildren(l);a=this.filter_.updateFullNode(t.getEventCache().getNode(),h,i)}else{var f=n.calcCompleteEventCache(t.getCompleteServerSnap());a=this.filter_.updateFullNode(t.getEventCache().getNode(),f,i)}else{var p=e.getFront();if(".priority"==p){s.assert(1==e.getLength(),"Can't have a priority with additional path components");var d=o.getNode();u=t.getServerCache().getNode();var m=n.calcEventCacheAfterServerOverwrite(e,d,u);a=null!=m?this.filter_.updatePriority(d,m):o.getNode()}else{var y=e.popFront(),g=void 0;if(o.isCompleteForChild(p)){u=t.getServerCache().getNode();var v=n.calcEventCacheAfterServerOverwrite(e,o.getNode(),u);g=null!=v?o.getNode().getImmediateChild(p).updateChild(y,v):o.getNode().getImmediateChild(p)}else g=n.calcCompleteChild(p,t.getServerCache());a=null!=g?this.filter_.updateChild(o.getNode(),p,g,y,r,i):o.getNode()}}return t.updateEventSnap(a,o.isFullyInitialized()||e.isEmpty(),this.filter_.filtersNodes())},t.prototype.applyServerOverwrite_=function(t,e,n,r,i,o,a){var s,u=t.getServerCache(),c=o?this.filter_:this.filter_.getIndexedFilter();if(e.isEmpty())s=c.updateFullNode(u.getNode(),n,null);else if(c.filtersNodes()&&!u.isFiltered()){var l=u.getNode().updateChild(e,n);s=c.updateFullNode(u.getNode(),l,null)}else{var h=e.getFront();if(!u.isCompleteForPath(e)&&e.getLength()>1)return t;var f=e.popFront(),p=u.getNode().getImmediateChild(h).updateChild(f,n);s=".priority"==h?c.updatePriority(u.getNode(),p):c.updateChild(u.getNode(),h,p,f,de,null)}var d=t.updateServerSnap(s,u.isFullyInitialized()||e.isEmpty(),c.filtersNodes()),m=new me(r,d,i);return this.generateEventCacheAfterServerEvent_(d,e,r,m,a)},t.prototype.applyUserOverwrite_=function(t,e,n,r,i,o){var a,s,u=t.getEventCache(),c=new me(r,t,i);if(e.isEmpty())s=this.filter_.updateFullNode(t.getEventCache().getNode(),n,o),a=t.updateEventSnap(s,!0,this.filter_.filtersNodes());else{var l=e.getFront();if(".priority"===l)s=this.filter_.updatePriority(t.getEventCache().getNode(),n),a=t.updateEventSnap(s,u.isFullyInitialized(),u.isFiltered());else{var h=e.popFront(),f=u.getNode().getImmediateChild(l),p=void 0;if(h.isEmpty())p=n;else{var d=c.getCompleteChild(l);p=null!=d?".priority"===h.getBack()&&d.getChild(h.parent()).isEmpty()?d:d.updateChild(h,n):Ft.EMPTY_NODE}if(f.equals(p))a=t;else{var m=this.filter_.updateChild(u.getNode(),l,p,h,c,o);a=t.updateEventSnap(m,u.isFullyInitialized(),this.filter_.filtersNodes())}}}return a},t.cacheHasChild_=function(t,e){return t.getEventCache().isCompleteForChild(e)},t.prototype.applyUserMerge_=function(e,n,r,i,o,a){var s=this,u=e;return r.foreach(function(r,c){var l=n.child(r);t.cacheHasChild_(e,l.getFront())&&(u=s.applyUserOverwrite_(u,l,c,i,o,a))}),r.foreach(function(r,c){var l=n.child(r);t.cacheHasChild_(e,l.getFront())||(u=s.applyUserOverwrite_(u,l,c,i,o,a))}),u},t.prototype.applyMerge_=function(t,e){return e.foreach(function(e,n){t=t.updateChild(e,n)}),t},t.prototype.applyServerMerge_=function(t,e,n,r,i,o,a){var s=this;if(t.getServerCache().getNode().isEmpty()&&!t.getServerCache().isFullyInitialized())return t;var u,c=t;u=e.isEmpty()?n:oe.Empty.setTree(e,n);var l=t.getServerCache().getNode();return u.children.inorderTraversal(function(e,n){if(l.hasChild(e)){var u=t.getServerCache().getNode().getImmediateChild(e),h=s.applyMerge_(u,n);c=s.applyServerOverwrite_(c,new j(e),h,r,i,o,a)}}),u.children.inorderTraversal(function(e,n){var u=!t.getServerCache().isCompleteForChild(e)&&null==n.value;if(!l.hasChild(e)&&!u){var h=t.getServerCache().getNode().getImmediateChild(e),f=s.applyMerge_(h,n);c=s.applyServerOverwrite_(c,new j(e),f,r,i,o,a)}}),c},t.prototype.ackUserWrite_=function(t,e,n,r,i,o){if(null!=r.shadowingWrite(e))return t;var a=t.getServerCache().isFiltered(),s=t.getServerCache();if(null!=n.value){if(e.isEmpty()&&s.isFullyInitialized()||s.isCompleteForPath(e))return this.applyServerOverwrite_(t,e,s.getNode().getChild(e),r,i,a,o);if(e.isEmpty()){var u=oe.Empty;return s.getNode().forEachChild(mt,function(t,e){u=u.set(new j(t),e)}),this.applyServerMerge_(t,e,u,r,i,a,o)}return t}var c=oe.Empty;return n.foreach(function(t,n){var r=e.child(t);s.isCompleteForPath(r)&&(c=c.set(t,s.getNode().getChild(r)))}),this.applyServerMerge_(t,e,c,r,i,a,o)},t.prototype.listenComplete_=function(t,e,n,r){var i=t.getServerCache(),o=t.updateServerSnap(i.getNode(),i.isFullyInitialized()||e.isEmpty(),i.isFiltered());return this.generateEventCacheAfterServerEvent_(o,e,n,de,r)},t.prototype.revertUserWrite_=function(t,e,n,r,i){var o;if(null!=n.shadowingWrite(e))return t;var a=new me(n,t,r),u=t.getEventCache().getNode(),c=void 0;if(e.isEmpty()||".priority"===e.getFront()){var l=void 0;if(t.getServerCache().isFullyInitialized())l=n.calcCompleteEventCache(t.getCompleteServerSnap());else{var h=t.getServerCache().getNode();s.assert(h instanceof Ft,"serverChildren would be complete if leaf node"),l=n.calcCompleteEventChildren(h)}l=l,c=this.filter_.updateFullNode(u,l,i)}else{var f=e.getFront(),p=n.calcCompleteChild(f,t.getServerCache());null==p&&t.getServerCache().isCompleteForChild(f)&&(p=u.getImmediateChild(f)),(c=null!=p?this.filter_.updateChild(u,f,p,e.popFront(),a,i):t.getEventCache().getNode().hasChild(f)?this.filter_.updateChild(u,f,Ft.EMPTY_NODE,e.popFront(),a,i):u).isEmpty()&&t.getServerCache().isFullyInitialized()&&(o=n.calcCompleteEventCache(t.getCompleteServerSnap())).isLeafNode()&&(c=this.filter_.updateFullNode(c,o,i))}return o=t.getServerCache().isFullyInitialized()||null!=n.shadowingWrite(j.Empty),t.updateEventSnap(c,o,this.filter_.filtersNodes())},t}(),ve=function(){function t(t){this.query_=t,this.index_=this.query_.getQueryParams().getIndex()}return t.prototype.generateEventsForChanges=function(t,e,n){var r=this,i=[],o=[];return t.forEach(function(t){t.type===he.CHILD_CHANGED&&r.index_.indexedValueChanged(t.oldSnap,t.snapshotNode)&&o.push(he.childMovedChange(t.childName,t.snapshotNode))}),this.generateEventsForType_(i,he.CHILD_REMOVED,t,n,e),this.generateEventsForType_(i,he.CHILD_ADDED,t,n,e),this.generateEventsForType_(i,he.CHILD_MOVED,o,n,e),this.generateEventsForType_(i,he.CHILD_CHANGED,t,n,e),this.generateEventsForType_(i,he.VALUE,t,n,e),i},t.prototype.generateEventsForType_=function(t,e,n,r,i){var o=this,a=n.filter(function(t){return t.type===e});a.sort(this.compareChanges_.bind(this)),a.forEach(function(e){var n=o.materializeSingleChange_(e,i);r.forEach(function(r){r.respondsTo(e.type)&&t.push(r.createEvent(n,o.query_))})})},t.prototype.materializeSingleChange_=function(t,e){return"value"===t.type||"child_removed"===t.type?t:(t.prevName=e.getPredecessorChildName(t.childName,t.snapshotNode,this.index_),t)},t.prototype.compareChanges_=function(t,e){if(null==t.childName||null==e.childName)throw s.assertionError("Should only compare child_ events.");var n=new ft(t.childName,t.snapshotNode),r=new ft(e.childName,e.snapshotNode);return this.index_.compare(n,r)},t}(),be=function(){function t(t,e){this.query_=t,this.eventRegistrations_=[];var n=this.query_.getQueryParams(),r=new fe(n.getIndex()),i=n.getNodeFilter();this.processor_=new ge(i);var o=e.getServerCache(),a=e.getEventCache(),s=r.updateFullNode(Ft.EMPTY_NODE,o.getNode(),null),u=i.updateFullNode(Ft.EMPTY_NODE,a.getNode(),null),c=new ce(s,o.isFullyInitialized(),r.filtersNodes()),l=new ce(u,a.isFullyInitialized(),i.filtersNodes());this.viewCache_=new le(l,c),this.eventGenerator_=new ve(this.query_)}return t.prototype.getQuery=function(){return this.query_},t.prototype.getServerCache=function(){return this.viewCache_.getServerCache().getNode()},t.prototype.getCompleteServerCache=function(t){var e=this.viewCache_.getCompleteServerSnap();return e&&(this.query_.getQueryParams().loadsAllData()||!t.isEmpty()&&!e.getImmediateChild(t.getFront()).isEmpty())?e.getChild(t):null},t.prototype.isEmpty=function(){return 0===this.eventRegistrations_.length},t.prototype.addEventRegistration=function(t){this.eventRegistrations_.push(t)},t.prototype.removeEventRegistration=function(t,e){var n=[];if(e){s.assert(null==t,"A cancel should cancel all event registrations.");var r=this.query_.path;this.eventRegistrations_.forEach(function(t){e=e;var i=t.createCancelEvent(e,r);i&&n.push(i)})}if(t){for(var i=[],o=0;o<this.eventRegistrations_.length;++o){var a=this.eventRegistrations_[o];if(a.matches(t)){if(t.hasAnyCallback()){i=i.concat(this.eventRegistrations_.slice(o+1));break}}else i.push(a)}this.eventRegistrations_=i}else this.eventRegistrations_=[];return n},t.prototype.applyOperation=function(t,e,n){t.type===jt.MERGE&&null!==t.source.queryId&&(s.assert(this.viewCache_.getCompleteServerSnap(),"We should always have a full cache before handling merges"),s.assert(this.viewCache_.getCompleteEventSnap(),"Missing event cache, even though we have a server cache"));var r=this.viewCache_,i=this.processor_.applyOperation(r,t,e,n);return this.processor_.assertIndexed(i.viewCache),s.assert(i.viewCache.getServerCache().isFullyInitialized()||!r.getServerCache().isFullyInitialized(),"Once a server snap is complete, it should never go back"),this.viewCache_=i.viewCache,this.generateEventsForChanges_(i.changes,i.viewCache.getEventCache().getNode(),null)},t.prototype.getInitialEvents=function(t){var e=this.viewCache_.getEventCache(),n=[];e.getNode().isLeafNode()||e.getNode().forEachChild(Tt,function(t,e){n.push(he.childAddedChange(t,e))});return e.isFullyInitialized()&&n.push(he.valueChange(e.getNode())),this.generateEventsForChanges_(n,e.getNode(),t)},t.prototype.generateEventsForChanges_=function(t,e,n){var r=n?[n]:this.eventRegistrations_;return this.eventGenerator_.generateEventsForChanges(t,e,r)},t}(),_e=function(){function t(){this.views_={}}return Object.defineProperty(t,"__referenceConstructor",{get:function(){return s.assert(ee,"Reference.ts has not been loaded"),ee},set:function(t){s.assert(!ee,"__referenceConstructor has already been defined"),ee=t},enumerable:!0,configurable:!0}),t.prototype.isEmpty=function(){return s.isEmpty(this.views_)},t.prototype.applyOperation=function(t,e,n){var r=t.source.queryId;if(null!==r){var i=s.safeGet(this.views_,r);return s.assert(null!=i,"SyncTree gave us an op for an invalid query."),i.applyOperation(t,e,n)}var o=[];return s.forEach(this.views_,function(r,i){o=o.concat(i.applyOperation(t,e,n))}),o},t.prototype.addEventRegistration=function(t,e,n,r,i){var o=t.queryIdentifier(),a=s.safeGet(this.views_,o);if(!a){var u=n.calcCompleteEventCache(i?r:null),c=!1;u?c=!0:r instanceof Ft?(u=n.calcCompleteEventChildren(r),c=!1):(u=Ft.EMPTY_NODE,c=!1);var l=new le(new ce(u,c,!1),new ce(r,i,!1));a=new be(t,l),this.views_[o]=a}return a.addEventRegistration(e),a.getInitialEvents(e)},t.prototype.removeEventRegistration=function(e,n,r){var i=e.queryIdentifier(),o=[],a=[],u=this.hasCompleteView();if("default"===i){var c=this;s.forEach(this.views_,function(t,e){a=a.concat(e.removeEventRegistration(n,r)),e.isEmpty()&&(delete c.views_[t],e.getQuery().getQueryParams().loadsAllData()||o.push(e.getQuery()))})}else{var l=s.safeGet(this.views_,i);l&&(a=a.concat(l.removeEventRegistration(n,r)),l.isEmpty()&&(delete this.views_[i],l.getQuery().getQueryParams().loadsAllData()||o.push(l.getQuery())))}return u&&!this.hasCompleteView()&&o.push(new t.__referenceConstructor(e.repo,e.path)),{removed:o,events:a}},t.prototype.getQueryViews=function(){var t=this;return Object.keys(this.views_).map(function(e){return t.views_[e]}).filter(function(t){return!t.getQuery().getQueryParams().loadsAllData()})},t.prototype.getCompleteServerCache=function(t){var e=null;return s.forEach(this.views_,function(n,r){e=e||r.getCompleteServerCache(t)}),e},t.prototype.viewForQuery=function(t){if(t.getQueryParams().loadsAllData())return this.getCompleteView();var e=t.queryIdentifier();return s.safeGet(this.views_,e)},t.prototype.viewExistsForQuery=function(t){return null!=this.viewForQuery(t)},t.prototype.hasCompleteView=function(){return null!=this.getCompleteView()},t.prototype.getCompleteView=function(){return s.findValue(this.views_,function(t){return t.getQuery().getQueryParams().loadsAllData()})||null},t}(),we=function(){function t(t){this.writeTree_=t}return t.prototype.addWrite=function(e,n){if(e.isEmpty())return new t(new oe(n));var r=this.writeTree_.findRootMostValueAndPath(e);if(null!=r){var i=r.path,o=r.value,a=j.relativePath(i,e);return o=o.updateChild(a,n),new t(this.writeTree_.set(i,o))}var s=new oe(n);return new t(this.writeTree_.setTree(e,s))},t.prototype.addWrites=function(t,e){var n=this;return s.forEach(e,function(e,r){n=n.addWrite(t.child(e),r)}),n},t.prototype.removeWrite=function(e){return e.isEmpty()?t.Empty:new t(this.writeTree_.setTree(e,oe.Empty))},t.prototype.hasCompleteWrite=function(t){return null!=this.getCompleteNode(t)},t.prototype.getCompleteNode=function(t){var e=this.writeTree_.findRootMostValueAndPath(t);return null!=e?this.writeTree_.get(e.path).getChild(j.relativePath(e.path,t)):null},t.prototype.getCompleteChildren=function(){var t=[],e=this.writeTree_.value;return null!=e?e.isLeafNode()||e.forEachChild(Tt,function(e,n){t.push(new ft(e,n))}):this.writeTree_.children.inorderTraversal(function(e,n){null!=n.value&&t.push(new ft(e,n.value))}),t},t.prototype.childCompoundWrite=function(e){if(e.isEmpty())return this;var n=this.getCompleteNode(e);return new t(null!=n?new oe(n):this.writeTree_.subtree(e))},t.prototype.isEmpty=function(){return this.writeTree_.isEmpty()},t.prototype.apply=function(e){return t.applySubtreeWrite_(j.Empty,this.writeTree_,e)},t.Empty=new t(new oe(null)),t.applySubtreeWrite_=function(e,n,r){if(null!=n.value)return r.updateChild(e,n.value);var i=null;return n.children.inorderTraversal(function(n,o){".priority"===n?(s.assert(null!==o.value,"Priority writes must always be leaf nodes"),i=o.value):r=t.applySubtreeWrite_(e.child(n),o,r)}),r.getChild(e).isEmpty()||null===i||(r=r.updateChild(e.child(".priority"),i)),r},t}(),Ee=function(){function t(){this.visibleWrites_=we.Empty,this.allWrites_=[],this.lastWriteId_=-1}return t.prototype.childWrites=function(t){return new Se(t,this)},t.prototype.addOverwrite=function(t,e,n,r){s.assert(n>this.lastWriteId_,"Stacking an older write on top of newer ones"),void 0===r&&(r=!0),this.allWrites_.push({path:t,snap:e,writeId:n,visible:r}),r&&(this.visibleWrites_=this.visibleWrites_.addWrite(t,e)),this.lastWriteId_=n},t.prototype.addMerge=function(t,e,n){s.assert(n>this.lastWriteId_,"Stacking an older merge on top of newer ones"),this.allWrites_.push({path:t,children:e,writeId:n,visible:!0}),this.visibleWrites_=this.visibleWrites_.addWrites(t,e),this.lastWriteId_=n},t.prototype.getWrite=function(t){for(var e=0;e<this.allWrites_.length;e++){var n=this.allWrites_[e];if(n.writeId===t)return n}return null},t.prototype.removeWrite=function(t){var e=this,n=this.allWrites_.findIndex(function(e){return e.writeId===t});s.assert(n>=0,"removeWrite called with nonexistent writeId.");var r=this.allWrites_[n];this.allWrites_.splice(n,1);for(var i=r.visible,o=!1,a=this.allWrites_.length-1;i&&a>=0;){var u=this.allWrites_[a];u.visible&&(a>=n&&this.recordContainsPath_(u,r.path)?i=!1:r.path.contains(u.path)&&(o=!0)),a--}if(i){if(o)return this.resetTree_(),!0;if(r.snap)this.visibleWrites_=this.visibleWrites_.removeWrite(r.path);else{var c=r.children;s.forEach(c,function(t){e.visibleWrites_=e.visibleWrites_.removeWrite(r.path.child(t))})}return!0}return!1},t.prototype.getCompleteWriteData=function(t){return this.visibleWrites_.getCompleteNode(t)},t.prototype.calcCompleteEventCache=function(e,n,r,i){if(r||i){var o=this.visibleWrites_.childCompoundWrite(e);if(!i&&o.isEmpty())return n;if(i||null!=n||o.hasCompleteWrite(j.Empty)){var a=t.layerTree_(this.allWrites_,function(t){return(t.visible||i)&&(!r||!~r.indexOf(t.writeId))&&(t.path.contains(e)||e.contains(t.path))},e);c=n||Ft.EMPTY_NODE;return a.apply(c)}return null}var s=this.visibleWrites_.getCompleteNode(e);if(null!=s)return s;var u=this.visibleWrites_.childCompoundWrite(e);if(u.isEmpty())return n;if(null!=n||u.hasCompleteWrite(j.Empty)){var c=n||Ft.EMPTY_NODE;return u.apply(c)}return null},t.prototype.calcCompleteEventChildren=function(t,e){var n=Ft.EMPTY_NODE,r=this.visibleWrites_.getCompleteNode(t);if(r)return r.isLeafNode()||r.forEachChild(Tt,function(t,e){n=n.updateImmediateChild(t,e)}),n;if(e){var i=this.visibleWrites_.childCompoundWrite(t);return e.forEachChild(Tt,function(t,e){var r=i.childCompoundWrite(new j(t)).apply(e);n=n.updateImmediateChild(t,r)}),i.getCompleteChildren().forEach(function(t){n=n.updateImmediateChild(t.name,t.node)}),n}return this.visibleWrites_.childCompoundWrite(t).getCompleteChildren().forEach(function(t){n=n.updateImmediateChild(t.name,t.node)}),n},t.prototype.calcEventCacheAfterServerOverwrite=function(t,e,n,r){s.assert(n||r,"Either existingEventSnap or existingServerSnap must exist");var i=t.child(e);if(this.visibleWrites_.hasCompleteWrite(i))return null;var o=this.visibleWrites_.childCompoundWrite(i);return o.isEmpty()?r.getChild(e):o.apply(r.getChild(e))},t.prototype.calcCompleteChild=function(t,e,n){var r=t.child(e),i=this.visibleWrites_.getCompleteNode(r);return null!=i?i:n.isCompleteForChild(e)?this.visibleWrites_.childCompoundWrite(r).apply(n.getNode().getImmediateChild(e)):null},t.prototype.shadowingWrite=function(t){return this.visibleWrites_.getCompleteNode(t)},t.prototype.calcIndexedSlice=function(t,e,n,r,i,o){var a,s=this.visibleWrites_.childCompoundWrite(t),u=s.getCompleteNode(j.Empty);if(null!=u)a=u;else{if(null==e)return[];a=s.apply(e)}if((a=a.withIndex(o)).isEmpty()||a.isLeafNode())return[];for(var c=[],l=o.getCompare(),h=i?a.getReverseIteratorFrom(n,o):a.getIteratorFrom(n,o),f=h.getNext();f&&c.length<r;)0!==l(f,n)&&c.push(f),f=h.getNext();return c},t.prototype.recordContainsPath_=function(t,e){return t.snap?t.path.contains(e):!!s.findKey(t.children,function(n,r){return t.path.child(r).contains(e)})},t.prototype.resetTree_=function(){this.visibleWrites_=t.layerTree_(this.allWrites_,t.DefaultFilter_,j.Empty),this.allWrites_.length>0?this.lastWriteId_=this.allWrites_[this.allWrites_.length-1].writeId:this.lastWriteId_=-1},t.DefaultFilter_=function(t){return t.visible},t.layerTree_=function(t,e,n){for(var r=we.Empty,i=0;i<t.length;++i){var o=t[i];if(e(o)){var a=o.path,u=void 0;if(o.snap)n.contains(a)?(u=j.relativePath(n,a),r=r.addWrite(u,o.snap)):a.contains(n)&&(u=j.relativePath(a,n),r=r.addWrite(j.Empty,o.snap.getChild(u)));else{if(!o.children)throw s.assertionError("WriteRecord should have .snap or .children");if(n.contains(a))u=j.relativePath(n,a),r=r.addWrites(u,o.children);else if(a.contains(n))if((u=j.relativePath(a,n)).isEmpty())r=r.addWrites(j.Empty,o.children);else{var c=s.safeGet(o.children,u.getFront());if(c){var l=c.getChild(u.popFront());r=r.addWrite(j.Empty,l)}}}}}return r},t}(),Se=function(){function t(t,e){this.treePath_=t,this.writeTree_=e}return t.prototype.calcCompleteEventCache=function(t,e,n){return this.writeTree_.calcCompleteEventCache(this.treePath_,t,e,n)},t.prototype.calcCompleteEventChildren=function(t){return this.writeTree_.calcCompleteEventChildren(this.treePath_,t)},t.prototype.calcEventCacheAfterServerOverwrite=function(t,e,n){return this.writeTree_.calcEventCacheAfterServerOverwrite(this.treePath_,t,e,n)},t.prototype.shadowingWrite=function(t){return this.writeTree_.shadowingWrite(this.treePath_.child(t))},t.prototype.calcIndexedSlice=function(t,e,n,r,i){return this.writeTree_.calcIndexedSlice(this.treePath_,t,e,n,r,i)},t.prototype.calcCompleteChild=function(t,e){return this.writeTree_.calcCompleteChild(this.treePath_,t,e)},t.prototype.child=function(e){return new t(this.treePath_.child(e),this.writeTree_)},t}(),Te=function(){function t(t){this.listenProvider_=t,this.syncPointTree_=oe.Empty,this.pendingWriteTree_=new Ee,this.tagToQueryMap_={},this.queryToTagMap_={}}return t.prototype.applyUserOverwrite=function(t,e,n,r){return this.pendingWriteTree_.addOverwrite(t,e,n,r),r?this.applyOperationToSyncPoints_(new se(ne.User,t,e)):[]},t.prototype.applyUserMerge=function(t,e,n){this.pendingWriteTree_.addMerge(t,e,n);var r=oe.fromObject(e);return this.applyOperationToSyncPoints_(new ue(ne.User,t,r))},t.prototype.ackUserWrite=function(t,e){void 0===e&&(e=!1);var n=this.pendingWriteTree_.getWrite(t);if(this.pendingWriteTree_.removeWrite(t)){var r=oe.Empty;return null!=n.snap?r=r.set(j.Empty,!0):s.forEach(n.children,function(t,e){r=r.set(new j(t),e)}),this.applyOperationToSyncPoints_(new re(n.path,r,e))}return[]},t.prototype.applyServerOverwrite=function(t,e){return this.applyOperationToSyncPoints_(new se(ne.Server,t,e))},t.prototype.applyServerMerge=function(t,e){var n=oe.fromObject(e);return this.applyOperationToSyncPoints_(new ue(ne.Server,t,n))},t.prototype.applyListenComplete=function(t){return this.applyOperationToSyncPoints_(new ae(ne.Server,t))},t.prototype.applyTaggedQueryOverwrite=function(e,n,r){var i=this.queryKeyForTag_(r);if(null!=i){var o=t.parseQueryKey_(i),a=o.path,s=o.queryId,u=j.relativePath(a,e),c=new se(ne.forServerTaggedQuery(s),u,n);return this.applyTaggedOperation_(a,c)}return[]},t.prototype.applyTaggedQueryMerge=function(e,n,r){var i=this.queryKeyForTag_(r);if(i){var o=t.parseQueryKey_(i),a=o.path,s=o.queryId,u=j.relativePath(a,e),c=oe.fromObject(n),l=new ue(ne.forServerTaggedQuery(s),u,c);return this.applyTaggedOperation_(a,l)}return[]},t.prototype.applyTaggedListenComplete=function(e,n){var r=this.queryKeyForTag_(n);if(r){var i=t.parseQueryKey_(r),o=i.path,a=i.queryId,s=j.relativePath(o,e),u=new ae(ne.forServerTaggedQuery(a),s);return this.applyTaggedOperation_(o,u)}return[]},t.prototype.addEventRegistration=function(e,n){var r=e.path,i=null,o=!1;this.syncPointTree_.foreachOnPath(r,function(t,e){var n=j.relativePath(t,r);i=i||e.getCompleteServerCache(n),o=o||e.hasCompleteView()});var a,u=this.syncPointTree_.get(r);(u?(o=o||u.hasCompleteView(),i=i||u.getCompleteServerCache(j.Empty)):(u=new _e,this.syncPointTree_=this.syncPointTree_.set(r,u)),null!=i)?a=!0:(a=!1,i=Ft.EMPTY_NODE,this.syncPointTree_.subtree(r).foreachChild(function(t,e){var n=e.getCompleteServerCache(j.Empty);n&&(i=i.updateImmediateChild(t,n))}));var c=u.viewExistsForQuery(e);if(!c&&!e.getQueryParams().loadsAllData()){var l=t.makeQueryKey_(e);s.assert(!(l in this.queryToTagMap_),"View does not exist, but we have a tag");var h=t.getNextQueryTag_();this.queryToTagMap_[l]=h,this.tagToQueryMap_["_"+h]=l}var f=this.pendingWriteTree_.childWrites(r),p=u.addEventRegistration(e,n,f,i,a);if(!c&&!o){var d=u.viewForQuery(e);p=p.concat(this.setupListener_(e,d))}return p},t.prototype.removeEventRegistration=function(e,n,r){var i=this,o=e.path,a=this.syncPointTree_.get(o),s=[];if(a&&("default"===e.queryIdentifier()||a.viewExistsForQuery(e))){var u=a.removeEventRegistration(e,n,r);a.isEmpty()&&(this.syncPointTree_=this.syncPointTree_.remove(o));var c=u.removed;s=u.events;var l=-1!==c.findIndex(function(t){return t.getQueryParams().loadsAllData()}),h=this.syncPointTree_.findOnPath(o,function(t,e){return e.hasCompleteView()});if(l&&!h){var f=this.syncPointTree_.subtree(o);if(!f.isEmpty())for(var p=this.collectDistinctViewsForSubTree_(f),d=0;d<p.length;++d){var m=p[d],y=m.getQuery(),g=this.createListenerForView_(m);this.listenProvider_.startListening(t.queryForListening_(y),this.tagForQuery_(y),g.hashFn,g.onComplete)}}if(!h&&c.length>0&&!r)if(l){this.listenProvider_.stopListening(t.queryForListening_(e),null)}else c.forEach(function(e){var n=i.queryToTagMap_[t.makeQueryKey_(e)];i.listenProvider_.stopListening(t.queryForListening_(e),n)});this.removeTags_(c)}return s},t.prototype.calcCompleteEventCache=function(t,e){var n=this.pendingWriteTree_,r=this.syncPointTree_.findOnPath(t,function(e,n){var r=j.relativePath(e,t),i=n.getCompleteServerCache(r);if(i)return i});return n.calcCompleteEventCache(t,r,e,!0)},t.prototype.collectDistinctViewsForSubTree_=function(t){return t.fold(function(t,e,n){if(e&&e.hasCompleteView())return[e.getCompleteView()];var r=[];return e&&(r=e.getQueryViews()),s.forEach(n,function(t,e){r=r.concat(e)}),r})},t.prototype.removeTags_=function(e){for(var n=0;n<e.length;++n){var r=e[n];if(!r.getQueryParams().loadsAllData()){var i=t.makeQueryKey_(r),o=this.queryToTagMap_[i];delete this.queryToTagMap_[i],delete this.tagToQueryMap_["_"+o]}}},t.queryForListening_=function(t){return t.getQueryParams().loadsAllData()&&!t.getQueryParams().isDefault()?t.getRef():t},t.prototype.setupListener_=function(e,n){var r=e.path,i=this.tagForQuery_(e),o=this.createListenerForView_(n),a=this.listenProvider_.startListening(t.queryForListening_(e),i,o.hashFn,o.onComplete),u=this.syncPointTree_.subtree(r);if(i)s.assert(!u.value.hasCompleteView(),"If we're adding a query, it shouldn't be shadowed");else for(var c=u.fold(function(t,e,n){if(!t.isEmpty()&&e&&e.hasCompleteView())return[e.getCompleteView().getQuery()];var r=[];return e&&(r=r.concat(e.getQueryViews().map(function(t){return t.getQuery()}))),s.forEach(n,function(t,e){r=r.concat(e)}),r}),l=0;l<c.length;++l){var h=c[l];this.listenProvider_.stopListening(t.queryForListening_(h),this.tagForQuery_(h))}return a},t.prototype.createListenerForView_=function(t){var e=this,n=t.getQuery(),r=this.tagForQuery_(n);return{hashFn:function(){return(t.getServerCache()||Ft.EMPTY_NODE).hash()},onComplete:function(t){if("ok"===t)return r?e.applyTaggedListenComplete(n.path,r):e.applyListenComplete(n.path);var i=function(t,e){var n="Unknown Error";"too_big"===t?n="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"==t?n="Client doesn't have permission to access the desired data.":"unavailable"==t&&(n="The service is unavailable");var r=new Error(t+" at "+e.path.toString()+": "+n);return r.code=t.toUpperCase(),r}(t,n);return e.removeEventRegistration(n,null,i)}}},t.makeQueryKey_=function(t){return t.path.toString()+"$"+t.queryIdentifier()},t.parseQueryKey_=function(t){var e=t.indexOf("$");return s.assert(-1!==e&&e<t.length-1,"Bad queryKey."),{queryId:t.substr(e+1),path:new j(t.substr(0,e))}},t.prototype.queryKeyForTag_=function(t){return this.tagToQueryMap_["_"+t]},t.prototype.tagForQuery_=function(e){var n=t.makeQueryKey_(e);return s.safeGet(this.queryToTagMap_,n)},t.getNextQueryTag_=function(){return t.nextQueryTag_++},t.prototype.applyTaggedOperation_=function(t,e){var n=this.syncPointTree_.get(t);s.assert(n,"Missing sync point for query tag that we're tracking");var r=this.pendingWriteTree_.childWrites(t);return n.applyOperation(e,r,null)},t.prototype.applyOperationToSyncPoints_=function(t){return this.applyOperationHelper_(t,this.syncPointTree_,null,this.pendingWriteTree_.childWrites(j.Empty))},t.prototype.applyOperationHelper_=function(t,e,n,r){if(t.path.isEmpty())return this.applyOperationDescendantsHelper_(t,e,n,r);var i=e.get(j.Empty);null==n&&null!=i&&(n=i.getCompleteServerCache(j.Empty));var o=[],a=t.path.getFront(),s=t.operationForChild(a),u=e.children.get(a);if(u&&s){var c=n?n.getImmediateChild(a):null,l=r.child(a);o=o.concat(this.applyOperationHelper_(s,u,c,l))}return i&&(o=o.concat(i.applyOperation(t,r,n))),o},t.prototype.applyOperationDescendantsHelper_=function(t,e,n,r){var i=this,o=e.get(j.Empty);null==n&&null!=o&&(n=o.getCompleteServerCache(j.Empty));var a=[];return e.children.inorderTraversal(function(e,o){var s=n?n.getImmediateChild(e):null,u=r.child(e),c=t.operationForChild(e);c&&(a=a.concat(i.applyOperationDescendantsHelper_(c,o,s,u)))}),o&&(a=a.concat(o.applyOperation(t,r,n))),a},t.nextQueryTag_=1,t}(),Ce=function(){function t(){this.rootNode_=Ft.EMPTY_NODE}return t.prototype.getNode=function(t){return this.rootNode_.getChild(t)},t.prototype.updateSnapshot=function(t,e){this.rootNode_=this.rootNode_.updateChild(t,e)},t}(),ke=function(){function t(t){this.app_=t}return t.prototype.getToken=function(t){return this.app_.INTERNAL.getToken(t).then(null,function(t){return t&&"auth/token-not-initialized"===t.code?(w("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)})},t.prototype.addTokenChangeListener=function(t){this.app_.INTERNAL.addAuthTokenListener(t)},t.prototype.removeTokenChangeListener=function(t){this.app_.INTERNAL.removeAuthTokenListener(t)},t.prototype.notifyForInvalidToken=function(){var t='Provided authentication credentials for the app named "'+this.app_.name+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.app_.options?t+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.app_.options?t+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':t+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',C(t)},t}(),xe=function(){function t(){this.counters_={}}return t.prototype.incrementCounter=function(t,e){void 0===e&&(e=1),s.contains(this.counters_,t)||(this.counters_[t]=0),this.counters_[t]+=e},t.prototype.get=function(){return s.deepCopy(this.counters_)},t}(),Ie=function(){function t(){}return t.getCollection=function(t){var e=t.toString();return this.collections_[e]||(this.collections_[e]=new xe),this.collections_[e]},t.getOrCreateReporter=function(t,e){var n=t.toString();return this.reporters_[n]||(this.reporters_[n]=e()),this.reporters_[n]},t.collections_={},t.reporters_={},t}(),Ae=function(){function t(t){this.collection_=t,this.last_=null}return t.prototype.get=function(){var t=this.collection_.get(),e=s.clone(t);return this.last_&&s.forEach(this.last_,function(t,n){e[t]=e[t]-n}),this.last_=t,e},t}(),Pe=1e4,De=3e4,Ne=function(){function t(t,e){this.server_=e,this.statsToReport_={},this.statsListener_=new Ae(t);var n=Pe+(De-Pe)*Math.random();U(this.reportStats_.bind(this),Math.floor(n))}return t.prototype.includeStat=function(t){this.statsToReport_[t]=!0},t.prototype.reportStats_=function(){var t=this,e=this.statsListener_.get(),n={},r=!1;s.forEach(e,function(e,i){i>0&&s.contains(t.statsToReport_,e)&&(n[e]=i,r=!0)}),r&&this.server_.reportStats(n),U(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))},t}(),Re=function(){function t(){this.eventLists_=[],this.recursionDepth_=0}return t.prototype.queueEvents=function(t){for(var e=null,n=0;n<t.length;n++){var r=t[n],i=r.getPath();null===e||i.equals(e.getPath())||(this.eventLists_.push(e),e=null),null===e&&(e=new Oe(i)),e.add(r)}e&&this.eventLists_.push(e)},t.prototype.raiseEventsAtPath=function(t,e){this.queueEvents(e),this.raiseQueuedEventsMatchingPredicate_(function(e){return e.equals(t)})},t.prototype.raiseEventsForChangedPath=function(t,e){this.queueEvents(e),this.raiseQueuedEventsMatchingPredicate_(function(e){return e.contains(t)||t.contains(e)})},t.prototype.raiseQueuedEventsMatchingPredicate_=function(t){this.recursionDepth_++;for(var e=!0,n=0;n<this.eventLists_.length;n++){var r=this.eventLists_[n];if(r)t(r.getPath())?(this.eventLists_[n].raise(),this.eventLists_[n]=null):e=!1}e&&(this.eventLists_=[]),this.recursionDepth_--},t}(),Oe=function(){function t(t){this.path_=t,this.events_=[]}return t.prototype.add=function(t){this.events_.push(t)},t.prototype.raise=function(){for(var t=0;t<this.events_.length;t++){var e=this.events_[t];if(null!==e){this.events_[t]=null;var n=e.getEventRunner();v&&w("event: "+e.toString()),V(n)}}},t.prototype.getPath=function(){return this.path_},t}(),Me=function(){function t(t){this.allowedEvents_=t,this.listeners_={},s.assert(Array.isArray(t)&&t.length>0,"Requires a non-empty array")}return t.prototype.trigger=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(Array.isArray(this.listeners_[t]))for(var r=this.listeners_[t].slice(),i=0;i<r.length;i++)r[i].callback.apply(r[i].context,e)},t.prototype.on=function(t,e,n){this.validateEventType_(t),this.listeners_[t]=this.listeners_[t]||[],this.listeners_[t].push({callback:e,context:n});var r=this.getInitialEvent(t);r&&e.apply(n,r)},t.prototype.off=function(t,e,n){this.validateEventType_(t);for(var r=this.listeners_[t]||[],i=0;i<r.length;i++)if(r[i].callback===e&&(!n||n===r[i].context))return void r.splice(i,1)},t.prototype.validateEventType_=function(t){s.assert(this.allowedEvents_.find(function(e){return e===t}),"Unknown event: "+t)},t}(),Fe=function(t){function e(){var e,n,r=t.call(this,["visible"])||this;return"undefined"!==typeof document&&"undefined"!==typeof document.addEventListener&&("undefined"!==typeof document.hidden?(n="visibilitychange",e="hidden"):"undefined"!==typeof document.mozHidden?(n="mozvisibilitychange",e="mozHidden"):"undefined"!==typeof document.msHidden?(n="msvisibilitychange",e="msHidden"):"undefined"!==typeof document.webkitHidden&&(n="webkitvisibilitychange",e="webkitHidden")),r.visible_=!0,n&&document.addEventListener(n,function(){var t=!document[e];t!==r.visible_&&(r.visible_=t,r.trigger("visible",t))},!1),r}return a.__extends(e,t),e.getInstance=function(){return new e},e.prototype.getInitialEvent=function(t){return s.assert("visible"===t,"Unknown event type: "+t),[this.visible_]},e}(Me),Le=function(t){function e(){var e=t.call(this,["online"])||this;return e.online_=!0,"undefined"===typeof window||"undefined"===typeof window.addEventListener||s.isMobileCordova()||(window.addEventListener("online",function(){e.online_||(e.online_=!0,e.trigger("online",!0))},!1),window.addEventListener("offline",function(){e.online_&&(e.online_=!1,e.trigger("online",!1))},!1)),e}return a.__extends(e,t),e.getInstance=function(){return new e},e.prototype.getInitialEvent=function(t){return s.assert("online"===t,"Unknown event type: "+t),[this.online_]},e.prototype.currentlyOnline=function(){return this.online_},e}(Me),Ve=function(){function t(t){this.onMessage_=t,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}return t.prototype.closeAfter=function(t,e){this.closeAfterResponse=t,this.onClose=e,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)},t.prototype.handleResponse=function(t,e){var n=this;this.pendingResponses[t]=e;for(var r=function(){var t=i.pendingResponses[i.currentResponseNum];delete i.pendingResponses[i.currentResponseNum];for(var e=function(e){t[e]&&V(function(){n.onMessage_(t[e])})},r=0;r<t.length;++r)e(r);if(i.currentResponseNum===i.closeAfterResponse)return i.onClose&&(i.onClose(),i.onClose=null),"break";i.currentResponseNum++},i=this;this.pendingResponses[this.currentResponseNum];){if("break"===r())break}},t}(),Be="pLPCommand",Ue="pRTLPCB",je=function(){function t(t,e,n,r){this.connId=t,this.repoInfo=e,this.transportSessionId=n,this.lastSessionId=r,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=E(t),this.stats_=Ie.getCollection(e),this.urlFn=function(t){return e.connectionURL(G,t)}}return t.prototype.open=function(t,e){var n=this;this.curSegmentNum=0,this.onDisconnect_=e,this.myPacketOrderer=new Ve(t),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(function(){n.log_("Timed out trying to connect."),n.onClosed_(),n.connectTimeoutTimer_=null},Math.floor(3e4)),function(t){if(s.isNodeSdk()||"complete"===document.readyState)t();else{var e=!1,n=function n(){document.body?e||(e=!0,t()):setTimeout(n,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",function(){"complete"===document.readyState&&n()}),window.attachEvent("onload",n))}}(function(){if(!n.isClosed_){n.scriptTagHolder=new qe(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=t[0],i=t[1],o=t[2];if(n.incrementIncomingBytes_(t),n.scriptTagHolder)if(n.connectTimeoutTimer_&&(clearTimeout(n.connectTimeoutTimer_),n.connectTimeoutTimer_=null),n.everConnected_=!0,"start"==r)n.id=i,n.password=o;else{if("close"!==r)throw new Error("Unrecognized command received: "+r);i?(n.scriptTagHolder.sendNewPolls=!1,n.myPacketOrderer.closeAfter(i,function(){n.onClosed_()})):n.onClosed_()}},function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=t[0],i=t[1];n.incrementIncomingBytes_(t),n.myPacketOrderer.handleResponse(r,i)},function(){n.onClosed_()},n.urlFn);var t={start:"t"};t.ser=Math.floor(1e8*Math.random()),n.scriptTagHolder.uniqueCallbackIdentifier&&(t.cb=n.scriptTagHolder.uniqueCallbackIdentifier),t.v="5",n.transportSessionId&&(t.s=n.transportSessionId),n.lastSessionId&&(t.ls=n.lastSessionId),!s.isNodeSdk()&&"undefined"!==typeof location&&location.href&&-1!==location.href.indexOf("firebaseio.com")&&(t.r="f");var e=n.urlFn(t);n.log_("Connecting via long-poll to "+e),n.scriptTagHolder.addTag(e,function(){})}})},t.prototype.start=function(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)},t.forceAllow=function(){t.forceAllow_=!0},t.forceDisallow=function(){t.forceDisallow_=!0},t.isAvailable=function(){return t.forceAllow_||!t.forceDisallow_&&"undefined"!==typeof document&&null!=document.createElement&&!("object"===typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))&&!("object"===typeof Windows&&"object"===typeof Windows.UI)&&!s.isNodeSdk()},t.prototype.markConnectionHealthy=function(){},t.prototype.shutdown_=function(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)},t.prototype.onClosed_=function(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))},t.prototype.close=function(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())},t.prototype.send=function(t){var e=s.stringify(t);this.bytesSent+=e.length,this.stats_.incrementCounter("bytes_sent",e.length);for(var n=s.base64Encode(e),r=R(n,1840),i=0;i<r.length;i++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,r.length,r[i]),this.curSegmentNum++},t.prototype.addDisconnectPingFrame=function(t,e){if(!s.isNodeSdk()){this.myDisconnFrame=document.createElement("iframe");var n={dframe:"t"};n.id=t,n.pw=e,this.myDisconnFrame.src=this.urlFn(n),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}},t.prototype.incrementIncomingBytes_=function(t){var e=s.stringify(t).length;this.bytesReceived+=e,this.stats_.incrementCounter("bytes_received",e)},t}(),qe=function(){function t(e,n,r,i){if(this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Xt,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,s.isNodeSdk())this.commandCB=e,this.onMessageCB=n;else{this.uniqueCallbackIdentifier=m(),window[Be+this.uniqueCallbackIdentifier]=e,window[Ue+this.uniqueCallbackIdentifier]=n,this.myIFrame=t.createIFrame_();var o="";if(this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,"javascript:".length))o='<script>document.domain="'+document.domain+'";<\/script>';var a="<html><body>"+o+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(a),this.myIFrame.doc.close()}catch(u){w("frame writing exception"),u.stack&&w(u.stack),w(u)}}}return t.createIFrame_=function(){var t=document.createElement("iframe");if(t.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(t);try{t.contentWindow.document||w("No IE domain setting required")}catch(n){var e=document.domain;t.src="javascript:void((function(){document.open();document.domain='"+e+"';document.close();})())"}return t.contentDocument?t.doc=t.contentDocument:t.contentWindow?t.doc=t.contentWindow.document:t.document&&(t.doc=t.document),t},t.prototype.close=function(){var e=this;if(this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout(function(){null!==e.myIFrame&&(document.body.removeChild(e.myIFrame),e.myIFrame=null)},Math.floor(0))),s.isNodeSdk()&&this.myID){var n={disconn:"t"};n.id=this.myID,n.pw=this.myPW;var r=this.urlFn(n);t.nodeRestRequest(r)}var i=this.onDisconnect;i&&(this.onDisconnect=null,i())},t.prototype.startLongPoll=function(t,e){for(this.myID=t,this.myPW=e,this.alive=!0;this.newRequest_(););},t.prototype.newRequest_=function(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.count()<(this.pendingSegs.length>0?2:1)){this.currentSerial++;var t={};t.id=this.myID,t.pw=this.myPW,t.ser=this.currentSerial;for(var e=this.urlFn(t),n="",r=0;this.pendingSegs.length>0;){if(!(this.pendingSegs[0].d.length+30+n.length<=1870))break;var i=this.pendingSegs.shift();n=n+"&seg"+r+"="+i.seg+"&ts"+r+"="+i.ts+"&d"+r+"="+i.d,r++}return e+=n,this.addLongPollTag_(e,this.currentSerial),!0}return!1},t.prototype.enqueueSegment=function(t,e,n){this.pendingSegs.push({seg:t,ts:e,d:n}),this.alive&&this.newRequest_()},t.prototype.addLongPollTag_=function(t,e){var n=this;this.outstandingRequests.add(e,1);var r=function(){n.outstandingRequests.remove(e),n.newRequest_()},i=setTimeout(r,Math.floor(25e3));this.addTag(t,function(){clearTimeout(i),r()})},t.prototype.addTag=function(t,e){var n=this;s.isNodeSdk()?this.doNodeLongPoll(t,e):setTimeout(function(){try{if(!n.sendNewPolls)return;var r=n.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=t,r.onload=r.onreadystatechange=function(){var t=r.readyState;t&&"loaded"!==t&&"complete"!==t||(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),e())},r.onerror=function(){w("Long-poll script failed to load: "+t),n.sendNewPolls=!1,n.close()},n.myIFrame.doc.body.appendChild(r)}catch(i){}},Math.floor(1))},t}(),Ge=null;"undefined"!==typeof MozWebSocket?Ge=MozWebSocket:"undefined"!==typeof WebSocket&&(Ge=WebSocket);var We=function(){function t(e,n,r,i){this.connId=e,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=E(this.connId),this.stats_=Ie.getCollection(n),this.connURL=t.connectionURL_(n,r,i)}return t.connectionURL_=function(t,e,n){var r={v:"5"};return!s.isNodeSdk()&&"undefined"!==typeof location&&location.href&&-1!==location.href.indexOf("firebaseio.com")&&(r.r="f"),e&&(r.s=e),n&&(r.ls=n),t.connectionURL("websocket",r)},t.prototype.open=function(t,e){var n=this;this.onDisconnect=e,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,f.set("previous_websocket_failure",!0);try{if(s.isNodeSdk()){var i=s.CONSTANTS.NODE_ADMIN?"AdminNode":"Node",a={headers:{"User-Agent":"Firebase/5/"+o.SDK_VERSION+"/"+r.platform+"/"+i}},u=Object({NODE_ENV:"production",PUBLIC_URL:"/gotsentiment"}),c=0==this.connURL.indexOf("wss://")?u.HTTPS_PROXY||u.https_proxy:u.HTTP_PROXY||u.http_proxy;c&&(a.proxy={origin:c}),this.mySock=new Ge(this.connURL,[],a)}else this.mySock=new Ge(this.connURL)}catch(h){this.log_("Error instantiating WebSocket.");var l=h.message||h.data;return l&&this.log_(l),void this.onClosed_()}this.mySock.onopen=function(){n.log_("Websocket connected."),n.everConnected_=!0},this.mySock.onclose=function(){n.log_("Websocket connection was disconnected."),n.mySock=null,n.onClosed_()},this.mySock.onmessage=function(t){n.handleIncomingFrame(t)},this.mySock.onerror=function(t){n.log_("WebSocket error.  Closing connection.");var e=t.message||t.data;e&&n.log_(e),n.onClosed_()}},t.prototype.start=function(){},t.forceDisallow=function(){t.forceDisallow_=!0},t.isAvailable=function(){var e=!1;if("undefined"!==typeof navigator&&navigator.userAgent){var n=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);n&&n.length>1&&parseFloat(n[1])<4.4&&(e=!0)}return!e&&null!==Ge&&!t.forceDisallow_},t.previouslyFailed=function(){return f.isInMemoryStorage||!0===f.get("previous_websocket_failure")},t.prototype.markConnectionHealthy=function(){f.remove("previous_websocket_failure")},t.prototype.appendFrame_=function(t){if(this.frames.push(t),this.frames.length==this.totalFrames){var e=this.frames.join("");this.frames=null;var n=s.jsonEval(e);this.onMessage(n)}},t.prototype.handleNewFrameCount_=function(t){this.totalFrames=t,this.frames=[]},t.prototype.extractFrameCount_=function(t){if(s.assert(null===this.frames,"We already have a frame buffer"),t.length<=6){var e=Number(t);if(!isNaN(e))return this.handleNewFrameCount_(e),null}return this.handleNewFrameCount_(1),t},t.prototype.handleIncomingFrame=function(t){if(null!==this.mySock){var e=t.data;if(this.bytesReceived+=e.length,this.stats_.incrementCounter("bytes_received",e.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(e);else{var n=this.extractFrameCount_(e);null!==n&&this.appendFrame_(n)}}},t.prototype.send=function(t){this.resetKeepAlive();var e=s.stringify(t);this.bytesSent+=e.length,this.stats_.incrementCounter("bytes_sent",e.length);var n=R(e,16384);n.length>1&&this.sendString_(String(n.length));for(var r=0;r<n.length;r++)this.sendString_(n[r])},t.prototype.shutdown_=function(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)},t.prototype.onClosed_=function(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))},t.prototype.close=function(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())},t.prototype.resetKeepAlive=function(){var t=this;clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(function(){t.mySock&&t.sendString_("0"),t.resetKeepAlive()},Math.floor(45e3))},t.prototype.sendString_=function(t){try{this.mySock.send(t)}catch(e){this.log_("Exception thrown from WebSocket.send():",e.message||e.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}},t.responsesRequiredToBeHealthy=2,t.healthyTimeout=3e4,t}(),ze=function(){function t(t){this.initTransports_(t)}return Object.defineProperty(t,"ALL_TRANSPORTS",{get:function(){return[je,We]},enumerable:!0,configurable:!0}),t.prototype.initTransports_=function(e){var n=We&&We.isAvailable(),r=n&&!We.previouslyFailed();if(e.webSocketOnly&&(n||C("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),r=!0),r)this.transports_=[We];else{var i=this.transports_=[];O(t.ALL_TRANSPORTS,function(t,e){e&&e.isAvailable()&&i.push(e)})}},t.prototype.initialTransport=function(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")},t.prototype.upgradeTransport=function(){return this.transports_.length>1?this.transports_[1]:null},t}(),He=function(){function t(t,e,n,r,i,o,a){this.id=t,this.repoInfo_=e,this.onMessage_=n,this.onReady_=r,this.onDisconnect_=i,this.onKill_=o,this.lastSessionId=a,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=E("c:"+this.id+":"),this.transportManager_=new ze(e),this.log_("Connection created"),this.start_()}return t.prototype.start_=function(){var t=this,e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,void 0,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(function(){t.conn_&&t.conn_.open(n,r)},Math.floor(0));var i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=U(function(){t.healthyTimeout_=null,t.isHealthy_||(t.conn_&&t.conn_.bytesReceived>102400?(t.log_("Connection exceeded healthy timeout but has received "+t.conn_.bytesReceived+" bytes.  Marking connection healthy."),t.isHealthy_=!0,t.conn_.markConnectionHealthy()):t.conn_&&t.conn_.bytesSent>10240?t.log_("Connection exceeded healthy timeout but has sent "+t.conn_.bytesSent+" bytes.  Leaving connection alive."):(t.log_("Closing unhealthy connection after timeout."),t.close()))},Math.floor(i)))},t.prototype.nextTransportId_=function(){return"c:"+this.id+":"+this.connectionCount++},t.prototype.disconnReceiver_=function(t){var e=this;return function(n){t===e.conn_?e.onConnectionLost_(n):t===e.secondaryConn_?(e.log_("Secondary connection lost."),e.onSecondaryConnectionLost_()):e.log_("closing an old connection")}},t.prototype.connReceiver_=function(t){var e=this;return function(n){2!=e.state_&&(t===e.rx_?e.onPrimaryMessageReceived_(n):t===e.secondaryConn_?e.onSecondaryMessageReceived_(n):e.log_("message on old connection"))}},t.prototype.sendRequest=function(t){var e={t:"d",d:t};this.sendData_(e)},t.prototype.tryCleanupConnection=function(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)},t.prototype.onSecondaryControl_=function(t){if("t"in t){var e=t.t;"a"===e?this.upgradeIfSecondaryHealthy_():"r"===e?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),this.tx_!==this.secondaryConn_&&this.rx_!==this.secondaryConn_||this.close()):"o"===e&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}},t.prototype.onSecondaryMessageReceived_=function(t){var e=D("t",t),n=D("d",t);if("c"==e)this.onSecondaryControl_(n);else{if("d"!=e)throw new Error("Unknown protocol layer: "+e);this.pendingDataMessages.push(n)}},t.prototype.upgradeIfSecondaryHealthy_=function(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))},t.prototype.proceedWithUpgrade_=function(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()},t.prototype.onPrimaryMessageReceived_=function(t){var e=D("t",t),n=D("d",t);"c"==e?this.onControl_(n):"d"==e&&this.onDataMessage_(n)},t.prototype.onDataMessage_=function(t){this.onPrimaryResponse_(),this.onMessage_(t)},t.prototype.onPrimaryResponse_=function(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))},t.prototype.onControl_=function(t){var e=D("t",t);if("d"in t){var n=t.d;if("h"===e)this.onHandshake_(n);else if("n"===e){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(var r=0;r<this.pendingDataMessages.length;++r)this.onDataMessage_(this.pendingDataMessages[r]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===e?this.onConnectionShutdown_(n):"r"===e?this.onReset_(n):"e"===e?S("Server Error: "+n):"o"===e?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):S("Unknown control packet command: "+e)}},t.prototype.onHandshake_=function(t){var e=t.ts,n=t.v,r=t.h;this.sessionId=t.s,this.repoInfo_.updateHost(r),0==this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,e),"5"!==n&&C("Protocol version mismatch detected"),this.tryStartUpgrade_())},t.prototype.tryStartUpgrade_=function(){var t=this.transportManager_.upgradeTransport();t&&this.startUpgrade_(t)},t.prototype.startUpgrade_=function(t){var e=this;this.secondaryConn_=new t(this.nextTransportId_(),this.repoInfo_,this.sessionId),this.secondaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,r),U(function(){e.secondaryConn_&&(e.log_("Timed out trying to upgrade."),e.secondaryConn_.close())},Math.floor(6e4))},t.prototype.onReset_=function(t){this.log_("Reset packet received.  New host: "+t),this.repoInfo_.updateHost(t),1===this.state_?this.close():(this.closeConnections_(),this.start_())},t.prototype.onConnectionEstablished_=function(t,e){var n=this;this.log_("Realtime connection established."),this.conn_=t,this.state_=1,this.onReady_&&(this.onReady_(e,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):U(function(){n.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))},t.prototype.sendPingOnPrimaryIfNecessary_=function(){this.isHealthy_||1!==this.state_||(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))},t.prototype.onSecondaryConnectionLost_=function(){var t=this.secondaryConn_;this.secondaryConn_=null,this.tx_!==t&&this.rx_!==t||this.close()},t.prototype.onConnectionLost_=function(t){this.conn_=null,t||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(f.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()},t.prototype.onConnectionShutdown_=function(t){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(t),this.onKill_=null),this.onDisconnect_=null,this.close()},t.prototype.sendData_=function(t){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(t)},t.prototype.close=function(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))},t.prototype.closeConnections_=function(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)},t}(),Ke=function(){function t(){}return t.prototype.put=function(t,e,n,r){},t.prototype.merge=function(t,e,n,r){},t.prototype.refreshAuthToken=function(t){},t.prototype.onDisconnectPut=function(t,e,n){},t.prototype.onDisconnectMerge=function(t,e,n){},t.prototype.onDisconnectCancel=function(t,e){},t.prototype.reportStats=function(t){},t}(),Qe=1e3,Ye=3e5,Xe=function(t){function e(n,r,i,o,a,u){var c=t.call(this)||this;if(c.repoInfo_=n,c.onDataUpdate_=r,c.onConnectStatus_=i,c.onServerInfoUpdate_=o,c.authTokenProvider_=a,c.authOverride_=u,c.id=e.nextPersistentConnectionId_++,c.log_=E("p:"+c.id+":"),c.interruptReasons_={},c.listens_={},c.outstandingPuts_=[],c.outstandingPutCount_=0,c.onDisconnectRequestQueue_=[],c.connected_=!1,c.reconnectDelay_=Qe,c.maxReconnectDelay_=Ye,c.securityDebugCallback_=null,c.lastSessionId=null,c.establishConnectionTimer_=null,c.visible_=!1,c.requestCBHash_={},c.requestNumber_=0,c.realtime_=null,c.authToken_=null,c.forceTokenRefresh_=!1,c.invalidAuthTokenCount_=0,c.firstConnection_=!0,c.lastConnectionAttemptTime_=null,c.lastConnectionEstablishedTime_=null,u&&!s.isNodeSdk())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");return c.scheduleConnect_(0),Fe.getInstance().on("visible",c.onVisible_,c),-1===n.host.indexOf("fblocal")&&Le.getInstance().on("online",c.onOnline_,c),c}return a.__extends(e,t),e.prototype.sendRequest=function(t,e,n){var r=++this.requestNumber_,i={r:r,a:t,b:e};this.log_(s.stringify(i)),s.assert(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(i),n&&(this.requestCBHash_[r]=n)},e.prototype.listen=function(t,e,n,r){var i=t.queryIdentifier(),o=t.path.toString();this.log_("Listen called for "+o+" "+i),this.listens_[o]=this.listens_[o]||{},s.assert(t.getQueryParams().isDefault()||!t.getQueryParams().loadsAllData(),"listen() called for non-default but complete query"),s.assert(!this.listens_[o][i],"listen() called twice for same path/queryId.");var a={onComplete:r,hashFn:e,query:t,tag:n};this.listens_[o][i]=a,this.connected_&&this.sendListen_(a)},e.prototype.sendListen_=function(t){var n=this,r=t.query,i=r.path.toString(),o=r.queryIdentifier();this.log_("Listen on "+i+" for "+o);var a={p:i};t.tag&&(a.q=r.queryObject(),a.t=t.tag),a.h=t.hashFn(),this.sendRequest("q",a,function(a){var s=a.d,u=a.s;e.warnOnListenWarnings_(s,r),(n.listens_[i]&&n.listens_[i][o])===t&&(n.log_("listen response",a),"ok"!==u&&n.removeListen_(i,o),t.onComplete&&t.onComplete(u,s))})},e.warnOnListenWarnings_=function(t,e){if(t&&"object"===typeof t&&s.contains(t,"w")){var n=s.safeGet(t,"w");if(Array.isArray(n)&&~n.indexOf("no_index")){var r='".indexOn": "'+e.getQueryParams().getIndex().toString()+'"',i=e.path.toString();C("Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding "+r+" at "+i+" to your security rules for better performance.")}}},e.prototype.refreshAuthToken=function(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},function(){}),this.reduceReconnectDelayIfAdminCredential_(t)},e.prototype.reduceReconnectDelayIfAdminCredential_=function(t){(t&&40===t.length||s.isAdmin(t))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)},e.prototype.tryAuth=function(){var t=this;if(this.connected_&&this.authToken_){var e=this.authToken_,n=s.isValidFormat(e)?"auth":"gauth",r={cred:e};null===this.authOverride_?r.noauth=!0:"object"===typeof this.authOverride_&&(r.authvar=this.authOverride_),this.sendRequest(n,r,function(n){var r=n.s,i=n.d||"error";t.authToken_===e&&("ok"===r?t.invalidAuthTokenCount_=0:t.onAuthRevoked_(r,i))})}},e.prototype.unlisten=function(t,e){var n=t.path.toString(),r=t.queryIdentifier();this.log_("Unlisten called for "+n+" "+r),s.assert(t.getQueryParams().isDefault()||!t.getQueryParams().loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(n,r)&&this.connected_&&this.sendUnlisten_(n,r,t.queryObject(),e)},e.prototype.sendUnlisten_=function(t,e,n,r){this.log_("Unlisten on "+t+" for "+e);var i={p:t};r&&(i.q=n,i.t=r),this.sendRequest("n",i)},e.prototype.onDisconnectPut=function(t,e,n){this.connected_?this.sendOnDisconnect_("o",t,e,n):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:e,onComplete:n})},e.prototype.onDisconnectMerge=function(t,e,n){this.connected_?this.sendOnDisconnect_("om",t,e,n):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:e,onComplete:n})},e.prototype.onDisconnectCancel=function(t,e){this.connected_?this.sendOnDisconnect_("oc",t,null,e):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:e})},e.prototype.sendOnDisconnect_=function(t,e,n,r){var i={p:e,d:n};this.log_("onDisconnect "+t,i),this.sendRequest(t,i,function(t){r&&setTimeout(function(){r(t.s,t.d)},Math.floor(0))})},e.prototype.put=function(t,e,n,r){this.putInternal("p",t,e,n,r)},e.prototype.merge=function(t,e,n,r){this.putInternal("m",t,e,n,r)},e.prototype.putInternal=function(t,e,n,r,i){var o={p:e,d:n};void 0!==i&&(o.h=i),this.outstandingPuts_.push({action:t,request:o,onComplete:r}),this.outstandingPutCount_++;var a=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(a):this.log_("Buffering put: "+e)},e.prototype.sendPut_=function(t){var e=this,n=this.outstandingPuts_[t].action,r=this.outstandingPuts_[t].request,i=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(n,r,function(r){e.log_(n+" response",r),delete e.outstandingPuts_[t],e.outstandingPutCount_--,0===e.outstandingPutCount_&&(e.outstandingPuts_=[]),i&&i(r.s,r.d)})},e.prototype.reportStats=function(t){var e=this;if(this.connected_){var n={c:t};this.log_("reportStats",n),this.sendRequest("s",n,function(t){if("ok"!==t.s){var n=t.d;e.log_("reportStats","Error sending stats: "+n)}})}},e.prototype.onDataMessage_=function(t){if("r"in t){this.log_("from server: "+s.stringify(t));var e=t.r,n=this.requestCBHash_[e];n&&(delete this.requestCBHash_[e],n(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}},e.prototype.onDataPush_=function(t,e){this.log_("handleServerMessage",t,e),"d"===t?this.onDataUpdate_(e.p,e.d,!1,e.t):"m"===t?this.onDataUpdate_(e.p,e.d,!0,e.t):"c"===t?this.onListenRevoked_(e.p,e.q):"ac"===t?this.onAuthRevoked_(e.s,e.d):"sd"===t?this.onSecurityDebugPacket_(e):S("Unrecognized action received from server: "+s.stringify(t)+"\nAre you using the latest client?")},e.prototype.onReady_=function(t,e){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(t),this.lastSessionId=e,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)},e.prototype.scheduleConnect_=function(t){var e=this;s.assert(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(function(){e.establishConnectionTimer_=null,e.establishConnection_()},Math.floor(t))},e.prototype.onVisible_=function(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Qe,this.realtime_||this.scheduleConnect_(0)),this.visible_=t},e.prototype.onOnline_=function(t){t?(this.log_("Browser went online."),this.reconnectDelay_=Qe,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())},e.prototype.onRealtimeDisconnect_=function(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){if(this.visible_){if(this.lastConnectionEstablishedTime_){(new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=Qe),this.lastConnectionEstablishedTime_=null}}else this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime();var t=(new Date).getTime()-this.lastConnectionAttemptTime_,e=Math.max(0,this.reconnectDelay_-t);e=Math.random()*e,this.log_("Trying to reconnect in "+e+"ms"),this.scheduleConnect_(e),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)},e.prototype.establishConnection_=function(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=(new Date).getTime(),this.lastConnectionEstablishedTime_=null;var t=this.onDataMessage_.bind(this),n=this.onReady_.bind(this),r=this.onRealtimeDisconnect_.bind(this),i=this.id+":"+e.nextConnectionId_++,o=this,a=this.lastSessionId,u=!1,c=null,l=function(){c?c.close():(u=!0,r())};this.realtime_={close:l,sendRequest:function(t){s.assert(c,"sendRequest call when we're not connected not allowed."),c.sendRequest(t)}};var h=this.forceTokenRefresh_;this.forceTokenRefresh_=!1,this.authTokenProvider_.getToken(h).then(function(e){u?w("getToken() completed but was canceled"):(w("getToken() completed. Creating connection."),o.authToken_=e&&e.accessToken,c=new He(i,o.repoInfo_,t,n,r,function(t){C(t+" ("+o.repoInfo_.toString()+")"),o.interrupt("server_kill")},a))}).then(null,function(t){o.log_("Failed to get token: "+t),u||(s.CONSTANTS.NODE_ADMIN&&C(t),l())})}},e.prototype.interrupt=function(t){w("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())},e.prototype.resume=function(t){w("Resuming connection for reason: "+t),delete this.interruptReasons_[t],s.isEmpty(this.interruptReasons_)&&(this.reconnectDelay_=Qe,this.realtime_||this.scheduleConnect_(0))},e.prototype.handleTimestamp_=function(t){var e=t-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:e})},e.prototype.cancelSentTransactions_=function(){for(var t=0;t<this.outstandingPuts_.length;t++){var e=this.outstandingPuts_[t];e&&"h"in e.request&&e.queued&&(e.onComplete&&e.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])},e.prototype.onListenRevoked_=function(t,e){var n;n=e?e.map(function(t){return N(t)}).join("$"):"default";var r=this.removeListen_(t,n);r&&r.onComplete&&r.onComplete("permission_denied")},e.prototype.removeListen_=function(t,e){var n,r=new j(t).toString();return void 0!==this.listens_[r]?(n=this.listens_[r][e],delete this.listens_[r][e],0===s.getCount(this.listens_[r])&&delete this.listens_[r]):n=void 0,n},e.prototype.onAuthRevoked_=function(t,e){w("Auth token revoked: "+t+"/"+e),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),"invalid_token"!==t&&"permission_denied"!==t||(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))},e.prototype.onSecurityDebugPacket_=function(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace("\n","\nFIREBASE: "))},e.prototype.restoreState_=function(){var t=this;this.tryAuth(),s.forEach(this.listens_,function(e,n){s.forEach(n,function(e,n){t.sendListen_(n)})});for(var e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){var n=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(n.action,n.pathString,n.data,n.onComplete)}},e.prototype.sendConnectStats_=function(){var t={},e="js";s.CONSTANTS.NODE_ADMIN?e="admin_node":s.CONSTANTS.NODE_CLIENT&&(e="node"),t["sdk."+e+"."+o.SDK_VERSION.replace(/\./g,"-")]=1,s.isMobileCordova()?t["framework.cordova"]=1:s.isReactNative()&&(t["framework.reactnative"]=1),this.reportStats(t)},e.prototype.shouldReconnect_=function(){var t=Le.getInstance().currentlyOnline();return s.isEmpty(this.interruptReasons_)&&t},e.nextPersistentConnectionId_=0,e.nextConnectionId_=0,e}(Ke),$e=function(t){function e(e,n,r){var i=t.call(this)||this;return i.repoInfo_=e,i.onDataUpdate_=n,i.authTokenProvider_=r,i.log_=E("p:rest:"),i.listens_={},i}return a.__extends(e,t),e.prototype.reportStats=function(t){throw new Error("Method not implemented.")},e.getListenId_=function(t,e){return void 0!==e?"tag$"+e:(s.assert(t.getQueryParams().isDefault(),"should have a tag if it's not a default query."),t.path.toString())},e.prototype.listen=function(t,n,r,i){var o=this,a=t.path.toString();this.log_("Listen called for "+a+" "+t.queryIdentifier());var u=e.getListenId_(t,r),c={};this.listens_[u]=c;var l=t.getQueryParams().toRestQueryStringParameters();this.restRequest_(a+".json",l,function(t,e){var n=e;(404===t&&(n=null,t=null),null===t&&o.onDataUpdate_(a,n,!1,r),s.safeGet(o.listens_,u)===c)&&i(t?401==t?"permission_denied":"rest_error:"+t:"ok",null)})},e.prototype.unlisten=function(t,n){var r=e.getListenId_(t,n);delete this.listens_[r]},e.prototype.refreshAuthToken=function(t){},e.prototype.restRequest_=function(t,e,n){var r=this;void 0===e&&(e={}),e.format="export",this.authTokenProvider_.getToken(!1).then(function(i){var o=i&&i.accessToken;o&&(e.auth=o);var a=(r.repoInfo_.secure?"https://":"http://")+r.repoInfo_.host+t+"?ns="+r.repoInfo_.namespace+s.querystring(e);r.log_("Sending REST request for "+a);var u=new XMLHttpRequest;u.onreadystatechange=function(){if(n&&4===u.readyState){r.log_("REST Response for "+a+" received. status:",u.status,"response:",u.responseText);var t=null;if(u.status>=200&&u.status<300){try{t=s.jsonEval(u.responseText)}catch(e){C("Failed to parse JSON response for "+a+": "+u.responseText)}n(null,t)}else 401!==u.status&&404!==u.status&&C("Got unsuccessful REST response for "+a+" Status: "+u.status),n(u.status);n=null}},u.open("GET",a,!0),u.send()})},e}(Ke),Je=function(){function t(t,e,n){var r=this;this.repoInfo_=t,this.app=n,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new Re,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=new $t,this.persistentConnection_=null;var i=new ke(n);if(this.stats_=Ie.getCollection(t),e||B())this.server_=new $e(this.repoInfo_,this.onDataUpdate_.bind(this),i),setTimeout(this.onConnectStatus_.bind(this,!0),0);else{var o=n.options.databaseAuthVariableOverride;if("undefined"!==typeof o&&null!==o){if("object"!==typeof o)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{s.stringify(o)}catch(a){throw new Error("Invalid authOverride provided: "+a)}}this.persistentConnection_=new Xe(this.repoInfo_,this.onDataUpdate_.bind(this),this.onConnectStatus_.bind(this),this.onServerInfoUpdate_.bind(this),i,o),this.server_=this.persistentConnection_}i.addTokenChangeListener(function(t){r.server_.refreshAuthToken(t)}),this.statsReporter_=Ie.getOrCreateReporter(t,function(){return new Ne(r.stats_,r.server_)}),this.transactions_init_(),this.infoData_=new Ce,this.infoSyncTree_=new Te({startListening:function(t,e,n,i){var o=[],a=r.infoData_.getNode(t.path);return a.isEmpty()||(o=r.infoSyncTree_.applyServerOverwrite(t.path,a),setTimeout(function(){i("ok")},0)),o},stopListening:function(){}}),this.updateInfo_("connected",!1),this.serverSyncTree_=new Te({startListening:function(t,e,n,i){return r.server_.listen(t,n,e,function(e,n){var o=i(e,n);r.eventQueue_.raiseEventsForChangedPath(t.path,o)}),[]},stopListening:function(t,e){r.server_.unlisten(t,e)}})}return t.prototype.toString=function(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host},t.prototype.name=function(){return this.repoInfo_.namespace},t.prototype.serverTime=function(){var t=this.infoData_.getNode(new j(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t},t.prototype.generateServerValues=function(){return(t=(t={timestamp:this.serverTime()})||{}).timestamp=t.timestamp||(new Date).getTime(),t;var t},t.prototype.onDataUpdate_=function(t,e,n,r){this.dataUpdateCount++;var i=new j(t);e=this.interceptServerDataCallback_?this.interceptServerDataCallback_(t,e):e;var o=[];if(r)if(n){var a=s.map(e,function(t){return Bt(t)});o=this.serverSyncTree_.applyTaggedQueryMerge(i,a,r)}else{var u=Bt(e);o=this.serverSyncTree_.applyTaggedQueryOverwrite(i,u,r)}else if(n){var c=s.map(e,function(t){return Bt(t)});o=this.serverSyncTree_.applyServerMerge(i,c)}else{var l=Bt(e);o=this.serverSyncTree_.applyServerOverwrite(i,l)}var h=i;o.length>0&&(h=this.rerunTransactions_(i)),this.eventQueue_.raiseEventsForChangedPath(h,o)},t.prototype.interceptServerData_=function(t){this.interceptServerDataCallback_=t},t.prototype.onConnectStatus_=function(t){this.updateInfo_("connected",t),!1===t&&this.runOnDisconnectEvents_()},t.prototype.onServerInfoUpdate_=function(t){var e=this;O(t,function(t,n){e.updateInfo_(n,t)})},t.prototype.updateInfo_=function(t,e){var n=new j("/.info/"+t),r=Bt(e);this.infoData_.updateSnapshot(n,r);var i=this.infoSyncTree_.applyServerOverwrite(n,r);this.eventQueue_.raiseEventsForChangedPath(n,i)},t.prototype.getNextWriteId_=function(){return this.nextWriteId_++},t.prototype.setWithPriority=function(t,e,n,r){var i=this;this.log_("set",{path:t.toString(),value:e,priority:n});var o=this.generateServerValues(),a=Bt(e,n),s=Zt(a,o),u=this.getNextWriteId_(),c=this.serverSyncTree_.applyUserOverwrite(t,s,u,!0);this.eventQueue_.queueEvents(c),this.server_.put(t.toString(),a.val(!0),function(e,n){var o="ok"===e;o||C("set at "+t+" failed: "+e);var a=i.serverSyncTree_.ackUserWrite(u,!o);i.eventQueue_.raiseEventsForChangedPath(t,a),i.callOnCompleteCallback(r,e,n)});var l=this.abortTransactions_(t);this.rerunTransactions_(l),this.eventQueue_.raiseEventsForChangedPath(l,[])},t.prototype.update=function(t,e,n){var r=this;this.log_("update",{path:t.toString(),value:e});var i=!0,o=this.generateServerValues(),a={};if(s.forEach(e,function(t,e){i=!1;var n=Bt(e);a[t]=Zt(n,o)}),i)w("update() called with empty data.  Don't do anything."),this.callOnCompleteCallback(n,"ok");else{var u=this.getNextWriteId_(),c=this.serverSyncTree_.applyUserMerge(t,a,u);this.eventQueue_.queueEvents(c),this.server_.merge(t.toString(),e,function(e,i){var o="ok"===e;o||C("update at "+t+" failed: "+e);var a=r.serverSyncTree_.ackUserWrite(u,!o),s=a.length>0?r.rerunTransactions_(t):t;r.eventQueue_.raiseEventsForChangedPath(s,a),r.callOnCompleteCallback(n,e,i)}),s.forEach(e,function(e){var n=r.abortTransactions_(t.child(e));r.rerunTransactions_(n)}),this.eventQueue_.raiseEventsForChangedPath(t,[])}},t.prototype.runOnDisconnectEvents_=function(){var t=this;this.log_("onDisconnectEvents");var e=this.generateServerValues(),n=function(t,e){var n=new $t;return t.forEachTree(new j(""),function(t,r){n.remember(t,Zt(r,e))}),n}(this.onDisconnect_,e),r=[];n.forEachTree(j.Empty,function(e,n){r=r.concat(t.serverSyncTree_.applyServerOverwrite(e,n));var i=t.abortTransactions_(e);t.rerunTransactions_(i)}),this.onDisconnect_=new $t,this.eventQueue_.raiseEventsForChangedPath(j.Empty,r)},t.prototype.onDisconnectCancel=function(t,e){var n=this;this.server_.onDisconnectCancel(t.toString(),function(r,i){"ok"===r&&n.onDisconnect_.forget(t),n.callOnCompleteCallback(e,r,i)})},t.prototype.onDisconnectSet=function(t,e,n){var r=this,i=Bt(e);this.server_.onDisconnectPut(t.toString(),i.val(!0),function(e,o){"ok"===e&&r.onDisconnect_.remember(t,i),r.callOnCompleteCallback(n,e,o)})},t.prototype.onDisconnectSetWithPriority=function(t,e,n,r){var i=this,o=Bt(e,n);this.server_.onDisconnectPut(t.toString(),o.val(!0),function(e,n){"ok"===e&&i.onDisconnect_.remember(t,o),i.callOnCompleteCallback(r,e,n)})},t.prototype.onDisconnectUpdate=function(t,e,n){var r=this;if(s.isEmpty(e))return w("onDisconnect().update() called with empty data.  Don't do anything."),void this.callOnCompleteCallback(n,"ok");this.server_.onDisconnectMerge(t.toString(),e,function(i,o){"ok"===i&&s.forEach(e,function(e,n){var i=Bt(n);r.onDisconnect_.remember(t.child(e),i)}),r.callOnCompleteCallback(n,i,o)})},t.prototype.addEventCallbackForQuery=function(t,e){var n;n=".info"===t.path.getFront()?this.infoSyncTree_.addEventRegistration(t,e):this.serverSyncTree_.addEventRegistration(t,e),this.eventQueue_.raiseEventsAtPath(t.path,n)},t.prototype.removeEventCallbackForQuery=function(t,e){var n;n=".info"===t.path.getFront()?this.infoSyncTree_.removeEventRegistration(t,e):this.serverSyncTree_.removeEventRegistration(t,e),this.eventQueue_.raiseEventsAtPath(t.path,n)},t.prototype.interrupt=function(){this.persistentConnection_&&this.persistentConnection_.interrupt("repo_interrupt")},t.prototype.resume=function(){this.persistentConnection_&&this.persistentConnection_.resume("repo_interrupt")},t.prototype.stats=function(t){if(void 0===t&&(t=!1),"undefined"!==typeof console){var e;t?(this.statsListener_||(this.statsListener_=new Ae(this.stats_)),e=this.statsListener_.get()):e=this.stats_.get();var n=Object.keys(e).reduce(function(t,e){return Math.max(e.length,t)},0);s.forEach(e,function(t,e){for(var r=t.length;r<n+2;r++)t+=" ";console.log(t+e)})}},t.prototype.statsIncrementCounter=function(t){this.stats_.incrementCounter(t),this.statsReporter_.includeStat(t)},t.prototype.log_=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="";this.persistentConnection_&&(n=this.persistentConnection_.id+":"),w.apply(void 0,[n].concat(t))},t.prototype.callOnCompleteCallback=function(t,e,n){t&&V(function(){if("ok"==e)t(null);else{var r=(e||"error").toUpperCase(),i=r;n&&(i+=": "+n);var o=new Error(i);o.code=r,t(o)}})},Object.defineProperty(t.prototype,"database",{get:function(){return this.__database||(this.__database=new cn(this))},enumerable:!0,configurable:!0}),t}(),Ze=function(){function t(e){this.indexedFilter_=new fe(e.getIndex()),this.index_=e.getIndex(),this.startPost_=t.getStartPost_(e),this.endPost_=t.getEndPost_(e)}return t.prototype.getStartPost=function(){return this.startPost_},t.prototype.getEndPost=function(){return this.endPost_},t.prototype.matches=function(t){return this.index_.compare(this.getStartPost(),t)<=0&&this.index_.compare(t,this.getEndPost())<=0},t.prototype.updateChild=function(t,e,n,r,i,o){return this.matches(new ft(e,n))||(n=Ft.EMPTY_NODE),this.indexedFilter_.updateChild(t,e,n,r,i,o)},t.prototype.updateFullNode=function(t,e,n){e.isLeafNode()&&(e=Ft.EMPTY_NODE);var r=e.withIndex(this.index_);r=r.updatePriority(Ft.EMPTY_NODE);var i=this;return e.forEachChild(Tt,function(t,e){i.matches(new ft(t,e))||(r=r.updateImmediateChild(t,Ft.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(t,r,n)},t.prototype.updatePriority=function(t,e){return t},t.prototype.filtersNodes=function(){return!0},t.prototype.getIndexedFilter=function(){return this.indexedFilter_},t.prototype.getIndex=function(){return this.index_},t.getStartPost_=function(t){if(t.hasStart()){var e=t.getIndexStartName();return t.getIndex().makePost(t.getIndexStartValue(),e)}return t.getIndex().minPost()},t.getEndPost_=function(t){if(t.hasEnd()){var e=t.getIndexEndName();return t.getIndex().makePost(t.getIndexEndValue(),e)}return t.getIndex().maxPost()},t}(),tn=function(){function t(t){this.rangedFilter_=new Ze(t),this.index_=t.getIndex(),this.limit_=t.getLimit(),this.reverse_=!t.isViewFromLeft()}return t.prototype.updateChild=function(t,e,n,r,i,o){return this.rangedFilter_.matches(new ft(e,n))||(n=Ft.EMPTY_NODE),t.getImmediateChild(e).equals(n)?t:t.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(t,e,n,r,i,o):this.fullLimitUpdateChild_(t,e,n,i,o)},t.prototype.updateFullNode=function(t,e,n){var r;if(e.isLeafNode()||e.isEmpty())r=Ft.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<e.numChildren()&&e.isIndexed(this.index_)){r=Ft.EMPTY_NODE.withIndex(this.index_);var i=void 0;i=this.reverse_?e.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):e.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);for(var o=0;i.hasNext()&&o<this.limit_;){var a=i.getNext();if(!(this.reverse_?this.index_.compare(this.rangedFilter_.getStartPost(),a)<=0:this.index_.compare(a,this.rangedFilter_.getEndPost())<=0))break;r=r.updateImmediateChild(a.name,a.node),o++}}else{r=(r=e.withIndex(this.index_)).updatePriority(Ft.EMPTY_NODE);var s=void 0,u=void 0,c=void 0;i=void 0;if(this.reverse_){i=r.getReverseIterator(this.index_),s=this.rangedFilter_.getEndPost(),u=this.rangedFilter_.getStartPost();var l=this.index_.getCompare();c=function(t,e){return l(e,t)}}else i=r.getIterator(this.index_),s=this.rangedFilter_.getStartPost(),u=this.rangedFilter_.getEndPost(),c=this.index_.getCompare();o=0;for(var h=!1;i.hasNext();){a=i.getNext();!h&&c(s,a)<=0&&(h=!0),h&&o<this.limit_&&c(a,u)<=0?o++:r=r.updateImmediateChild(a.name,Ft.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(t,r,n)},t.prototype.updatePriority=function(t,e){return t},t.prototype.filtersNodes=function(){return!0},t.prototype.getIndexedFilter=function(){return this.rangedFilter_.getIndexedFilter()},t.prototype.getIndex=function(){return this.index_},t.prototype.fullLimitUpdateChild_=function(t,e,n,r,i){var o;if(this.reverse_){var a=this.index_.getCompare();o=function(t,e){return a(e,t)}}else o=this.index_.getCompare();var u=t;s.assert(u.numChildren()==this.limit_,"");var c=new ft(e,n),l=this.reverse_?u.getFirstChild(this.index_):u.getLastChild(this.index_),h=this.rangedFilter_.matches(c);if(u.hasChild(e)){for(var f=u.getImmediateChild(e),p=r.getChildAfterChild(this.index_,l,this.reverse_);null!=p&&(p.name==e||u.hasChild(p.name));)p=r.getChildAfterChild(this.index_,p,this.reverse_);var d=null==p?1:o(p,c);if(h&&!n.isEmpty()&&d>=0)return null!=i&&i.trackChildChange(he.childChangedChange(e,n,f)),u.updateImmediateChild(e,n);null!=i&&i.trackChildChange(he.childRemovedChange(e,f));var m=u.updateImmediateChild(e,Ft.EMPTY_NODE);return null!=p&&this.rangedFilter_.matches(p)?(null!=i&&i.trackChildChange(he.childAddedChange(p.name,p.node)),m.updateImmediateChild(p.name,p.node)):m}return n.isEmpty()?t:h&&o(l,c)>=0?(null!=i&&(i.trackChildChange(he.childRemovedChange(l.name,l.node)),i.trackChildChange(he.childAddedChange(e,n))),u.updateImmediateChild(e,n).updateImmediateChild(l.name,Ft.EMPTY_NODE)):t},t}(),en=function(){function t(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Tt}return t.prototype.hasStart=function(){return this.startSet_},t.prototype.isViewFromLeft=function(){return""===this.viewFrom_?this.startSet_:this.viewFrom_===t.WIRE_PROTOCOL_CONSTANTS_.VIEW_FROM_LEFT},t.prototype.getIndexStartValue=function(){return s.assert(this.startSet_,"Only valid if start has been set"),this.indexStartValue_},t.prototype.getIndexStartName=function(){return s.assert(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:x},t.prototype.hasEnd=function(){return this.endSet_},t.prototype.getIndexEndValue=function(){return s.assert(this.endSet_,"Only valid if end has been set"),this.indexEndValue_},t.prototype.getIndexEndName=function(){return s.assert(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:I},t.prototype.hasLimit=function(){return this.limitSet_},t.prototype.hasAnchoredLimit=function(){return this.limitSet_&&""!==this.viewFrom_},t.prototype.getLimit=function(){return s.assert(this.limitSet_,"Only valid if limit has been set"),this.limit_},t.prototype.getIndex=function(){return this.index_},t.prototype.copy_=function(){var e=new t;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e},t.prototype.limit=function(t){var e=this.copy_();return e.limitSet_=!0,e.limit_=t,e.viewFrom_="",e},t.prototype.limitToFirst=function(e){var n=this.copy_();return n.limitSet_=!0,n.limit_=e,n.viewFrom_=t.WIRE_PROTOCOL_CONSTANTS_.VIEW_FROM_LEFT,n},t.prototype.limitToLast=function(e){var n=this.copy_();return n.limitSet_=!0,n.limit_=e,n.viewFrom_=t.WIRE_PROTOCOL_CONSTANTS_.VIEW_FROM_RIGHT,n},t.prototype.startAt=function(t,e){var n=this.copy_();return n.startSet_=!0,void 0===t&&(t=null),n.indexStartValue_=t,null!=e?(n.startNameSet_=!0,n.indexStartName_=e):(n.startNameSet_=!1,n.indexStartName_=""),n},t.prototype.endAt=function(t,e){var n=this.copy_();return n.endSet_=!0,void 0===t&&(t=null),n.indexEndValue_=t,void 0!==e?(n.endNameSet_=!0,n.indexEndName_=e):(n.endNameSet_=!1,n.indexEndName_=""),n},t.prototype.orderBy=function(t){var e=this.copy_();return e.index_=t,e},t.prototype.getQueryObject=function(){var e=t.WIRE_PROTOCOL_CONSTANTS_,n={};if(this.startSet_&&(n[e.INDEX_START_VALUE]=this.indexStartValue_,this.startNameSet_&&(n[e.INDEX_START_NAME]=this.indexStartName_)),this.endSet_&&(n[e.INDEX_END_VALUE]=this.indexEndValue_,this.endNameSet_&&(n[e.INDEX_END_NAME]=this.indexEndName_)),this.limitSet_){n[e.LIMIT]=this.limit_;var r=this.viewFrom_;""===r&&(r=this.isViewFromLeft()?e.VIEW_FROM_LEFT:e.VIEW_FROM_RIGHT),n[e.VIEW_FROM]=r}return this.index_!==Tt&&(n[e.INDEX]=this.index_.toString()),n},t.prototype.loadsAllData=function(){return!(this.startSet_||this.endSet_||this.limitSet_)},t.prototype.isDefault=function(){return this.loadsAllData()&&this.index_==Tt},t.prototype.getNodeFilter=function(){return this.loadsAllData()?new fe(this.getIndex()):this.hasLimit()?new tn(this):new Ze(this)},t.prototype.toRestQueryStringParameters=function(){var e,n=t.REST_QUERY_CONSTANTS_,r={};return this.isDefault()?r:(this.index_===Tt?e=n.PRIORITY_INDEX:this.index_===qt?e=n.VALUE_INDEX:this.index_===mt?e=n.KEY_INDEX:(s.assert(this.index_ instanceof Gt,"Unrecognized index type!"),e=this.index_.toString()),r[n.ORDER_BY]=s.stringify(e),this.startSet_&&(r[n.START_AT]=s.stringify(this.indexStartValue_),this.startNameSet_&&(r[n.START_AT]+=","+s.stringify(this.indexStartName_))),this.endSet_&&(r[n.END_AT]=s.stringify(this.indexEndValue_),this.endNameSet_&&(r[n.END_AT]+=","+s.stringify(this.indexEndName_))),this.limitSet_&&(this.isViewFromLeft()?r[n.LIMIT_TO_FIRST]=this.limit_:r[n.LIMIT_TO_LAST]=this.limit_),r)},t.WIRE_PROTOCOL_CONSTANTS_={INDEX_START_VALUE:"sp",INDEX_START_NAME:"sn",INDEX_END_VALUE:"ep",INDEX_END_NAME:"en",LIMIT:"l",VIEW_FROM:"vf",VIEW_FROM_LEFT:"l",VIEW_FROM_RIGHT:"r",INDEX:"i"},t.REST_QUERY_CONSTANTS_={ORDER_BY:"orderBy",PRIORITY_INDEX:"$priority",VALUE_INDEX:"$value",KEY_INDEX:"$key",START_AT:"startAt",END_AT:"endAt",LIMIT_TO_FIRST:"limitToFirst",LIMIT_TO_LAST:"limitToLast"},t.DEFAULT=new t,t}(),nn=function(t){function e(e,n){if(!(e instanceof Je))throw new Error("new Reference() no longer supported - use app.database().");return t.call(this,e,n,en.DEFAULT,!1)||this}return a.__extends(e,t),e.prototype.getKey=function(){return s.validateArgCount("Reference.key",0,0,arguments.length),this.path.isEmpty()?null:this.path.getBack()},e.prototype.child=function(t){return s.validateArgCount("Reference.child",1,1,arguments.length),"number"===typeof t?t=String(t):t instanceof j||(null===this.path.getFront()?function(t,e,n,r){n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),at(t,e,n,r)}("Reference.child",1,t,!1):at("Reference.child",1,t,!1)),new e(this.repo,this.path.child(t))},e.prototype.getParent=function(){s.validateArgCount("Reference.parent",0,0,arguments.length);var t=this.path.parent();return null===t?null:new e(this.repo,t)},e.prototype.getRoot=function(){s.validateArgCount("Reference.root",0,0,arguments.length);for(var t=this;null!==t.getParent();)t=t.getParent();return t},e.prototype.databaseProp=function(){return this.repo.database},e.prototype.set=function(t,e){s.validateArgCount("Reference.set",1,2,arguments.length),st("Reference.set",this.path),tt("Reference.set",1,t,this.path,!1),s.validateCallback("Reference.set",2,e,!0);var n=new s.Deferred;return this.repo.setWithPriority(this.path,t,null,n.wrapCallback(e)),n.promise},e.prototype.update=function(t,e){if(s.validateArgCount("Reference.update",1,2,arguments.length),st("Reference.update",this.path),Array.isArray(t)){for(var n={},r=0;r<t.length;++r)n[""+r]=t[r];t=n,C("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}nt("Reference.update",1,t,this.path,!1),s.validateCallback("Reference.update",2,e,!0);var i=new s.Deferred;return this.repo.update(this.path,t,i.wrapCallback(e)),i.promise},e.prototype.setWithPriority=function(t,e,n){if(s.validateArgCount("Reference.setWithPriority",2,3,arguments.length),st("Reference.setWithPriority",this.path),tt("Reference.setWithPriority",1,t,this.path,!1),rt("Reference.setWithPriority",2,e,!1),s.validateCallback("Reference.setWithPriority",3,n,!0),".length"===this.getKey()||".keys"===this.getKey())throw"Reference.setWithPriority failed: "+this.getKey()+" is a read-only object.";var r=new s.Deferred;return this.repo.setWithPriority(this.path,t,e,r.wrapCallback(n)),r.promise},e.prototype.remove=function(t){return s.validateArgCount("Reference.remove",0,1,arguments.length),st("Reference.remove",this.path),s.validateCallback("Reference.remove",1,t,!0),this.set(null,t)},e.prototype.transaction=function(t,e,n){if(s.validateArgCount("Reference.transaction",1,3,arguments.length),st("Reference.transaction",this.path),s.validateCallback("Reference.transaction",1,t,!1),s.validateCallback("Reference.transaction",2,e,!0),function(t,e,n,r){if((!r||void 0!==n)&&"boolean"!==typeof n)throw new Error(s.errorPrefix(t,e,r)+"must be a boolean.")}("Reference.transaction",3,n,!0),".length"===this.getKey()||".keys"===this.getKey())throw"Reference.transaction failed: "+this.getKey()+" is a read-only object.";void 0===n&&(n=!0);var r=new s.Deferred;"function"===typeof e&&r.promise.catch(function(){});return this.repo.startTransaction(this.path,t,function(t,n,i){t?r.reject(t):r.resolve(new lt(n,i)),"function"===typeof e&&e(t,n,i)},n),r.promise},e.prototype.setPriority=function(t,e){s.validateArgCount("Reference.setPriority",1,2,arguments.length),st("Reference.setPriority",this.path),rt("Reference.setPriority",1,t,!1),s.validateCallback("Reference.setPriority",2,e,!0);var n=new s.Deferred;return this.repo.setWithPriority(this.path.child(".priority"),t,null,n.wrapCallback(e)),n.promise},e.prototype.push=function(t,e){s.validateArgCount("Reference.push",0,2,arguments.length),st("Reference.push",this.path),tt("Reference.push",1,t,this.path,!0),s.validateCallback("Reference.push",2,e,!0);var n,r=this.repo.serverTime(),i=ht(r),o=this.child(i),a=this.child(i);return n=null!=t?o.set(t,e).then(function(){return a}):Promise.resolve(a),o.then=n.then.bind(n),o.catch=n.then.bind(n,void 0),"function"===typeof e&&n.catch(function(){}),o},e.prototype.onDisconnect=function(){return st("Reference.onDisconnect",this.path),new ct(this.repo,this.path)},Object.defineProperty(e.prototype,"database",{get:function(){return this.databaseProp()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"key",{get:function(){return this.getKey()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){return this.getParent()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"root",{get:function(){return this.getRoot()},enumerable:!0,configurable:!0}),e}(Yt);Yt.__referenceConstructor=nn,_e.__referenceConstructor=nn;var rn,on=function(){return function(){this.children={},this.childCount=0,this.value=null}}(),an=function(){function t(t,e,n){void 0===t&&(t=""),void 0===e&&(e=null),void 0===n&&(n=new on),this.name_=t,this.parent_=e,this.node_=n}return t.prototype.subTree=function(e){for(var n,r=e instanceof j?e:new j(e),i=this;null!==(n=r.getFront());){i=new t(n,i,s.safeGet(i.node_.children,n)||new on),r=r.popFront()}return i},t.prototype.getValue=function(){return this.node_.value},t.prototype.setValue=function(t){s.assert("undefined"!==typeof t,"Cannot set value to undefined"),this.node_.value=t,this.updateParents_()},t.prototype.clear=function(){this.node_.value=null,this.node_.children={},this.node_.childCount=0,this.updateParents_()},t.prototype.hasChildren=function(){return this.node_.childCount>0},t.prototype.isEmpty=function(){return null===this.getValue()&&!this.hasChildren()},t.prototype.forEachChild=function(e){var n=this;s.forEach(this.node_.children,function(r,i){e(new t(r,n,i))})},t.prototype.forEachDescendant=function(t,e,n){e&&!n&&t(this),this.forEachChild(function(e){e.forEachDescendant(t,!0,n)}),e&&n&&t(this)},t.prototype.forEachAncestor=function(t,e){for(var n=e?this:this.parent();null!==n;){if(t(n))return!0;n=n.parent()}return!1},t.prototype.forEachImmediateDescendantWithValue=function(t){this.forEachChild(function(e){null!==e.getValue()?t(e):e.forEachImmediateDescendantWithValue(t)})},t.prototype.path=function(){return new j(null===this.parent_?this.name_:this.parent_.path()+"/"+this.name_)},t.prototype.name=function(){return this.name_},t.prototype.parent=function(){return this.parent_},t.prototype.updateParents_=function(){null!==this.parent_&&this.parent_.updateChild_(this.name_,this)},t.prototype.updateChild_=function(t,e){var n=e.isEmpty(),r=s.contains(this.node_.children,t);n&&r?(delete this.node_.children[t],this.node_.childCount--,this.updateParents_()):n||r||(this.node_.children[t]=e.node_,this.node_.childCount++,this.updateParents_())},t}();!function(t){t[t.RUN=0]="RUN",t[t.SENT=1]="SENT",t[t.COMPLETED=2]="COMPLETED",t[t.SENT_NEEDS_ABORT=3]="SENT_NEEDS_ABORT",t[t.NEEDS_ABORT=4]="NEEDS_ABORT"}(rn||(rn={})),Je.MAX_TRANSACTION_RETRIES_=25,Je.prototype.transactions_init_=function(){this.transactionQueueTree_=new an},Je.prototype.startTransaction=function(t,e,n,r){this.log_("transaction on "+t);var i=function(){},o=new nn(this,t);o.on("value",i);var a={path:t,update:e,onComplete:n,status:null,order:m(),applyLocally:r,retryCount:0,unwatcher:function(){o.off("value",i)},abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},u=this.getLatestState_(t);a.currentInputSnapshot=u;var c=a.update(u.val());if(void 0===c){if(a.unwatcher(),a.currentOutputSnapshotRaw=null,a.currentOutputSnapshotResolved=null,a.onComplete){var l=new Wt(a.currentInputSnapshot,new nn(this,a.path),Tt);a.onComplete(null,!1,l)}}else{et("transaction failed: Data returned ",c,a.path),a.status=rn.RUN;var h=this.transactionQueueTree_.subTree(t),f=h.getValue()||[];f.push(a),h.setValue(f);var p=void 0;if("object"===typeof c&&null!==c&&s.contains(c,".priority"))p=s.safeGet(c,".priority"),s.assert(Z(p),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.");else p=(this.serverSyncTree_.calcCompleteEventCache(t)||Ft.EMPTY_NODE).getPriority().val();p=p;var d=this.generateServerValues(),y=Bt(c,p),g=Zt(y,d);a.currentOutputSnapshotRaw=y,a.currentOutputSnapshotResolved=g,a.currentWriteId=this.getNextWriteId_();var v=this.serverSyncTree_.applyUserOverwrite(t,g,a.currentWriteId,a.applyLocally);this.eventQueue_.raiseEventsForChangedPath(t,v),this.sendReadyTransactions_()}},Je.prototype.getLatestState_=function(t,e){return this.serverSyncTree_.calcCompleteEventCache(t,e)||Ft.EMPTY_NODE},Je.prototype.sendReadyTransactions_=function(t){var e=this;if(void 0===t&&(t=this.transactionQueueTree_),t||this.pruneCompletedTransactionsBelowNode_(t),null!==t.getValue()){var n=this.buildTransactionQueue_(t);s.assert(n.length>0,"Sending zero length transaction queue"),n.every(function(t){return t.status===rn.RUN})&&this.sendTransactionQueue_(t.path(),n)}else t.hasChildren()&&t.forEachChild(function(t){e.sendReadyTransactions_(t)})},Je.prototype.sendTransactionQueue_=function(t,e){for(var n=this,r=e.map(function(t){return t.currentWriteId}),i=this.getLatestState_(t,r),o=i,a=i.hash(),u=0;u<e.length;u++){var c=e[u];s.assert(c.status===rn.RUN,"tryToSendTransactionQueue_: items in queue should all be run."),c.status=rn.SENT,c.retryCount++;var l=j.relativePath(t,c.path);o=o.updateChild(l,c.currentOutputSnapshotRaw)}var h=o.val(!0),f=t;this.server_.put(f.toString(),h,function(r){n.log_("transaction put response",{path:f.toString(),status:r});var i=[];if("ok"===r){for(var o=[],a=0;a<e.length;a++){if(e[a].status=rn.COMPLETED,i=i.concat(n.serverSyncTree_.ackUserWrite(e[a].currentWriteId)),e[a].onComplete){var s=e[a].currentOutputSnapshotResolved,u=new nn(n,e[a].path),c=new Wt(s,u,Tt);o.push(e[a].onComplete.bind(null,null,!0,c))}e[a].unwatcher()}n.pruneCompletedTransactionsBelowNode_(n.transactionQueueTree_.subTree(t)),n.sendReadyTransactions_(),n.eventQueue_.raiseEventsForChangedPath(t,i);for(a=0;a<o.length;a++)V(o[a])}else{if("datastale"===r)for(a=0;a<e.length;a++)e[a].status===rn.SENT_NEEDS_ABORT?e[a].status=rn.NEEDS_ABORT:e[a].status=rn.RUN;else{C("transaction at "+f.toString()+" failed: "+r);for(a=0;a<e.length;a++)e[a].status=rn.NEEDS_ABORT,e[a].abortReason=r}n.rerunTransactions_(t)}},a)},Je.prototype.rerunTransactions_=function(t){var e=this.getAncestorTransactionNode_(t),n=e.path(),r=this.buildTransactionQueue_(e);return this.rerunTransactionQueue_(r,n),n},Je.prototype.rerunTransactionQueue_=function(t,e){if(0!==t.length){for(var n,r=[],i=[],o=t.filter(function(t){return t.status===rn.RUN}).map(function(t){return t.currentWriteId}),a=0;a<t.length;a++){var u=t[a],c=j.relativePath(e,u.path),l=!1,h=void 0;if(s.assert(null!==c,"rerunTransactionsUnderNode_: relativePath should not be null."),u.status===rn.NEEDS_ABORT)l=!0,h=u.abortReason,i=i.concat(this.serverSyncTree_.ackUserWrite(u.currentWriteId,!0));else if(u.status===rn.RUN)if(u.retryCount>=Je.MAX_TRANSACTION_RETRIES_)l=!0,h="maxretry",i=i.concat(this.serverSyncTree_.ackUserWrite(u.currentWriteId,!0));else{var f=this.getLatestState_(u.path,o);u.currentInputSnapshot=f;var p=t[a].update(f.val());if(void 0!==p){et("transaction failed: Data returned ",p,u.path);var d=Bt(p);"object"===typeof p&&null!=p&&s.contains(p,".priority")||(d=d.updatePriority(f.getPriority()));var m=u.currentWriteId,y=this.generateServerValues(),g=Zt(d,y);u.currentOutputSnapshotRaw=d,u.currentOutputSnapshotResolved=g,u.currentWriteId=this.getNextWriteId_(),o.splice(o.indexOf(m),1),i=(i=i.concat(this.serverSyncTree_.applyUserOverwrite(u.path,g,u.currentWriteId,u.applyLocally))).concat(this.serverSyncTree_.ackUserWrite(m,!0))}else l=!0,h="nodata",i=i.concat(this.serverSyncTree_.ackUserWrite(u.currentWriteId,!0))}if(this.eventQueue_.raiseEventsForChangedPath(e,i),i=[],l&&(t[a].status=rn.COMPLETED,n=t[a].unwatcher,setTimeout(n,Math.floor(0)),t[a].onComplete))if("nodata"===h){var v=new nn(this,t[a].path),b=t[a].currentInputSnapshot,_=new Wt(b,v,Tt);r.push(t[a].onComplete.bind(null,null,!1,_))}else r.push(t[a].onComplete.bind(null,new Error(h),!1,null))}this.pruneCompletedTransactionsBelowNode_(this.transactionQueueTree_);for(a=0;a<r.length;a++)V(r[a]);this.sendReadyTransactions_()}},Je.prototype.getAncestorTransactionNode_=function(t){for(var e,n=this.transactionQueueTree_;null!==(e=t.getFront())&&null===n.getValue();)n=n.subTree(e),t=t.popFront();return n},Je.prototype.buildTransactionQueue_=function(t){var e=[];return this.aggregateTransactionQueuesForNode_(t,e),e.sort(function(t,e){return t.order-e.order}),e},Je.prototype.aggregateTransactionQueuesForNode_=function(t,e){var n=this,r=t.getValue();if(null!==r)for(var i=0;i<r.length;i++)e.push(r[i]);t.forEachChild(function(t){n.aggregateTransactionQueuesForNode_(t,e)})},Je.prototype.pruneCompletedTransactionsBelowNode_=function(t){var e=this,n=t.getValue();if(n){for(var r=0,i=0;i<n.length;i++)n[i].status!==rn.COMPLETED&&(n[r]=n[i],r++);n.length=r,t.setValue(n.length>0?n:null)}t.forEachChild(function(t){e.pruneCompletedTransactionsBelowNode_(t)})},Je.prototype.abortTransactions_=function(t){var e=this,n=this.getAncestorTransactionNode_(t).path(),r=this.transactionQueueTree_.subTree(t);return r.forEachAncestor(function(t){e.abortTransactionsOnNode_(t)}),this.abortTransactionsOnNode_(r),r.forEachDescendant(function(t){e.abortTransactionsOnNode_(t)}),n},Je.prototype.abortTransactionsOnNode_=function(t){var e=t.getValue();if(null!==e){for(var n=[],r=[],i=-1,o=0;o<e.length;o++)if(e[o].status===rn.SENT_NEEDS_ABORT);else if(e[o].status===rn.SENT)s.assert(i===o-1,"All SENT items should be at beginning of queue."),i=o,e[o].status=rn.SENT_NEEDS_ABORT,e[o].abortReason="set";else if(s.assert(e[o].status===rn.RUN,"Unexpected transaction status in abort"),e[o].unwatcher(),r=r.concat(this.serverSyncTree_.ackUserWrite(e[o].currentWriteId,!0)),e[o].onComplete){n.push(e[o].onComplete.bind(null,new Error("set"),!1,null))}-1===i?t.setValue(null):e.length=i+1,this.eventQueue_.raiseEventsForChangedPath(t.path(),r);for(o=0;o<n.length;o++)V(n[o])}};var sn,un=function(){function t(){this.repos_={},this.useRestClient_=!1}return t.getInstance=function(){return sn||(sn=new t),sn},t.prototype.interrupt=function(){for(var t in this.repos_)for(var e in this.repos_[t])this.repos_[t][e].interrupt()},t.prototype.resume=function(){for(var t in this.repos_)for(var e in this.repos_[t])this.repos_[t][e].resume()},t.prototype.databaseFromApp=function(t,e){var n=e||t.options.databaseURL;void 0===n&&T("Can't determine Firebase Database URL.  Be sure to include databaseURL option when calling firebase.initializeApp().");var r=K(n),i=r.repoInfo;return ut("Invalid Firebase Database URL",1,r),r.path.isEmpty()||T("Database URL must point to the root of a Firebase Database (not including a child path)."),this.createRepo(i,t).database},t.prototype.deleteRepo=function(t){var e=s.safeGet(this.repos_,t.app.name);e&&s.safeGet(e,t.repoInfo_.toURLString())===t||T("Database "+t.app.name+"("+t.repoInfo_+") has already been deleted."),t.interrupt(),delete e[t.repoInfo_.toURLString()]},t.prototype.createRepo=function(t,e){var n=s.safeGet(this.repos_,e.name);n||(n={},this.repos_[e.name]=n);var r=s.safeGet(n,t.toURLString());return r&&T("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),r=new Je(t,this.useRestClient_,e),n[t.toURLString()]=r,r},t.prototype.forceRestClient=function(t){this.useRestClient_=t},t}(),cn=function(){function t(t){this.repo_=t,t instanceof Je||T("Don't call new Database() directly - please use firebase.database()."),this.root_=new nn(t,j.Empty),this.INTERNAL=new ln(this)}return Object.defineProperty(t.prototype,"app",{get:function(){return this.repo_.app},enumerable:!0,configurable:!0}),t.prototype.ref=function(t){return this.checkDeleted_("ref"),s.validateArgCount("database.ref",0,1,arguments.length),t instanceof nn?this.refFromURL(t.toString()):void 0!==t?this.root_.child(t):this.root_},t.prototype.refFromURL=function(t){var e="database.refFromURL";this.checkDeleted_(e),s.validateArgCount(e,1,1,arguments.length);var n=K(t);ut(e,1,n);var r=n.repoInfo;return r.host!==this.repo_.repoInfo_.host&&T(e+": Host name does not match the current database: (found "+r.host+" but expected "+this.repo_.repoInfo_.host+")"),this.ref(n.path.toString())},t.prototype.checkDeleted_=function(t){null===this.repo_&&T("Cannot call "+t+" on a deleted database.")},t.prototype.goOffline=function(){s.validateArgCount("database.goOffline",0,0,arguments.length),this.checkDeleted_("goOffline"),this.repo_.interrupt()},t.prototype.goOnline=function(){s.validateArgCount("database.goOnline",0,0,arguments.length),this.checkDeleted_("goOnline"),this.repo_.resume()},t.ServerValue={TIMESTAMP:{".sv":"timestamp"}},t}(),ln=function(){function t(t){this.database=t}return t.prototype.delete=function(){return a.__awaiter(this,void 0,void 0,function(){return a.__generator(this,function(t){return this.database.checkDeleted_("delete"),un.getInstance().deleteRepo(this.database.repo_),this.database.repo_=null,this.database.root_=null,this.database.INTERNAL=null,this.database=null,[2]})})},t}(),hn=Object.freeze({forceLongPolling:function(){We.forceDisallow(),je.forceAllow()},forceWebSockets:function(){je.forceDisallow()},isWebSocketsAvailable:function(){return We.isAvailable()},setSecurityDebugCallback:function(t,e){t.repo.persistentConnection_.securityDebugCallback_=e},stats:function(t,e){t.repo.stats(e)},statsIncrementCounter:function(t,e){t.repo.statsIncrementCounter(e)},dataUpdateCount:function(t){return t.repo.dataUpdateCount},interceptServerData:function(t,e){return t.repo.interceptServerData_(e)}}),fn=Xe;Xe.prototype.simpleListen=function(t,e){this.sendRequest("q",{p:t},e)},Xe.prototype.echo=function(t,e){this.sendRequest("echo",{d:t},e)};var pn=He,dn=W,mn=Object.freeze({DataConnection:fn,RealTimeConnection:pn,hijackHash:function(t){var e=Xe.prototype.put;return Xe.prototype.put=function(n,r,i,o){void 0!==o&&(o=t()),e.call(this,n,r,i,o)},function(){Xe.prototype.put=e}},ConnectionTarget:dn,queryIdentifier:function(t){return t.queryIdentifier()},listens:function(t){return t.repo.persistentConnection_.listens_},forceRestClient:function(t){un.getInstance().forceRestClient(t)}}),yn=cn.ServerValue;function gn(e){var n=e.INTERNAL.registerService("database",function(t,e,n){return un.getInstance().databaseFromApp(t,n)},{Reference:nn,Query:Yt,Database:cn,DataSnapshot:Wt,enableLogging:_,INTERNAL:hn,ServerValue:yn,TEST_ACCESS:mn},null,!0);s.isNodeSdk()&&(t.exports=n)}gn(o),e.DataSnapshot=Wt,e.Database=cn,e.OnDisconnect=ct,e.Query=Yt,e.Reference=nn,e.ServerValue=yn,e.enableLogging=_,e.registerDatabase=gn}).call(this,n(56))},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r,i,o=(r=n(2))&&"object"===typeof r&&"default"in r?r.default:r,a=n(70),s=n(0),u=n(165),c=n(20),l=o.SDK_VERSION,h=new a.Logger("@firebase/firestore");function f(){return h.logLevel===a.LogLevel.DEBUG?i.DEBUG:h.logLevel===a.LogLevel.SILENT?i.SILENT:i.ERROR}function p(t){switch(t){case i.DEBUG:h.logLevel=a.LogLevel.DEBUG;break;case i.ERROR:h.logLevel=a.LogLevel.ERROR;break;case i.SILENT:h.logLevel=a.LogLevel.SILENT;break;default:h.error("Firestore ("+l+"): Invalid value passed to `setLogLevel`")}}function d(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];if(h.logLevel<=a.LogLevel.DEBUG){var i=n.map(y);h.debug.apply(h,["Firestore ("+l+") ["+t+"]: "+e].concat(i))}}function m(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(h.logLevel<=a.LogLevel.ERROR){var r=e.map(y);h.error.apply(h,["Firestore ("+l+"): "+t].concat(r))}}function y(t){if("string"===typeof t)return t;var e=b.getPlatform();try{return e.formatJSON(t)}catch(n){return t}}function g(t){var e="FIRESTORE ("+l+") INTERNAL ASSERTION FAILED: "+t;throw m(e),new Error(e)}function v(t,e){t||g(e)}!function(t){t[t.DEBUG=0]="DEBUG",t[t.ERROR=1]="ERROR",t[t.SILENT=2]="SILENT"}(i||(i={}));var b=function(){function t(){}return t.setPlatform=function(e){t.platform&&g("Platform already defined"),t.platform=e},t.getPlatform=function(){return t.platform||g("Platform not set"),t.platform},t}();function _(){return b.getPlatform().emptyByteString}var w={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},E=function(t){function e(e,n){var r=t.call(this,n)||this;return r.code=e,r.message=n,r.name="FirebaseError",r.toString=function(){return r.name+": [code="+r.code+"]: "+r.message},r}return s.__extends(e,t),e}(Error);function S(t,e){function n(){var t="This constructor is private.";throw e&&(t+=" ",t+=e),new E(w.INVALID_ARGUMENT,t)}for(var r in n.prototype=t.prototype,t)t.hasOwnProperty(r)&&(n[r]=t[r]);return n}function T(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function C(t,e){return void 0!==t?t:e}function k(t,e){for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){var r=Number(n);isNaN(r)||e(r,t[n])}}function x(t,e){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function I(t){for(var e in v(null!=t&&"object"===typeof t,"isEmpty() expects object parameter."),t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function A(t,e){if(0!==e.length)throw new E(w.INVALID_ARGUMENT,"Function "+t+"() does not support arguments, but was called with "+H(e.length,"argument")+".")}function P(t,e,n){if(e.length!==n)throw new E(w.INVALID_ARGUMENT,"Function "+t+"() requires "+H(n,"argument")+", but was called with "+H(e.length,"argument")+".")}function D(t,e,n){if(e.length<n)throw new E(w.INVALID_ARGUMENT,"Function "+t+"() requires at least "+H(n,"argument")+", but was called with "+H(e.length,"argument")+".")}function N(t,e,n,r){if(e.length<n||e.length>r)throw new E(w.INVALID_ARGUMENT,"Function "+t+"() requires between "+n+" and "+r+" arguments, but was called with "+H(e.length,"argument")+".")}function R(t,e,n,r){B(t,e,z(n)+" argument",r)}function O(t,e,n,r){void 0!==r&&R(t,e,n,r)}function M(t,e,n,r){B(t,e,n+" option",r)}function F(t,e,n,r){void 0!==r&&M(t,e,n,r)}function L(t,e,n,r,i){void 0!==r&&function(t,e,n,r,i){if(!(r instanceof Array))throw new E(w.INVALID_ARGUMENT,"Function "+t+"() requires its "+e+" option to be an array, but it was: "+j(r));for(var o=0;o<r.length;++o)if(!i(r[o]))throw new E(w.INVALID_ARGUMENT,"Function "+t+"() requires all "+e+" elements to be "+n+", but the value at index "+o+" was: "+j(r[o]))}(t,e,n,r,i)}function V(t,e,n,r,i){void 0!==r&&function(t,e,n,r,i){for(var o=[],a=0,s=i;a<s.length;a++){var u=s[a];if(u===r)return;o.push(j(u))}var c=j(r);throw new E(w.INVALID_ARGUMENT,"Invalid value "+c+" provided to function "+t+'() for option "'+n+'". Acceptable values: '+o.join(", "))}(t,0,n,r,i)}function B(t,e,n,r){if(!("object"===e?U(r):"non-empty string"===e?"string"===typeof r&&""!==r:typeof r===e)){var i=j(r);throw new E(w.INVALID_ARGUMENT,"Function "+t+"() requires its "+n+" to be of type "+e+", but it was: "+i)}}function U(t){return"object"===typeof t&&null!==t&&(Object.getPrototypeOf(t)===Object.prototype||null===Object.getPrototypeOf(t))}function j(t){if(void 0===t)return"undefined";if(null===t)return"null";if("string"===typeof t)return t.length>20&&(t=t.substring(0,20)+"..."),JSON.stringify(t);if("number"===typeof t||"boolean"===typeof t)return""+t;if("object"===typeof t){if(t instanceof Array)return"an array";var e=function(t){if(t.constructor){var e=/function\s+([^\s(]+)\s*\(/.exec(t.constructor.toString());if(e&&e.length>1)return e[1]}return null}(t);return e?"a custom "+e+" object":"an object"}return"function"===typeof t?"a function":g("Unknown wrong type: "+typeof t)}function q(t,e,n){if(void 0===n)throw new E(w.INVALID_ARGUMENT,"Function "+t+"() requires a valid "+z(e)+" argument, but it was undefined.")}function G(t,e,n){x(e,function(e,r){if(n.indexOf(e)<0)throw new E(w.INVALID_ARGUMENT,"Unknown option '"+e+"' passed to function "+t+"(). Available options: "+n.join(", "))})}function W(t,e,n,r){var i=j(r);return new E(w.INVALID_ARGUMENT,"Function "+t+"() requires its "+z(n)+" argument to be a "+e+", but it was: "+i)}function z(t){switch(t){case 1:return"first";case 2:return"second";case 3:return"third";default:return t+"th"}}function H(t,e){return t+" "+e+(1===t?"":"s")}var K=function(){function t(){}return t.newId=function(){for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e="",n=0;n<20;n++)e+=t.charAt(Math.floor(Math.random()*t.length));return v(20===e.length,"Invalid auto ID: "+e),e},t}();function Q(t,e){return t<e?-1:t>e?1:0}function Y(t,e){if(t.length!==e.length)return!1;for(var n=0;n<t.length;n++)if(!t[n].isEqual(e[n]))return!1;return!0}function X(t){return t+"\0"}function $(){if("undefined"===typeof Uint8Array)throw new E(w.UNIMPLEMENTED,"Uint8Arrays are not available in this environment.")}function J(){if(!b.getPlatform().base64Available)throw new E(w.UNIMPLEMENTED,"Blobs are unavailable in Firestore in this environment.")}var Z,tt,et=function(){function t(t){J(),this._binaryString=t}return t.fromBase64String=function(e){P("Blob.fromBase64String",arguments,1),R("Blob.fromBase64String","string",1,e),J();try{return new t(b.getPlatform().atob(e))}catch(n){throw new E(w.INVALID_ARGUMENT,"Failed to construct Blob from Base64 string: "+n)}},t.fromUint8Array=function(e){if(P("Blob.fromUint8Array",arguments,1),$(),!(e instanceof Uint8Array))throw W("Blob.fromUint8Array","Uint8Array",1,e);return new t(Array.prototype.map.call(e,function(t){return String.fromCharCode(t)}).join(""))},t.prototype.toBase64=function(){return P("Blob.toBase64",arguments,0),J(),b.getPlatform().btoa(this._binaryString)},t.prototype.toUint8Array=function(){P("Blob.toUint8Array",arguments,0),$();for(var t=new Uint8Array(this._binaryString.length),e=0;e<this._binaryString.length;e++)t[e]=this._binaryString.charCodeAt(e);return t},t.prototype.toString=function(){return"Blob(base64: "+this.toBase64()+")"},t.prototype.isEqual=function(t){return this._binaryString===t._binaryString},t.prototype._compareTo=function(t){return Q(this._binaryString,t._binaryString)},t}(),nt=S(et,"Use Blob.fromUint8Array() or Blob.fromBase64String() instead."),rt=function(){function t(t,e){if(P("GeoPoint",arguments,2),R("GeoPoint","number",1,t),R("GeoPoint","number",2,e),!isFinite(t)||t<-90||t>90)throw new E(w.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||e>180)throw new E(w.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this._lat=t,this._long=e}return Object.defineProperty(t.prototype,"latitude",{get:function(){return this._lat},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"longitude",{get:function(){return this._long},enumerable:!0,configurable:!0}),t.prototype.isEqual=function(t){return this._lat===t._lat&&this._long===t._long},t.prototype._compareTo=function(t){return Q(this._lat,t._lat)||Q(this._long,t._long)},t}(),it=function(){function t(t,e){if(this.seconds=t,this.nanoseconds=e,e<0)throw new E(w.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(e>=1e9)throw new E(w.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<-62135596800)throw new E(w.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new E(w.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}return t.now=function(){return t.fromMillis(Date.now())},t.fromDate=function(e){return t.fromMillis(e.getTime())},t.fromMillis=function(e){var n=Math.floor(e/1e3);return new t(n,1e6*(e-1e3*n))},t.prototype.toDate=function(){return new Date(this.toMillis())},t.prototype.toMillis=function(){return 1e3*this.seconds+this.nanoseconds/1e6},t.prototype._compareTo=function(t){return this.seconds===t.seconds?Q(this.nanoseconds,t.nanoseconds):Q(this.seconds,t.seconds)},t.prototype.isEqual=function(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds},t.prototype.toString=function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"},t}(),ot=function(){return function(t,e,n,r,i){this.databaseId=t,this.persistenceKey=e,this.host=n,this.ssl=r,this.forceLongPolling=i}}(),at="(default)",st=function(){function t(t,e){this.projectId=t,this.database=e||at}return Object.defineProperty(t.prototype,"isDefaultDatabase",{get:function(){return this.database===at},enumerable:!0,configurable:!0}),t.prototype.isEqual=function(e){return e instanceof t&&e.projectId===this.projectId&&e.database===this.database},t.prototype.compareTo=function(t){return Q(this.projectId,t.projectId)||Q(this.database,t.database)},t}(),ut=function(){function t(t,e,n){this.init(t,e,n)}return t.prototype.init=function(t,e,n){void 0===e?e=0:e>t.length&&g("offset "+e+" out of range "+t.length),void 0===n?n=t.length-e:n>t.length-e&&g("length "+n+" out of range "+(t.length-e)),this.segments=t,this.offset=e,this.len=n},t.prototype.construct=function(t,e,n){var r=Object.create(Object.getPrototypeOf(this));return r.init(t,e,n),r},Object.defineProperty(t.prototype,"length",{get:function(){return this.len},enumerable:!0,configurable:!0}),t.prototype.isEqual=function(e){return 0===t.comparator(this,e)},t.prototype.child=function(e){var n=this.segments.slice(this.offset,this.limit());return e instanceof t?e.forEach(function(t){n.push(t)}):"string"===typeof e?n.push(e):g("Unknown parameter type for Path.child(): "+e),this.construct(n)},t.prototype.limit=function(){return this.offset+this.length},t.prototype.popFirst=function(t){return t=void 0===t?1:t,v(this.length>=t,"Can't call popFirst() with less segments"),this.construct(this.segments,this.offset+t,this.length-t)},t.prototype.popLast=function(){return v(!this.isEmpty(),"Can't call popLast() on empty path"),this.construct(this.segments,this.offset,this.length-1)},t.prototype.firstSegment=function(){return v(!this.isEmpty(),"Can't call firstSegment() on empty path"),this.segments[this.offset]},t.prototype.lastSegment=function(){return this.get(this.length-1)},t.prototype.get=function(t){return v(t<this.length,"Index out of range"),this.segments[this.offset+t]},t.prototype.isEmpty=function(){return 0===this.length},t.prototype.isPrefixOf=function(t){if(t.length<this.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},t.prototype.isImmediateParentOf=function(t){if(this.length+1!==t.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},t.prototype.forEach=function(t){for(var e=this.offset,n=this.limit();e<n;e++)t(this.segments[e])},t.prototype.toArray=function(){return this.segments.slice(this.offset,this.limit())},t.comparator=function(t,e){for(var n=Math.min(t.length,e.length),r=0;r<n;r++){var i=t.get(r),o=e.get(r);if(i<o)return-1;if(i>o)return 1}return t.length<e.length?-1:t.length>e.length?1:0},t}(),ct=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return s.__extends(e,t),e.prototype.canonicalString=function(){return this.toArray().join("/")},e.prototype.toString=function(){return this.canonicalString()},e.fromString=function(t){if(t.indexOf("//")>=0)throw new E(w.INVALID_ARGUMENT,"Invalid path ("+t+"). Paths must not contain // in them.");return new e(t.split("/").filter(function(t){return t.length>0}))},e.EMPTY_PATH=new e([]),e}(ut),lt=/^[_a-zA-Z][_a-zA-Z0-9]*$/,ht=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return s.__extends(e,t),e.isValidIdentifier=function(t){return lt.test(t)},e.prototype.canonicalString=function(){return this.toArray().map(function(t){return t=t.replace("\\","\\\\").replace("`","\\`"),e.isValidIdentifier(t)||(t="`"+t+"`"),t}).join(".")},e.prototype.toString=function(){return this.canonicalString()},e.prototype.isKeyField=function(){return 1===this.length&&"__name__"===this.get(0)},e.keyField=function(){return new e(["__name__"])},e.fromServerFormat=function(t){for(var n=[],r="",i=0,o=function(){if(0===r.length)throw new E(w.INVALID_ARGUMENT,"Invalid field path ("+t+"). Paths must not be empty, begin with '.', end with '.', or contain '..'");n.push(r),r=""},a=!1;i<t.length;){var s=t[i];if("\\"===s){if(i+1===t.length)throw new E(w.INVALID_ARGUMENT,"Path has trailing escape character: "+t);var u=t[i+1];if("\\"!==u&&"."!==u&&"`"!==u)throw new E(w.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);r+=u,i+=2}else"`"===s?(a=!a,i++):"."!==s||a?(r+=s,i++):(o(),i++)}if(o(),a)throw new E(w.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new e(n)},e.EMPTY_PATH=new e([]),e}(ut),ft=function(){function t(e){this.path=e,v(t.isDocumentKey(e),"Invalid DocumentKey with an odd number of segments: "+e.toArray().join("/"))}return t.prototype.hasCollectionId=function(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t},t.prototype.isEqual=function(t){return null!==t&&0===ct.comparator(this.path,t.path)},t.prototype.toString=function(){return this.path.toString()},t.comparator=function(t,e){return ct.comparator(t.path,e.path)},t.isDocumentKey=function(t){return t.length%2===0},t.fromSegments=function(e){return new t(new ct(e.slice()))},t.fromPathString=function(e){return new t(ct.fromString(e))},t.EMPTY=new t(new ct([])),t}(),pt=function(){function t(t,e){this.key=t,this.version=e}return t.compareByKey=function(t,e){return ft.comparator(t.key,e.key)},t}(),dt=function(t){function e(e,n,r,i,o){var a=t.call(this,e,n)||this;return a.data=r,a.proto=o,a.hasLocalMutations=!!i.hasLocalMutations,a.hasCommittedMutations=!!i.hasCommittedMutations,a}return s.__extends(e,t),e.prototype.field=function(t){return this.data.field(t)},e.prototype.fieldValue=function(t){var e=this.field(t);return e?e.value():void 0},e.prototype.value=function(){return this.data.value()},e.prototype.isEqual=function(t){return t instanceof e&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.data.isEqual(t.data)&&this.hasLocalMutations===t.hasLocalMutations&&this.hasCommittedMutations===t.hasCommittedMutations},e.prototype.toString=function(){return"Document("+this.key+", "+this.version+", "+this.data.toString()+", {hasLocalMutations: "+this.hasLocalMutations+"}), {hasCommittedMutations: "+this.hasCommittedMutations+"})"},Object.defineProperty(e.prototype,"hasPendingWrites",{get:function(){return this.hasLocalMutations||this.hasCommittedMutations},enumerable:!0,configurable:!0}),e.compareByField=function(t,e,n){var r=e.field(t),i=n.field(t);return void 0!==r&&void 0!==i?r.compareTo(i):g("Trying to compare documents on fields that don't exist")},e}(pt),mt=function(t){function e(e,n,r){var i=t.call(this,e,n)||this;return i.hasCommittedMutations=!(!r||!r.hasCommittedMutations),i}return s.__extends(e,t),e.prototype.toString=function(){return"NoDocument("+this.key+", "+this.version+")"},Object.defineProperty(e.prototype,"hasPendingWrites",{get:function(){return this.hasCommittedMutations},enumerable:!0,configurable:!0}),e.prototype.isEqual=function(t){return t instanceof e&&t.hasCommittedMutations===this.hasCommittedMutations&&t.version.isEqual(this.version)&&t.key.isEqual(this.key)},e}(pt),yt=function(t){function e(e,n){return t.call(this,e,n)||this}return s.__extends(e,t),e.prototype.toString=function(){return"UnknownDocument("+this.key+", "+this.version+")"},Object.defineProperty(e.prototype,"hasPendingWrites",{get:function(){return!0},enumerable:!0,configurable:!0}),e.prototype.isEqual=function(t){return t instanceof e&&t.version.isEqual(this.version)&&t.key.isEqual(this.key)},e}(pt),gt=function(){function t(t,e){this.comparator=t,this.root=e||bt.EMPTY}return t.prototype.insert=function(e,n){return new t(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,bt.BLACK,null,null))},t.prototype.remove=function(e){return new t(this.comparator,this.root.remove(e,this.comparator).copy(null,null,bt.BLACK,null,null))},t.prototype.get=function(t){for(var e=this.root;!e.isEmpty();){var n=this.comparator(t,e.key);if(0===n)return e.value;n<0?e=e.left:n>0&&(e=e.right)}return null},t.prototype.indexOf=function(t){for(var e=0,n=this.root;!n.isEmpty();){var r=this.comparator(t,n.key);if(0===r)return e+n.left.size;r<0?n=n.left:(e+=n.left.size+1,n=n.right)}return-1},t.prototype.isEmpty=function(){return this.root.isEmpty()},Object.defineProperty(t.prototype,"size",{get:function(){return this.root.size},enumerable:!0,configurable:!0}),t.prototype.minKey=function(){return this.root.minKey()},t.prototype.maxKey=function(){return this.root.maxKey()},t.prototype.inorderTraversal=function(t){return this.root.inorderTraversal(t)},t.prototype.forEach=function(t){this.inorderTraversal(function(e,n){return t(e,n),!1})},t.prototype.toString=function(){var t=[];return this.inorderTraversal(function(e,n){return t.push(e+":"+n),!1}),"{"+t.join(", ")+"}"},t.prototype.reverseTraversal=function(t){return this.root.reverseTraversal(t)},t.prototype.getIterator=function(){return new vt(this.root,null,this.comparator,!1)},t.prototype.getIteratorFrom=function(t){return new vt(this.root,t,this.comparator,!1)},t.prototype.getReverseIterator=function(){return new vt(this.root,null,this.comparator,!0)},t.prototype.getReverseIteratorFrom=function(t){return new vt(this.root,t,this.comparator,!0)},t}(),vt=function(){function t(t,e,n,r){this.isReverse=r,this.nodeStack=[];for(var i=1;!t.isEmpty();)if(i=e?n(t.key,e):1,r&&(i*=-1),i<0)t=this.isReverse?t.left:t.right;else{if(0===i){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}return t.prototype.getNext=function(){v(this.nodeStack.length>0,"getNext() called on iterator when hasNext() is false.");var t=this.nodeStack.pop(),e={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return e},t.prototype.hasNext=function(){return this.nodeStack.length>0},t.prototype.peek=function(){if(0===this.nodeStack.length)return null;var t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}},t}(),bt=function(){function t(e,n,r,i,o){this.key=e,this.value=n,this.color=null!=r?r:t.RED,this.left=null!=i?i:t.EMPTY,this.right=null!=o?o:t.EMPTY,this.size=this.left.size+1+this.right.size}return t.prototype.copy=function(e,n,r,i,o){return new t(null!=e?e:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=o?o:this.right)},t.prototype.isEmpty=function(){return!1},t.prototype.inorderTraversal=function(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)},t.prototype.reverseTraversal=function(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)},t.prototype.min=function(){return this.left.isEmpty()?this:this.left.min()},t.prototype.minKey=function(){return this.min().key},t.prototype.maxKey=function(){return this.right.isEmpty()?this.key:this.right.maxKey()},t.prototype.insert=function(t,e,n){var r=this,i=n(t,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(t,e,n),null):0===i?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.insert(t,e,n))).fixUp()},t.prototype.removeMin=function(){if(this.left.isEmpty())return t.EMPTY;var e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),(e=e.copy(null,null,null,e.left.removeMin(),null)).fixUp()},t.prototype.remove=function(e,n){var r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===n(e,i.key)){if(i.right.isEmpty())return t.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()},t.prototype.isRed=function(){return this.color},t.prototype.fixUp=function(){var t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t},t.prototype.moveRedLeft=function(){var t=this.colorFlip();return t.right.left.isRed()&&(t=(t=(t=t.copy(null,null,null,null,t.right.rotateRight())).rotateLeft()).colorFlip()),t},t.prototype.moveRedRight=function(){var t=this.colorFlip();return t.left.left.isRed()&&(t=(t=t.rotateRight()).colorFlip()),t},t.prototype.rotateLeft=function(){var e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)},t.prototype.rotateRight=function(){var e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)},t.prototype.colorFlip=function(){var t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)},t.prototype.checkMaxDepth=function(){var t=this.check();return Math.pow(2,t)<=this.size+1},t.prototype.check=function(){if(this.isRed()&&this.left.isRed())throw g("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed())throw g("Right child of ("+this.key+","+this.value+") is red");var t=this.left.check();if(t!==this.right.check())throw g("Black depths differ");return t+(this.isRed()?0:1)},t.EMPTY=null,t.RED=!0,t.BLACK=!1,t}(),_t=function(){function t(){this.size=0}return t.prototype.copy=function(t,e,n,r,i){return this},t.prototype.insert=function(t,e,n){return new bt(t,e)},t.prototype.remove=function(t,e){return this},t.prototype.isEmpty=function(){return!0},t.prototype.inorderTraversal=function(t){return!1},t.prototype.reverseTraversal=function(t){return!1},t.prototype.minKey=function(){return null},t.prototype.maxKey=function(){return null},t.prototype.isRed=function(){return!1},t.prototype.checkMaxDepth=function(){return!0},t.prototype.check=function(){return 0},t}();bt.EMPTY=new _t,function(t){t[t.NullValue=0]="NullValue",t[t.BooleanValue=1]="BooleanValue",t[t.NumberValue=2]="NumberValue",t[t.TimestampValue=3]="TimestampValue",t[t.StringValue=4]="StringValue",t[t.BlobValue=5]="BlobValue",t[t.RefValue=6]="RefValue",t[t.GeoPointValue=7]="GeoPointValue",t[t.ArrayValue=8]="ArrayValue",t[t.ObjectValue=9]="ObjectValue"}(Z||(Z={})),function(t){t[t.Default=0]="Default",t[t.Estimate=1]="Estimate",t[t.Previous=2]="Previous"}(tt||(tt={}));var wt=function(){function t(t,e){this.serverTimestampBehavior=t,this.timestampsInSnapshots=e}return t.fromSnapshotOptions=function(e,n){switch(e.serverTimestamps){case"estimate":return new t(tt.Estimate,n);case"previous":return new t(tt.Previous,n);case"none":case void 0:return new t(tt.Default,n);default:return g("fromSnapshotOptions() called with invalid options.")}},t}(),Et=function(){function t(){}return t.prototype.toString=function(){var t=this.value();return null===t?"null":t.toString()},t.prototype.defaultCompareTo=function(t){return v(this.typeOrder!==t.typeOrder,"Default compareTo should not be used for values of same type."),Q(this.typeOrder,t.typeOrder)},t}(),St=function(t){function e(){var e=t.call(this)||this;return e.typeOrder=Z.NullValue,e.internalValue=null,e}return s.__extends(e,t),e.prototype.value=function(t){return null},e.prototype.isEqual=function(t){return t instanceof e},e.prototype.compareTo=function(t){return t instanceof e?0:this.defaultCompareTo(t)},e.INSTANCE=new e,e}(Et),Tt=function(t){function e(e){var n=t.call(this)||this;return n.internalValue=e,n.typeOrder=Z.BooleanValue,n}return s.__extends(e,t),e.prototype.value=function(t){return this.internalValue},e.prototype.isEqual=function(t){return t instanceof e&&this.internalValue===t.internalValue},e.prototype.compareTo=function(t){return t instanceof e?Q(this,t):this.defaultCompareTo(t)},e.of=function(t){return t?e.TRUE:e.FALSE},e.TRUE=new e(!0),e.FALSE=new e(!1),e}(Et),Ct=function(t){function e(e){var n=t.call(this)||this;return n.internalValue=e,n.typeOrder=Z.NumberValue,n}return s.__extends(e,t),e.prototype.value=function(t){return this.internalValue},e.prototype.compareTo=function(t){return t instanceof e?(n=this.internalValue,r=t.internalValue,n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1):this.defaultCompareTo(t);var n,r},e}(Et);function kt(t,e){return t===e?0!==t||1/t===1/e:t!==t&&e!==e}var xt=function(t){function e(e){return t.call(this,e)||this}return s.__extends(e,t),e.prototype.isEqual=function(t){return t instanceof e&&kt(this.internalValue,t.internalValue)},e}(Ct),It=function(t){function e(e){var n=t.call(this,e)||this;return n.internalValue=e,n}return s.__extends(e,t),e.prototype.isEqual=function(t){return t instanceof e&&kt(this.internalValue,t.internalValue)},e.NAN=new e(NaN),e.POSITIVE_INFINITY=new e(1/0),e.NEGATIVE_INFINITY=new e(-1/0),e}(Ct),At=function(t){function e(e){var n=t.call(this)||this;return n.internalValue=e,n.typeOrder=Z.StringValue,n}return s.__extends(e,t),e.prototype.value=function(t){return this.internalValue},e.prototype.isEqual=function(t){return t instanceof e&&this.internalValue===t.internalValue},e.prototype.compareTo=function(t){return t instanceof e?Q(this.internalValue,t.internalValue):this.defaultCompareTo(t)},e}(Et),Pt=function(t){function e(e){var n=t.call(this)||this;return n.internalValue=e,n.typeOrder=Z.TimestampValue,n}return s.__extends(e,t),e.prototype.value=function(t){return!t||t.timestampsInSnapshots?this.internalValue:this.internalValue.toDate()},e.prototype.isEqual=function(t){return t instanceof e&&this.internalValue.isEqual(t.internalValue)},e.prototype.compareTo=function(t){return t instanceof e?this.internalValue._compareTo(t.internalValue):t instanceof Dt?-1:this.defaultCompareTo(t)},e}(Et),Dt=function(t){function e(e,n){var r=t.call(this)||this;return r.localWriteTime=e,r.previousValue=n,r.typeOrder=Z.TimestampValue,r}return s.__extends(e,t),e.prototype.value=function(t){return t&&t.serverTimestampBehavior===tt.Estimate?new Pt(this.localWriteTime).value(t):t&&t.serverTimestampBehavior===tt.Previous&&this.previousValue?this.previousValue.value(t):null},e.prototype.isEqual=function(t){return t instanceof e&&this.localWriteTime.isEqual(t.localWriteTime)},e.prototype.compareTo=function(t){return t instanceof e?this.localWriteTime._compareTo(t.localWriteTime):t instanceof Pt?1:this.defaultCompareTo(t)},e.prototype.toString=function(){return"<ServerTimestamp localTime="+this.localWriteTime.toString()+">"},e}(Et),Nt=function(t){function e(e){var n=t.call(this)||this;return n.internalValue=e,n.typeOrder=Z.BlobValue,n}return s.__extends(e,t),e.prototype.value=function(t){return this.internalValue},e.prototype.isEqual=function(t){return t instanceof e&&this.internalValue.isEqual(t.internalValue)},e.prototype.compareTo=function(t){return t instanceof e?this.internalValue._compareTo(t.internalValue):this.defaultCompareTo(t)},e}(Et),Rt=function(t){function e(e,n){var r=t.call(this)||this;return r.databaseId=e,r.key=n,r.typeOrder=Z.RefValue,r}return s.__extends(e,t),e.prototype.value=function(t){return this.key},e.prototype.isEqual=function(t){return t instanceof e&&(this.key.isEqual(t.key)&&this.databaseId.isEqual(t.databaseId))},e.prototype.compareTo=function(t){if(t instanceof e){var n=this.databaseId.compareTo(t.databaseId);return 0!==n?n:ft.comparator(this.key,t.key)}return this.defaultCompareTo(t)},e}(Et),Ot=function(t){function e(e){var n=t.call(this)||this;return n.internalValue=e,n.typeOrder=Z.GeoPointValue,n}return s.__extends(e,t),e.prototype.value=function(t){return this.internalValue},e.prototype.isEqual=function(t){return t instanceof e&&this.internalValue.isEqual(t.internalValue)},e.prototype.compareTo=function(t){return t instanceof e?this.internalValue._compareTo(t.internalValue):this.defaultCompareTo(t)},e}(Et),Mt=function(t){function e(e){var n=t.call(this)||this;return n.internalValue=e,n.typeOrder=Z.ObjectValue,n}return s.__extends(e,t),e.prototype.value=function(t){var e={};return this.internalValue.inorderTraversal(function(n,r){e[n]=r.value(t)}),e},e.prototype.forEach=function(t){this.internalValue.inorderTraversal(t)},e.prototype.isEqual=function(t){if(t instanceof e){for(var n=this.internalValue.getIterator(),r=t.internalValue.getIterator();n.hasNext()&&r.hasNext();){var i=n.getNext(),o=r.getNext();if(i.key!==o.key||!i.value.isEqual(o.value))return!1}return!n.hasNext()&&!r.hasNext()}return!1},e.prototype.compareTo=function(t){if(t instanceof e){for(var n=this.internalValue.getIterator(),r=t.internalValue.getIterator();n.hasNext()&&r.hasNext();){var i=n.getNext(),o=r.getNext(),a=Q(i.key,o.key)||i.value.compareTo(o.value);if(a)return a}return Q(n.hasNext(),r.hasNext())}return this.defaultCompareTo(t)},e.prototype.set=function(t,n){if(v(!t.isEmpty(),"Cannot set field for empty path on ObjectValue"),1===t.length)return this.setChild(t.firstSegment(),n);var r=this.child(t.firstSegment());r instanceof e||(r=e.EMPTY);var i=r.set(t.popFirst(),n);return this.setChild(t.firstSegment(),i)},e.prototype.delete=function(t){if(v(!t.isEmpty(),"Cannot delete field for empty path on ObjectValue"),1===t.length)return new e(this.internalValue.remove(t.firstSegment()));var n=this.child(t.firstSegment());if(n instanceof e){var r=n.delete(t.popFirst());return new e(this.internalValue.insert(t.firstSegment(),r))}return this},e.prototype.contains=function(t){return void 0!==this.field(t)},e.prototype.field=function(t){v(!t.isEmpty(),"Can't get field of empty path");var n=this;return t.forEach(function(t){n=n instanceof e&&n.internalValue.get(t)||void 0}),n},e.prototype.toString=function(){return this.internalValue.toString()},e.prototype.child=function(t){return this.internalValue.get(t)||void 0},e.prototype.setChild=function(t,n){return new e(this.internalValue.insert(t,n))},e.EMPTY=new e(new gt(Q)),e}(Et),Ft=function(t){function e(e){var n=t.call(this)||this;return n.internalValue=e,n.typeOrder=Z.ArrayValue,n}return s.__extends(e,t),e.prototype.value=function(t){return this.internalValue.map(function(e){return e.value(t)})},e.prototype.forEach=function(t){this.internalValue.forEach(t)},e.prototype.isEqual=function(t){if(t instanceof e){if(this.internalValue.length!==t.internalValue.length)return!1;for(var n=0;n<this.internalValue.length;n++)if(!this.internalValue[n].isEqual(t.internalValue[n]))return!1;return!0}return!1},e.prototype.compareTo=function(t){if(t instanceof e){for(var n=Math.min(this.internalValue.length,t.internalValue.length),r=0;r<n;r++){var i=this.internalValue[r].compareTo(t.internalValue[r]);if(i)return i}return Q(this.internalValue.length,t.internalValue.length)}return this.defaultCompareTo(t)},e.prototype.toString=function(){return"["+this.internalValue.map(function(t){return t.toString()}).join(",")+"]"},e}(Et),Lt=Number,Vt=Lt.MIN_SAFE_INTEGER||-(Math.pow(2,53)-1),Bt=Lt.MAX_SAFE_INTEGER||Math.pow(2,53)-1,Ut=Lt.isInteger||function(t){return"number"===typeof t&&isFinite(t)&&Math.floor(t)===t};function jt(t){return null===t||void 0===t}function qt(t){return Ut(t)&&t<=Bt&&t>=Vt}var Gt,Wt=function(){function t(t,e,n,r,i,o,a){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===a&&(a=null),this.path=t,this.collectionGroup=e,this.explicitOrderBy=n,this.filters=r,this.limit=i,this.startAt=o,this.endAt=a,this.memoizedCanonicalId=null,this.memoizedOrderBy=null,this.startAt&&this.assertValidBound(this.startAt),this.endAt&&this.assertValidBound(this.endAt)}return t.atPath=function(e){return new t(e)},Object.defineProperty(t.prototype,"orderBy",{get:function(){if(null===this.memoizedOrderBy){var t=this.getInequalityFilterField(),e=this.getFirstOrderByField();if(null!==t&&null===e)t.isKeyField()?this.memoizedOrderBy=[Zt]:this.memoizedOrderBy=[new Jt(t),Zt];else{v(null===t||null!==e&&t.isEqual(e),"First orderBy should match inequality field."),this.memoizedOrderBy=[];for(var n=!1,r=0,i=this.explicitOrderBy;r<i.length;r++){var o=i[r];this.memoizedOrderBy.push(o),o.field.isKeyField()&&(n=!0)}if(!n){var a=this.explicitOrderBy.length>0?this.explicitOrderBy[this.explicitOrderBy.length-1].dir:Xt.ASCENDING;this.memoizedOrderBy.push(a===Xt.ASCENDING?Zt:te)}}}return this.memoizedOrderBy},enumerable:!0,configurable:!0}),t.prototype.addFilter=function(e){v(null==this.getInequalityFilterField()||!(e instanceof Kt)||!e.isInequality()||e.field.isEqual(this.getInequalityFilterField()),"Query must only have one inequality field."),v(!this.isDocumentQuery(),"No filtering allowed for document query");var n=this.filters.concat([e]);return new t(this.path,this.collectionGroup,this.explicitOrderBy.slice(),n,this.limit,this.startAt,this.endAt)},t.prototype.addOrderBy=function(e){v(!this.startAt&&!this.endAt,"Bounds must be set after orderBy");var n=this.explicitOrderBy.concat([e]);return new t(this.path,this.collectionGroup,n,this.filters.slice(),this.limit,this.startAt,this.endAt)},t.prototype.withLimit=function(e){return new t(this.path,this.collectionGroup,this.explicitOrderBy.slice(),this.filters.slice(),e,this.startAt,this.endAt)},t.prototype.withStartAt=function(e){return new t(this.path,this.collectionGroup,this.explicitOrderBy.slice(),this.filters.slice(),this.limit,e,this.endAt)},t.prototype.withEndAt=function(e){return new t(this.path,this.collectionGroup,this.explicitOrderBy.slice(),this.filters.slice(),this.limit,this.startAt,e)},t.prototype.asCollectionQueryAtPath=function(e){return new t(e,null,this.explicitOrderBy.slice(),this.filters.slice(),this.limit,this.startAt,this.endAt)},t.prototype.canonicalId=function(){if(null===this.memoizedCanonicalId){var t=this.path.canonicalString();this.isCollectionGroupQuery()&&(t+="|cg:"+this.collectionGroup),t+="|f:";for(var e=0,n=this.filters;e<n.length;e++){t+=n[e].canonicalId(),t+=","}t+="|ob:";for(var r=0,i=this.orderBy;r<i.length;r++){t+=i[r].canonicalId(),t+=","}jt(this.limit)||(t+="|l:",t+=this.limit),this.startAt&&(t+="|lb:",t+=this.startAt.canonicalId()),this.endAt&&(t+="|ub:",t+=this.endAt.canonicalId()),this.memoizedCanonicalId=t}return this.memoizedCanonicalId},t.prototype.toString=function(){var t="Query("+this.path.canonicalString();return this.isCollectionGroupQuery()&&(t+=" collectionGroup="+this.collectionGroup),this.filters.length>0&&(t+=", filters: ["+this.filters.join(", ")+"]"),jt(this.limit)||(t+=", limit: "+this.limit),this.explicitOrderBy.length>0&&(t+=", orderBy: ["+this.explicitOrderBy.join(", ")+"]"),this.startAt&&(t+=", startAt: "+this.startAt.canonicalId()),this.endAt&&(t+=", endAt: "+this.endAt.canonicalId()),t+")"},t.prototype.isEqual=function(t){if(this.limit!==t.limit)return!1;if(this.orderBy.length!==t.orderBy.length)return!1;for(var e=0;e<this.orderBy.length;e++)if(!this.orderBy[e].isEqual(t.orderBy[e]))return!1;if(this.filters.length!==t.filters.length)return!1;for(e=0;e<this.filters.length;e++)if(!this.filters[e].isEqual(t.filters[e]))return!1;return this.collectionGroup===t.collectionGroup&&(!!this.path.isEqual(t.path)&&(!(null!==this.startAt?!this.startAt.isEqual(t.startAt):null!==t.startAt)&&(null!==this.endAt?this.endAt.isEqual(t.endAt):null===t.endAt)))},t.prototype.docComparator=function(t,e){for(var n=!1,r=0,i=this.orderBy;r<i.length;r++){var o=i[r],a=o.compare(t,e);if(0!==a)return a;n=n||o.field.isKeyField()}return v(n,"orderBy used that doesn't compare on key field"),0},t.prototype.matches=function(t){return this.matchesPathAndCollectionGroup(t)&&this.matchesOrderBy(t)&&this.matchesFilters(t)&&this.matchesBounds(t)},t.prototype.hasLimit=function(){return!jt(this.limit)},t.prototype.getFirstOrderByField=function(){return this.explicitOrderBy.length>0?this.explicitOrderBy[0].field:null},t.prototype.getInequalityFilterField=function(){for(var t=0,e=this.filters;t<e.length;t++){var n=e[t];if(n instanceof Kt&&n.isInequality())return n.field}return null},t.prototype.hasArrayContainsFilter=function(){return void 0!==this.filters.find(function(t){return t instanceof Kt&&t.op===Ht.ARRAY_CONTAINS})},t.prototype.isDocumentQuery=function(){return ft.isDocumentKey(this.path)&&null===this.collectionGroup&&0===this.filters.length},t.prototype.isCollectionGroupQuery=function(){return null!==this.collectionGroup},t.prototype.matchesPathAndCollectionGroup=function(t){var e=t.key.path;return null!==this.collectionGroup?t.key.hasCollectionId(this.collectionGroup)&&this.path.isPrefixOf(e):ft.isDocumentKey(this.path)?this.path.isEqual(e):this.path.isImmediateParentOf(e)},t.prototype.matchesOrderBy=function(t){for(var e=0,n=this.explicitOrderBy;e<n.length;e++){var r=n[e];if(!r.field.isKeyField()&&void 0===t.field(r.field))return!1}return!0},t.prototype.matchesFilters=function(t){for(var e=0,n=this.filters;e<n.length;e++){if(!n[e].matches(t))return!1}return!0},t.prototype.matchesBounds=function(t){return!(this.startAt&&!this.startAt.sortsBeforeDocument(this.orderBy,t))&&(!this.endAt||!this.endAt.sortsBeforeDocument(this.orderBy,t))},t.prototype.assertValidBound=function(t){v(t.position.length<=this.orderBy.length,"Bound is longer than orderBy")},t}(),zt=function(){function t(){}return t.create=function(t,e,n){if(n.isEqual(St.INSTANCE)){if(e!==Ht.EQUAL)throw new E(w.INVALID_ARGUMENT,"Invalid query. You can only perform equals comparisons on null.");return new Qt(t)}if(n.isEqual(It.NAN)){if(e!==Ht.EQUAL)throw new E(w.INVALID_ARGUMENT,"Invalid query. You can only perform equals comparisons on NaN.");return new Yt(t)}return new Kt(t,e,n)},t}(),Ht=function(){function t(t){this.name=t}return t.fromString=function(e){switch(e){case"<":return t.LESS_THAN;case"<=":return t.LESS_THAN_OR_EQUAL;case"==":return t.EQUAL;case">=":return t.GREATER_THAN_OR_EQUAL;case">":return t.GREATER_THAN;case"array-contains":return t.ARRAY_CONTAINS;default:return g("Unknown relation: "+e)}},t.prototype.toString=function(){return this.name},t.prototype.isEqual=function(t){return this.name===t.name},t.LESS_THAN=new t("<"),t.LESS_THAN_OR_EQUAL=new t("<="),t.EQUAL=new t("=="),t.GREATER_THAN=new t(">"),t.GREATER_THAN_OR_EQUAL=new t(">="),t.ARRAY_CONTAINS=new t("array-contains"),t}(),Kt=function(t){function e(e,n,r){var i=t.call(this)||this;return i.field=e,i.op=n,i.value=r,i}return s.__extends(e,t),e.prototype.matches=function(t){if(this.field.isKeyField()){v(this.value instanceof Rt,"Comparing on key, but filter value not a RefValue"),v(this.op!==Ht.ARRAY_CONTAINS,"array-contains queries don't make sense on document keys.");var e=this.value,n=ft.comparator(t.key,e.key);return this.matchesComparison(n)}var r=t.field(this.field);return void 0!==r&&this.matchesValue(r)},e.prototype.matchesValue=function(t){var e=this;return this.op===Ht.ARRAY_CONTAINS?t instanceof Ft&&void 0!==t.internalValue.find(function(t){return t.isEqual(e.value)}):this.value.typeOrder===t.typeOrder&&this.matchesComparison(t.compareTo(this.value))},e.prototype.matchesComparison=function(t){switch(this.op){case Ht.LESS_THAN:return t<0;case Ht.LESS_THAN_OR_EQUAL:return t<=0;case Ht.EQUAL:return 0===t;case Ht.GREATER_THAN:return t>0;case Ht.GREATER_THAN_OR_EQUAL:return t>=0;default:return g("Unknown relation op"+this.op)}},e.prototype.isInequality=function(){return this.op!==Ht.EQUAL&&this.op!==Ht.ARRAY_CONTAINS},e.prototype.canonicalId=function(){return this.field.canonicalString()+this.op.toString()+this.value.toString()},e.prototype.isEqual=function(t){return t instanceof e&&(this.op.isEqual(t.op)&&this.field.isEqual(t.field)&&this.value.isEqual(t.value))},e.prototype.toString=function(){return this.field.canonicalString()+" "+this.op+" "+this.value.value()},e}(zt),Qt=function(t){function e(e){var n=t.call(this)||this;return n.field=e,n}return s.__extends(e,t),e.prototype.matches=function(t){var e=t.field(this.field);return void 0!==e&&null===e.value()},e.prototype.canonicalId=function(){return this.field.canonicalString()+" IS null"},e.prototype.toString=function(){return this.field.canonicalString()+" IS null"},e.prototype.isEqual=function(t){return t instanceof e&&this.field.isEqual(t.field)},e}(zt),Yt=function(t){function e(e){var n=t.call(this)||this;return n.field=e,n}return s.__extends(e,t),e.prototype.matches=function(t){var e=t.field(this.field),n=e&&e.value();return"number"===typeof n&&isNaN(n)},e.prototype.canonicalId=function(){return this.field.canonicalString()+" IS NaN"},e.prototype.toString=function(){return this.field.canonicalString()+" IS NaN"},e.prototype.isEqual=function(t){return t instanceof e&&this.field.isEqual(t.field)},e}(zt),Xt=function(){function t(t){this.name=t}return t.prototype.toString=function(){return this.name},t.ASCENDING=new t("asc"),t.DESCENDING=new t("desc"),t}(),$t=function(){function t(t,e){this.position=t,this.before=e}return t.prototype.canonicalId=function(){for(var t=this.before?"b:":"a:",e=0,n=this.position;e<n.length;e++){t+=n[e].toString()}return t},t.prototype.sortsBeforeDocument=function(t,e){v(this.position.length<=t.length,"Bound has more components than query's orderBy");for(var n=0,r=0;r<this.position.length;r++){var i=t[r],o=this.position[r];if(i.field.isKeyField())v(o instanceof Rt,"Bound has a non-key value where the key path is being used."),n=ft.comparator(o.key,e.key);else{var a=e.field(i.field);v(void 0!==a,"Field should exist since document matched the orderBy already."),n=o.compareTo(a)}if(i.dir===Xt.DESCENDING&&(n*=-1),0!==n)break}return this.before?n<=0:n<0},t.prototype.isEqual=function(t){if(null===t)return!1;if(this.before!==t.before||this.position.length!==t.position.length)return!1;for(var e=0;e<this.position.length;e++){var n=this.position[e],r=t.position[e];return n.isEqual(r)}return!0},t}(),Jt=function(){function t(t,e){this.field=t,void 0===e&&(e=Xt.ASCENDING),this.dir=e,this.isKeyOrderBy=t.isKeyField()}return t.prototype.compare=function(t,e){var n=this.isKeyOrderBy?dt.compareByKey(t,e):dt.compareByField(this.field,t,e);switch(this.dir){case Xt.ASCENDING:return n;case Xt.DESCENDING:return-1*n;default:return g("Unknown direction: "+this.dir)}},t.prototype.canonicalId=function(){return this.field.canonicalString()+this.dir.toString()},t.prototype.toString=function(){return this.field.canonicalString()+" ("+this.dir+")"},t.prototype.isEqual=function(t){return this.dir===t.dir&&this.field.isEqual(t.field)},t}(),Zt=new Jt(ht.keyField(),Xt.ASCENDING),te=new Jt(ht.keyField(),Xt.DESCENDING),ee=function(){function t(t){this.timestamp=t}return t.fromMicroseconds=function(e){var n=Math.floor(e/1e6);return new t(new it(n,e%1e6*1e3))},t.fromTimestamp=function(e){return new t(e)},t.forDeletedDoc=function(){return t.MIN},t.prototype.compareTo=function(t){return this.timestamp._compareTo(t.timestamp)},t.prototype.isEqual=function(t){return this.timestamp.isEqual(t.timestamp)},t.prototype.toMicroseconds=function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3},t.prototype.toString=function(){return"SnapshotVersion("+this.timestamp.toString()+")"},t.prototype.toTimestamp=function(){return this.timestamp},t.MIN=new t(new it(0,0)),t}();!function(t){t[t.Listen=0]="Listen",t[t.ExistenceFilterMismatch=1]="ExistenceFilterMismatch",t[t.LimboResolution=2]="LimboResolution"}(Gt||(Gt={}));var ne,re=function(){function t(t,e,n,r,i,o){void 0===i&&(i=ee.MIN),void 0===o&&(o=_()),this.query=t,this.targetId=e,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=i,this.resumeToken=o}return t.prototype.copy=function(e){return new t(this.query,this.targetId,this.purpose,void 0===e.sequenceNumber?this.sequenceNumber:e.sequenceNumber,void 0===e.snapshotVersion?this.snapshotVersion:e.snapshotVersion,void 0===e.resumeToken?this.resumeToken:e.resumeToken)},t.prototype.isEqual=function(t){return this.targetId===t.targetId&&this.purpose===t.purpose&&this.sequenceNumber===t.sequenceNumber&&this.snapshotVersion.isEqual(t.snapshotVersion)&&this.resumeToken===t.resumeToken&&this.query.isEqual(t.query)},t}(),ie=function(){function t(t){this.comparator=t,this.data=new gt(this.comparator)}return t.fromMapKeys=function(e){var n=new t(e.comparator);return e.forEach(function(t){n=n.add(t)}),n},t.prototype.has=function(t){return null!==this.data.get(t)},t.prototype.first=function(){return this.data.minKey()},t.prototype.last=function(){return this.data.maxKey()},Object.defineProperty(t.prototype,"size",{get:function(){return this.data.size},enumerable:!0,configurable:!0}),t.prototype.indexOf=function(t){return this.data.indexOf(t)},t.prototype.forEach=function(t){this.data.inorderTraversal(function(e,n){return t(e),!1})},t.prototype.forEachInRange=function(t,e){for(var n=this.data.getIteratorFrom(t[0]);n.hasNext();){var r=n.getNext();if(this.comparator(r.key,t[1])>=0)return;e(r.key)}},t.prototype.forEachWhile=function(t,e){var n;for(n=void 0!==e?this.data.getIteratorFrom(e):this.data.getIterator();n.hasNext();){if(!t(n.getNext().key))return}},t.prototype.firstAfterOrEqual=function(t){var e=this.data.getIteratorFrom(t);return e.hasNext()?e.getNext().key:null},t.prototype.getIterator=function(){return new oe(this.data.getIterator())},t.prototype.getIteratorFrom=function(t){return new oe(this.data.getIteratorFrom(t))},t.prototype.add=function(t){return this.copy(this.data.remove(t).insert(t,!0))},t.prototype.delete=function(t){return this.has(t)?this.copy(this.data.remove(t)):this},t.prototype.isEmpty=function(){return this.data.isEmpty()},t.prototype.unionWith=function(t){var e=this;return t.forEach(function(t){e=e.add(t)}),e},t.prototype.isEqual=function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;for(var n=this.data.getIterator(),r=e.data.getIterator();n.hasNext();){var i=n.getNext().key,o=r.getNext().key;if(0!==this.comparator(i,o))return!1}return!0},t.prototype.toArray=function(){var t=[];return this.forEach(function(e){t.push(e)}),t},t.prototype.toString=function(){var t=[];return this.forEach(function(e){return t.push(e)}),"SortedSet("+t.toString()+")"},t.prototype.copy=function(e){var n=new t(this.comparator);return n.data=e,n},t}(),oe=function(){function t(t){this.iter=t}return t.prototype.getNext=function(){return this.iter.getNext().key},t.prototype.hasNext=function(){return this.iter.hasNext()},t}(),ae=function(){function t(t){this.fields=t}return t.fromSet=function(e){return new t(e)},t.fromArray=function(e){var n=new ie(ht.comparator);return e.forEach(function(t){return n=n.add(t)}),new t(n)},t.prototype.covers=function(t){var e=!1;return this.fields.forEach(function(n){n.isPrefixOf(t)&&(e=!0)}),e},t.prototype.applyTo=function(t){var e=Mt.EMPTY;return this.fields.forEach(function(n){if(n.isEmpty())return t;var r=t.field(n);void 0!==r&&(e=e.set(n,r))}),e},t.prototype.isEqual=function(t){return this.fields.isEqual(t.fields)},t}(),se=function(){function t(t,e){this.field=t,this.transform=e}return Object.defineProperty(t.prototype,"isIdempotent",{get:function(){return this.transform.isIdempotent},enumerable:!0,configurable:!0}),t.prototype.isEqual=function(t){return this.field.isEqual(t.field)&&this.transform.isEqual(t.transform)},t}(),ue=function(){return function(t,e){this.version=t,this.transformResults=e}}();!function(t){t[t.Set=0]="Set",t[t.Patch=1]="Patch",t[t.Transform=2]="Transform",t[t.Delete=3]="Delete"}(ne||(ne={}));var ce=function(){function t(t,e){this.updateTime=t,this.exists=e,v(void 0===t||void 0===e,'Precondition can specify "exists" or "updateTime" but not both')}return t.exists=function(e){return new t(void 0,e)},t.updateTime=function(e){return new t(e)},Object.defineProperty(t.prototype,"isNone",{get:function(){return void 0===this.updateTime&&void 0===this.exists},enumerable:!0,configurable:!0}),t.prototype.isValidFor=function(t){return void 0!==this.updateTime?t instanceof dt&&t.version.isEqual(this.updateTime):void 0!==this.exists?this.exists===t instanceof dt:(v(this.isNone,"Precondition should be empty"),!0)},t.prototype.isEqual=function(t){return e=this.updateTime,n=t.updateTime,(null!==e&&void 0!==e?!(!n||!e.isEqual(n)):e===n)&&this.exists===t.exists;var e,n},t.NONE=new t,t}(),le=function(){function t(){}return t.prototype.verifyKeyMatches=function(t){null!=t&&v(t.key.isEqual(this.key),"Can only apply a mutation to a document with the same key")},t.getPostMutationVersion=function(t){return t instanceof dt?t.version:ee.MIN},t}(),he=function(t){function e(e,n,r){var i=t.call(this)||this;return i.key=e,i.value=n,i.precondition=r,i.type=ne.Set,i}return s.__extends(e,t),e.prototype.applyToRemoteDocument=function(t,e){this.verifyKeyMatches(t),v(null==e.transformResults,"Transform results received by SetMutation.");var n=e.version;return new dt(this.key,n,this.value,{hasCommittedMutations:!0})},e.prototype.applyToLocalView=function(t,e,n){if(this.verifyKeyMatches(t),!this.precondition.isValidFor(t))return t;var r=le.getPostMutationVersion(t);return new dt(this.key,r,this.value,{hasLocalMutations:!0})},Object.defineProperty(e.prototype,"isIdempotent",{get:function(){return!0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"fieldMask",{get:function(){return null},enumerable:!0,configurable:!0}),e.prototype.isEqual=function(t){return t instanceof e&&this.key.isEqual(t.key)&&this.value.isEqual(t.value)&&this.precondition.isEqual(t.precondition)},e}(le),fe=function(t){function e(e,n,r,i){var o=t.call(this)||this;return o.key=e,o.data=n,o.fieldMask=r,o.precondition=i,o.type=ne.Patch,o}return s.__extends(e,t),e.prototype.applyToRemoteDocument=function(t,e){if(this.verifyKeyMatches(t),v(null==e.transformResults,"Transform results received by PatchMutation."),!this.precondition.isValidFor(t))return new yt(this.key,e.version);var n=this.patchDocument(t);return new dt(this.key,e.version,n,{hasCommittedMutations:!0})},e.prototype.applyToLocalView=function(t,e,n){if(this.verifyKeyMatches(t),!this.precondition.isValidFor(t))return t;var r=le.getPostMutationVersion(t),i=this.patchDocument(t);return new dt(this.key,r,i,{hasLocalMutations:!0})},Object.defineProperty(e.prototype,"isIdempotent",{get:function(){return!0},enumerable:!0,configurable:!0}),e.prototype.isEqual=function(t){return t instanceof e&&this.key.isEqual(t.key)&&this.fieldMask.isEqual(t.fieldMask)&&this.precondition.isEqual(t.precondition)},e.prototype.patchDocument=function(t){var e;return e=t instanceof dt?t.data:Mt.EMPTY,this.patchObject(e)},e.prototype.patchObject=function(t){var e=this;return this.fieldMask.fields.forEach(function(n){if(!n.isEmpty()){var r=e.data.field(n);t=void 0!==r?t.set(n,r):t.delete(n)}}),t},e}(le),pe=function(t){function e(e,n){var r=t.call(this)||this;return r.key=e,r.fieldTransforms=n,r.type=ne.Transform,r.precondition=ce.exists(!0),r}return s.__extends(e,t),e.prototype.applyToRemoteDocument=function(t,e){if(this.verifyKeyMatches(t),v(null!=e.transformResults,"Transform results missing for TransformMutation."),!this.precondition.isValidFor(t))return new yt(this.key,e.version);var n=this.requireDocument(t),r=this.serverTransformResults(t,e.transformResults),i=e.version,o=this.transformObject(n.data,r);return new dt(this.key,i,o,{hasCommittedMutations:!0})},e.prototype.applyToLocalView=function(t,e,n){if(this.verifyKeyMatches(t),!this.precondition.isValidFor(t))return t;var r=this.requireDocument(t),i=this.localTransformResults(n,e),o=this.transformObject(r.data,i);return new dt(this.key,r.version,o,{hasLocalMutations:!0})},Object.defineProperty(e.prototype,"isIdempotent",{get:function(){for(var t=0,e=this.fieldTransforms;t<e.length;t++){if(!e[t].isIdempotent)return!1}return!0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"fieldMask",{get:function(){var t=new ie(ht.comparator);return this.fieldTransforms.forEach(function(e){return t=t.add(e.field)}),new ae(t)},enumerable:!0,configurable:!0}),e.prototype.isEqual=function(t){return t instanceof e&&this.key.isEqual(t.key)&&Y(this.fieldTransforms,t.fieldTransforms)&&this.precondition.isEqual(t.precondition)},e.prototype.requireDocument=function(t){v(t instanceof dt,"Unknown MaybeDocument type "+t);var e=t;return v(e.key.isEqual(this.key),"Can only transform a document with the same key"),e},e.prototype.serverTransformResults=function(t,e){var n=[];v(this.fieldTransforms.length===e.length,"server transform result count ("+e.length+") should match field transform count ("+this.fieldTransforms.length+")");for(var r=0;r<e.length;r++){var i=this.fieldTransforms[r],o=i.transform,a=null;t instanceof dt&&(a=t.field(i.field)||null),n.push(o.applyToRemoteDocument(a,e[r]))}return n},e.prototype.localTransformResults=function(t,e){for(var n=[],r=0,i=this.fieldTransforms;r<i.length;r++){var o=i[r],a=o.transform,s=null;e instanceof dt&&(s=e.field(o.field)||null),n.push(a.applyToLocalView(s,t))}return n},e.prototype.transformObject=function(t,e){v(e.length===this.fieldTransforms.length,"TransformResults length mismatch.");for(var n=0;n<this.fieldTransforms.length;n++){var r=this.fieldTransforms[n].field;t=t.set(r,e[n])}return t},e}(le),de=function(t){function e(e,n){var r=t.call(this)||this;return r.key=e,r.precondition=n,r.type=ne.Delete,r}return s.__extends(e,t),e.prototype.applyToRemoteDocument=function(t,e){return this.verifyKeyMatches(t),v(null==e.transformResults,"Transform results received by DeleteMutation."),new mt(this.key,e.version,{hasCommittedMutations:!0})},e.prototype.applyToLocalView=function(t,e,n){return this.verifyKeyMatches(t),this.precondition.isValidFor(t)?(t&&v(t.key.isEqual(this.key),"Can only apply mutation to document with same key"),new mt(this.key,ee.forDeletedDoc())):t},e.prototype.isEqual=function(t){return t instanceof e&&this.key.isEqual(t.key)&&this.precondition.isEqual(t.precondition)},Object.defineProperty(e.prototype,"isIdempotent",{get:function(){return!0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"fieldMask",{get:function(){return null},enumerable:!0,configurable:!0}),e}(le),me=function(){function t(){this.isIdempotent=!0}return t.prototype.applyToLocalView=function(t,e){return new Dt(e,t)},t.prototype.applyToRemoteDocument=function(t,e){return e},t.prototype.isEqual=function(e){return e instanceof t},t.instance=new t,t}(),ye=function(){function t(t){this.elements=t,this.isIdempotent=!0}return t.prototype.applyToLocalView=function(t,e){return this.apply(t)},t.prototype.applyToRemoteDocument=function(t,e){return this.apply(t)},t.prototype.apply=function(t){for(var e=be(t),n=function(t){e.find(function(e){return e.isEqual(t)})||e.push(t)},r=0,i=this.elements;r<i.length;r++){n(i[r])}return new Ft(e)},t.prototype.isEqual=function(e){return e instanceof t&&Y(e.elements,this.elements)},t}(),ge=function(){function t(t){this.elements=t,this.isIdempotent=!0}return t.prototype.applyToLocalView=function(t,e){return this.apply(t)},t.prototype.applyToRemoteDocument=function(t,e){return this.apply(t)},t.prototype.apply=function(t){for(var e=be(t),n=function(t){e=e.filter(function(e){return!e.isEqual(t)})},r=0,i=this.elements;r<i.length;r++){n(i[r])}return new Ft(e)},t.prototype.isEqual=function(e){return e instanceof t&&Y(e.elements,this.elements)},t}(),ve=function(){function t(t){this.operand=t,this.isIdempotent=!1}return t.prototype.applyToLocalView=function(t,e){if(t instanceof xt&&this.operand instanceof xt){var n=t.internalValue+this.operand.internalValue;return new xt(n)}if(t instanceof Ct){n=t.internalValue+this.operand.internalValue;return new It(n)}return this.operand},t.prototype.applyToRemoteDocument=function(t,e){return v(null!==e,"Didn't receive transformResult for NUMERIC_ADD transform"),e},t.prototype.isEqual=function(e){return e instanceof t&&this.operand.isEqual(e.operand)},t}();function be(t){return t instanceof Ft?t.internalValue.slice():[]}var _e,we=function(){function t(t){this.count=t}return t.prototype.isEqual=function(t){return t&&t.count===this.count},t}();function Ee(t){switch(t){case w.OK:return g("Treated status OK as error");case w.CANCELLED:case w.UNKNOWN:case w.DEADLINE_EXCEEDED:case w.RESOURCE_EXHAUSTED:case w.INTERNAL:case w.UNAVAILABLE:case w.UNAUTHENTICATED:return!1;case w.INVALID_ARGUMENT:case w.NOT_FOUND:case w.ALREADY_EXISTS:case w.PERMISSION_DENIED:case w.FAILED_PRECONDITION:case w.ABORTED:case w.OUT_OF_RANGE:case w.UNIMPLEMENTED:case w.DATA_LOSS:return!0;default:return g("Unknown status code: "+t)}}function Se(t){if(void 0===t)return m("GRPC error has no .code"),w.UNKNOWN;switch(t){case _e.OK:return w.OK;case _e.CANCELLED:return w.CANCELLED;case _e.UNKNOWN:return w.UNKNOWN;case _e.DEADLINE_EXCEEDED:return w.DEADLINE_EXCEEDED;case _e.RESOURCE_EXHAUSTED:return w.RESOURCE_EXHAUSTED;case _e.INTERNAL:return w.INTERNAL;case _e.UNAVAILABLE:return w.UNAVAILABLE;case _e.UNAUTHENTICATED:return w.UNAUTHENTICATED;case _e.INVALID_ARGUMENT:return w.INVALID_ARGUMENT;case _e.NOT_FOUND:return w.NOT_FOUND;case _e.ALREADY_EXISTS:return w.ALREADY_EXISTS;case _e.PERMISSION_DENIED:return w.PERMISSION_DENIED;case _e.FAILED_PRECONDITION:return w.FAILED_PRECONDITION;case _e.ABORTED:return w.ABORTED;case _e.OUT_OF_RANGE:return w.OUT_OF_RANGE;case _e.UNIMPLEMENTED:return w.UNIMPLEMENTED;case _e.DATA_LOSS:return w.DATA_LOSS;default:return g("Unknown status code: "+t)}}function Te(t){if(void 0===t)return _e.OK;switch(t){case w.OK:return _e.OK;case w.CANCELLED:return _e.CANCELLED;case w.UNKNOWN:return _e.UNKNOWN;case w.DEADLINE_EXCEEDED:return _e.DEADLINE_EXCEEDED;case w.RESOURCE_EXHAUSTED:return _e.RESOURCE_EXHAUSTED;case w.INTERNAL:return _e.INTERNAL;case w.UNAVAILABLE:return _e.UNAVAILABLE;case w.UNAUTHENTICATED:return _e.UNAUTHENTICATED;case w.INVALID_ARGUMENT:return _e.INVALID_ARGUMENT;case w.NOT_FOUND:return _e.NOT_FOUND;case w.ALREADY_EXISTS:return _e.ALREADY_EXISTS;case w.PERMISSION_DENIED:return _e.PERMISSION_DENIED;case w.FAILED_PRECONDITION:return _e.FAILED_PRECONDITION;case w.ABORTED:return _e.ABORTED;case w.OUT_OF_RANGE:return _e.OUT_OF_RANGE;case w.UNIMPLEMENTED:return _e.UNIMPLEMENTED;case w.DATA_LOSS:return _e.DATA_LOSS;default:return g("Unknown status code: "+t)}}!function(t){t[t.OK=0]="OK",t[t.CANCELLED=1]="CANCELLED",t[t.UNKNOWN=2]="UNKNOWN",t[t.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",t[t.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",t[t.NOT_FOUND=5]="NOT_FOUND",t[t.ALREADY_EXISTS=6]="ALREADY_EXISTS",t[t.PERMISSION_DENIED=7]="PERMISSION_DENIED",t[t.UNAUTHENTICATED=16]="UNAUTHENTICATED",t[t.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",t[t.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",t[t.ABORTED=10]="ABORTED",t[t.OUT_OF_RANGE=11]="OUT_OF_RANGE",t[t.UNIMPLEMENTED=12]="UNIMPLEMENTED",t[t.INTERNAL=13]="INTERNAL",t[t.UNAVAILABLE=14]="UNAVAILABLE",t[t.DATA_LOSS=15]="DATA_LOSS"}(_e||(_e={}));var Ce=new gt(ft.comparator);function ke(){return Ce}function xe(){return ke()}var Ie=new gt(ft.comparator);function Ae(){return Ie}var Pe=new gt(ft.comparator);function De(){return Pe}var Ne=new ie(ft.comparator);function Re(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=Ne,r=0,i=t;r<i.length;r++){var o=i[r];n=n.add(o)}return n}var Oe=new ie(Q);function Me(){return Oe}var Fe,Le,Ve=function(){function t(t){this.comparator=t?function(e,n){return t(e,n)||ft.comparator(e.key,n.key)}:function(t,e){return ft.comparator(t.key,e.key)},this.keyedMap=Ae(),this.sortedSet=new gt(this.comparator)}return t.emptySet=function(e){return new t(e.comparator)},t.prototype.has=function(t){return null!=this.keyedMap.get(t)},t.prototype.get=function(t){return this.keyedMap.get(t)},t.prototype.first=function(){return this.sortedSet.minKey()},t.prototype.last=function(){return this.sortedSet.maxKey()},t.prototype.isEmpty=function(){return this.sortedSet.isEmpty()},t.prototype.indexOf=function(t){var e=this.keyedMap.get(t);return e?this.sortedSet.indexOf(e):-1},Object.defineProperty(t.prototype,"size",{get:function(){return this.sortedSet.size},enumerable:!0,configurable:!0}),t.prototype.forEach=function(t){this.sortedSet.inorderTraversal(function(e,n){return t(e),!1})},t.prototype.add=function(t){var e=this.delete(t.key);return e.copy(e.keyedMap.insert(t.key,t),e.sortedSet.insert(t,null))},t.prototype.delete=function(t){var e=this.get(t);return e?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(e)):this},t.prototype.isEqual=function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;for(var n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();n.hasNext();){var i=n.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0},t.prototype.toString=function(){var t=[];return this.forEach(function(e){t.push(e.toString())}),0===t.length?"DocumentSet ()":"DocumentSet (\n  "+t.join("  \n")+"\n)"},t.prototype.copy=function(e,n){var r=new t;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r},t}();!function(t){t[t.Added=0]="Added",t[t.Removed=1]="Removed",t[t.Modified=2]="Modified",t[t.Metadata=3]="Metadata"}(Fe||(Fe={})),function(t){t[t.Local=0]="Local",t[t.Synced=1]="Synced"}(Le||(Le={}));var Be,Ue=function(){function t(){this.changeMap=new gt(ft.comparator)}return t.prototype.track=function(t){var e=t.doc.key,n=this.changeMap.get(e);n?t.type!==Fe.Added&&n.type===Fe.Metadata?this.changeMap=this.changeMap.insert(e,t):t.type===Fe.Metadata&&n.type!==Fe.Removed?this.changeMap=this.changeMap.insert(e,{type:n.type,doc:t.doc}):t.type===Fe.Modified&&n.type===Fe.Modified?this.changeMap=this.changeMap.insert(e,{type:Fe.Modified,doc:t.doc}):t.type===Fe.Modified&&n.type===Fe.Added?this.changeMap=this.changeMap.insert(e,{type:Fe.Added,doc:t.doc}):t.type===Fe.Removed&&n.type===Fe.Added?this.changeMap=this.changeMap.remove(e):t.type===Fe.Removed&&n.type===Fe.Modified?this.changeMap=this.changeMap.insert(e,{type:Fe.Removed,doc:n.doc}):t.type===Fe.Added&&n.type===Fe.Removed?this.changeMap=this.changeMap.insert(e,{type:Fe.Modified,doc:t.doc}):g("unsupported combination of changes: "+JSON.stringify(t)+" after "+JSON.stringify(n)):this.changeMap=this.changeMap.insert(e,t)},t.prototype.getChanges=function(){var t=[];return this.changeMap.inorderTraversal(function(e,n){t.push(n)}),t},t}(),je=function(){function t(t,e,n,r,i,o,a,s){this.query=t,this.docs=e,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=s}return t.fromInitialDocuments=function(e,n,r,i){var o=[];return n.forEach(function(t){o.push({type:Fe.Added,doc:t})}),new t(e,n,Ve.emptySet(n),o,r,i,!0,!1)},Object.defineProperty(t.prototype,"hasPendingWrites",{get:function(){return!this.mutatedKeys.isEmpty()},enumerable:!0,configurable:!0}),t.prototype.isEqual=function(t){if(this.fromCache!==t.fromCache||this.syncStateChanged!==t.syncStateChanged||!this.mutatedKeys.isEqual(t.mutatedKeys)||!this.query.isEqual(t.query)||!this.docs.isEqual(t.docs)||!this.oldDocs.isEqual(t.oldDocs))return!1;var e=this.docChanges,n=t.docChanges;if(e.length!==n.length)return!1;for(var r=0;r<e.length;r++)if(e[r].type!==n[r].type||!e[r].doc.isEqual(n[r].doc))return!1;return!0},t}(),qe=function(){function t(t,e,n,r,i){this.snapshotVersion=t,this.targetChanges=e,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=i}return t.createSynthesizedRemoteEventForCurrentChange=function(e,n){var r,i=((r={})[e]=Ge.createSynthesizedTargetChangeForCurrentChange(e,n),r);return new t(ee.MIN,i,Me(),ke(),Re())},t}(),Ge=function(){function t(t,e,n,r,i){this.resumeToken=t,this.current=e,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=i}return t.createSynthesizedTargetChangeForCurrentChange=function(e,n){return new t(_(),n,Re(),Re(),Re())},t}(),We=function(){return function(t,e,n,r){this.updatedTargetIds=t,this.removedTargetIds=e,this.key=n,this.newDoc=r}}(),ze=function(){return function(t,e){this.targetId=t,this.existenceFilter=e}}();!function(t){t[t.NoChange=0]="NoChange",t[t.Added=1]="Added",t[t.Removed=2]="Removed",t[t.Current=3]="Current",t[t.Reset=4]="Reset"}(Be||(Be={}));var He=function(){return function(t,e,n,r){void 0===n&&(n=_()),void 0===r&&(r=null),this.state=t,this.targetIds=e,this.resumeToken=n,this.cause=r}}(),Ke=function(){function t(){this.pendingResponses=0,this.documentChanges=Xe(),this._resumeToken=_(),this._current=!1,this._hasPendingChanges=!0}return Object.defineProperty(t.prototype,"current",{get:function(){return this._current},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"resumeToken",{get:function(){return this._resumeToken},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isPending",{get:function(){return 0!==this.pendingResponses},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"hasPendingChanges",{get:function(){return this._hasPendingChanges},enumerable:!0,configurable:!0}),t.prototype.updateResumeToken=function(t){t.length>0&&(this._hasPendingChanges=!0,this._resumeToken=t)},t.prototype.toTargetChange=function(){var t=Re(),e=Re(),n=Re();return this.documentChanges.forEach(function(r,i){switch(i){case Fe.Added:t=t.add(r);break;case Fe.Modified:e=e.add(r);break;case Fe.Removed:n=n.add(r);break;default:g("Encountered invalid change type: "+i)}}),new Ge(this._resumeToken,this._current,t,e,n)},t.prototype.clearPendingChanges=function(){this._hasPendingChanges=!1,this.documentChanges=Xe()},t.prototype.addDocumentChange=function(t,e){this._hasPendingChanges=!0,this.documentChanges=this.documentChanges.insert(t,e)},t.prototype.removeDocumentChange=function(t){this._hasPendingChanges=!0,this.documentChanges=this.documentChanges.remove(t)},t.prototype.recordPendingTargetRequest=function(){this.pendingResponses+=1},t.prototype.recordTargetResponse=function(){this.pendingResponses-=1},t.prototype.markCurrent=function(){this._hasPendingChanges=!0,this._current=!0},t}(),Qe=function(){function t(t){this.metadataProvider=t,this.targetStates={},this.pendingDocumentUpdates=ke(),this.pendingDocumentTargetMapping=Ye(),this.pendingTargetResets=new ie(Q)}return t.prototype.handleDocumentChange=function(t){for(var e=0,n=t.updatedTargetIds;e<n.length;e++){var r=n[e];t.newDoc instanceof dt?this.addDocumentToTarget(r,t.newDoc):t.newDoc instanceof mt&&this.removeDocumentFromTarget(r,t.key,t.newDoc)}for(var i=0,o=t.removedTargetIds;i<o.length;i++){r=o[i];this.removeDocumentFromTarget(r,t.key,t.newDoc)}},t.prototype.handleTargetChange=function(t){var e=this;this.forEachTarget(t,function(n){var r=e.ensureTargetState(n);switch(t.state){case Be.NoChange:e.isActiveTarget(n)&&r.updateResumeToken(t.resumeToken);break;case Be.Added:r.recordTargetResponse(),r.isPending||r.clearPendingChanges(),r.updateResumeToken(t.resumeToken);break;case Be.Removed:r.recordTargetResponse(),r.isPending||e.removeTarget(n),v(!t.cause,"WatchChangeAggregator does not handle errored targets");break;case Be.Current:e.isActiveTarget(n)&&(r.markCurrent(),r.updateResumeToken(t.resumeToken));break;case Be.Reset:e.isActiveTarget(n)&&(e.resetTarget(n),r.updateResumeToken(t.resumeToken));break;default:g("Unknown target watch change state: "+t.state)}})},t.prototype.forEachTarget=function(t,e){t.targetIds.length>0?t.targetIds.forEach(e):k(this.targetStates,e)},t.prototype.handleExistenceFilter=function(t){var e=t.targetId,n=t.existenceFilter.count,r=this.queryDataForActiveTarget(e);if(r){var i=r.query;if(i.isDocumentQuery())if(0===n){var o=new ft(i.path);this.removeDocumentFromTarget(e,o,new mt(o,ee.forDeletedDoc()))}else v(1===n,"Single document existence filter with count: "+n);else this.getCurrentDocumentCountForTarget(e)!==n&&(this.resetTarget(e),this.pendingTargetResets=this.pendingTargetResets.add(e))}},t.prototype.createRemoteEvent=function(t){var e=this,n={};k(this.targetStates,function(r,i){var o=e.queryDataForActiveTarget(r);if(o){if(i.current&&o.query.isDocumentQuery()){var a=new ft(o.query.path);null!==e.pendingDocumentUpdates.get(a)||e.targetContainsDocument(r,a)||e.removeDocumentFromTarget(r,a,new mt(a,t))}i.hasPendingChanges&&(n[r]=i.toTargetChange(),i.clearPendingChanges())}});var r=Re();this.pendingDocumentTargetMapping.forEach(function(t,n){var i=!0;n.forEachWhile(function(t){var n=e.queryDataForActiveTarget(t);return!n||n.purpose===Gt.LimboResolution||(i=!1,!1)}),i&&(r=r.add(t))});var i=new qe(t,n,this.pendingTargetResets,this.pendingDocumentUpdates,r);return this.pendingDocumentUpdates=ke(),this.pendingDocumentTargetMapping=Ye(),this.pendingTargetResets=new ie(Q),i},t.prototype.addDocumentToTarget=function(t,e){if(this.isActiveTarget(t)){var n=this.targetContainsDocument(t,e.key)?Fe.Modified:Fe.Added;this.ensureTargetState(t).addDocumentChange(e.key,n),this.pendingDocumentUpdates=this.pendingDocumentUpdates.insert(e.key,e),this.pendingDocumentTargetMapping=this.pendingDocumentTargetMapping.insert(e.key,this.ensureDocumentTargetMapping(e.key).add(t))}},t.prototype.removeDocumentFromTarget=function(t,e,n){if(this.isActiveTarget(t)){var r=this.ensureTargetState(t);this.targetContainsDocument(t,e)?r.addDocumentChange(e,Fe.Removed):r.removeDocumentChange(e),this.pendingDocumentTargetMapping=this.pendingDocumentTargetMapping.insert(e,this.ensureDocumentTargetMapping(e).delete(t)),n&&(this.pendingDocumentUpdates=this.pendingDocumentUpdates.insert(e,n))}},t.prototype.removeTarget=function(t){delete this.targetStates[t]},t.prototype.getCurrentDocumentCountForTarget=function(t){var e=this.ensureTargetState(t).toTargetChange();return this.metadataProvider.getRemoteKeysForTarget(t).size+e.addedDocuments.size-e.removedDocuments.size},t.prototype.recordPendingTargetRequest=function(t){this.ensureTargetState(t).recordPendingTargetRequest()},t.prototype.ensureTargetState=function(t){return this.targetStates[t]||(this.targetStates[t]=new Ke),this.targetStates[t]},t.prototype.ensureDocumentTargetMapping=function(t){var e=this.pendingDocumentTargetMapping.get(t);return e||(e=new ie(Q),this.pendingDocumentTargetMapping=this.pendingDocumentTargetMapping.insert(t,e)),e},t.prototype.isActiveTarget=function(t){return null!==this.queryDataForActiveTarget(t)},t.prototype.queryDataForActiveTarget=function(t){var e=this.targetStates[t];return e&&e.isPending?null:this.metadataProvider.getQueryDataForTarget(t)},t.prototype.resetTarget=function(t){var e=this;v(!this.targetStates[t].isPending,"Should only reset active targets"),this.targetStates[t]=new Ke,this.metadataProvider.getRemoteKeysForTarget(t).forEach(function(n){e.removeDocumentFromTarget(t,n,null)})},t.prototype.targetContainsDocument=function(t,e){return this.metadataProvider.getRemoteKeysForTarget(t).has(e)},t}();function Ye(){return new gt(ft.comparator)}function Xe(){return new gt(ft.comparator)}var $e=function(){var t={};return t[Xt.ASCENDING.name]="ASCENDING",t[Xt.DESCENDING.name]="DESCENDING",t}(),Je=function(){var t={};return t[Ht.LESS_THAN.name]="LESS_THAN",t[Ht.LESS_THAN_OR_EQUAL.name]="LESS_THAN_OR_EQUAL",t[Ht.GREATER_THAN.name]="GREATER_THAN",t[Ht.GREATER_THAN_OR_EQUAL.name]="GREATER_THAN_OR_EQUAL",t[Ht.EQUAL.name]="EQUAL",t[Ht.ARRAY_CONTAINS.name]="ARRAY_CONTAINS",t}(),Ze=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function tn(t,e){v(!jt(t),e+" is missing")}function en(t){return"number"===typeof t?t:"string"===typeof t?Number(t):g("can't parse "+t)}var nn=function(){function t(t,e){this.databaseId=t,this.options=e}return t.prototype.emptyByteString=function(){return this.options.useProto3Json?"":new Uint8Array(0)},t.prototype.unsafeCastProtoByteString=function(t){return t},t.prototype.fromRpcStatus=function(t){var e=void 0===t.code?w.UNKNOWN:Se(t.code);return new E(e,t.message||"")},t.prototype.toInt32Value=function(t){return jt(t)?void 0:{value:t}},t.prototype.fromInt32Value=function(t){var e;return jt(e="object"===typeof t?t.value:t)?null:e},t.prototype.toTimestamp=function(t){return{seconds:t.seconds,nanos:t.nanoseconds}},t.prototype.fromTimestamp=function(t){if("string"===typeof t)return this.fromIso8601String(t);v(!!t,"Cannot deserialize null or undefined timestamp.");var e=en(t.seconds||"0"),n=t.nanos||0;return new it(e,n)},t.prototype.fromIso8601String=function(t){var e=0,n=Ze.exec(t);if(v(!!n,"invalid timestamp: "+t),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),e=Number(r)}var i=new Date(t),o=Math.floor(i.getTime()/1e3);return new it(o,e)},t.prototype.toBytes=function(t){return this.options.useProto3Json?t.toBase64():this.unsafeCastProtoByteString(t.toUint8Array())},t.prototype.fromBlob=function(t){return"string"===typeof t?(v(this.options.useProto3Json,"Expected bytes to be passed in as Uint8Array, but got a string instead."),et.fromBase64String(t)):(v(!this.options.useProto3Json,"Expected bytes to be passed in as string, but got something else instead."),et.fromUint8Array(t))},t.prototype.toVersion=function(t){return this.toTimestamp(t.toTimestamp())},t.prototype.fromVersion=function(t){return v(!!t,"Trying to deserialize version that isn't set"),ee.fromTimestamp(this.fromTimestamp(t))},t.prototype.toResourceName=function(t,e){return this.fullyQualifiedPrefixPath(t).child("documents").child(e).canonicalString()},t.prototype.fromResourceName=function(t){var e=ct.fromString(t);return v(this.isValidResourceName(e),"Tried to deserialize invalid key "+e.toString()),e},t.prototype.toName=function(t){return this.toResourceName(this.databaseId,t.path)},t.prototype.fromName=function(t){var e=this.fromResourceName(t);return v(e.get(1)===this.databaseId.projectId,"Tried to deserialize key from different project: "+e.get(1)+" vs "+this.databaseId.projectId),v(!e.get(3)&&!this.databaseId.database||e.get(3)===this.databaseId.database,"Tried to deserialize key from different database: "+e.get(3)+" vs "+this.databaseId.database),new ft(this.extractLocalPathFromResourceName(e))},t.prototype.toQueryPath=function(t){return this.toResourceName(this.databaseId,t)},t.prototype.fromQueryPath=function(t){var e=this.fromResourceName(t);return 4===e.length?ct.EMPTY_PATH:this.extractLocalPathFromResourceName(e)},Object.defineProperty(t.prototype,"encodedDatabaseId",{get:function(){return new ct(["projects",this.databaseId.projectId,"databases",this.databaseId.database]).canonicalString()},enumerable:!0,configurable:!0}),t.prototype.fullyQualifiedPrefixPath=function(t){return new ct(["projects",t.projectId,"databases",t.database])},t.prototype.extractLocalPathFromResourceName=function(t){return v(t.length>4&&"documents"===t.get(4),"tried to deserialize invalid key "+t.toString()),t.popFirst(5)},t.prototype.isValidResourceName=function(t){return t.length>=4&&"projects"===t.get(0)&&"databases"===t.get(2)},t.prototype.toValue=function(t){if(t instanceof St)return{nullValue:"NULL_VALUE"};if(t instanceof Tt)return{booleanValue:t.value()};if(t instanceof xt)return{integerValue:""+t.value()};if(t instanceof It){var e=t.value();if(this.options.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:t.value()}}return t instanceof At?{stringValue:t.value()}:t instanceof Mt?{mapValue:this.toMapValue(t)}:t instanceof Ft?{arrayValue:this.toArrayValue(t)}:t instanceof Pt?{timestampValue:this.toTimestamp(t.internalValue)}:t instanceof Ot?{geoPointValue:{latitude:t.value().latitude,longitude:t.value().longitude}}:t instanceof Nt?{bytesValue:this.toBytes(t.value())}:t instanceof Rt?{referenceValue:this.toResourceName(t.databaseId,t.key.path)}:g("Unknown FieldValue "+JSON.stringify(t))},t.prototype.fromValue=function(t){var e=this,n=t.value_type;if(rn(t,n,"nullValue"))return St.INSTANCE;if(rn(t,n,"booleanValue"))return Tt.of(t.booleanValue);if(rn(t,n,"integerValue"))return new xt(en(t.integerValue));if(rn(t,n,"doubleValue")){if(this.options.useProto3Json){if("NaN"===t.doubleValue)return It.NAN;if("Infinity"===t.doubleValue)return It.POSITIVE_INFINITY;if("-Infinity"===t.doubleValue)return It.NEGATIVE_INFINITY}return new It(t.doubleValue)}if(rn(t,n,"stringValue"))return new At(t.stringValue);if(rn(t,n,"mapValue"))return this.fromFields(t.mapValue.fields||{});if(rn(t,n,"arrayValue")){tn(t.arrayValue,"arrayValue");var r=t.arrayValue.values||[];return new Ft(r.map(function(t){return e.fromValue(t)}))}if(rn(t,n,"timestampValue"))return tn(t.timestampValue,"timestampValue"),new Pt(this.fromTimestamp(t.timestampValue));if(rn(t,n,"geoPointValue")){tn(t.geoPointValue,"geoPointValue");var i=t.geoPointValue.latitude||0,o=t.geoPointValue.longitude||0;return new Ot(new rt(i,o))}if(rn(t,n,"bytesValue")){tn(t.bytesValue,"bytesValue");var a=this.fromBlob(t.bytesValue);return new Nt(a)}if(rn(t,n,"referenceValue")){tn(t.referenceValue,"referenceValue");var s=this.fromResourceName(t.referenceValue),u=new st(s.get(1),s.get(3)),c=new ft(this.extractLocalPathFromResourceName(s));return new Rt(u,c)}return g("Unknown Value proto "+JSON.stringify(t))},t.prototype.toMutationDocument=function(t,e){return{name:this.toName(t),fields:this.toFields(e)}},t.prototype.toDocument=function(t){return v(!t.hasLocalMutations,"Can't serialize documents with mutations."),{name:this.toName(t.key),fields:this.toFields(t.data),updateTime:this.toTimestamp(t.version.toTimestamp())}},t.prototype.fromDocument=function(t,e){return new dt(this.fromName(t.name),this.fromVersion(t.updateTime),this.fromFields(t.fields||{}),{hasCommittedMutations:!!e})},t.prototype.toFields=function(t){var e=this,n={};return t.forEach(function(t,r){n[t]=e.toValue(r)}),n},t.prototype.fromFields=function(t){var e=this,n=t,r=Mt.EMPTY;return x(n,function(t,n){r=r.set(new ht([t]),e.fromValue(n))}),r},t.prototype.toMapValue=function(t){return{fields:this.toFields(t)}},t.prototype.toArrayValue=function(t){var e=this,n=[];return t.forEach(function(t){n.push(e.toValue(t))}),{values:n}},t.prototype.fromFound=function(t){v(!!t.found,"Tried to deserialize a found document from a missing document."),tn(t.found.name,"doc.found.name"),tn(t.found.updateTime,"doc.found.updateTime");var e=this.fromName(t.found.name),n=this.fromVersion(t.found.updateTime),r=this.fromFields(t.found.fields||{});return new dt(e,n,r,{},t.found)},t.prototype.fromMissing=function(t){v(!!t.missing,"Tried to deserialize a missing document from a found document."),v(!!t.readTime,"Tried to deserialize a missing document without a read time.");var e=this.fromName(t.missing),n=this.fromVersion(t.readTime);return new mt(e,n)},t.prototype.fromMaybeDocument=function(t){var e=t.result;return rn(t,e,"found")?this.fromFound(t):rn(t,e,"missing")?this.fromMissing(t):g("invalid batch get response: "+JSON.stringify(t))},t.prototype.toWatchTargetChangeState=function(t){switch(t){case Be.Added:return"ADD";case Be.Current:return"CURRENT";case Be.NoChange:return"NO_CHANGE";case Be.Removed:return"REMOVE";case Be.Reset:return"RESET";default:return g("Unknown WatchTargetChangeState: "+t)}},t.prototype.toTestWatchChange=function(t){if(t instanceof ze)return{filter:{count:t.existenceFilter.count,targetId:t.targetId}};if(t instanceof We){if(t.newDoc instanceof dt){var e=t.newDoc;return{documentChange:{document:{name:this.toName(e.key),fields:this.toFields(e.data),updateTime:this.toVersion(e.version)},targetIds:t.updatedTargetIds,removedTargetIds:t.removedTargetIds}}}if(t.newDoc instanceof mt){e=t.newDoc;return{documentDelete:{document:this.toName(e.key),readTime:this.toVersion(e.version),removedTargetIds:t.removedTargetIds}}}if(null===t.newDoc)return{documentRemove:{document:this.toName(t.key),removedTargetIds:t.removedTargetIds}}}if(t instanceof He){var n=void 0;return t.cause&&(n={code:Te(t.cause.code),message:t.cause.message}),{targetChange:{targetChangeType:this.toWatchTargetChangeState(t.state),targetIds:t.targetIds,resumeToken:this.unsafeCastProtoByteString(t.resumeToken),cause:n}}}return g("Unrecognized watch change: "+JSON.stringify(t))},t.prototype.fromWatchChange=function(t){var e,n=t.response_type;if(rn(t,n,"targetChange")){tn(t.targetChange,"targetChange");var r=this.fromWatchTargetChangeState(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],o=t.targetChange.resumeToken||this.emptyByteString(),a=t.targetChange.cause,s=a&&this.fromRpcStatus(a);e=new He(r,i,o,s||null)}else if(rn(t,n,"documentChange")){tn(t.documentChange,"documentChange"),tn(t.documentChange.document,"documentChange.name"),tn(t.documentChange.document.name,"documentChange.document.name"),tn(t.documentChange.document.updateTime,"documentChange.document.updateTime");var u=t.documentChange,c=this.fromName(u.document.name),l=this.fromVersion(u.document.updateTime),h=this.fromFields(u.document.fields||{}),f=new dt(c,l,h,{},u.document),p=u.targetIds||[],d=u.removedTargetIds||[];e=new We(p,d,f.key,f)}else if(rn(t,n,"documentDelete")){tn(t.documentDelete,"documentDelete"),tn(t.documentDelete.document,"documentDelete.document");var m=t.documentDelete;c=this.fromName(m.document),l=m.readTime?this.fromVersion(m.readTime):ee.forDeletedDoc(),f=new mt(c,l),d=m.removedTargetIds||[];e=new We([],d,f.key,f)}else if(rn(t,n,"documentRemove")){tn(t.documentRemove,"documentRemove"),tn(t.documentRemove.document,"documentRemove");var y=t.documentRemove;c=this.fromName(y.document),d=y.removedTargetIds||[];e=new We([],d,c,null)}else{if(!rn(t,n,"filter"))return g("Unknown change type "+JSON.stringify(t));tn(t.filter,"filter"),tn(t.filter.targetId,"filter.targetId");var v=t.filter,b=v.count||0,_=new we(b),w=v.targetId;e=new ze(w,_)}return e},t.prototype.fromWatchTargetChangeState=function(t){return"NO_CHANGE"===t?Be.NoChange:"ADD"===t?Be.Added:"REMOVE"===t?Be.Removed:"CURRENT"===t?Be.Current:"RESET"===t?Be.Reset:g("Got unexpected TargetChange.state: "+t)},t.prototype.versionFromListenResponse=function(t){if(!rn(t,t.response_type,"targetChange"))return ee.MIN;var e=t.targetChange;return e.targetIds&&e.targetIds.length?ee.MIN:e.readTime?this.fromVersion(e.readTime):ee.MIN},t.prototype.toMutation=function(t){var e,n=this;if(t instanceof he)e={update:this.toMutationDocument(t.key,t.value)};else if(t instanceof de)e={delete:this.toName(t.key)};else if(t instanceof fe)e={update:this.toMutationDocument(t.key,t.data),updateMask:this.toDocumentMask(t.fieldMask)};else{if(!(t instanceof pe))return g("Unknown mutation type "+t.type);e={transform:{document:this.toName(t.key),fieldTransforms:t.fieldTransforms.map(function(t){return n.toFieldTransform(t)})}}}return t.precondition.isNone||(e.currentDocument=this.toPrecondition(t.precondition)),e},t.prototype.fromMutation=function(t){var e=this,n=t.currentDocument?this.fromPrecondition(t.currentDocument):ce.NONE;if(t.update){tn(t.update.name,"name");var r=this.fromName(t.update.name),i=this.fromFields(t.update.fields||{});if(t.updateMask){var o=this.fromDocumentMask(t.updateMask);return new fe(r,i,o,n)}return new he(r,i,n)}if(t.delete){r=this.fromName(t.delete);return new de(r,n)}if(t.transform){r=this.fromName(t.transform.document);var a=t.transform.fieldTransforms.map(function(t){return e.fromFieldTransform(t)});return v(!0===n.exists,'Transforms only support precondition "exists == true"'),new pe(r,a)}return g("unknown mutation proto: "+JSON.stringify(t))},t.prototype.toPrecondition=function(t){return v(!t.isNone,"Can't serialize an empty precondition"),void 0!==t.updateTime?{updateTime:this.toVersion(t.updateTime)}:void 0!==t.exists?{exists:t.exists}:g("Unknown precondition")},t.prototype.fromPrecondition=function(t){return void 0!==t.updateTime?ce.updateTime(this.fromVersion(t.updateTime)):void 0!==t.exists?ce.exists(t.exists):ce.NONE},t.prototype.fromWriteResult=function(t,e){var n=this,r=t.updateTime?this.fromVersion(t.updateTime):this.fromVersion(e),i=null;return t.transformResults&&t.transformResults.length>0&&(i=t.transformResults.map(function(t){return n.fromValue(t)})),new ue(r,i)},t.prototype.fromWriteResults=function(t,e){var n=this;return t&&t.length>0?(v(void 0!==e,"Received a write result without a commit time"),t.map(function(t){return n.fromWriteResult(t,e)})):[]},t.prototype.toFieldTransform=function(t){var e=this,n=t.transform;if(n instanceof me)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof ye)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements.map(function(t){return e.toValue(t)})}};if(n instanceof ge)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements.map(function(t){return e.toValue(t)})}};if(n instanceof ve)return{fieldPath:t.field.canonicalString(),increment:this.toValue(n.operand)};throw g("Unknown transform: "+t.transform)},t.prototype.fromFieldTransform=function(t){var e=this,n=t.transform_type,r=null;if(rn(t,n,"setToServerValue"))v("REQUEST_TIME"===t.setToServerValue,"Unknown server value transform proto: "+JSON.stringify(t)),r=me.instance;else if(rn(t,n,"appendMissingElements")){var i=t.appendMissingElements.values||[];r=new ye(i.map(function(t){return e.fromValue(t)}))}else if(rn(t,n,"removeAllFromArray")){i=t.removeAllFromArray.values||[];r=new ge(i.map(function(t){return e.fromValue(t)}))}else if(rn(t,n,"increment")){var o=this.fromValue(t.increment);v(o instanceof Ct,"NUMERIC_ADD transform requires a NumberValue"),r=new ve(o)}else g("Unknown transform proto: "+JSON.stringify(t));var a=ht.fromServerFormat(t.fieldPath);return new se(a,r)},t.prototype.toDocumentsTarget=function(t){return{documents:[this.toQueryPath(t.path)]}},t.prototype.fromDocumentsTarget=function(t){var e=t.documents.length;v(1===e,"DocumentsTarget contained other than 1 document: "+e);var n=t.documents[0];return Wt.atPath(this.fromQueryPath(n))},t.prototype.toQueryTarget=function(t){var e={structuredQuery:{}},n=t.path;null!==t.collectionGroup?(v(n.length%2===0,"Collection Group queries should be within a document path or root."),e.parent=this.toQueryPath(n),e.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(v(n.length%2!==0,"Document queries with filters are not supported."),e.parent=this.toQueryPath(n.popLast()),e.structuredQuery.from=[{collectionId:n.lastSegment()}]);var r=this.toFilter(t.filters);r&&(e.structuredQuery.where=r);var i=this.toOrder(t.orderBy);i&&(e.structuredQuery.orderBy=i);var o=this.toInt32Value(t.limit);return void 0!==o&&(e.structuredQuery.limit=o),t.startAt&&(e.structuredQuery.startAt=this.toCursor(t.startAt)),t.endAt&&(e.structuredQuery.endAt=this.toCursor(t.endAt)),e},t.prototype.fromQueryTarget=function(t){var e=this.fromQueryPath(t.parent),n=t.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){v(1===r,"StructuredQuery.from with more than one collection is not supported.");var o=n.from[0];o.allDescendants?i=o.collectionId:e=e.child(o.collectionId)}var a=[];n.where&&(a=this.fromFilter(n.where));var s=[];n.orderBy&&(s=this.fromOrder(n.orderBy));var u=null;n.limit&&(u=this.fromInt32Value(n.limit));var c=null;n.startAt&&(c=this.fromCursor(n.startAt));var l=null;return n.endAt&&(l=this.fromCursor(n.endAt)),new Wt(e,i,s,a,u,c,l)},t.prototype.toListenRequestLabels=function(t){var e=this.toLabel(t.purpose);return null==e?null:{"goog-listen-tags":e}},t.prototype.toLabel=function(t){switch(t){case Gt.Listen:return null;case Gt.ExistenceFilterMismatch:return"existence-filter-mismatch";case Gt.LimboResolution:return"limbo-document";default:return g("Unrecognized query purpose: "+t)}},t.prototype.toTarget=function(t){var e,n=t.query;return(e=n.isDocumentQuery()?{documents:this.toDocumentsTarget(n)}:{query:this.toQueryTarget(n)}).targetId=t.targetId,t.resumeToken.length>0&&(e.resumeToken=this.unsafeCastProtoByteString(t.resumeToken)),e},t.prototype.toFilter=function(t){var e=this;if(0!==t.length){var n=t.map(function(t){return t instanceof Kt?e.toRelationFilter(t):e.toUnaryFilter(t)});return 1===n.length?n[0]:{compositeFilter:{op:"AND",filters:n}}}},t.prototype.fromFilter=function(t){var e=this;return t?void 0!==t.unaryFilter?[this.fromUnaryFilter(t)]:void 0!==t.fieldFilter?[this.fromRelationFilter(t)]:void 0!==t.compositeFilter?t.compositeFilter.filters.map(function(t){return e.fromFilter(t)}).reduce(function(t,e){return t.concat(e)}):g("Unknown filter: "+JSON.stringify(t)):[]},t.prototype.toOrder=function(t){var e=this;if(0!==t.length)return t.map(function(t){return e.toPropertyOrder(t)})},t.prototype.fromOrder=function(t){var e=this;return t.map(function(t){return e.fromPropertyOrder(t)})},t.prototype.toCursor=function(t){var e=this;return{before:t.before,values:t.position.map(function(t){return e.toValue(t)})}},t.prototype.fromCursor=function(t){var e=this,n=!!t.before,r=t.values.map(function(t){return e.fromValue(t)});return new $t(r,n)},t.prototype.toDirection=function(t){return $e[t.name]},t.prototype.fromDirection=function(t){switch(t){case"ASCENDING":return Xt.ASCENDING;case"DESCENDING":return Xt.DESCENDING;default:return}},t.prototype.toOperatorName=function(t){return Je[t.name]},t.prototype.fromOperatorName=function(t){switch(t){case"EQUAL":return Ht.EQUAL;case"GREATER_THAN":return Ht.GREATER_THAN;case"GREATER_THAN_OR_EQUAL":return Ht.GREATER_THAN_OR_EQUAL;case"LESS_THAN":return Ht.LESS_THAN;case"LESS_THAN_OR_EQUAL":return Ht.LESS_THAN_OR_EQUAL;case"ARRAY_CONTAINS":return Ht.ARRAY_CONTAINS;case"OPERATOR_UNSPECIFIED":return g("Unspecified relation");default:return g("Unknown relation")}},t.prototype.toFieldPathReference=function(t){return{fieldPath:t.canonicalString()}},t.prototype.fromFieldPathReference=function(t){return ht.fromServerFormat(t.fieldPath)},t.prototype.toPropertyOrder=function(t){return{field:this.toFieldPathReference(t.field),direction:this.toDirection(t.dir)}},t.prototype.fromPropertyOrder=function(t){return new Jt(this.fromFieldPathReference(t.field),this.fromDirection(t.direction))},t.prototype.toRelationFilter=function(t){return t instanceof Kt?{fieldFilter:{field:this.toFieldPathReference(t.field),op:this.toOperatorName(t.op),value:this.toValue(t.value)}}:g("Unrecognized filter: "+JSON.stringify(t))},t.prototype.fromRelationFilter=function(t){return new Kt(this.fromFieldPathReference(t.fieldFilter.field),this.fromOperatorName(t.fieldFilter.op),this.fromValue(t.fieldFilter.value))},t.prototype.toUnaryFilter=function(t){return t instanceof Yt?{unaryFilter:{field:this.toFieldPathReference(t.field),op:"IS_NAN"}}:t instanceof Qt?{unaryFilter:{field:this.toFieldPathReference(t.field),op:"IS_NULL"}}:g("Unrecognized filter: "+JSON.stringify(t))},t.prototype.fromUnaryFilter=function(t){switch(t.unaryFilter.op){case"IS_NAN":var e=this.fromFieldPathReference(t.unaryFilter.field);return new Yt(e);case"IS_NULL":var n=this.fromFieldPathReference(t.unaryFilter.field);return new Qt(n);case"OPERATOR_UNSPECIFIED":return g("Unspecified filter");default:return g("Unknown filter")}},t.prototype.toDocumentMask=function(t){var e=[];return t.fields.forEach(function(t){return e.push(t.canonicalString())}),{fieldPaths:e}},t.prototype.fromDocumentMask=function(t){var e=(t.fieldPaths||[]).map(function(t){return ht.fromServerFormat(t)});return ae.fromArray(e)},t}();function rn(t,e,n){return e===n||!e&&n in t}var on=function(){function t(t){this.sendFn=t.sendFn,this.closeFn=t.closeFn}return t.prototype.onOpen=function(t){v(!this.wrappedOnOpen,"Called onOpen on stream twice!"),this.wrappedOnOpen=t},t.prototype.onClose=function(t){v(!this.wrappedOnClose,"Called onClose on stream twice!"),this.wrappedOnClose=t},t.prototype.onMessage=function(t){v(!this.wrappedOnMessage,"Called onMessage on stream twice!"),this.wrappedOnMessage=t},t.prototype.close=function(){this.closeFn()},t.prototype.send=function(t){this.sendFn(t)},t.prototype.callOnOpen=function(){v(void 0!==this.wrappedOnOpen,"Cannot call onOpen because no callback was set"),this.wrappedOnOpen()},t.prototype.callOnClose=function(t){v(void 0!==this.wrappedOnClose,"Cannot call onClose because no callback was set"),this.wrappedOnClose(t)},t.prototype.callOnMessage=function(t){v(void 0!==this.wrappedOnMessage,"Cannot call onMessage because no callback was set"),this.wrappedOnMessage(t)},t}(),an="Connection",sn={BatchGetDocuments:"batchGet",Commit:"commit"},un="gl-js/ fire/"+l,cn=function(){function t(t){this.databaseId=t.databaseId;var e=t.ssl?"https":"http";this.baseUrl=e+"://"+t.host,this.forceLongPolling=t.forceLongPolling}return t.prototype.modifyHeadersForRequest=function(t,e){if(e)for(var n in e.authHeaders)e.authHeaders.hasOwnProperty(n)&&(t[n]=e.authHeaders[n]);t["X-Goog-Api-Client"]=un},t.prototype.invokeRPC=function(t,e,n){var r=this,i=this.makeUrl(t);return new Promise(function(o,a){var s=new u.XhrIo;s.listenOnce(u.EventType.COMPLETE,function(){try{switch(s.getLastErrorCode()){case u.ErrorCode.NO_ERROR:var e=s.getResponseJson();d(an,"XHR received:",JSON.stringify(e)),o(e);break;case u.ErrorCode.TIMEOUT:d(an,'RPC "'+t+'" timed out'),a(new E(w.DEADLINE_EXCEEDED,"Request time out"));break;case u.ErrorCode.HTTP_ERROR:var n=s.getStatus();d(an,'RPC "'+t+'" failed with status:',n,"response text:",s.getResponseText()),n>0?a(new E(function(t){switch(t){case 200:return w.OK;case 400:return w.INVALID_ARGUMENT;case 401:return w.UNAUTHENTICATED;case 403:return w.PERMISSION_DENIED;case 404:return w.NOT_FOUND;case 409:return w.ABORTED;case 416:return w.OUT_OF_RANGE;case 429:return w.RESOURCE_EXHAUSTED;case 499:return w.CANCELLED;case 500:return w.UNKNOWN;case 501:return w.UNIMPLEMENTED;case 503:return w.UNAVAILABLE;case 504:return w.DEADLINE_EXCEEDED;default:return t>=200&&t<300?w.OK:t>=400&&t<500?w.FAILED_PRECONDITION:t>=500&&t<600?w.INTERNAL:w.UNKNOWN}}(n),"Server responded with status "+s.getStatusText())):(d(an,'RPC "'+t+'" failed'),a(new E(w.UNAVAILABLE,"Connection failed.")));break;default:g('RPC "'+t+'" failed with unanticipated webchannel error '+s.getLastErrorCode()+": "+s.getLastError()+", giving up.")}}finally{d(an,'RPC "'+t+'" completed.')}});var c=JSON.stringify(e);d(an,"XHR sending: ",i+" "+c);var l={"Content-Type":"text/plain"};r.modifyHeadersForRequest(l,n),s.send(i,"POST",c,l,15)})},t.prototype.invokeStreamingRPC=function(t,e,n){return this.invokeRPC(t,e,n)},t.prototype.openStream=function(t,e){var n=[this.baseUrl,"/","google.firestore.v1.Firestore","/",t,"/channel"],r=u.createWebChannelTransport(),i={backgroundChannelTest:!0,httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling};this.modifyHeadersForRequest(i.initMessageHeaders,e),c.isReactNative()||(i.httpHeadersOverwriteParam="$httpHeaders");var o=n.join("");d(an,"Creating WebChannel: "+o+" "+i);var a=r.createWebChannel(o,i),s=!1,l=!1,h=new on({sendFn:function(t){l?d(an,"Not sending because WebChannel is closed:",t):(s||(d(an,"Opening WebChannel transport."),a.open(),s=!0),d(an,"WebChannel sending:",t),a.send(t))},closeFn:function(){return a.close()}}),f=function(t,e){a.listen(t,function(t){try{e(t)}catch(n){setTimeout(function(){throw n},0)}})};return f(u.WebChannel.EventType.OPEN,function(){l||d(an,"WebChannel transport opened.")}),f(u.WebChannel.EventType.CLOSE,function(){l||(l=!0,d(an,"WebChannel transport closed"),h.callOnClose())}),f(u.WebChannel.EventType.ERROR,function(t){l||(l=!0,d(an,"WebChannel transport errored:",t),h.callOnClose(new E(w.UNAVAILABLE,"The operation could not be completed")))}),f(u.WebChannel.EventType.MESSAGE,function(t){if(!l){var e=t.data[0];v(!!e,"Got a webchannel message without data.");var n=e.error||e[0]&&e[0].error;if(n){d(an,"WebChannel received error:",n);var r=n.status,i=function(t){var e=_e[t];if(void 0!==e)return Se(e)}(r),o=n.message;void 0===i&&(i=w.INTERNAL,o="Unknown error status: "+r+" with message "+n.message),l=!0,h.callOnClose(new E(i,o)),a.close()}else d(an,"WebChannel received:",e),h.callOnMessage(e)}}),setTimeout(function(){h.callOnOpen()},0),h},t.prototype.makeUrl=function(t){var e=sn[t];v(void 0!==e,"Unknown REST mapping for: "+t);var n=[this.baseUrl,"/","v1"];return n.push("/projects/"),n.push(this.databaseId.projectId),n.push("/databases/"),n.push(this.databaseId.database),n.push("/documents"),n.push(":"),n.push(e),n.join("")},t}(),ln=function(){function t(){this.emptyByteString="",this.base64Available="undefined"!==typeof atob}return Object.defineProperty(t.prototype,"document",{get:function(){return"undefined"!==typeof document?document:null},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"window",{get:function(){return"undefined"!==typeof window?window:null},enumerable:!0,configurable:!0}),t.prototype.loadConnection=function(t){return Promise.resolve(new cn(t))},t.prototype.newSerializer=function(t){return new nn(t,{useProto3Json:!0})},t.prototype.formatJSON=function(t){return JSON.stringify(t)},t.prototype.atob=function(t){return atob(t)},t.prototype.btoa=function(t){return btoa(t)},t}();b.setPlatform(new ln);var hn,fn=function(){function t(t,e){var n=this;this.previousValue=t,e&&(e.sequenceNumberHandler=function(t){return n.setPreviousValue(t)},this.writeNewSequenceNumber=function(t){return e.writeSequenceNumber(t)})}return t.prototype.setPreviousValue=function(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue},t.prototype.next=function(){var t=++this.previousValue;return this.writeNewSequenceNumber&&this.writeNewSequenceNumber(t),t},t.INVALID=-1,t}(),pn=function(){return function(){var t=this;this.promise=new Promise(function(e,n){t.resolve=e,t.reject=n})}}();!function(t){t.All="all",t.ListenStreamIdle="listen_stream_idle",t.ListenStreamConnectionBackoff="listen_stream_connection_backoff",t.WriteStreamIdle="write_stream_idle",t.WriteStreamConnectionBackoff="write_stream_connection_backoff",t.OnlineStateTimeout="online_state_timeout",t.ClientMetadataRefresh="client_metadata_refresh",t.LruGarbageCollection="lru_garbage_collection"}(hn||(hn={}));var dn=function(){function t(t,e,n,r,i){this.asyncQueue=t,this.timerId=e,this.targetTimeMs=n,this.op=r,this.removalCallback=i,this.deferred=new pn,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.catch=this.deferred.promise.catch.bind(this.deferred.promise),this.deferred.promise.catch(function(t){})}return t.createAndSchedule=function(e,n,r,i,o){var a=new t(e,n,Date.now()+r,i,o);return a.start(r),a},t.prototype.start=function(t){var e=this;this.timerHandle=setTimeout(function(){return e.handleDelayElapsed()},t)},t.prototype.skipDelay=function(){return this.handleDelayElapsed()},t.prototype.cancel=function(t){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new E(w.CANCELLED,"Operation cancelled"+(t?": "+t:""))))},t.prototype.handleDelayElapsed=function(){var t=this;this.asyncQueue.enqueueAndForget(function(){return null!==t.timerHandle?(t.clearTimeout(),t.op().then(function(e){return t.deferred.resolve(e)})):Promise.resolve()})},t.prototype.clearTimeout=function(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)},t}(),mn=function(){function t(){this.tail=Promise.resolve(),this.delayedOperations=[],this.operationInProgress=!1}return t.prototype.enqueueAndForget=function(t){this.enqueue(t)},t.prototype.enqueue=function(t){var e=this;this.verifyNotFailed();var n=this.tail.then(function(){return e.operationInProgress=!0,t().catch(function(t){e.failure=t,e.operationInProgress=!1;var n=t.stack||t.message||"";throw m("INTERNAL UNHANDLED ERROR: ",n),n.indexOf("Firestore Test Simulated Error")<0&&setTimeout(function(){throw t},0),t}).then(function(t){return e.operationInProgress=!1,t})});return this.tail=n,n},t.prototype.enqueueAfterDelay=function(t,e,n){var r=this;this.verifyNotFailed(),v(e>=0,"Attempted to schedule an operation with a negative delay of "+e),v(!this.containsDelayedOperation(t),"Attempted to schedule multiple operations with timer id "+t+".");var i=dn.createAndSchedule(this,t,e,n,function(t){return r.removeDelayedOperation(t)});return this.delayedOperations.push(i),i},t.prototype.verifyNotFailed=function(){this.failure&&g("AsyncQueue is already failed: "+(this.failure.stack||this.failure.message))},t.prototype.verifyOperationInProgress=function(){v(this.operationInProgress,"verifyOpInProgress() called when no op in progress on this queue.")},t.prototype.drain=function(){return this.enqueue(function(){return Promise.resolve()})},t.prototype.containsDelayedOperation=function(t){for(var e=0,n=this.delayedOperations;e<n.length;e++){if(n[e].timerId===t)return!0}return!1},t.prototype.runDelayedOperationsEarly=function(t){var e=this;return this.drain().then(function(){v(t===hn.All||e.containsDelayedOperation(t),"Attempted to drain to missing operation "+t),e.delayedOperations.sort(function(t,e){return t.targetTimeMs-e.targetTimeMs});for(var n=0,r=e.delayedOperations;n<r.length;n++){var i=r[n];if(i.skipDelay(),t!==hn.All&&i.timerId===t)break}return e.drain()})},t.prototype.removeDelayedOperation=function(t){var e=this.delayedOperations.indexOf(t);v(e>=0,"Delayed operation not found."),this.delayedOperations.splice(e,1)},t}(),yn="\x01",gn="\x01",vn="\x10",bn="\x11";function _n(t){for(var e="",n=0;n<t.length;n++)e.length>0&&(e=En(e)),e=wn(t.get(n),e);return En(e)}function wn(t,e){for(var n=e,r=t.length,i=0;i<r;i++){var o=t.charAt(i);switch(o){case"\0":n+=yn+vn;break;case yn:n+=yn+bn;break;default:n+=o}}return n}function En(t){return t+yn+gn}function Sn(t){var e=t.length;if(v(e>=2,"Invalid path "+t),2===e)return v(t.charAt(0)===yn&&t.charAt(1)===gn,"Non-empty path "+t+" had length 2"),ct.EMPTY_PATH;for(var n=e-2,r=[],i="",o=0;o<e;){var a=t.indexOf(yn,o);switch((a<0||a>n)&&g('Invalid encoded resource path: "'+t+'"'),t.charAt(a+1)){case gn:var s=t.substring(o,a),u=void 0;0===i.length?u=s:(u=i+=s,i=""),r.push(u);break;case vn:i+=t.substring(o,a),i+="\0";break;case bn:i+=t.substring(o,a+1);break;default:g('Invalid encoded resource path: "'+t+'"')}o=a+2}return new ct(r)}var Tn=function(){function t(t,e,n,r){this.batchId=t,this.localWriteTime=e,this.baseMutations=n,this.mutations=r,v(r.length>0,"Cannot create an empty mutation batch")}return t.prototype.applyToRemoteDocument=function(t,e,n){e&&v(e.key.isEqual(t),"applyToRemoteDocument: key "+t+" should match maybeDoc key\n        "+e.key);var r=n.mutationResults;v(r.length===this.mutations.length,"Mismatch between mutations length\n      ("+this.mutations.length+") and mutation results length\n      ("+r.length+").");for(var i=0;i<this.mutations.length;i++){var o=this.mutations[i];if(o.key.isEqual(t)){var a=r[i];e=o.applyToRemoteDocument(e,a)}}return e},t.prototype.applyToLocalView=function(t,e){e&&v(e.key.isEqual(t),"applyToLocalDocument: key "+t+" should match maybeDoc key\n        "+e.key);for(var n=0,r=this.baseMutations;n<r.length;n++){(s=r[n]).key.isEqual(t)&&(e=s.applyToLocalView(e,e,this.localWriteTime))}for(var i=e,o=0,a=this.mutations;o<a.length;o++){var s;(s=a[o]).key.isEqual(t)&&(e=s.applyToLocalView(e,i,this.localWriteTime))}return e},t.prototype.applyToLocalDocumentSet=function(t){var e=this,n=t;return this.mutations.forEach(function(r){var i=e.applyToLocalView(r.key,t.get(r.key));i&&(n=n.insert(r.key,i))}),n},t.prototype.keys=function(){return this.mutations.reduce(function(t,e){return t.add(e.key)},Re())},t.prototype.isEqual=function(t){return this.batchId===t.batchId&&Y(this.mutations,t.mutations)&&Y(this.baseMutations,t.baseMutations)},t}(),Cn=function(){function t(t,e,n,r,i){this.batch=t,this.commitVersion=e,this.mutationResults=n,this.streamToken=r,this.docVersions=i}return t.from=function(e,n,r,i){v(e.mutations.length===r.length,"Mutations sent "+e.mutations.length+" must equal results received "+r.length);for(var o=De(),a=e.mutations,s=0;s<a.length;s++)o=o.insert(a[s].key,r[s].version);return new t(e,n,r,i,o)},t}(),kn=function(){function t(t){var e=this;this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(function(t){e.isDone=!0,e.result=t,e.nextCallback&&e.nextCallback(t)},function(t){e.isDone=!0,e.error=t,e.catchCallback&&e.catchCallback(t)})}return t.prototype.catch=function(t){return this.next(void 0,t)},t.prototype.next=function(e,n){var r=this;return this.callbackAttached&&g("Called next() or catch() twice for PersistencePromise"),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new t(function(t,i){r.nextCallback=function(n){r.wrapSuccess(e,n).next(t,i)},r.catchCallback=function(e){r.wrapFailure(n,e).next(t,i)}})},t.prototype.toPromise=function(){var t=this;return new Promise(function(e,n){t.next(e,n)})},t.prototype.wrapUserFunction=function(e){try{var n=e();return n instanceof t?n:t.resolve(n)}catch(r){return t.reject(r)}},t.prototype.wrapSuccess=function(e,n){return e?this.wrapUserFunction(function(){return e(n)}):t.resolve(n)},t.prototype.wrapFailure=function(e,n){return e?this.wrapUserFunction(function(){return e(n)}):t.reject(n)},t.resolve=function(e){return new t(function(t,n){t(e)})},t.reject=function(e){return new t(function(t,n){n(e)})},t.waitFor=function(e){return new t(function(t,n){var r=0,i=0,o=!1;e.forEach(function(e){++r,e.next(function(){++i,o&&i===r&&t()},function(t){return n(t)})}),o=!0,i===r&&t()})},t.or=function(e){for(var n=t.resolve(!1),r=function(e){n=n.next(function(n){return n?t.resolve(n):e()})},i=0,o=e;i<o.length;i++){r(o[i])}return n},t.forEach=function(t,e){var n=this,r=[];return t.forEach(function(t,i){r.push(e.call(n,t,i))}),this.waitFor(r)},t}(),xn=function(){function t(t,e,n,r){this.userId=t,this.serializer=e,this.indexManager=n,this.referenceDelegate=r,this.documentKeysByBatchId={}}return t.forUser=function(e,n,r,i){return v(""!==e.uid,"UserID must not be an empty string."),new t(e.isAuthenticated()?e.uid:"",n,r,i)},t.prototype.checkEmpty=function(t){var e=!0,n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Dn(t).iterate({index:lr.userMutationsIndex,range:n},function(t,n,r){e=!1,r.done()}).next(function(){return e})},t.prototype.acknowledgeBatch=function(t,e,n){return this.getMutationQueueMetadata(t).next(function(e){return e.lastStreamToken=Pn(n),Rn(t).put(e)})},t.prototype.getLastStreamToken=function(t){return this.getMutationQueueMetadata(t).next(function(t){return t.lastStreamToken})},t.prototype.setLastStreamToken=function(t,e){return this.getMutationQueueMetadata(t).next(function(n){return n.lastStreamToken=Pn(e),Rn(t).put(n)})},t.prototype.addMutationBatch=function(t,e,n,r){var i=this,o=Nn(t),a=Dn(t);return a.add({}).next(function(s){v("number"===typeof s,"Auto-generated key is not a number");var u=new Tn(s,e,n,r),c=i.serializer.toDbMutationBatch(i.userId,u);i.documentKeysByBatchId[s]=u.keys();for(var l=[],h=0,f=r;h<f.length;h++){var p=f[h],d=hr.key(i.userId,p.key.path,s);l.push(a.put(c)),l.push(o.put(d,hr.PLACEHOLDER)),l.push(i.indexManager.addToCollectionParentIndex(t,p.key.path.popLast()))}return kn.waitFor(l).next(function(){return u})})},t.prototype.lookupMutationBatch=function(t,e){var n=this;return Dn(t).get(e).next(function(t){return t?(v(t.userId===n.userId,"Unexpected user '"+t.userId+"' for mutation batch "+e),n.serializer.fromDbMutationBatch(t)):null})},t.prototype.lookupMutationKeys=function(t,e){var n=this;return this.documentKeysByBatchId[e]?kn.resolve(this.documentKeysByBatchId[e]):this.lookupMutationBatch(t,e).next(function(t){if(t){var r=t.keys();return n.documentKeysByBatchId[e]=r,r}return null})},t.prototype.getNextMutationBatchAfterBatchId=function(t,e){var n=this;return this.getMutationQueueMetadata(t).next(function(r){var i=e+1,o=IDBKeyRange.lowerBound([n.userId,i]),a=null;return Dn(t).iterate({index:lr.userMutationsIndex,range:o},function(t,e,r){e.userId===n.userId&&(v(e.batchId>=i,"Should have found mutation after "+i),a=n.serializer.fromDbMutationBatch(e)),r.done()}).next(function(){return a})})},t.prototype.getAllMutationBatches=function(t){var e=this,n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Dn(t).loadAll(lr.userMutationsIndex,n).next(function(t){return t.map(function(t){return e.serializer.fromDbMutationBatch(t)})})},t.prototype.getAllMutationBatchesAffectingDocumentKey=function(t,e){var n=this,r=hr.prefixForPath(this.userId,e.path),i=IDBKeyRange.lowerBound(r),o=[];return Nn(t).iterate({range:i},function(r,i,a){var s=r[0],u=r[1],c=r[2],l=Sn(u);if(s===n.userId&&e.path.isEqual(l))return Dn(t).get(c).next(function(t){if(!t)throw g("Dangling document-mutation reference found: "+r+" which points to "+c);v(t.userId===n.userId,"Unexpected user '"+t.userId+"' for mutation batch "+c),o.push(n.serializer.fromDbMutationBatch(t))});a.done()}).next(function(){return o})},t.prototype.getAllMutationBatchesAffectingDocumentKeys=function(t,e){var n=this,r=new ie(Q),i=[];return e.forEach(function(e){var o=hr.prefixForPath(n.userId,e.path),a=IDBKeyRange.lowerBound(o),s=Nn(t).iterate({range:a},function(t,i,o){var a=t[0],s=t[1],u=t[2],c=Sn(s);a===n.userId&&e.path.isEqual(c)?r=r.add(u):o.done()});i.push(s)}),kn.waitFor(i).next(function(){return n.lookupMutationBatches(t,r)})},t.prototype.getAllMutationBatchesAffectingQuery=function(t,e){var n=this;v(!e.isDocumentQuery(),"Document queries shouldn't go down this path"),v(!e.isCollectionGroupQuery(),"CollectionGroup queries should be handled in LocalDocumentsView");var r=e.path,i=r.length+1,o=hr.prefixForPath(this.userId,r),a=IDBKeyRange.lowerBound(o),s=new ie(Q);return Nn(t).iterate({range:a},function(t,e,o){var a=t[0],u=t[1],c=t[2],l=Sn(u);a===n.userId&&r.isPrefixOf(l)?l.length===i&&(s=s.add(c)):o.done()}).next(function(){return n.lookupMutationBatches(t,s)})},t.prototype.lookupMutationBatches=function(t,e){var n=this,r=[],i=[];return e.forEach(function(e){i.push(Dn(t).get(e).next(function(t){if(null===t)throw g("Dangling document-mutation reference found, which points to "+e);v(t.userId===n.userId,"Unexpected user '"+t.userId+"' for mutation batch "+e),r.push(n.serializer.fromDbMutationBatch(t))}))}),kn.waitFor(i).next(function(){return r})},t.prototype.removeMutationBatch=function(t,e){var n=this;return An(t.simpleDbTransaction,this.userId,e).next(function(r){return n.removeCachedMutationKeys(e.batchId),kn.forEach(r,function(e){return n.referenceDelegate.removeMutationReference(t,e)})})},t.prototype.removeCachedMutationKeys=function(t){delete this.documentKeysByBatchId[t]},t.prototype.performConsistencyCheck=function(t){var e=this;return this.checkEmpty(t).next(function(n){if(!n)return kn.resolve();var r=IDBKeyRange.lowerBound(hr.prefixForUser(e.userId)),i=[];return Nn(t).iterate({range:r},function(t,n,r){if(t[0]===e.userId){var o=Sn(t[1]);i.push(o)}else r.done()}).next(function(){v(0===i.length,"Document leak -- detected dangling mutation references when queue is empty. Dangling keys: "+i.map(function(t){return t.canonicalString()}))})})},t.prototype.containsKey=function(t,e){return In(t,this.userId,e)},t.prototype.getMutationQueueMetadata=function(t){var e=this;return Rn(t).get(this.userId).next(function(t){return t||new cr(e.userId,-1,"")})},t}();function In(t,e,n){var r=hr.prefixForPath(e,n.path),i=r[1],o=IDBKeyRange.lowerBound(r),a=!1;return Nn(t).iterate({range:o,keysOnly:!0},function(t,n,r){var o=t[0],s=t[1];t[2];o===e&&s===i&&(a=!0),r.done()}).next(function(){return a})}function An(t,e,n){var r=t.store(lr.store),i=t.store(hr.store),o=[],a=IDBKeyRange.only(n.batchId),s=0,u=r.iterate({range:a},function(t,e,n){return s++,n.delete()});o.push(u.next(function(){v(1===s,"Dangling document-mutation reference found: Missing batch "+n.batchId)}));for(var c=[],l=0,h=n.mutations;l<h.length;l++){var f=h[l],p=hr.key(e,f.key.path,n.batchId);o.push(i.delete(p)),c.push(f.key)}return kn.waitFor(o).next(function(){return c})}function Pn(t){return t instanceof Uint8Array?(v("YES"===Object({NODE_ENV:"production",PUBLIC_URL:"/gotsentiment"}).USE_MOCK_PERSISTENCE,"Persisting non-string stream tokens is only supported with mock persistence."),t.toString()):t}function Dn(t){return Br.getStore(t,lr.store)}function Nn(t){return Br.getStore(t,hr.store)}function Rn(t){return Br.getStore(t,cr.store)}var On,Mn=1;!function(t){t[t.QueryCache=0]="QueryCache",t[t.SyncEngine=1]="SyncEngine"}(On||(On={}));var Fn=function(){function t(t,e){this.generatorId=t,v((t&Mn)===t,"Generator ID "+t+" contains more than "+Mn+" reserved bits"),this.seek(void 0!==e?e:this.generatorId)}return t.prototype.next=function(){var t=this.nextId;return this.nextId+=1<<Mn,t},t.prototype.after=function(t){return this.seek(t+(1<<Mn)),this.next()},t.prototype.seek=function(t){v((t&Mn)===this.generatorId,"Cannot supply target ID from different generator ID"),this.nextId=t},t.forQueryCache=function(){return new t(On.QueryCache,2)},t.forSyncEngine=function(){return new t(On.SyncEngine)},t}(),Ln=function(){function t(t){this.db=t}return t.openOrCreate=function(e,n,r){return v(t.isAvailable(),"IndexedDB not supported in current environment."),d("SimpleDb","Opening database:",e),new kn(function(i,o){var a=window.indexedDB.open(e,n);a.onsuccess=function(e){var n=e.target.result;i(new t(n))},a.onblocked=function(){o(new E(w.FAILED_PRECONDITION,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},a.onerror=function(t){var e=t.target.error;"VersionError"===e.name?o(new E(w.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):o(e)},a.onupgradeneeded=function(t){d("SimpleDb",'Database "'+e+'" requires upgrade from version:',t.oldVersion);var n=t.target.result,i=new Bn(a.transaction);r.createOrUpgrade(n,i,t.oldVersion,or).next(function(){d("SimpleDb","Database upgrade to version "+or+" complete")})}}).toPromise()},t.delete=function(t){return d("SimpleDb","Removing database:",t),jn(window.indexedDB.deleteDatabase(t)).toPromise()},t.isAvailable=function(){if("undefined"===typeof window||null==window.indexedDB)return!1;if(void 0===window.navigator)return"YES"===Object({NODE_ENV:"production",PUBLIC_URL:"/gotsentiment"}).USE_MOCK_PERSISTENCE;var t=window.navigator.userAgent;return!(t.indexOf("MSIE ")>0||t.indexOf("Trident/")>0||t.indexOf("Edge/")>0)},t.getStore=function(t,e){return t.store(e)},t.prototype.runTransaction=function(t,e,n){var r=Bn.open(this.db,t,e),i=n(r).catch(function(t){return r.abort(t),kn.reject(t)}).toPromise();return i.catch(function(){}),r.completionPromise.then(function(){return i})},t.prototype.close=function(){this.db.close()},t}(),Vn=function(){function t(t){this.dbCursor=t,this.shouldStop=!1,this.nextKey=null}return Object.defineProperty(t.prototype,"isDone",{get:function(){return this.shouldStop},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"skipToKey",{get:function(){return this.nextKey},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"cursor",{set:function(t){this.dbCursor=t},enumerable:!0,configurable:!0}),t.prototype.done=function(){this.shouldStop=!0},t.prototype.skip=function(t){this.nextKey=t},t.prototype.delete=function(){return jn(this.dbCursor.delete())},t}(),Bn=function(){function t(t){var e=this;this.transaction=t,this.aborted=!1,this.completionDeferred=new pn,this.transaction.oncomplete=function(){e.completionDeferred.resolve()},this.transaction.onabort=function(){t.error?e.completionDeferred.reject(t.error):e.completionDeferred.resolve()},this.transaction.onerror=function(t){e.completionDeferred.reject(t.target.error)}}return t.open=function(e,n,r){return new t(e.transaction(r,n))},Object.defineProperty(t.prototype,"completionPromise",{get:function(){return this.completionDeferred.promise},enumerable:!0,configurable:!0}),t.prototype.abort=function(t){t&&this.completionDeferred.reject(t),this.aborted||(d("SimpleDb","Aborting transaction:",t?t.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())},t.prototype.store=function(t){var e=this.transaction.objectStore(t);return v(!!e,"Object store not part of transaction: "+t),new Un(e)},t}(),Un=function(){function t(t){this.store=t}return t.prototype.put=function(t,e){var n;return void 0!==e?(d("SimpleDb","PUT",this.store.name,t,e),n=this.store.put(e,t)):(d("SimpleDb","PUT",this.store.name,"<auto-key>",t),n=this.store.put(t)),jn(n)},t.prototype.add=function(t){return d("SimpleDb","ADD",this.store.name,t,t),jn(this.store.add(t))},t.prototype.get=function(t){var e=this;return jn(this.store.get(t)).next(function(n){return void 0===n&&(n=null),d("SimpleDb","GET",e.store.name,t,n),n})},t.prototype.delete=function(t){return d("SimpleDb","DELETE",this.store.name,t),jn(this.store.delete(t))},t.prototype.count=function(){return d("SimpleDb","COUNT",this.store.name),jn(this.store.count())},t.prototype.loadAll=function(t,e){var n=this.cursor(this.options(t,e)),r=[];return this.iterateCursor(n,function(t,e){r.push(e)}).next(function(){return r})},t.prototype.deleteAll=function(t,e){d("SimpleDb","DELETE ALL",this.store.name);var n=this.options(t,e);n.keysOnly=!1;var r=this.cursor(n);return this.iterateCursor(r,function(t,e,n){return n.delete()})},t.prototype.iterate=function(t,e){var n;e?n=t:(n={},e=t);var r=this.cursor(n);return this.iterateCursor(r,e)},t.prototype.iterateSerial=function(t){var e=this.cursor({});return new kn(function(n,r){e.onerror=function(t){r(t.target.error)},e.onsuccess=function(e){var r=e.target.result;r?t(r.primaryKey,r.value).next(function(t){t?r.continue():n()}):n()}})},t.prototype.iterateCursor=function(t,e){var n=[];return new kn(function(r,i){t.onerror=function(t){i(t.target.error)},t.onsuccess=function(t){var i=t.target.result;if(i){var o=new Vn(i),a=e(i.primaryKey,i.value,o);if(a instanceof kn){var s=a.catch(function(t){return o.done(),kn.reject(t)});n.push(s)}o.isDone?r():null===o.skipToKey?i.continue():i.continue(o.skipToKey)}else r()}}).next(function(){return kn.waitFor(n)})},t.prototype.options=function(t,e){var n=void 0;return void 0!==t&&("string"===typeof t?n=t:(v(void 0===e,"3rd argument must not be defined if 2nd is a range."),e=t)),{index:n,range:e}},t.prototype.cursor=function(t){var e="next";if(t.reverse&&(e="prev"),t.index){var n=this.store.index(t.index);return t.keysOnly?n.openKeyCursor(t.range,e):n.openCursor(t.range,e)}return this.store.openCursor(t.range,e)},t}();function jn(t){return new kn(function(e,n){t.onsuccess=function(t){var n=t.target.result;e(n)},t.onerror=function(t){n(t.target.error)}})}var qn=function(){function t(t,e){this.referenceDelegate=t,this.serializer=e,this.targetIdGenerator=Fn.forQueryCache()}return t.prototype.allocateTargetId=function(t){var e=this;return this.retrieveMetadata(t).next(function(n){return n.highestTargetId=e.targetIdGenerator.after(n.highestTargetId),e.saveMetadata(t,n).next(function(){return n.highestTargetId})})},t.prototype.getLastRemoteSnapshotVersion=function(t){return this.retrieveMetadata(t).next(function(t){return ee.fromTimestamp(new it(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds))})},t.prototype.getHighestSequenceNumber=function(t){return zn(t.simpleDbTransaction)},t.prototype.setTargetsMetadata=function(t,e,n){var r=this;return this.retrieveMetadata(t).next(function(i){return i.highestListenSequenceNumber=e,n&&(i.lastRemoteSnapshotVersion=n.toTimestamp()),e>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=e),r.saveMetadata(t,i)})},t.prototype.addQueryData=function(t,e){var n=this;return this.saveQueryData(t,e).next(function(){return n.retrieveMetadata(t).next(function(r){return r.targetCount+=1,n.updateMetadataFromQueryData(e,r),n.saveMetadata(t,r)})})},t.prototype.updateQueryData=function(t,e){return this.saveQueryData(t,e)},t.prototype.removeQueryData=function(t,e){var n=this;return this.removeMatchingKeysForTargetId(t,e.targetId).next(function(){return Gn(t).delete(e.targetId)}).next(function(){return n.retrieveMetadata(t)}).next(function(e){return v(e.targetCount>0,"Removing from an empty query cache"),e.targetCount-=1,n.saveMetadata(t,e)})},t.prototype.removeTargets=function(t,e,n){var r=this,i=0,o=[];return Gn(t).iterate(function(a,s){var u=r.serializer.fromDbTarget(s);u.sequenceNumber<=e&&void 0===n[u.targetId]&&(i++,o.push(r.removeQueryData(t,u)))}).next(function(){return kn.waitFor(o)}).next(function(){return i})},t.prototype.forEachTarget=function(t,e){var n=this;return Gn(t).iterate(function(t,r){var i=n.serializer.fromDbTarget(r);e(i)})},t.prototype.retrieveMetadata=function(t){return Wn(t.simpleDbTransaction)},t.prototype.saveMetadata=function(t,e){return(n=t,Br.getStore(n,vr.store)).put(vr.key,e);var n},t.prototype.saveQueryData=function(t,e){return Gn(t).put(this.serializer.toDbTarget(e))},t.prototype.updateMetadataFromQueryData=function(t,e){var n=!1;return t.targetId>e.highestTargetId&&(e.highestTargetId=t.targetId,n=!0),t.sequenceNumber>e.highestListenSequenceNumber&&(e.highestListenSequenceNumber=t.sequenceNumber,n=!0),n},t.prototype.getQueryCount=function(t){return this.retrieveMetadata(t).next(function(t){return t.targetCount})},t.prototype.getQueryData=function(t,e){var n=this,r=e.canonicalId(),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]),o=null;return Gn(t).iterate({range:i,index:yr.queryTargetsIndexName},function(t,r,i){var a=n.serializer.fromDbTarget(r);e.isEqual(a.query)&&(o=a,i.done())}).next(function(){return o})},t.prototype.addMatchingKeys=function(t,e,n){var r=this,i=[],o=Hn(t);return e.forEach(function(e){var a=_n(e.path);i.push(o.put(new gr(n,a))),i.push(r.referenceDelegate.addReference(t,e))}),kn.waitFor(i)},t.prototype.removeMatchingKeys=function(t,e,n){var r=this,i=Hn(t);return kn.forEach(e,function(e){var o=_n(e.path);return kn.waitFor([i.delete([n,o]),r.referenceDelegate.removeReference(t,e)])})},t.prototype.removeMatchingKeysForTargetId=function(t,e){var n=Hn(t),r=IDBKeyRange.bound([e],[e+1],!1,!0);return n.delete(r)},t.prototype.getMatchingKeysForTargetId=function(t,e){var n=IDBKeyRange.bound([e],[e+1],!1,!0),r=Hn(t),i=Re();return r.iterate({range:n,keysOnly:!0},function(t,e,n){var r=Sn(t[1]),o=new ft(r);i=i.add(o)}).next(function(){return i})},t.prototype.containsKey=function(t,e){var n=_n(e.path),r=IDBKeyRange.bound([n],[X(n)],!1,!0),i=0;return Hn(t).iterate({index:gr.documentTargetsIndex,keysOnly:!0,range:r},function(t,e,n){var r=t[0];t[1];0!==r&&(i++,n.done())}).next(function(){return i>0})},t.prototype.getQueryDataForTarget=function(t,e){var n=this;return Gn(t).get(e).next(function(t){return t?n.serializer.fromDbTarget(t):null})},t}();function Gn(t){return Br.getStore(t,yr.store)}function Wn(t){return Ln.getStore(t,vr.store).get(vr.key).next(function(t){return v(null!==t,"Missing metadata row."),t})}function zn(t){return Wn(t).next(function(t){return t.highestListenSequenceNumber})}function Hn(t){return Br.getStore(t,gr.store)}var Kn=function(){function t(t){this.mapKeyFn=t,this.inner={}}return t.prototype.get=function(t){var e=this.mapKeyFn(t),n=this.inner[e];if(void 0!==n)for(var r=0,i=n;r<i.length;r++){var o=i[r],a=o[0],s=o[1];if(a.isEqual(t))return s}},t.prototype.has=function(t){return void 0!==this.get(t)},t.prototype.set=function(t,e){var n=this.mapKeyFn(t),r=this.inner[n];if(void 0!==r){for(var i=0;i<r.length;i++)if(r[i][0].isEqual(t))return void(r[i]=[t,e]);r.push([t,e])}else this.inner[n]=[[t,e]]},t.prototype.delete=function(t){var e=this.mapKeyFn(t),n=this.inner[e];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(n[r][0].isEqual(t))return 1===n.length?delete this.inner[e]:n.splice(r,1),!0;return!1},t.prototype.forEach=function(t){x(this.inner,function(e,n){for(var r=0,i=n;r<i.length;r++){var o=i[r],a=o[0],s=o[1];t(a,s)}})},t.prototype.isEmpty=function(){return I(this.inner)},t}(),Qn=function(){function t(){this.changes=ke(),this.documentSizes=new Kn(function(t){return t.toString()})}return t.prototype.addEntry=function(t){var e=this.assertChanges();this.changes=e.insert(t.key,t)},t.prototype.getEntry=function(t,e){var n=this,r=this.assertChanges().get(e);return r?kn.resolve(r):this.getFromCache(t,e).next(function(t){return null===t?(n.documentSizes.set(e,0),null):(n.documentSizes.set(e,t.size),t.maybeDocument)})},t.prototype.getEntries=function(t,e){var n=this;return this.getAllFromCache(t,e).next(function(t){var e=t.maybeDocuments;return t.sizeMap.forEach(function(t,e){n.documentSizes.set(t,e)}),e})},t.prototype.apply=function(t){var e=this.applyChanges(t);return this.changes=null,e},t.prototype.assertChanges=function(){return v(null!==this.changes,"Changes have already been applied."),this.changes},t}(),Yn="The remote document changelog no longer contains all changes for all local query views. It may be necessary to rebuild these views.",Xn=function(){function t(t,e,n){this.serializer=t,this.indexManager=e,this.keepDocumentChangeLog=n,this._lastProcessedDocumentChangeId=0}return Object.defineProperty(t.prototype,"lastProcessedDocumentChangeId",{get:function(){return this._lastProcessedDocumentChangeId},enumerable:!0,configurable:!0}),t.prototype.start=function(t){var e=Ln.getStore(t,wr.store);return this.synchronizeLastDocumentChangeId(e)},t.prototype.addEntries=function(t,e,n){var r=[];if(e.length>0){for(var i=Zn(t),o=Re(),a=0,s=e;a<s.length;a++){var u=s[a],c=u.key,l=u.doc;r.push(i.put(er(c),l)),o=o.add(c),r.push(this.indexManager.addToCollectionParentIndex(t,c.path.popLast()))}this.keepDocumentChangeLog&&r.push(tr(t).put({changes:this.serializer.toDbResourcePaths(o)})),r.push(this.updateSize(t,n))}return kn.waitFor(r)},t.prototype.removeEntry=function(t,e){var n=Zn(t),r=er(e);return n.get(r).next(function(t){return t?n.delete(r).next(function(){return nr(t)}):kn.resolve(0)})},t.prototype.getEntry=function(t,e){var n=this;return Zn(t).get(er(e)).next(function(t){return t?n.serializer.fromDbRemoteDocument(t):null})},t.prototype.getSizedEntry=function(t,e){var n=this;return Zn(t).get(er(e)).next(function(t){return t?{maybeDocument:n.serializer.fromDbRemoteDocument(t),size:nr(t)}:null})},t.prototype.getEntries=function(t,e){var n=this,r=xe();return this.forEachDbEntry(t,e,function(t,e){r=e?r.insert(t,n.serializer.fromDbRemoteDocument(e)):r.insert(t,null)}).next(function(){return r})},t.prototype.getSizedEntries=function(t,e){var n=this,r=xe(),i=new gt(ft.comparator);return this.forEachDbEntry(t,e,function(t,e){e?(r=r.insert(t,n.serializer.fromDbRemoteDocument(e)),i=i.insert(t,nr(e))):(r=r.insert(t,null),i=i.insert(t,0))}).next(function(){return{maybeDocuments:r,sizeMap:i}})},t.prototype.forEachDbEntry=function(t,e,n){if(e.isEmpty())return kn.resolve();var r=IDBKeyRange.bound(e.first().path.toArray(),e.last().path.toArray()),i=e.getIterator(),o=i.getNext();return Zn(t).iterate({range:r},function(t,e,r){for(var a=ft.fromSegments(t);o&&ft.comparator(o,a)<0;)n(o,null),o=i.getNext();o&&o.isEqual(a)&&(n(o,e),o=i.hasNext()?i.getNext():null),o?r.skip(o.path.toArray()):r.done()}).next(function(){for(;o;)n(o,null),o=i.hasNext()?i.getNext():null})},t.prototype.getDocumentsMatchingQuery=function(t,e){var n=this;v(!e.isCollectionGroupQuery(),"CollectionGroup queries should be handled in LocalDocumentsView");var r=Ae(),i=e.path.length+1,o=e.path.toArray(),a=IDBKeyRange.lowerBound(o);return Zn(t).iterate({range:a},function(t,o,a){if(t.length===i){var s=n.serializer.fromDbRemoteDocument(o);e.path.isPrefixOf(s.key.path)?s instanceof dt&&e.matches(s)&&(r=r.insert(s.key,s)):a.done()}}).next(function(){return r})},t.prototype.getNewDocumentChanges=function(t){var e=this;v(this.keepDocumentChangeLog,"Can only call getNewDocumentChanges() when document change log is enabled");var n=Re(),r=ke(),i=IDBKeyRange.lowerBound(this._lastProcessedDocumentChangeId+1),o=!0,a=tr(t);return a.iterate({range:i},function(t,r){if(o&&(o=!1,e._lastProcessedDocumentChangeId+1!==r.id))return e.synchronizeLastDocumentChangeId(a).next(function(){return kn.reject(new E(w.DATA_LOSS,Yn))});n=n.unionWith(e.serializer.fromDbResourcePaths(r.changes)),e._lastProcessedDocumentChangeId=r.id}).next(function(){var i=[];return n.forEach(function(n){i.push(e.getEntry(t,n).next(function(t){var e=t||new mt(n,ee.forDeletedDoc());r=r.insert(n,e)}))}),kn.waitFor(i)}).next(function(){return r})},t.prototype.removeDocumentChangesThroughChangeId=function(t,e){var n=IDBKeyRange.upperBound(e);return tr(t).delete(n)},t.prototype.synchronizeLastDocumentChangeId=function(t){var e=this;return this._lastProcessedDocumentChangeId=0,t.iterate({keysOnly:!0,reverse:!0},function(t,n,r){e._lastProcessedDocumentChangeId=t,r.done()})},t.prototype.newChangeBuffer=function(){return new Jn(this)},t.prototype.getSize=function(t){return this.getMetadata(t).next(function(t){return t.byteSize})},t.prototype.getMetadata=function(t){return $n(t).get(mr.key).next(function(t){return v(!!t,"Missing document cache metadata"),t})},t.prototype.setMetadata=function(t,e){return $n(t).put(mr.key,e)},t.prototype.updateSize=function(t,e){var n=this;return this.getMetadata(t).next(function(r){return r.byteSize+=e,n.setMetadata(t,r)})},t}();function $n(t){return Br.getStore(t,mr.store)}var Jn=function(t){function e(e){var n=t.call(this)||this;return n.documentCache=e,n}return s.__extends(e,t),e.prototype.applyChanges=function(t){var e=this,n=this.assertChanges(),r=0,i=[];return n.forEach(function(t,n){var o=e.documentCache.serializer.toDbRemoteDocument(n),a=e.documentSizes.get(t);v(void 0!==a,"Attempting to change document "+t.toString()+" without having read it first");var s=nr(o);r+=s-a,i.push({key:t,doc:o})}),this.documentCache.addEntries(t,i,r)},e.prototype.getFromCache=function(t,e){return this.documentCache.getSizedEntry(t,e)},e.prototype.getAllFromCache=function(t,e){return this.documentCache.getSizedEntries(t,e)},e}(Qn);function Zn(t){return Br.getStore(t,dr.store)}function tr(t){return Br.getStore(t,wr.store)}function er(t){return t.path.toArray()}function nr(t){var e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw g("Unknown remote document type");e=t.noDocument}return JSON.stringify(e).length}var rr=function(){function t(){this.collectionParentIndex=new ir}return t.prototype.addToCollectionParentIndex=function(t,e){return this.collectionParentIndex.add(e),kn.resolve()},t.prototype.getCollectionParents=function(t,e){return kn.resolve(this.collectionParentIndex.getEntries(e))},t}(),ir=function(){function t(){this.index={}}return t.prototype.add=function(t){v(t.length%2===1,"Expected a collection path.");var e=t.lastSegment(),n=t.popLast(),r=this.index[e]||new ie(ct.comparator),i=!r.has(n);return this.index[e]=r.add(n),i},t.prototype.getEntries=function(t){return(this.index[t]||new ie(ct.comparator)).toArray()},t}(),or=8,ar=function(){function t(t){this.serializer=t}return t.prototype.createOrUpgrade=function(t,e,n,r){var i=this;v(n<r&&n>=0&&r<=or,"Unexpected schema upgrade from v"+n+" to v{toVersion}."),n<1&&r>=1&&(function(t){t.createObjectStore(ur.store)}(t),function(t){t.createObjectStore(cr.store,{keyPath:cr.keyPath}),t.createObjectStore(lr.store,{keyPath:lr.keyPath,autoIncrement:!0}).createIndex(lr.userMutationsIndex,lr.userMutationsKeyPath,{unique:!0}),t.createObjectStore(hr.store)}(t),_r(t),function(t){t.createObjectStore(dr.store)}(t));var o=kn.resolve();return n<3&&r>=3&&(0!==n&&(!function(t){t.deleteObjectStore(gr.store),t.deleteObjectStore(yr.store),t.deleteObjectStore(vr.store)}(t),_r(t)),o=o.next(function(){return function(t){var e=t.store(vr.store),n=new vr(0,0,ee.MIN.toTimestamp(),0);return e.put(vr.key,n)}(e)})),n<4&&r>=4&&(0!==n&&(o=o.next(function(){return function(t,e){return e.store(lr.store).loadAll().next(function(n){t.deleteObjectStore(lr.store);var r=t.createObjectStore(lr.store,{keyPath:lr.keyPath,autoIncrement:!0});r.createIndex(lr.userMutationsIndex,lr.userMutationsKeyPath,{unique:!0});var i=e.store(lr.store),o=n.map(function(t){return i.put(t)});return kn.waitFor(o)})}(t,e)})),o=o.next(function(){!function(t){t.createObjectStore(Er.store,{keyPath:Er.keyPath})}(t),function(t){t.createObjectStore(wr.store,{keyPath:"id",autoIncrement:!0})}(t)})),n<5&&r>=5&&(o=o.next(function(){return i.removeAcknowledgedMutations(e)})),n<6&&r>=6&&(o=o.next(function(){return function(t){t.createObjectStore(mr.store)}(t),i.addDocumentGlobal(e)})),n<7&&r>=7&&(o=o.next(function(){return i.ensureSequenceNumbers(e)})),n<8&&r>=8&&(o=o.next(function(){return i.createCollectionParentIndex(t,e)})),o},t.prototype.addDocumentGlobal=function(t){var e=0;return t.store(dr.store).iterate(function(t,n){e+=nr(n)}).next(function(){var n=new mr(e);return t.store(mr.store).put(mr.key,n)})},t.prototype.removeAcknowledgedMutations=function(t){var e=this,n=t.store(cr.store),r=t.store(lr.store);return n.loadAll().next(function(n){return kn.forEach(n,function(n){var i=IDBKeyRange.bound([n.userId,-1],[n.userId,n.lastAcknowledgedBatchId]);return r.loadAll(lr.userMutationsIndex,i).next(function(r){return kn.forEach(r,function(r){v(r.userId===n.userId,"Cannot process batch "+r.batchId+" from unexpected user");var i=e.serializer.fromDbMutationBatch(r);return An(t,n.userId,i).next(function(){})})})})})},t.prototype.ensureSequenceNumbers=function(t){var e=t.store(gr.store),n=t.store(dr.store);return zn(t).next(function(t){var r=[];return n.iterate(function(n,i){var o=new ct(n),a=function(t){return[0,_n(t)]}(o);r.push(e.get(a).next(function(n){return n?kn.resolve():function(n){return e.put(new gr(0,_n(n),t))}(o)}))}).next(function(){return kn.waitFor(r)})})},t.prototype.createCollectionParentIndex=function(t,e){t.createObjectStore(br.store,{keyPath:br.keyPath});var n=e.store(br.store),r=new ir,i=function(t){if(r.add(t)){var e=t.lastSegment(),i=t.popLast();return n.put({collectionId:e,parent:_n(i)})}};return e.store(dr.store).iterate({keysOnly:!0},function(t,e){var n=new ct(t);return i(n.popLast())}).next(function(){return e.store(hr.store).iterate({keysOnly:!0},function(t,e){t[0];var n=t[1],r=(t[2],Sn(n));return i(r.popLast())})})},t}();var sr=function(){return function(t,e){this.seconds=t,this.nanoseconds=e}}(),ur=function(){function t(t,e,n){this.ownerId=t,this.allowTabSynchronization=e,this.leaseTimestampMs=n}return t.store="owner",t.key="owner",t}();var cr=function(){function t(t,e,n){this.userId=t,this.lastAcknowledgedBatchId=e,this.lastStreamToken=n}return t.store="mutationQueues",t.keyPath="userId",t}(),lr=function(){function t(t,e,n,r,i){this.userId=t,this.batchId=e,this.localWriteTimeMs=n,this.baseMutations=r,this.mutations=i}return t.store="mutations",t.keyPath="batchId",t.userMutationsIndex="userMutationsIndex",t.userMutationsKeyPath=["userId","batchId"],t}();var hr=function(){function t(){}return t.prefixForUser=function(t){return[t]},t.prefixForPath=function(t,e){return[t,_n(e)]},t.key=function(t,e,n){return[t,_n(e),n]},t.store="documentMutations",t.PLACEHOLDER=new t,t}();var fr=function(){return function(t,e){this.path=t,this.readTime=e}}(),pr=function(){return function(t,e){this.path=t,this.version=e}}(),dr=function(){function t(t,e,n,r){this.unknownDocument=t,this.noDocument=e,this.document=n,this.hasCommittedMutations=r}return t.store="remoteDocuments",t}(),mr=function(){function t(t){this.byteSize=t}return t.store="remoteDocumentGlobal",t.key="remoteDocumentGlobalKey",t}();var yr=function(){function t(t,e,n,r,i,o){this.targetId=t,this.canonicalId=e,this.readTime=n,this.resumeToken=r,this.lastListenSequenceNumber=i,this.query=o}return t.store="targets",t.keyPath="targetId",t.queryTargetsIndexName="queryTargetsIndex",t.queryTargetsKeyPath=["canonicalId","targetId"],t}(),gr=function(){function t(t,e,n){this.targetId=t,this.path=e,this.sequenceNumber=n,v(0===t===(void 0!==n),"A target-document row must either have targetId == 0 and a defined sequence number, or a non-zero targetId and no sequence number")}return t.store="targetDocuments",t.keyPath=["targetId","path"],t.documentTargetsIndex="documentTargetsIndex",t.documentTargetsKeyPath=["path","targetId"],t}(),vr=function(){function t(t,e,n,r){this.highestTargetId=t,this.highestListenSequenceNumber=e,this.lastRemoteSnapshotVersion=n,this.targetCount=r}return t.key="targetGlobalKey",t.store="targetGlobal",t}(),br=function(){function t(t,e){this.collectionId=t,this.parent=e}return t.store="collectionParents",t.keyPath=["collectionId","parent"],t}();function _r(t){t.createObjectStore(gr.store,{keyPath:gr.keyPath}).createIndex(gr.documentTargetsIndex,gr.documentTargetsKeyPath,{unique:!0}),t.createObjectStore(yr.store,{keyPath:yr.keyPath}).createIndex(yr.queryTargetsIndexName,yr.queryTargetsKeyPath,{unique:!0}),t.createObjectStore(vr.store)}var wr=function(){function t(t){this.changes=t}return t.store="remoteDocumentChanges",t.keyPath="id",t}();var Er=function(){function t(t,e,n,r,i){this.clientId=t,this.updateTimeMs=e,this.networkEnabled=n,this.inForeground=r,this.lastProcessedDocumentChangeId=i}return t.store="clientMetadata",t.keyPath="clientId",t}();var Sr=[cr.store,lr.store,hr.store,dr.store,yr.store,ur.store,vr.store,gr.store].concat([Er.store,wr.store]).concat([mr.store]).concat([br.store]),Tr=function(){function t(){this.collectionParentsCache=new ir}return t.prototype.addToCollectionParentIndex=function(t,e){if(v(e.length%2===1,"Expected a collection path."),this.collectionParentsCache.add(e)){v(e.length>=1,"Invalid collection path.");var n=e.lastSegment(),r=e.popLast();return Cr(t).put({collectionId:n,parent:_n(r)})}return kn.resolve()},t.prototype.getCollectionParents=function(t,e){var n=[],r=IDBKeyRange.bound([e,""],[X(e),""],!1,!0);return Cr(t).loadAll(r).next(function(t){for(var r=0,i=t;r<i.length;r++){var o=i[r];if(o.collectionId!==e)break;n.push(Sn(o.parent))}return n})},t}();function Cr(t){return Br.getStore(t,br.store)}var kr=function(){function t(t){this.remoteSerializer=t}return t.prototype.fromDbRemoteDocument=function(t){if(t.document)return this.remoteSerializer.fromDocument(t.document,!!t.hasCommittedMutations);if(t.noDocument){var e=ft.fromSegments(t.noDocument.path),n=this.fromDbTimestamp(t.noDocument.readTime);return new mt(e,n,{hasCommittedMutations:!!t.hasCommittedMutations})}if(t.unknownDocument){e=ft.fromSegments(t.unknownDocument.path),n=this.fromDbTimestamp(t.unknownDocument.version);return new yt(e,n)}return g("Unexpected DbRemoteDocument")},t.prototype.toDbRemoteDocument=function(t){if(t instanceof dt){var e=t.proto?t.proto:this.remoteSerializer.toDocument(t),n=t.hasCommittedMutations;return new dr(null,null,e,n)}if(t instanceof mt){var r=t.key.path.toArray(),i=this.toDbTimestamp(t.version);n=t.hasCommittedMutations;return new dr(null,new fr(r,i),null,n)}if(t instanceof yt){r=t.key.path.toArray(),i=this.toDbTimestamp(t.version);return new dr(new pr(r,i),null,null,!0)}return g("Unexpected MaybeDocumment")},t.prototype.toDbTimestamp=function(t){var e=t.toTimestamp();return new sr(e.seconds,e.nanoseconds)},t.prototype.fromDbTimestamp=function(t){var e=new it(t.seconds,t.nanoseconds);return ee.fromTimestamp(e)},t.prototype.toDbMutationBatch=function(t,e){var n=this,r=e.baseMutations.map(function(t){return n.remoteSerializer.toMutation(t)}),i=e.mutations.map(function(t){return n.remoteSerializer.toMutation(t)});return new lr(t,e.batchId,e.localWriteTime.toMillis(),r,i)},t.prototype.fromDbMutationBatch=function(t){var e=this,n=(t.baseMutations||[]).map(function(t){return e.remoteSerializer.fromMutation(t)}),r=t.mutations.map(function(t){return e.remoteSerializer.fromMutation(t)}),i=it.fromMillis(t.localWriteTimeMs);return new Tn(t.batchId,i,n,r)},t.prototype.toDbResourcePaths=function(t){var e=[];return t.forEach(function(t){e.push(_n(t.path))}),e},t.prototype.fromDbResourcePaths=function(t){for(var e=Re(),n=0,r=t;n<r.length;n++){var i=r[n];e=e.add(new ft(Sn(i)))}return e},t.prototype.fromDbTarget=function(t){var e,n=this.fromDbTimestamp(t.readTime);return e=void 0!==t.query.documents?this.remoteSerializer.fromDocumentsTarget(t.query):this.remoteSerializer.fromQueryTarget(t.query),new re(e,t.targetId,Gt.Listen,t.lastListenSequenceNumber,n,t.resumeToken)},t.prototype.toDbTarget=function(t){v(Gt.Listen===t.purpose,"Only queries with purpose "+Gt.Listen+" may be stored, got "+t.purpose);var e,n,r=this.toDbTimestamp(t.snapshotVersion);return e=t.query.isDocumentQuery()?this.remoteSerializer.toDocumentsTarget(t.query):this.remoteSerializer.toQueryTarget(t.query),t.resumeToken instanceof Uint8Array?(v("YES"===Object({NODE_ENV:"production",PUBLIC_URL:"/gotsentiment"}).USE_MOCK_PERSISTENCE,"Persisting non-string stream tokens is only supported with mock persistence ."),n=t.resumeToken.toString()):n=t.resumeToken,new yr(t.targetId,t.query.canonicalId(),r,n,t.sequenceNumber,e)},t}();function xr(t,e){var n=t[0],r=t[1],i=e[0],o=e[1],a=Q(n,i);return 0===a?Q(r,o):a}var Ir=function(){function t(t){this.maxElements=t,this.buffer=new ie(xr),this.previousIndex=0}return t.prototype.nextIndex=function(){return++this.previousIndex},t.prototype.addElement=function(t){var e=[t,this.nextIndex()];if(this.buffer.size<this.maxElements)this.buffer=this.buffer.add(e);else{var n=this.buffer.last();xr(e,n)<0&&(this.buffer=this.buffer.delete(n).add(e))}},Object.defineProperty(t.prototype,"maxValue",{get:function(){return this.buffer.last()[0]},enumerable:!0,configurable:!0}),t}(),Ar={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Pr=function(){function t(t,e,n){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=e,this.maximumSequenceNumbersToCollect=n}return t.withCacheSize=function(e){return new t(e,t.DEFAULT_COLLECTION_PERCENTILE,t.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)},t.COLLECTION_DISABLED=-1,t.MINIMUM_CACHE_SIZE_BYTES=1048576,t.DEFAULT_CACHE_SIZE_BYTES=41943040,t.DEFAULT_COLLECTION_PERCENTILE=10,t.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,t.DEFAULT=new t(t.DEFAULT_CACHE_SIZE_BYTES,t.DEFAULT_COLLECTION_PERCENTILE,t.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),t.DISABLED=new t(t.COLLECTION_DISABLED,0,0),t}(),Dr=function(){function t(t,e,n){this.garbageCollector=t,this.asyncQueue=e,this.localStore=n,this.gcTask=null}return t.prototype.start=function(){v(null===this.gcTask,"Cannot start an already started LruScheduler"),this.garbageCollector.params.cacheSizeCollectionThreshold!==Pr.COLLECTION_DISABLED&&this.scheduleGC()},t.prototype.stop=function(){this.gcTask&&(this.gcTask.cancel(),this.gcTask=null)},Object.defineProperty(t.prototype,"started",{get:function(){return null!==this.gcTask},enumerable:!0,configurable:!0}),t.prototype.scheduleGC=function(){var t=this;v(null===this.gcTask,"Cannot schedule GC while a task is pending");var e=this.hasRun?3e5:6e4;d("LruGarbageCollector","Garbage collection scheduled in "+e+"ms"),this.gcTask=this.asyncQueue.enqueueAfterDelay(hn.LruGarbageCollection,e,function(){return t.gcTask=null,t.hasRun=!0,t.localStore.collectGarbage(t.garbageCollector).then(function(){return t.scheduleGC()}).catch(Ur)})},t}(),Nr=function(){function t(t,e){this.delegate=t,this.params=e}return t.prototype.calculateTargetCount=function(t,e){return this.delegate.getSequenceNumberCount(t).next(function(t){return Math.floor(e/100*t)})},t.prototype.nthSequenceNumber=function(t,e){var n=this;if(0===e)return kn.resolve(fn.INVALID);var r=new Ir(e);return this.delegate.forEachTarget(t,function(t){return r.addElement(t.sequenceNumber)}).next(function(){return n.delegate.forEachOrphanedDocumentSequenceNumber(t,function(t){return r.addElement(t)})}).next(function(){return r.maxValue})},t.prototype.removeTargets=function(t,e,n){return this.delegate.removeTargets(t,e,n)},t.prototype.removeOrphanedDocuments=function(t,e){return this.delegate.removeOrphanedDocuments(t,e)},t.prototype.collect=function(t,e){var n=this;return this.params.cacheSizeCollectionThreshold===Pr.COLLECTION_DISABLED?(d("LruGarbageCollector","Garbage collection skipped; disabled"),kn.resolve(Ar)):this.getCacheSize(t).next(function(r){return r<n.params.cacheSizeCollectionThreshold?(d("LruGarbageCollector","Garbage collection skipped; Cache size "+r+" is lower than threshold "+n.params.cacheSizeCollectionThreshold),Ar):n.runGarbageCollection(t,e)})},t.prototype.getCacheSize=function(t){return this.delegate.getCacheSize(t)},t.prototype.runGarbageCollection=function(t,e){var n,r,o,a,s,u,c,l,h=this;return a=Date.now(),this.calculateTargetCount(t,this.params.percentileToCollect).next(function(e){return e>h.params.maximumSequenceNumbersToCollect?(d("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of "+h.params.maximumSequenceNumbersToCollect+" from "+e),r=h.params.maximumSequenceNumbersToCollect):r=e,s=Date.now(),h.nthSequenceNumber(t,r)}).next(function(r){return n=r,u=Date.now(),h.removeTargets(t,n,e)}).next(function(e){return o=e,c=Date.now(),h.removeOrphanedDocuments(t,n)}).next(function(t){(l=Date.now(),f()<=i.DEBUG)&&d("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in "+(s-a)+"ms\n\tDetermined least recently used "+r+" in "+(u-s)+"ms\n\tRemoved "+o+" targets in "+(c-u)+"ms\n\tRemoved "+t+" documents in "+(l-c)+"ms\nTotal Duration: "+(l-a)+"ms");return kn.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:o,documentsRemoved:t})})},t}(),Rr=function(){return function(){}}(),Or="IndexedDbPersistence",Mr="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",Fr="Another tab has exclusive access to the persistence layer. To allow shared access, make sure to invoke `enablePersistence()` with `experimentalTabSynchronization:true` in all tabs.",Lr="This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.",Vr=function(t){function e(e,n){var r=t.call(this)||this;return r.simpleDbTransaction=e,r.currentSequenceNumber=n,r}return s.__extends(e,t),e}(Rr),Br=function(){function t(e,n,r,i,o,a,s){if(this.persistenceKey=e,this.clientId=n,this.queue=i,this.multiClientParams=s,this._started=!1,this.isPrimary=!1,this.networkEnabled=!0,this.inForeground=!1,this.lastGarbageCollectionTime=Number.NEGATIVE_INFINITY,this.primaryStateListener=function(t){return Promise.resolve()},!t.isAvailable())throw new E(w.UNIMPLEMENTED,Lr);if(this.referenceDelegate=new Gr(this,a),this.dbName=e+t.MAIN_DATABASE,this.serializer=new kr(o),this.document=r.document,this.allowTabSynchronization=void 0!==s,this.queryCache=new qn(this.referenceDelegate,this.serializer),this.indexManager=new Tr,this.remoteDocumentCache=new Xn(this.serializer,this.indexManager,this.allowTabSynchronization),!r.window||!r.window.localStorage)throw new E(w.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");this.window=r.window,this.webStorage=this.window.localStorage}return t.getStore=function(t,e){if(t instanceof Vr)return Ln.getStore(t.simpleDbTransaction,e);throw g("IndexedDbPersistence must use instances of IndexedDbTransaction")},t.createIndexedDbPersistence=function(e,n,r,i,o,a){return s.__awaiter(this,void 0,void 0,function(){var u;return s.__generator(this,function(s){switch(s.label){case 0:return[4,(u=new t(e,n,r,i,o,a)).start()];case 1:return s.sent(),[2,u]}})})},t.createMultiClientIndexedDbPersistence=function(e,n,r,i,o,a,u){return s.__awaiter(this,void 0,void 0,function(){var c;return s.__generator(this,function(s){switch(s.label){case 0:return[4,(c=new t(e,n,r,i,o,a,u)).start()];case 1:return s.sent(),[2,c]}})})},t.prototype.start=function(){var t=this;return v(!this.started,"IndexedDbPersistence double-started!"),v(null!==this.window,"Expected 'window' to be defined"),Ln.openOrCreate(this.dbName,or,new ar(this.serializer)).then(function(e){return t.simpleDb=e,t.updateClientMetadataAndTryBecomePrimary()}).then(function(){return t.attachVisibilityHandler(),t.attachWindowUnloadHook(),t.scheduleClientMetadataAndPrimaryLeaseRefreshes(),t.startRemoteDocumentCache()}).then(function(){return t.simpleDb.runTransaction("readonly",[vr.store],function(e){return zn(e).next(function(e){var n=t.multiClientParams?t.multiClientParams.sequenceNumberSyncer:void 0;t.listenSequence=new fn(e,n)})})}).then(function(){t._started=!0}).catch(function(e){return t.simpleDb&&t.simpleDb.close(),Promise.reject(e)})},t.prototype.startRemoteDocumentCache=function(){var t=this;return this.simpleDb.runTransaction("readonly",Sr,function(e){return t.remoteDocumentCache.start(e)})},t.prototype.setPrimaryStateListener=function(t){var e=this;return this.primaryStateListener=function(n){return s.__awaiter(e,void 0,void 0,function(){return s.__generator(this,function(e){return this.started?[2,t(n)]:[2]})})},t(this.isPrimary)},t.prototype.setNetworkEnabled=function(t){var e=this;this.networkEnabled!==t&&(this.networkEnabled=t,this.queue.enqueueAndForget(function(){return s.__awaiter(e,void 0,void 0,function(){return s.__generator(this,function(t){switch(t.label){case 0:return this.started?[4,this.updateClientMetadataAndTryBecomePrimary()]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})}))},t.prototype.updateClientMetadataAndTryBecomePrimary=function(){var t=this;return this.simpleDb.runTransaction("readwrite",Sr,function(e){return qr(e).put(new Er(t.clientId,Date.now(),t.networkEnabled,t.inForeground,t.remoteDocumentCache.lastProcessedDocumentChangeId)).next(function(){if(t.isPrimary)return t.verifyPrimaryLease(e).next(function(e){e||(t.isPrimary=!1,t.queue.enqueueAndForget(function(){return t.primaryStateListener(!1)}))})}).next(function(){return t.canActAsPrimary(e)}).next(function(n){var r=t.isPrimary;return t.isPrimary=n,r!==t.isPrimary&&t.queue.enqueueAndForget(function(){return t.primaryStateListener(t.isPrimary)}),r&&!t.isPrimary?t.releasePrimaryLeaseIfHeld(e):t.isPrimary?t.acquireOrExtendPrimaryLease(e):void 0})})},t.prototype.verifyPrimaryLease=function(t){var e=this;return jr(t).get(ur.key).next(function(t){return kn.resolve(e.isLocalClient(t))})},t.prototype.removeClientMetadata=function(t){return qr(t).delete(this.clientId)},t.prototype.maybeGarbageCollectMultiClientState=function(){return s.__awaiter(this,void 0,void 0,function(){var e,n,r=this;return s.__generator(this,function(i){switch(i.label){case 0:return!this.isPrimary||this.isWithinAge(this.lastGarbageCollectionTime,18e5)?[3,2]:(this.lastGarbageCollectionTime=Date.now(),n=[],[4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",function(i){var o=t.getStore(i,Er.store);return o.loadAll().next(function(t){e=r.filterActiveClients(t,18e5),n=t.filter(function(t){return-1===e.indexOf(t)})}).next(function(){return kn.forEach(n,function(t){return o.delete(t.clientId)})}).next(function(){if((e=e.filter(function(t){return t.clientId!==r.clientId})).length>0){var t=e.map(function(t){return t.lastProcessedDocumentChangeId||0}),n=Math.min.apply(Math,t);return r.remoteDocumentCache.removeDocumentChangesThroughChangeId(i,n)}})})]);case 1:i.sent(),n.forEach(function(t){r.window.localStorage.removeItem(r.zombiedClientLocalStorageKey(t.clientId))}),i.label=2;case 2:return[2]}})})},t.prototype.scheduleClientMetadataAndPrimaryLeaseRefreshes=function(){var t=this;this.clientMetadataRefresher=this.queue.enqueueAfterDelay(hn.ClientMetadataRefresh,4e3,function(){return t.updateClientMetadataAndTryBecomePrimary().then(function(){return t.maybeGarbageCollectMultiClientState()}).then(function(){return t.scheduleClientMetadataAndPrimaryLeaseRefreshes()})})},t.prototype.isLocalClient=function(t){return!!t&&t.ownerId===this.clientId},t.prototype.canActAsPrimary=function(t){var e=this;return jr(t).get(ur.key).next(function(n){if(null!==n&&e.isWithinAge(n.leaseTimestampMs,5e3)&&!e.isClientZombied(n.ownerId)){if(e.isLocalClient(n)&&e.networkEnabled)return!0;if(!e.isLocalClient(n)){if(!n.allowTabSynchronization)throw new E(w.FAILED_PRECONDITION,Fr);return!1}}return!(!e.networkEnabled||!e.inForeground)||qr(t).loadAll().next(function(t){return void 0===e.filterActiveClients(t,5e3).find(function(t){if(e.clientId!==t.clientId){var n=!e.networkEnabled&&t.networkEnabled,r=!e.inForeground&&t.inForeground,i=e.networkEnabled===t.networkEnabled;if(n||r&&i)return!0}return!1})})}).next(function(t){return e.isPrimary!==t&&d(Or,"Client "+(t?"is":"is not")+" eligible for a primary lease."),t})},t.prototype.shutdown=function(t){return s.__awaiter(this,void 0,void 0,function(){var e=this;return s.__generator(this,function(n){switch(n.label){case 0:return this._started=!1,this.markClientZombied(),this.clientMetadataRefresher&&this.clientMetadataRefresher.cancel(),this.detachVisibilityHandler(),this.detachWindowUnloadHook(),[4,this.simpleDb.runTransaction("readwrite",[ur.store,Er.store],function(t){return e.releasePrimaryLeaseIfHeld(t).next(function(){return e.removeClientMetadata(t)})})];case 1:return n.sent(),this.simpleDb.close(),this.removeClientZombiedEntry(),t?[4,Ln.delete(this.dbName)]:[3,3];case 2:n.sent(),n.label=3;case 3:return[2]}})})},t.prototype.filterActiveClients=function(t,e){var n=this;return t.filter(function(t){return n.isWithinAge(t.updateTimeMs,e)&&!n.isClientZombied(t.clientId)})},t.prototype.getActiveClients=function(){var t=this;return this.simpleDb.runTransaction("readonly",[Er.store],function(e){return qr(e).loadAll().next(function(e){return t.filterActiveClients(e,18e5).map(function(t){return t.clientId})})})},Object.defineProperty(t.prototype,"started",{get:function(){return this._started},enumerable:!0,configurable:!0}),t.prototype.getMutationQueue=function(t){return v(this.started,"Cannot initialize MutationQueue before persistence is started."),xn.forUser(t,this.serializer,this.indexManager,this.referenceDelegate)},t.prototype.getQueryCache=function(){return v(this.started,"Cannot initialize QueryCache before persistence is started."),this.queryCache},t.prototype.getRemoteDocumentCache=function(){return v(this.started,"Cannot initialize RemoteDocumentCache before persistence is started."),this.remoteDocumentCache},t.prototype.getIndexManager=function(){return v(this.started,"Cannot initialize IndexManager before persistence is started."),this.indexManager},t.prototype.runTransaction=function(t,e,n){var r=this;return d(Or,"Starting transaction:",t),this.simpleDb.runTransaction("readonly"===e?"readonly":"readwrite",Sr,function(i){return"readwrite-primary"===e?r.verifyPrimaryLease(i).next(function(e){if(!e)throw m("Failed to obtain primary lease for action '"+t+"'."),r.isPrimary=!1,r.queue.enqueueAndForget(function(){return r.primaryStateListener(!1)}),new E(w.FAILED_PRECONDITION,Mr);return n(new Vr(i,r.listenSequence.next()))}).next(function(t){return r.acquireOrExtendPrimaryLease(i).next(function(){return t})}):r.verifyAllowTabSynchronization(i).next(function(){return n(new Vr(i,r.listenSequence.next()))})})},t.prototype.verifyAllowTabSynchronization=function(t){var e=this;return jr(t).get(ur.key).next(function(t){if(null!==t&&e.isWithinAge(t.leaseTimestampMs,5e3)&&!e.isClientZombied(t.ownerId)&&!e.isLocalClient(t)&&!t.allowTabSynchronization)throw new E(w.FAILED_PRECONDITION,Fr)})},t.prototype.acquireOrExtendPrimaryLease=function(t){var e=new ur(this.clientId,this.allowTabSynchronization,Date.now());return jr(t).put(ur.key,e)},t.isAvailable=function(){return Ln.isAvailable()},t.buildStoragePrefix=function(t){var e=t.databaseId.projectId;return t.databaseId.isDefaultDatabase||(e+="."+t.databaseId.database),"firestore/"+t.persistenceKey+"/"+e+"/"},t.prototype.releasePrimaryLeaseIfHeld=function(t){var e=this,n=jr(t);return n.get(ur.key).next(function(t){return e.isLocalClient(t)?(d(Or,"Releasing primary lease."),n.delete(ur.key)):kn.resolve()})},t.prototype.isWithinAge=function(t,e){var n=Date.now();return!(t<n-e)&&(!(t>n)||(m("Detected an update time that is in the future: "+t+" > "+n),!1))},t.prototype.attachVisibilityHandler=function(){var t=this;null!==this.document&&"function"===typeof this.document.addEventListener&&(this.documentVisibilityHandler=function(){t.queue.enqueueAndForget(function(){return t.inForeground="visible"===t.document.visibilityState,t.updateClientMetadataAndTryBecomePrimary()})},this.document.addEventListener("visibilitychange",this.documentVisibilityHandler),this.inForeground="visible"===this.document.visibilityState)},t.prototype.detachVisibilityHandler=function(){this.documentVisibilityHandler&&(v(null!==this.document&&"function"===typeof this.document.addEventListener,"Expected 'document.addEventListener' to be a function"),this.document.removeEventListener("visibilitychange",this.documentVisibilityHandler),this.documentVisibilityHandler=null)},t.prototype.attachWindowUnloadHook=function(){var t=this;"function"===typeof this.window.addEventListener&&(this.windowUnloadHandler=function(){t.markClientZombied(),t.queue.enqueueAndForget(function(){return t.shutdown()})},this.window.addEventListener("unload",this.windowUnloadHandler))},t.prototype.detachWindowUnloadHook=function(){this.windowUnloadHandler&&(v("function"===typeof this.window.removeEventListener,"Expected 'window.removeEventListener' to be a function"),this.window.removeEventListener("unload",this.windowUnloadHandler),this.windowUnloadHandler=null)},t.prototype.isClientZombied=function(t){try{var e=null!==this.webStorage.getItem(this.zombiedClientLocalStorageKey(t));return d(Or,"Client '"+t+"' "+(e?"is":"is not")+" zombied in LocalStorage"),e}catch(n){return m(Or,"Failed to get zombied client id.",n),!1}},t.prototype.markClientZombied=function(){try{this.webStorage.setItem(this.zombiedClientLocalStorageKey(this.clientId),String(Date.now()))}catch(t){m("Failed to set zombie client id.",t)}},t.prototype.removeClientZombiedEntry=function(){try{this.webStorage.removeItem(this.zombiedClientLocalStorageKey(this.clientId))}catch(t){}},t.prototype.zombiedClientLocalStorageKey=function(t){return"firestore_zombie_"+this.persistenceKey+"_"+t},t.MAIN_DATABASE="main",t}();function Ur(t){return s.__awaiter(this,void 0,void 0,function(){return s.__generator(this,function(e){if(!function(t){return t.code===w.FAILED_PRECONDITION&&t.message===Mr}(t))throw t;return d(Or,"Unexpectedly lost primary lease"),[2]})})}function jr(t){return t.store(ur.store)}function qr(t){return t.store(Er.store)}var Gr=function(){function t(t,e){this.db=t,this.garbageCollector=new Nr(this,e)}return t.prototype.getSequenceNumberCount=function(t){var e=this.orphanedDocmentCount(t);return this.db.getQueryCache().getQueryCount(t).next(function(t){return e.next(function(e){return t+e})})},t.prototype.orphanedDocmentCount=function(t){var e=0;return this.forEachOrphanedDocumentSequenceNumber(t,function(t){e++}).next(function(){return e})},t.prototype.forEachTarget=function(t,e){return this.db.getQueryCache().forEachTarget(t,e)},t.prototype.forEachOrphanedDocumentSequenceNumber=function(t,e){return this.forEachOrphanedDocument(t,function(t,n){return e(n)})},t.prototype.setInMemoryPins=function(t){this.inMemoryPins=t},t.prototype.addReference=function(t,e){return Wr(t,e)},t.prototype.removeReference=function(t,e){return Wr(t,e)},t.prototype.removeTargets=function(t,e,n){return this.db.getQueryCache().removeTargets(t,e,n)},t.prototype.removeMutationReference=function(t,e){return Wr(t,e)},t.prototype.isPinned=function(t,e){return this.inMemoryPins.containsKey(e)?kn.resolve(!0):function(t,e){var n=!1;return Rn(t).iterateSerial(function(r){return In(t,r,e).next(function(t){return t&&(n=!0),kn.resolve(!t)})}).next(function(){return n})}(t,e)},t.prototype.removeOrphanedDocuments=function(t,e){var n=this,r=0,i=0,o=[];return this.forEachOrphanedDocument(t,function(a,s){if(s<=e){var u=n.isPinned(t,a).next(function(e){if(!e)return r++,n.removeOrphanedDocument(t,a).next(function(t){i+=t})});o.push(u)}}).next(function(){return kn.waitFor(o)}).next(function(){return n.db.getRemoteDocumentCache().updateSize(t,-i)}).next(function(){return r})},t.prototype.removeOrphanedDocument=function(t,e){var n,r=0,i=this.db.getRemoteDocumentCache();return kn.waitFor([Hn(t).delete((n=e,[0,_n(n.path)])),i.removeEntry(t,e).next(function(t){r+=t})]).next(function(){return r})},t.prototype.removeTarget=function(t,e){var n=e.copy({sequenceNumber:t.currentSequenceNumber});return this.db.getQueryCache().updateQueryData(t,n)},t.prototype.updateLimboDocument=function(t,e){return Wr(t,e)},t.prototype.forEachOrphanedDocument=function(t,e){var n,r=Hn(t),i=fn.INVALID;return r.iterate({index:gr.documentTargetsIndex},function(t,r){var o=t[0],a=(t[1],r.path),s=r.sequenceNumber;0===o?(i!==fn.INVALID&&e(new ft(Sn(n)),i),i=s,n=a):i=fn.INVALID}).next(function(){i!==fn.INVALID&&e(new ft(Sn(n)),i)})},t.prototype.getCacheSize=function(t){return this.db.getRemoteDocumentCache().getSize(t)},t}();function Wr(t,e){return Hn(t).put(function(t,e){return new gr(0,_n(t.path),e)}(e,t.currentSequenceNumber))}var zr=function(){function t(t,e,n){this.remoteDocumentCache=t,this.mutationQueue=e,this.indexManager=n}return t.prototype.getDocument=function(t,e){var n=this;return this.mutationQueue.getAllMutationBatchesAffectingDocumentKey(t,e).next(function(r){return n.getDocumentInternal(t,e,r)})},t.prototype.getDocumentInternal=function(t,e,n){return this.remoteDocumentCache.getEntry(t,e).next(function(t){for(var r=0,i=n;r<i.length;r++){t=i[r].applyToLocalView(e,t)}return t})},t.prototype.applyLocalMutationsToDocuments=function(t,e,n){var r=xe();return e.forEach(function(t,e){for(var i=0,o=n;i<o.length;i++){e=o[i].applyToLocalView(t,e)}r=r.insert(t,e)}),r},t.prototype.getDocuments=function(t,e){var n=this;return this.remoteDocumentCache.getEntries(t,e).next(function(e){return n.getLocalViewOfDocuments(t,e)})},t.prototype.getLocalViewOfDocuments=function(t,e){var n=this;return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,e).next(function(r){var i=n.applyLocalMutationsToDocuments(t,e,r),o=ke();return i.forEach(function(t,e){e||(e=new mt(t,ee.forDeletedDoc())),o=o.insert(t,e)}),o})},t.prototype.getDocumentsMatchingQuery=function(t,e){return e.isDocumentQuery()?this.getDocumentsMatchingDocumentQuery(t,e.path):e.isCollectionGroupQuery()?this.getDocumentsMatchingCollectionGroupQuery(t,e):this.getDocumentsMatchingCollectionQuery(t,e)},t.prototype.getDocumentsMatchingDocumentQuery=function(t,e){return this.getDocument(t,new ft(e)).next(function(t){var e=Ae();return t instanceof dt&&(e=e.insert(t.key,t)),e})},t.prototype.getDocumentsMatchingCollectionGroupQuery=function(t,e){var n=this;v(e.path.isEmpty(),"Currently we only support collection group queries at the root.");var r=e.collectionGroup,i=Ae();return this.indexManager.getCollectionParents(t,r).next(function(o){return kn.forEach(o,function(o){var a=e.asCollectionQueryAtPath(o.child(r));return n.getDocumentsMatchingCollectionQuery(t,a).next(function(t){t.forEach(function(t,e){i=i.insert(t,e)})})}).next(function(){return i})})},t.prototype.getDocumentsMatchingCollectionQuery=function(t,e){var n,r=this;return this.remoteDocumentCache.getDocumentsMatchingQuery(t,e).next(function(i){return n=i,r.mutationQueue.getAllMutationBatchesAffectingQuery(t,e)}).next(function(t){for(var r=0,i=t;r<i.length;r++)for(var o=i[r],a=0,s=o.mutations;a<s.length;a++){var u=s[a],c=u.key;if(e.path.isImmediateParentOf(c.path)){var l=n.get(c),h=u.applyToLocalView(l,l,o.localWriteTime);n=h instanceof dt?n.insert(c,h):n.remove(c)}}}).next(function(){return n.forEach(function(t,r){e.matches(r)||(n=n.remove(t))}),n})},t}(),Hr=function(){function t(){this.refsByKey=new ie(Kr.compareByKey),this.refsByTarget=new ie(Kr.compareByTargetId)}return t.prototype.isEmpty=function(){return this.refsByKey.isEmpty()},t.prototype.addReference=function(t,e){var n=new Kr(t,e);this.refsByKey=this.refsByKey.add(n),this.refsByTarget=this.refsByTarget.add(n)},t.prototype.addReferences=function(t,e){var n=this;t.forEach(function(t){return n.addReference(t,e)})},t.prototype.removeReference=function(t,e){this.removeRef(new Kr(t,e))},t.prototype.removeReferences=function(t,e){var n=this;t.forEach(function(t){return n.removeReference(t,e)})},t.prototype.removeReferencesForId=function(t){var e=this,n=ft.EMPTY,r=new Kr(n,t),i=new Kr(n,t+1),o=[];return this.refsByTarget.forEachInRange([r,i],function(t){e.removeRef(t),o.push(t.key)}),o},t.prototype.removeAllReferences=function(){var t=this;this.refsByKey.forEach(function(e){return t.removeRef(e)})},t.prototype.removeRef=function(t){this.refsByKey=this.refsByKey.delete(t),this.refsByTarget=this.refsByTarget.delete(t)},t.prototype.referencesForId=function(t){var e=ft.EMPTY,n=new Kr(e,t),r=new Kr(e,t+1),i=Re();return this.refsByTarget.forEachInRange([n,r],function(t){i=i.add(t.key)}),i},t.prototype.containsKey=function(t){var e=new Kr(t,0),n=this.refsByKey.firstAfterOrEqual(e);return null!==n&&t.isEqual(n.key)},t}(),Kr=function(){function t(t,e){this.key=t,this.targetOrBatchId=e}return t.compareByKey=function(t,e){return ft.comparator(t.key,e.key)||Q(t.targetOrBatchId,e.targetOrBatchId)},t.compareByTargetId=function(t,e){return Q(t.targetOrBatchId,e.targetOrBatchId)||ft.comparator(t.key,e.key)},t}(),Qr=function(){function t(t,e){this.persistence=t,this.localViewReferences=new Hr,this.queryDataByTarget={},v(t.started,"LocalStore was passed an unstarted persistence implementation"),this.persistence.referenceDelegate.setInMemoryPins(this.localViewReferences),this.mutationQueue=t.getMutationQueue(e),this.remoteDocuments=t.getRemoteDocumentCache(),this.queryCache=t.getQueryCache(),this.localDocuments=new zr(this.remoteDocuments,this.mutationQueue,this.persistence.getIndexManager())}return t.prototype.handleUserChange=function(t){var e=this;return this.persistence.runTransaction("Handle user change","readonly",function(n){var r;return e.mutationQueue.getAllMutationBatches(n).next(function(i){return r=i,e.mutationQueue=e.persistence.getMutationQueue(t),e.localDocuments=new zr(e.remoteDocuments,e.mutationQueue,e.persistence.getIndexManager()),e.mutationQueue.getAllMutationBatches(n)}).next(function(t){for(var i=[],o=[],a=Re(),s=0,u=r;s<u.length;s++){var c=u[s];i.push(c.batchId);for(var l=0,h=c.mutations;l<h.length;l++){var f=h[l];a=a.add(f.key)}}for(var p=0,d=t;p<d.length;p++){c=d[p];o.push(c.batchId);for(var m=0,y=c.mutations;m<y.length;m++){f=y[m];a=a.add(f.key)}}return e.localDocuments.getDocuments(n,a).next(function(t){return{affectedDocuments:t,removedBatchIds:i,addedBatchIds:o}})})})},t.prototype.localWrite=function(t){var e=this,n=it.now(),r=t.reduce(function(t,e){return t.add(e.key)},Re());return this.persistence.runTransaction("Locally write mutations","readwrite",function(i){return e.localDocuments.getDocuments(i,r).next(function(r){for(var o=[],a=0,s=t;a<s.length;a++){var u=s[a],c=r.get(u.key);if(!u.isIdempotent){var l=u.fieldMask;if(l){var h=c instanceof dt?l.applyTo(c.data):Mt.EMPTY;o.push(new fe(u.key,h,l,ce.exists(!0)))}}}return e.mutationQueue.addMutationBatch(i,n,o,t).next(function(t){var e=t.applyToLocalDocumentSet(r);return{batchId:t.batchId,changes:e}})})})},t.prototype.lookupMutationDocuments=function(t){var e=this;return this.persistence.runTransaction("Lookup mutation documents","readonly",function(n){return e.mutationQueue.lookupMutationKeys(n,t).next(function(t){return t?e.localDocuments.getDocuments(n,t):kn.resolve(null)})})},t.prototype.acknowledgeBatch=function(t){var e=this;return this.persistence.runTransaction("Acknowledge batch","readwrite-primary",function(n){var r=t.batch.keys(),i=e.remoteDocuments.newChangeBuffer();return e.mutationQueue.acknowledgeBatch(n,t.batch,t.streamToken).next(function(){return e.applyWriteToRemoteDocuments(n,t,i)}).next(function(){return i.apply(n)}).next(function(){return e.mutationQueue.performConsistencyCheck(n)}).next(function(){return e.localDocuments.getDocuments(n,r)})})},t.prototype.rejectBatch=function(t){var e=this;return this.persistence.runTransaction("Reject batch","readwrite-primary",function(n){var r;return e.mutationQueue.lookupMutationBatch(n,t).next(function(t){return v(null!==t,"Attempt to reject nonexistent batch!"),r=t.keys(),e.mutationQueue.removeMutationBatch(n,t)}).next(function(){return e.mutationQueue.performConsistencyCheck(n)}).next(function(){return e.localDocuments.getDocuments(n,r)})})},t.prototype.getLastStreamToken=function(){var t=this;return this.persistence.runTransaction("Get last stream token","readonly",function(e){return t.mutationQueue.getLastStreamToken(e)})},t.prototype.setLastStreamToken=function(t){var e=this;return this.persistence.runTransaction("Set last stream token","readwrite-primary",function(n){return e.mutationQueue.setLastStreamToken(n,t)})},t.prototype.getLastRemoteSnapshotVersion=function(){var t=this;return this.persistence.runTransaction("Get last remote snapshot version","readonly",function(e){return t.queryCache.getLastRemoteSnapshotVersion(e)})},t.prototype.applyRemoteEvent=function(e){var n=this,r=this.remoteDocuments.newChangeBuffer();return this.persistence.runTransaction("Apply remote event","readwrite-primary",function(i){var o=[],a=Re();k(e.targetChanges,function(r,s){var u=n.queryDataByTarget[r];if(u){s.addedDocuments.forEach(function(t){a=a.add(t)}),s.modifiedDocuments.forEach(function(t){a=a.add(t)}),o.push(n.queryCache.removeMatchingKeys(i,s.removedDocuments,r).next(function(){return n.queryCache.addMatchingKeys(i,s.addedDocuments,r)}));var c=s.resumeToken;if(c.length>0){var l=u;u=u.copy({resumeToken:c,snapshotVersion:e.snapshotVersion}),n.queryDataByTarget[r]=u,t.shouldPersistQueryData(l,u,s)&&o.push(n.queryCache.updateQueryData(i,u))}}});var s=ke(),u=Re();e.documentUpdates.forEach(function(t,e){u=u.add(t)}),o.push(r.getEntries(i,u).next(function(t){e.documentUpdates.forEach(function(u,c){var l=t.get(u);null==l||c.version.isEqual(ee.MIN)||a.has(c.key)&&!l.hasPendingWrites||c.version.compareTo(l.version)>=0?(r.addEntry(c),s=s.insert(u,c)):d("LocalStore","Ignoring outdated watch update for ",u,". Current version:",l.version," Watch version:",c.version),e.resolvedLimboDocuments.has(u)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(i,u))})}));var c=e.snapshotVersion;if(!c.isEqual(ee.MIN)){var l=n.queryCache.getLastRemoteSnapshotVersion(i).next(function(t){return v(c.compareTo(t)>=0,"Watch stream reverted to previous snapshot?? "+c+" < "+t),n.queryCache.setTargetsMetadata(i,i.currentSequenceNumber,c)});o.push(l)}return kn.waitFor(o).next(function(){return r.apply(i)}).next(function(){return n.localDocuments.getLocalViewOfDocuments(i,s)})})},t.shouldPersistQueryData=function(t,e,n){return 0!==e.resumeToken.length&&(0===t.resumeToken.length||(e.snapshotVersion.toMicroseconds()-t.snapshotVersion.toMicroseconds()>=this.RESUME_TOKEN_MAX_AGE_MICROS||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0))},t.prototype.notifyLocalViewChanges=function(t){var e=this;return this.persistence.runTransaction("notifyLocalViewChanges","readwrite",function(n){return kn.forEach(t,function(t){return e.localViewReferences.addReferences(t.addedKeys,t.targetId),e.localViewReferences.removeReferences(t.removedKeys,t.targetId),kn.forEach(t.removedKeys,function(t){return e.persistence.referenceDelegate.removeReference(n,t)})})})},t.prototype.nextMutationBatch=function(t){var e=this;return this.persistence.runTransaction("Get next mutation batch","readonly",function(n){return void 0===t&&(t=-1),e.mutationQueue.getNextMutationBatchAfterBatchId(n,t)})},t.prototype.readDocument=function(t){var e=this;return this.persistence.runTransaction("read document","readonly",function(n){return e.localDocuments.getDocument(n,t)})},t.prototype.allocateQuery=function(t){var e=this;return this.persistence.runTransaction("Allocate query","readwrite",function(n){var r;return e.queryCache.getQueryData(n,t).next(function(i){return i?(r=i,kn.resolve()):e.queryCache.allocateTargetId(n).next(function(i){return r=new re(t,i,Gt.Listen,n.currentSequenceNumber),e.queryCache.addQueryData(n,r)})}).next(function(){return v(!e.queryDataByTarget[r.targetId],"Tried to allocate an already allocated query: "+t),e.queryDataByTarget[r.targetId]=r,r})})},t.prototype.releaseQuery=function(t,e){var n=this,r=e?"readwrite":"readwrite-primary";return this.persistence.runTransaction("Release query",r,function(r){return n.queryCache.getQueryData(r,t).next(function(i){v(null!=i,"Tried to release nonexistent query: "+t);var o=i.targetId,a=n.queryDataByTarget[o],s=n.localViewReferences.removeReferencesForId(o);return delete n.queryDataByTarget[o],e?kn.resolve():kn.forEach(s,function(t){return n.persistence.referenceDelegate.removeReference(r,t)}).next(function(){return n.persistence.referenceDelegate.removeTarget(r,a)})})})},t.prototype.executeQuery=function(t){var e=this;return this.persistence.runTransaction("Execute query","readonly",function(n){return e.localDocuments.getDocumentsMatchingQuery(n,t)})},t.prototype.remoteDocumentKeys=function(t){var e=this;return this.persistence.runTransaction("Remote document keys","readonly",function(n){return e.queryCache.getMatchingKeysForTargetId(n,t)})},t.prototype.getActiveClients=function(){return this.persistence.getActiveClients()},t.prototype.removeCachedMutationBatchMetadata=function(t){this.mutationQueue.removeCachedMutationKeys(t)},t.prototype.setNetworkEnabled=function(t){this.persistence.setNetworkEnabled(t)},t.prototype.applyWriteToRemoteDocuments=function(t,e,n){var r=this,i=e.batch,o=i.keys(),a=kn.resolve();return o.forEach(function(r){a=a.next(function(){return n.getEntry(t,r)}).next(function(t){var o=t,a=e.docVersions.get(r);v(null!==a,"ackVersions should contain every doc in the write."),(!o||o.version.compareTo(a)<0)&&((o=i.applyToRemoteDocument(r,o,e))?n.addEntry(o):v(!t,"Mutation batch "+i+" applied to document "+t+" resulted in null"))})}),a.next(function(){return r.mutationQueue.removeMutationBatch(t,i)})},t.prototype.collectGarbage=function(t){var e=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",function(n){return t.collect(n,e.queryDataByTarget)})},t.prototype.getQueryForTarget=function(t){var e=this;return this.queryDataByTarget[t]?Promise.resolve(this.queryDataByTarget[t].query):this.persistence.runTransaction("Get query data","readonly",function(n){return e.queryCache.getQueryDataForTarget(n,t).next(function(t){return t?t.query:null})})},t.prototype.getNewDocumentChanges=function(){var t=this;return this.persistence.runTransaction("Get new document changes","readonly",function(e){return t.remoteDocuments.getNewDocumentChanges(e)})},t.RESUME_TOKEN_MAX_AGE_MICROS=3e8,t}(),Yr=function(){function t(t,e){this.indexManager=t,this.referenceDelegate=e,this.mutationQueue=[],this.nextBatchId=1,this.lastStreamToken=_(),this.batchesByDocumentKey=new ie(Kr.compareByKey)}return t.prototype.checkEmpty=function(t){return kn.resolve(0===this.mutationQueue.length)},t.prototype.acknowledgeBatch=function(t,e,n){var r=e.batchId,i=this.indexOfExistingBatchId(r,"acknowledged");v(0===i,"Can only acknowledge the first batch in the mutation queue");var o=this.mutationQueue[i];return v(r===o.batchId,"Queue ordering failure: expected batch "+r+", got batch "+o.batchId),this.lastStreamToken=n,kn.resolve()},t.prototype.getLastStreamToken=function(t){return kn.resolve(this.lastStreamToken)},t.prototype.setLastStreamToken=function(t,e){return this.lastStreamToken=e,kn.resolve()},t.prototype.addMutationBatch=function(t,e,n,r){v(0!==r.length,"Mutation batches should not be empty");var i=this.nextBatchId;(this.nextBatchId++,this.mutationQueue.length>0)&&v(this.mutationQueue[this.mutationQueue.length-1].batchId<i,"Mutation batchIDs must be monotonically increasing order");var o=new Tn(i,e,n,r);this.mutationQueue.push(o);for(var a=0,s=r;a<s.length;a++){var u=s[a];this.batchesByDocumentKey=this.batchesByDocumentKey.add(new Kr(u.key,i)),this.indexManager.addToCollectionParentIndex(t,u.key.path.popLast())}return kn.resolve(o)},t.prototype.lookupMutationBatch=function(t,e){return kn.resolve(this.findMutationBatch(e))},t.prototype.lookupMutationKeys=function(t,e){var n=this.findMutationBatch(e);return v(null!=n,"Failed to find local mutation batch."),kn.resolve(n.keys())},t.prototype.getNextMutationBatchAfterBatchId=function(t,e){var n=e+1,r=this.indexOfBatchId(n),i=r<0?0:r;return kn.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)},t.prototype.getAllMutationBatches=function(t){return kn.resolve(this.mutationQueue.slice())},t.prototype.getAllMutationBatchesAffectingDocumentKey=function(t,e){var n=this,r=new Kr(e,0),i=new Kr(e,Number.POSITIVE_INFINITY),o=[];return this.batchesByDocumentKey.forEachInRange([r,i],function(t){v(e.isEqual(t.key),"Should only iterate over a single key's batches");var r=n.findMutationBatch(t.targetOrBatchId);v(null!==r,"Batches in the index must exist in the main table"),o.push(r)}),kn.resolve(o)},t.prototype.getAllMutationBatchesAffectingDocumentKeys=function(t,e){var n=this,r=new ie(Q);return e.forEach(function(t){var e=new Kr(t,0),i=new Kr(t,Number.POSITIVE_INFINITY);n.batchesByDocumentKey.forEachInRange([e,i],function(e){v(t.isEqual(e.key),"For each key, should only iterate over a single key's batches"),r=r.add(e.targetOrBatchId)})}),kn.resolve(this.findMutationBatches(r))},t.prototype.getAllMutationBatchesAffectingQuery=function(t,e){v(!e.isCollectionGroupQuery(),"CollectionGroup queries should be handled in LocalDocumentsView");var n=e.path,r=n.length+1,i=n;ft.isDocumentKey(i)||(i=i.child(""));var o=new Kr(new ft(i),0),a=new ie(Q);return this.batchesByDocumentKey.forEachWhile(function(t){var e=t.key.path;return!!n.isPrefixOf(e)&&(e.length===r&&(a=a.add(t.targetOrBatchId)),!0)},o),kn.resolve(this.findMutationBatches(a))},t.prototype.findMutationBatches=function(t){var e=this,n=[];return t.forEach(function(t){var r=e.findMutationBatch(t);null!==r&&n.push(r)}),n},t.prototype.removeMutationBatch=function(t,e){var n=this;v(0===this.indexOfExistingBatchId(e.batchId,"removed"),"Can only remove the first entry of the mutation queue"),this.mutationQueue.shift();var r=this.batchesByDocumentKey;return kn.forEach(e.mutations,function(i){var o=new Kr(i.key,e.batchId);return r=r.delete(o),n.referenceDelegate.removeMutationReference(t,i.key)}).next(function(){n.batchesByDocumentKey=r})},t.prototype.removeCachedMutationKeys=function(t){},t.prototype.containsKey=function(t,e){var n=new Kr(e,0),r=this.batchesByDocumentKey.firstAfterOrEqual(n);return kn.resolve(e.isEqual(r&&r.key))},t.prototype.performConsistencyCheck=function(t){return 0===this.mutationQueue.length&&v(this.batchesByDocumentKey.isEmpty(),"Document leak -- detected dangling mutation references when queue is empty."),kn.resolve()},t.prototype.indexOfExistingBatchId=function(t,e){var n=this.indexOfBatchId(t);return v(n>=0&&n<this.mutationQueue.length,"Batches must exist to be "+e),n},t.prototype.indexOfBatchId=function(t){return 0===this.mutationQueue.length?0:t-this.mutationQueue[0].batchId},t.prototype.findMutationBatch=function(t){var e=this.indexOfBatchId(t);if(e<0||e>=this.mutationQueue.length)return null;var n=this.mutationQueue[e];return v(n.batchId===t,"If found batch must match"),n},t}(),Xr=function(){function t(t){this.persistence=t,this.queries=new Kn(function(t){return t.canonicalId()}),this.lastRemoteSnapshotVersion=ee.MIN,this.highestTargetId=0,this.highestSequenceNumber=0,this.references=new Hr,this.targetCount=0,this.targetIdGenerator=Fn.forQueryCache()}return t.prototype.getTargetCount=function(t){return kn.resolve(this.targetCount)},t.prototype.forEachTarget=function(t,e){return this.queries.forEach(function(t,n){return e(n)}),kn.resolve()},t.prototype.getLastRemoteSnapshotVersion=function(t){return kn.resolve(this.lastRemoteSnapshotVersion)},t.prototype.getHighestSequenceNumber=function(t){return kn.resolve(this.highestSequenceNumber)},t.prototype.allocateTargetId=function(t){var e=this.targetIdGenerator.after(this.highestTargetId);return this.highestTargetId=e,kn.resolve(e)},t.prototype.setTargetsMetadata=function(t,e,n){return n&&(this.lastRemoteSnapshotVersion=n),e>this.highestSequenceNumber&&(this.highestSequenceNumber=e),kn.resolve()},t.prototype.saveQueryData=function(t){this.queries.set(t.query,t);var e=t.targetId;e>this.highestTargetId&&(this.highestTargetId=e),t.sequenceNumber>this.highestSequenceNumber&&(this.highestSequenceNumber=t.sequenceNumber)},t.prototype.addQueryData=function(t,e){return v(!this.queries.has(e.query),"Adding a query that already exists"),this.saveQueryData(e),this.targetCount+=1,kn.resolve()},t.prototype.updateQueryData=function(t,e){return v(this.queries.has(e.query),"Updating a non-existent query"),this.saveQueryData(e),kn.resolve()},t.prototype.removeQueryData=function(t,e){return v(this.targetCount>0,"Removing a target from an empty cache"),v(this.queries.has(e.query),"Removing a non-existent target from the cache"),this.queries.delete(e.query),this.references.removeReferencesForId(e.targetId),this.targetCount-=1,kn.resolve()},t.prototype.removeTargets=function(t,e,n){var r=this,i=0,o=[];return this.queries.forEach(function(a,s){s.sequenceNumber<=e&&!n[s.targetId]&&(r.queries.delete(a),o.push(r.removeMatchingKeysForTargetId(t,s.targetId)),i++)}),kn.waitFor(o).next(function(){return i})},t.prototype.getQueryCount=function(t){return kn.resolve(this.targetCount)},t.prototype.getQueryData=function(t,e){var n=this.queries.get(e)||null;return kn.resolve(n)},t.prototype.getQueryDataForTarget=function(t,e){return g("Not yet implemented.")},t.prototype.addMatchingKeys=function(t,e,n){this.references.addReferences(e,n);var r=this.persistence.referenceDelegate,i=[];return r&&e.forEach(function(e){i.push(r.addReference(t,e))}),kn.waitFor(i)},t.prototype.removeMatchingKeys=function(t,e,n){this.references.removeReferences(e,n);var r=this.persistence.referenceDelegate,i=[];return r&&e.forEach(function(e){i.push(r.removeReference(t,e))}),kn.waitFor(i)},t.prototype.removeMatchingKeysForTargetId=function(t,e){return this.references.removeReferencesForId(e),kn.resolve()},t.prototype.getMatchingKeysForTargetId=function(t,e){var n=this.references.referencesForId(e);return kn.resolve(n)},t.prototype.containsKey=function(t,e){return kn.resolve(this.references.containsKey(e))},t}();var $r,Jr=function(){function t(t,e){this.indexManager=t,this.sizer=e,this.docs=new gt(ft.comparator),this.newDocumentChanges=Re(),this.size=0}return t.prototype.addEntries=function(t,e,n){for(var r=[],i=0,o=e;i<o.length;i++){var a=o[i],s=a.maybeDocument.key;this.docs=this.docs.insert(s,a),this.newDocumentChanges=this.newDocumentChanges.add(s),r.push(this.indexManager.addToCollectionParentIndex(t,s.path.popLast()))}return this.size+=n,kn.waitFor(r)},t.prototype.removeEntry=function(t,e){var n=this.docs.get(e);return n?(this.docs=this.docs.remove(e),this.size-=n.size,kn.resolve(n.size)):kn.resolve(0)},t.prototype.getEntry=function(t,e){var n=this.docs.get(e);return kn.resolve(n?n.maybeDocument:null)},t.prototype.getSizedEntry=function(t,e){return kn.resolve(this.docs.get(e))},t.prototype.getEntries=function(t,e){var n=this,r=xe();return e.forEach(function(t){var e=n.docs.get(t);r=r.insert(t,e?e.maybeDocument:null)}),kn.resolve(r)},t.prototype.getSizedEntries=function(t,e){var n=this,r=xe(),i=new gt(ft.comparator);return e.forEach(function(t){var e=n.docs.get(t);r=r.insert(t,e?e.maybeDocument:null),i=i.insert(t,e?e.size:0)}),kn.resolve({maybeDocuments:r,sizeMap:i})},t.prototype.getDocumentsMatchingQuery=function(t,e){v(!e.isCollectionGroupQuery(),"CollectionGroup queries should be handled in LocalDocumentsView");for(var n=Ae(),r=new ft(e.path.child("")),i=this.docs.getIteratorFrom(r);i.hasNext();){var o=i.getNext(),a=o.key,s=o.value.maybeDocument;if(!e.path.isPrefixOf(a.path))break;s instanceof dt&&e.matches(s)&&(n=n.insert(s.key,s))}return kn.resolve(n)},t.prototype.forEachDocumentKey=function(t,e){return kn.forEach(this.docs,function(t){return e(t)})},t.prototype.getNewDocumentChanges=function(t){var e=this,n=ke();return this.newDocumentChanges.forEach(function(t){var r=e.docs.get(t),i=r?r.maybeDocument:new mt(t,ee.forDeletedDoc());n=n.insert(t,i)}),this.newDocumentChanges=Re(),kn.resolve(n)},t.prototype.newChangeBuffer=function(){return new Zr(this.sizer,this)},t.prototype.getSize=function(t){return kn.resolve(this.size)},t}(),Zr=function(t){function e(e,n){var r=t.call(this)||this;return r.sizer=e,r.documentCache=n,r}return s.__extends(e,t),e.prototype.applyChanges=function(t){var e=this,n=this.assertChanges(),r=0,i=[];return n.forEach(function(t,n){var o=e.documentSizes.get(t);v(void 0!==o,"Attempting to change document "+t.toString()+" without having read it first");var a=e.sizer(n);r+=a-o,i.push({maybeDocument:n,size:a})}),this.documentCache.addEntries(t,i,r)},e.prototype.getFromCache=function(t,e){return this.documentCache.getSizedEntry(t,e)},e.prototype.getAllFromCache=function(t,e){return this.documentCache.getSizedEntries(t,e)},e}(Qn),ti=function(){function t(t,e){var n=this;this.clientId=t,this.mutationQueues={},this.listenSequence=new fn(0),this._started=!1,this._started=!0,this.referenceDelegate=e(this),this.queryCache=new Xr(this);this.indexManager=new rr,this.remoteDocumentCache=new Jr(this.indexManager,function(t){return n.referenceDelegate.documentSize(t)})}return t.createLruPersistence=function(e,n,r){return new t(e,function(t){return new ri(t,new kr(n),r)})},t.createEagerPersistence=function(e){return new t(e,function(t){return new ni(t)})},t.prototype.shutdown=function(t){return this._started=!1,Promise.resolve()},Object.defineProperty(t.prototype,"started",{get:function(){return this._started},enumerable:!0,configurable:!0}),t.prototype.getActiveClients=function(){return s.__awaiter(this,void 0,void 0,function(){return s.__generator(this,function(t){return[2,[this.clientId]]})})},t.prototype.setPrimaryStateListener=function(t){return t(!0)},t.prototype.setNetworkEnabled=function(t){},t.prototype.getIndexManager=function(){return this.indexManager},t.prototype.getMutationQueue=function(t){var e=this.mutationQueues[t.toKey()];return e||(e=new Yr(this.indexManager,this.referenceDelegate),this.mutationQueues[t.toKey()]=e),e},t.prototype.getQueryCache=function(){return this.queryCache},t.prototype.getRemoteDocumentCache=function(){return this.remoteDocumentCache},t.prototype.runTransaction=function(t,e,n){var r=this;d("MemoryPersistence","Starting transaction:",t);var i=new ei(this.listenSequence.next());return this.referenceDelegate.onTransactionStarted(),n(i).next(function(t){return r.referenceDelegate.onTransactionCommitted(i).next(function(){return t})}).toPromise()},t.prototype.mutationQueuesContainKey=function(t,e){return kn.or(function(t){var e=[];return x(t,function(t,n){return e.push(n)}),e}(this.mutationQueues).map(function(n){return function(){return n.containsKey(t,e)}}))},t}(),ei=function(){return function(t){this.currentSequenceNumber=t}}(),ni=function(){function t(t){this.persistence=t}return t.prototype.setInMemoryPins=function(t){this.inMemoryPins=t},t.prototype.addReference=function(t,e){return this.orphanedDocuments.delete(e),kn.resolve()},t.prototype.removeReference=function(t,e){return this.orphanedDocuments.add(e),kn.resolve()},t.prototype.removeMutationReference=function(t,e){return this.orphanedDocuments.add(e),kn.resolve()},t.prototype.removeTarget=function(t,e){var n=this,r=this.persistence.getQueryCache();return r.getMatchingKeysForTargetId(t,e.targetId).next(function(t){t.forEach(function(t){return n.orphanedDocuments.add(t)})}).next(function(){return r.removeQueryData(t,e)})},t.prototype.onTransactionStarted=function(){this.orphanedDocuments=new Set},t.prototype.onTransactionCommitted=function(t){var e=this,n=this.persistence.getRemoteDocumentCache();return kn.forEach(this.orphanedDocuments,function(r){return e.isReferenced(t,r).next(function(e){return e?kn.resolve():n.removeEntry(t,r).next(function(){})})})},t.prototype.updateLimboDocument=function(t,e){var n=this;return this.isReferenced(t,e).next(function(t){t?n.orphanedDocuments.delete(e):n.orphanedDocuments.add(e)})},t.prototype.documentSize=function(t){return 0},t.prototype.isReferenced=function(t,e){var n=this;return kn.or([function(){return n.persistence.getQueryCache().containsKey(t,e)},function(){return n.persistence.mutationQueuesContainKey(t,e)},function(){return kn.resolve(n.inMemoryPins.containsKey(e))}])},t}(),ri=function(){function t(t,e,n){this.persistence=t,this.serializer=e,this.orphanedSequenceNumbers=new Kn(function(t){return _n(t.path)}),this.garbageCollector=new Nr(this,n)}return t.prototype.onTransactionStarted=function(){},t.prototype.onTransactionCommitted=function(t){return kn.resolve()},t.prototype.forEachTarget=function(t,e){return this.persistence.getQueryCache().forEachTarget(t,e)},t.prototype.getSequenceNumberCount=function(t){var e=this.orphanedDocumentCount(t);return this.persistence.getQueryCache().getTargetCount(t).next(function(t){return e.next(function(e){return t+e})})},t.prototype.orphanedDocumentCount=function(t){var e=0;return this.forEachOrphanedDocumentSequenceNumber(t,function(t){e++}).next(function(){return e})},t.prototype.forEachOrphanedDocumentSequenceNumber=function(t,e){var n=this;return kn.forEach(this.orphanedSequenceNumbers,function(r,i){return n.isPinned(t,r,i).next(function(t){return t?kn.resolve():e(i)})})},t.prototype.setInMemoryPins=function(t){this.inMemoryPins=t},t.prototype.removeTargets=function(t,e,n){return this.persistence.getQueryCache().removeTargets(t,e,n)},t.prototype.removeOrphanedDocuments=function(t,e){var n=this,r=0,i=this.persistence.getRemoteDocumentCache();return i.forEachDocumentKey(t,function(o){return n.isPinned(t,o,e).next(function(e){return e?kn.resolve():(r++,i.removeEntry(t,o).next())})}).next(function(){return r})},t.prototype.removeMutationReference=function(t,e){return this.orphanedSequenceNumbers.set(e,t.currentSequenceNumber),kn.resolve()},t.prototype.removeTarget=function(t,e){var n=e.copy({sequenceNumber:t.currentSequenceNumber});return this.persistence.getQueryCache().updateQueryData(t,n)},t.prototype.addReference=function(t,e){return this.orphanedSequenceNumbers.set(e,t.currentSequenceNumber),kn.resolve()},t.prototype.removeReference=function(t,e){return this.orphanedSequenceNumbers.set(e,t.currentSequenceNumber),kn.resolve()},t.prototype.updateLimboDocument=function(t,e){return this.orphanedSequenceNumbers.set(e,t.currentSequenceNumber),kn.resolve()},t.prototype.documentSize=function(t){var e,n=this.serializer.toDbRemoteDocument(t);if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw g("Unknown remote document type");e=n.noDocument}return JSON.stringify(e).length},t.prototype.isPinned=function(t,e,n){var r=this;return kn.or([function(){return r.persistence.mutationQueuesContainKey(t,e)},function(){return kn.resolve(r.inMemoryPins.containsKey(e))},function(){return r.persistence.getQueryCache().containsKey(t,e)},function(){var t=r.orphanedSequenceNumbers.get(e);return kn.resolve(void 0!==t&&t>n)}])},t.prototype.getCacheSize=function(t){return this.persistence.getRemoteDocumentCache().getSize(t)},t}(),ii=function(){function t(t,e,n,r,i){this.queue=t,this.timerId=e,this.initialDelayMs=n,this.backoffFactor=r,this.maxDelayMs=i,this.timerPromise=null,this.lastAttemptTime=Date.now(),this.reset()}return t.prototype.reset=function(){this.currentBaseMs=0},t.prototype.resetToMax=function(){this.currentBaseMs=this.maxDelayMs},t.prototype.backoffAndRun=function(t){var e=this;this.cancel();var n=Math.floor(this.currentBaseMs+this.jitterDelayMs()),r=Math.max(0,Date.now()-this.lastAttemptTime),i=Math.max(0,n-r);this.currentBaseMs>0&&d("ExponentialBackoff","Backing off for "+i+" ms (base delay: "+this.currentBaseMs+" ms, delay with jitter: "+n+" ms, last attempt: "+r+" ms ago)"),this.timerPromise=this.queue.enqueueAfterDelay(this.timerId,i,function(){return e.lastAttemptTime=Date.now(),t()}),this.currentBaseMs*=this.backoffFactor,this.currentBaseMs<this.initialDelayMs&&(this.currentBaseMs=this.initialDelayMs),this.currentBaseMs>this.maxDelayMs&&(this.currentBaseMs=this.maxDelayMs)},t.prototype.cancel=function(){null!==this.timerPromise&&(this.timerPromise.cancel(),this.timerPromise=null)},t.prototype.jitterDelayMs=function(){return(Math.random()-.5)*this.currentBaseMs},t}();!function(t){t[t.Initial=0]="Initial",t[t.Starting=1]="Starting",t[t.Open=2]="Open",t[t.Error=3]="Error",t[t.Backoff=4]="Backoff"}($r||($r={}));var oi,ai,si=1e3,ui=6e4,ci=1.5,li=function(){function t(t,e,n,r,i,o){this.queue=t,this.idleTimerId=n,this.connection=r,this.credentialsProvider=i,this.listener=o,this.state=$r.Initial,this.closeCount=0,this.idleTimer=null,this.stream=null,this.backoff=new ii(t,e,si,ci,ui)}return t.prototype.isStarted=function(){return this.state===$r.Starting||this.state===$r.Open||this.state===$r.Backoff},t.prototype.isOpen=function(){return this.state===$r.Open},t.prototype.start=function(){this.state!==$r.Error?(v(this.state===$r.Initial,"Already started"),this.auth()):this.performBackoff()},t.prototype.stop=function(){return s.__awaiter(this,void 0,void 0,function(){return s.__generator(this,function(t){switch(t.label){case 0:return this.isStarted()?[4,this.close($r.Initial)]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})},t.prototype.inhibitBackoff=function(){v(!this.isStarted(),"Can only inhibit backoff in a stopped state"),this.state=$r.Initial,this.backoff.reset()},t.prototype.markIdle=function(){var t=this;this.isOpen()&&null===this.idleTimer&&(this.idleTimer=this.queue.enqueueAfterDelay(this.idleTimerId,6e4,function(){return t.handleIdleCloseTimer()}))},t.prototype.sendRequest=function(t){this.cancelIdleCheck(),this.stream.send(t)},t.prototype.handleIdleCloseTimer=function(){return s.__awaiter(this,void 0,void 0,function(){return s.__generator(this,function(t){return this.isOpen()?[2,this.close($r.Initial)]:[2]})})},t.prototype.cancelIdleCheck=function(){this.idleTimer&&(this.idleTimer.cancel(),this.idleTimer=null)},t.prototype.close=function(t,e){return s.__awaiter(this,void 0,void 0,function(){return s.__generator(this,function(n){switch(n.label){case 0:return v(this.isStarted(),"Only started streams should be closed."),v(t===$r.Error||jt(e),"Can't provide an error when not in an error state."),this.cancelIdleCheck(),this.backoff.cancel(),this.closeCount++,t!==$r.Error?this.backoff.reset():e&&e.code===w.RESOURCE_EXHAUSTED?(m(e.toString()),m("Using maximum backoff delay to prevent overloading the backend."),this.backoff.resetToMax()):e&&e.code===w.UNAUTHENTICATED&&this.credentialsProvider.invalidateToken(),null!==this.stream&&(this.tearDown(),this.stream.close(),this.stream=null),this.state=t,[4,this.listener.onClose(e)];case 1:return n.sent(),[2]}})})},t.prototype.tearDown=function(){},t.prototype.auth=function(){var t=this;v(this.state===$r.Initial,"Must be in initial state to auth"),this.state=$r.Starting;var e=this.getCloseGuardedDispatcher(this.closeCount),n=this.closeCount;this.credentialsProvider.getToken().then(function(e){t.closeCount===n&&t.startStream(e)},function(n){e(function(){var e=new E(w.UNKNOWN,"Fetching auth token failed: "+n.message);return t.handleStreamClose(e)})})},t.prototype.startStream=function(t){var e=this;v(this.state===$r.Starting,"Trying to start stream in a non-starting state");var n=this.getCloseGuardedDispatcher(this.closeCount);this.stream=this.startRpc(t),this.stream.onOpen(function(){n(function(){return v(e.state===$r.Starting,"Expected stream to be in state Starting, but was "+e.state),e.state=$r.Open,e.listener.onOpen()})}),this.stream.onClose(function(t){n(function(){return e.handleStreamClose(t)})}),this.stream.onMessage(function(t){n(function(){return e.onMessage(t)})})},t.prototype.performBackoff=function(){var t=this;v(this.state===$r.Error,"Should only perform backoff when in Error state"),this.state=$r.Backoff,this.backoff.backoffAndRun(function(){return s.__awaiter(t,void 0,void 0,function(){return s.__generator(this,function(t){return v(this.state===$r.Backoff,"Backoff elapsed but state is now: "+this.state),this.state=$r.Initial,this.start(),v(this.isStarted(),"PersistentStream should have started"),[2]})})})},t.prototype.handleStreamClose=function(t){return v(this.isStarted(),"Can't handle server close on non-started stream"),d("PersistentStream","close with error: "+t),this.stream=null,this.close($r.Error,t)},t.prototype.getCloseGuardedDispatcher=function(t){var e=this;return function(n){e.queue.enqueueAndForget(function(){return e.closeCount===t?n():(d("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())})}},t}(),hi=function(t){function e(e,n,r,i,o){var a=t.call(this,e,hn.ListenStreamConnectionBackoff,hn.ListenStreamIdle,n,r,o)||this;return a.serializer=i,a}return s.__extends(e,t),e.prototype.startRpc=function(t){return this.connection.openStream("Listen",t)},e.prototype.onMessage=function(t){this.backoff.reset();var e=this.serializer.fromWatchChange(t),n=this.serializer.versionFromListenResponse(t);return this.listener.onWatchChange(e,n)},e.prototype.watch=function(t){var e={};e.database=this.serializer.encodedDatabaseId,e.addTarget=this.serializer.toTarget(t);var n=this.serializer.toListenRequestLabels(t);n&&(e.labels=n),this.sendRequest(e)},e.prototype.unwatch=function(t){var e={};e.database=this.serializer.encodedDatabaseId,e.removeTarget=t,this.sendRequest(e)},e}(li),fi=function(t){function e(e,n,r,i,o){var a=t.call(this,e,hn.WriteStreamConnectionBackoff,hn.WriteStreamIdle,n,r,o)||this;return a.serializer=i,a.handshakeComplete_=!1,a}return s.__extends(e,t),Object.defineProperty(e.prototype,"handshakeComplete",{get:function(){return this.handshakeComplete_},enumerable:!0,configurable:!0}),e.prototype.start=function(){this.handshakeComplete_=!1,t.prototype.start.call(this)},e.prototype.tearDown=function(){this.handshakeComplete_&&this.writeMutations([])},e.prototype.startRpc=function(t){return this.connection.openStream("Write",t)},e.prototype.onMessage=function(t){if(v(!!t.streamToken,"Got a write response without a stream token"),this.lastStreamToken=t.streamToken,this.handshakeComplete_){this.backoff.reset();var e=this.serializer.fromWriteResults(t.writeResults,t.commitTime),n=this.serializer.fromVersion(t.commitTime);return this.listener.onMutationResult(n,e)}return v(!t.writeResults||0===t.writeResults.length,"Got mutation results for handshake"),this.handshakeComplete_=!0,this.listener.onHandshakeComplete()},e.prototype.writeHandshake=function(){v(this.isOpen(),"Writing handshake requires an opened stream"),v(!this.handshakeComplete_,"Handshake already completed");var t={};t.database=this.serializer.encodedDatabaseId,this.sendRequest(t)},e.prototype.writeMutations=function(t){var e=this;v(this.isOpen(),"Writing mutations requires an opened stream"),v(this.handshakeComplete_,"Handshake must be complete before writing mutations"),v(this.lastStreamToken.length>0,"Trying to write mutation without a token");var n={streamToken:this.lastStreamToken,writes:t.map(function(t){return e.serializer.toMutation(t)})};this.sendRequest(n)},e}(li),pi=function(){function t(t,e,n,r){this.queue=t,this.connection=e,this.credentials=n,this.serializer=r}return t.prototype.newPersistentWriteStream=function(t){return new fi(this.queue,this.connection,this.credentials,this.serializer,t)},t.prototype.newPersistentWatchStream=function(t){return new hi(this.queue,this.connection,this.credentials,this.serializer,t)},t.prototype.commit=function(t){var e=this,n={database:this.serializer.encodedDatabaseId,writes:t.map(function(t){return e.serializer.toMutation(t)})};return this.invokeRPC("Commit",n).then(function(t){return e.serializer.fromWriteResults(t.writeResults,t.commitTime)})},t.prototype.lookup=function(t){var e=this,n={database:this.serializer.encodedDatabaseId,documents:t.map(function(t){return e.serializer.toName(t)})};return this.invokeStreamingRPC("BatchGetDocuments",n).then(function(n){var r=ke();n.forEach(function(t){var n=e.serializer.fromMaybeDocument(t);r=r.insert(n.key,n)});var i=[];return t.forEach(function(t){var e=r.get(t);v(!!e,"Missing entity in write response for "+t),i.push(e)}),i})},t.prototype.invokeRPC=function(t,e){var n=this;return this.credentials.getToken().then(function(r){return n.connection.invokeRPC(t,e,r)}).catch(function(t){throw t.code===w.UNAUTHENTICATED&&n.credentials.invalidateToken(),t})},t.prototype.invokeStreamingRPC=function(t,e){var n=this;return this.credentials.getToken().then(function(r){return n.connection.invokeStreamingRPC(t,e,r)}).catch(function(t){throw t.code===w.UNAUTHENTICATED&&n.credentials.invalidateToken(),t})},t}(),di=function(){function t(t){this.datastore=t,this.readVersions=De(),this.mutations=[],this.committed=!1}return t.prototype.recordVersion=function(t){var e;if(t instanceof dt)e=t.version;else{if(!(t instanceof mt))throw g("Document in a transaction was a "+t.constructor.name);e=ee.forDeletedDoc()}var n=this.readVersions.get(t.key);if(null!==n){if(!e.isEqual(n))throw new E(w.ABORTED,"Document version changed between two reads.")}else this.readVersions=this.readVersions.insert(t.key,e)},t.prototype.lookup=function(t){var e=this;return this.committed?Promise.reject("Transaction has already completed."):this.mutations.length>0?Promise.reject("Transactions lookups are invalid after writes."):this.datastore.lookup(t).then(function(t){return t.forEach(function(t){t instanceof mt||t instanceof dt?e.recordVersion(t):g("Document in a transaction was a "+t.constructor.name)}),t})},t.prototype.write=function(t){if(this.committed)throw new E(w.FAILED_PRECONDITION,"Transaction has already completed.");this.mutations=this.mutations.concat(t)},t.prototype.precondition=function(t){var e=this.readVersions.get(t);return e?ce.updateTime(e):ce.NONE},t.prototype.preconditionForUpdate=function(t){var e=this.readVersions.get(t);if(e&&e.isEqual(ee.forDeletedDoc()))throw new E(w.FAILED_PRECONDITION,"Can't update a document that doesn't exist.");return e?ce.updateTime(e):ce.exists(!0)},t.prototype.set=function(t,e){this.write(e.toMutations(t,this.precondition(t)))},t.prototype.update=function(t,e){this.write(e.toMutations(t,this.preconditionForUpdate(t)))},t.prototype.delete=function(t){this.write([new de(t,this.precondition(t))]),this.readVersions=this.readVersions.insert(t,ee.forDeletedDoc())},t.prototype.commit=function(){var t=this,e=this.readVersions;return this.mutations.forEach(function(t){e=e.remove(t.key)}),e.isEmpty()?this.datastore.commit(this.mutations).then(function(){t.committed=!0}):Promise.reject(Error("Every document read in a transaction must also be written."))},t}();!function(t){t[t.Unknown=0]="Unknown",t[t.Online=1]="Online",t[t.Offline=2]="Offline"}(oi||(oi={})),function(t){t[t.RemoteStore=0]="RemoteStore",t[t.SharedClientState=1]="SharedClientState"}(ai||(ai={}));var mi=function(){function t(t,e){this.asyncQueue=t,this.onlineStateHandler=e,this.state=oi.Unknown,this.watchStreamFailures=0,this.onlineStateTimer=null,this.shouldWarnClientIsOffline=!0}return t.prototype.handleWatchStreamStart=function(){var t=this;0===this.watchStreamFailures&&(this.setAndBroadcast(oi.Unknown),v(null===this.onlineStateTimer,"onlineStateTimer shouldn't be started yet"),this.onlineStateTimer=this.asyncQueue.enqueueAfterDelay(hn.OnlineStateTimeout,1e4,function(){return t.onlineStateTimer=null,v(t.state===oi.Unknown,"Timer should be canceled if we transitioned to a different state."),t.logClientOfflineWarningIfNecessary("Backend didn't respond within 10 seconds."),t.setAndBroadcast(oi.Offline),Promise.resolve()}))},t.prototype.handleWatchStreamFailure=function(t){this.state===oi.Online?(this.setAndBroadcast(oi.Unknown),v(0===this.watchStreamFailures,"watchStreamFailures must be 0"),v(null===this.onlineStateTimer,"onlineStateTimer must be null")):(this.watchStreamFailures++,this.watchStreamFailures>=1&&(this.clearOnlineStateTimer(),this.logClientOfflineWarningIfNecessary("Connection failed 1 times. Most recent error: "+t.toString()),this.setAndBroadcast(oi.Offline)))},t.prototype.set=function(t){this.clearOnlineStateTimer(),this.watchStreamFailures=0,t===oi.Online&&(this.shouldWarnClientIsOffline=!1),this.setAndBroadcast(t)},t.prototype.setAndBroadcast=function(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))},t.prototype.logClientOfflineWarningIfNecessary=function(t){var e="Could not reach Cloud Firestore backend. "+t+"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.";this.shouldWarnClientIsOffline?(m(e),this.shouldWarnClientIsOffline=!1):d("OnlineStateTracker",e)},t.prototype.clearOnlineStateTimer=function(){null!==this.onlineStateTimer&&(this.onlineStateTimer.cancel(),this.onlineStateTimer=null)},t}(),yi=function(){function t(t,e,n,r){this.localStore=t,this.datastore=e,this.writePipeline=[],this.listenTargets={},this.watchChangeAggregator=null,this.networkEnabled=!1,this.isPrimary=!1,this.onlineStateTracker=new mi(n,r),this.watchStream=this.datastore.newPersistentWatchStream({onOpen:this.onWatchStreamOpen.bind(this),onClose:this.onWatchStreamClose.bind(this),onWatchChange:this.onWatchStreamChange.bind(this)}),this.writeStream=this.datastore.newPersistentWriteStream({onOpen:this.onWriteStreamOpen.bind(this),onClose:this.onWriteStreamClose.bind(this),onHandshakeComplete:this.onWriteHandshakeComplete.bind(this),onMutationResult:this.onMutationResult.bind(this)})}return t.prototype.start=function(){return this.enableNetwork()},t.prototype.enableNetwork=function(){return s.__awaiter(this,void 0,void 0,function(){var t;return s.__generator(this,function(e){switch(e.label){case 0:return this.networkEnabled=!0,this.canUseNetwork()?(t=this.writeStream,[4,this.localStore.getLastStreamToken()]):[3,3];case 1:return t.lastStreamToken=e.sent(),this.shouldStartWatchStream()?this.startWatchStream():this.onlineStateTracker.set(oi.Unknown),[4,this.fillWritePipeline()];case 2:e.sent(),e.label=3;case 3:return[2]}})})},t.prototype.disableNetwork=function(){return s.__awaiter(this,void 0,void 0,function(){return s.__generator(this,function(t){switch(t.label){case 0:return this.networkEnabled=!1,[4,this.disableNetworkInternal()];case 1:return t.sent(),this.onlineStateTracker.set(oi.Offline),[2]}})})},t.prototype.disableNetworkInternal=function(){return s.__awaiter(this,void 0,void 0,function(){return s.__generator(this,function(t){switch(t.label){case 0:return[4,this.writeStream.stop()];case 1:return t.sent(),[4,this.watchStream.stop()];case 2:return t.sent(),this.writePipeline.length>0&&(d("RemoteStore","Stopping write stream with "+this.writePipeline.length+" pending writes"),this.writePipeline=[]),this.cleanUpWatchStreamState(),[2]}})})},t.prototype.shutdown=function(){return s.__awaiter(this,void 0,void 0,function(){return s.__generator(this,function(t){switch(t.label){case 0:return d("RemoteStore","RemoteStore shutting down."),this.networkEnabled=!1,[4,this.disableNetworkInternal()];case 1:return t.sent(),this.onlineStateTracker.set(oi.Unknown),[2]}})})},t.prototype.listen=function(t){v(!T(this.listenTargets,t.targetId),"listen called with duplicate targetId!"),this.listenTargets[t.targetId]=t,this.shouldStartWatchStream()?this.startWatchStream():this.watchStream.isOpen()&&this.sendWatchRequest(t)},t.prototype.unlisten=function(t){v(T(this.listenTargets,t),"unlisten called without assigned target ID!"),delete this.listenTargets[t],this.watchStream.isOpen()&&this.sendUnwatchRequest(t),I(this.listenTargets)&&(this.watchStream.isOpen()?this.watchStream.markIdle():this.canUseNetwork()&&this.onlineStateTracker.set(oi.Unknown))},t.prototype.getQueryDataForTarget=function(t){return this.listenTargets[t]||null},t.prototype.getRemoteKeysForTarget=function(t){return this.syncEngine.getRemoteKeysForTarget(t)},t.prototype.sendWatchRequest=function(t){this.watchChangeAggregator.recordPendingTargetRequest(t.targetId),this.watchStream.watch(t)},t.prototype.sendUnwatchRequest=function(t){this.watchChangeAggregator.recordPendingTargetRequest(t),this.watchStream.unwatch(t)},t.prototype.startWatchStream=function(){v(this.shouldStartWatchStream(),"startWatchStream() called when shouldStartWatchStream() is false."),this.watchChangeAggregator=new Qe(this),this.watchStream.start(),this.onlineStateTracker.handleWatchStreamStart()},t.prototype.shouldStartWatchStream=function(){return this.canUseNetwork()&&!this.watchStream.isStarted()&&!I(this.listenTargets)},t.prototype.canUseNetwork=function(){return this.isPrimary&&this.networkEnabled},t.prototype.cleanUpWatchStreamState=function(){this.watchChangeAggregator=null},t.prototype.onWatchStreamOpen=function(){return s.__awaiter(this,void 0,void 0,function(){var t=this;return s.__generator(this,function(e){return k(this.listenTargets,function(e,n){t.sendWatchRequest(n)}),[2]})})},t.prototype.onWatchStreamClose=function(t){return s.__awaiter(this,void 0,void 0,function(){return s.__generator(this,function(e){return void 0===t&&v(!this.shouldStartWatchStream(),"Watch stream was stopped gracefully while still needed."),this.cleanUpWatchStreamState(),this.shouldStartWatchStream()?(this.onlineStateTracker.handleWatchStreamFailure(t),this.startWatchStream()):this.onlineStateTracker.set(oi.Unknown),[2]})})},t.prototype.onWatchStreamChange=function(t,e){return s.__awaiter(this,void 0,void 0,function(){var n;return s.__generator(this,function(r){switch(r.label){case 0:return this.onlineStateTracker.set(oi.Online),t instanceof He&&t.state===Be.Removed&&t.cause?[2,this.handleTargetError(t)]:(t instanceof We?this.watchChangeAggregator.handleDocumentChange(t):t instanceof ze?this.watchChangeAggregator.handleExistenceFilter(t):(v(t instanceof He,"Expected watchChange to be an instance of WatchTargetChange"),this.watchChangeAggregator.handleTargetChange(t)),e.isEqual(ee.MIN)?[3,3]:[4,this.localStore.getLastRemoteSnapshotVersion()]);case 1:return n=r.sent(),e.compareTo(n)>=0?[4,this.raiseWatchSnapshot(e)]:[3,3];case 2:r.sent(),r.label=3;case 3:return[2]}})})},t.prototype.raiseWatchSnapshot=function(t){var e=this;v(!t.isEqual(ee.MIN),"Can't raise event for unknown SnapshotVersion");var n=this.watchChangeAggregator.createRemoteEvent(t);return k(n.targetChanges,function(n,r){if(r.resumeToken.length>0){var i=e.listenTargets[n];i&&(e.listenTargets[n]=i.copy({resumeToken:r.resumeToken,snapshotVersion:t}))}}),n.targetMismatches.forEach(function(t){var n=e.listenTargets[t];if(n){e.listenTargets[t]=n.copy({resumeToken:_()}),e.sendUnwatchRequest(t);var r=new re(n.query,t,Gt.ExistenceFilterMismatch,n.sequenceNumber);e.sendWatchRequest(r)}}),this.syncEngine.applyRemoteEvent(n)},t.prototype.handleTargetError=function(t){var e=this;v(!!t.cause,"Handling target error without a cause");var n=t.cause,r=Promise.resolve();return t.targetIds.forEach(function(t){r=r.then(function(){return s.__awaiter(e,void 0,void 0,function(){return s.__generator(this,function(e){return T(this.listenTargets,t)?(delete this.listenTargets[t],this.watchChangeAggregator.removeTarget(t),[2,this.syncEngine.rejectListen(t,n)]):[2]})})})}),r},t.prototype.fillWritePipeline=function(){return s.__awaiter(this,void 0,void 0,function(){var t,e;return s.__generator(this,function(n){switch(n.label){case 0:return this.canAddToWritePipeline()?(t=this.writePipeline.length>0?this.writePipeline[this.writePipeline.length-1].batchId:-1,[4,this.localStore.nextMutationBatch(t)]):[3,4];case 1:return null!==(e=n.sent())?[3,2]:(0===this.writePipeline.length&&this.writeStream.markIdle(),[3,4]);case 2:return this.addToWritePipeline(e),[4,this.fillWritePipeline()];case 3:n.sent(),n.label=4;case 4:return this.shouldStartWriteStream()&&this.startWriteStream(),[2]}})})},t.prototype.canAddToWritePipeline=function(){return this.canUseNetwork()&&this.writePipeline.length<10},t.prototype.outstandingWrites=function(){return this.writePipeline.length},t.prototype.addToWritePipeline=function(t){v(this.canAddToWritePipeline(),"addToWritePipeline called when pipeline is full"),this.writePipeline.push(t),this.writeStream.isOpen()&&this.writeStream.handshakeComplete&&this.writeStream.writeMutations(t.mutations)},t.prototype.shouldStartWriteStream=function(){return this.canUseNetwork()&&!this.writeStream.isStarted()&&this.writePipeline.length>0},t.prototype.startWriteStream=function(){v(this.shouldStartWriteStream(),"startWriteStream() called when shouldStartWriteStream() is false."),this.writeStream.start()},t.prototype.onWriteStreamOpen=function(){return s.__awaiter(this,void 0,void 0,function(){return s.__generator(this,function(t){return this.writeStream.writeHandshake(),[2]})})},t.prototype.onWriteHandshakeComplete=function(){var t=this;return this.localStore.setLastStreamToken(this.writeStream.lastStreamToken).then(function(){for(var e=0,n=t.writePipeline;e<n.length;e++){var r=n[e];t.writeStream.writeMutations(r.mutations)}}).catch(Ur)},t.prototype.onMutationResult=function(t,e){var n=this;v(this.writePipeline.length>0,"Got result for empty write pipeline");var r=this.writePipeline.shift(),i=Cn.from(r,t,e,this.writeStream.lastStreamToken);return this.syncEngine.applySuccessfulWrite(i).then(function(){return n.fillWritePipeline()})},t.prototype.onWriteStreamClose=function(t){return s.__awaiter(this,void 0,void 0,function(){var e=this;return s.__generator(this,function(n){return void 0===t&&v(!this.shouldStartWriteStream(),"Write stream was stopped gracefully while still needed."),t&&this.writePipeline.length>0?(void 0,[2,(this.writeStream.handshakeComplete?this.handleWriteError(t):this.handleHandshakeError(t)).then(function(){e.shouldStartWriteStream()&&e.startWriteStream()})]):[2]})})},t.prototype.handleHandshakeError=function(t){return s.__awaiter(this,void 0,void 0,function(){return s.__generator(this,function(e){return Ee(t.code)?(d("RemoteStore","RemoteStore error before completed handshake; resetting stream token: ",this.writeStream.lastStreamToken),this.writeStream.lastStreamToken=_(),[2,this.localStore.setLastStreamToken(_()).catch(Ur)]):[2]})})},t.prototype.handleWriteError=function(t){return s.__awaiter(this,void 0,void 0,function(){var e,n=this;return s.__generator(this,function(r){return Ee(i=t.code)&&i!==w.ABORTED?(e=this.writePipeline.shift(),this.writeStream.inhibitBackoff(),[2,this.syncEngine.rejectFailedWrite(e.batchId,t).then(function(){return n.fillWritePipeline()})]):[2];var i})})},t.prototype.createTransaction=function(){return new di(this.datastore)},t.prototype.handleCredentialChange=function(){return s.__awaiter(this,void 0,void 0,function(){return s.__generator(this,function(t){switch(t.label){case 0:return this.canUseNetwork()?(d("RemoteStore","RemoteStore restarting streams for new credential"),this.networkEnabled=!1,[4,this.disableNetworkInternal()]):[3,3];case 1:return t.sent(),this.onlineStateTracker.set(oi.Unknown),[4,this.enableNetwork()];case 2:t.sent(),t.label=3;case 3:return[2]}})})},t.prototype.applyPrimaryState=function(t){return s.__awaiter(this,void 0,void 0,function(){return s.__generator(this,function(e){switch(e.label){case 0:return this.isPrimary=t,t&&this.networkEnabled?[4,this.enableNetwork()]:[3,2];case 1:return e.sent(),[3,4];case 2:return t?[3,4]:[4,this.disableNetworkInternal()];case 3:e.sent(),this.onlineStateTracker.set(oi.Unknown),e.label=4;case 4:return[2]}})})},t}(),gi=function(){return function(){this.listeners=[]}}(),vi=function(){function t(t){this.syncEngine=t,this.queries=new Kn(function(t){return t.canonicalId()}),this.onlineState=oi.Unknown,this.syncEngine.subscribe(this)}return t.prototype.listen=function(t){var e=t.query,n=!1,r=this.queries.get(e);return r||(n=!0,r=new gi,this.queries.set(e,r)),r.listeners.push(t),t.applyOnlineStateChange(this.onlineState),r.viewSnap&&t.onViewSnapshot(r.viewSnap),n?this.syncEngine.listen(e).then(function(t){return r.targetId=t,t}):Promise.resolve(r.targetId)},t.prototype.unlisten=function(t){return s.__awaiter(this,void 0,void 0,function(){var e,n,r,i;return s.__generator(this,function(o){return e=t.query,n=!1,(r=this.queries.get(e))&&(i=r.listeners.indexOf(t))>=0&&(r.listeners.splice(i,1),n=0===r.listeners.length),n?(this.queries.delete(e),[2,this.syncEngine.unlisten(e)]):[2]})})},t.prototype.onWatchChange=function(t){for(var e=0,n=t;e<n.length;e++){var r=n[e],i=r.query,o=this.queries.get(i);if(o){for(var a=0,s=o.listeners;a<s.length;a++){s[a].onViewSnapshot(r)}o.viewSnap=r}}},t.prototype.onWatchError=function(t,e){var n=this.queries.get(t);if(n)for(var r=0,i=n.listeners;r<i.length;r++){i[r].onError(e)}this.queries.delete(t)},t.prototype.onOnlineStateChange=function(t){this.onlineState=t,this.queries.forEach(function(e,n){for(var r=0,i=n.listeners;r<i.length;r++){i[r].applyOnlineStateChange(t)}})},t}(),bi=function(){function t(t,e,n){this.query=t,this.queryObserver=e,this.raisedInitialEvent=!1,this.onlineState=oi.Unknown,this.options=n||{}}return t.prototype.onViewSnapshot=function(t){if(v(t.docChanges.length>0||t.syncStateChanged,"We got a new snapshot with no changes?"),!this.options.includeMetadataChanges){for(var e=[],n=0,r=t.docChanges;n<r.length;n++){var i=r[n];i.type!==Fe.Metadata&&e.push(i)}t=new je(t.query,t.docs,t.oldDocs,e,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0)}this.raisedInitialEvent?this.shouldRaiseEvent(t)&&this.queryObserver.next(t):this.shouldRaiseInitialEvent(t,this.onlineState)&&this.raiseInitialEvent(t),this.snap=t},t.prototype.onError=function(t){this.queryObserver.error(t)},t.prototype.applyOnlineStateChange=function(t){this.onlineState=t,this.snap&&!this.raisedInitialEvent&&this.shouldRaiseInitialEvent(this.snap,t)&&this.raiseInitialEvent(this.snap)},t.prototype.shouldRaiseInitialEvent=function(t,e){if(v(!this.raisedInitialEvent,"Determining whether to raise first event but already had first event"),!t.fromCache)return!0;var n=e!==oi.Offline;return this.options.waitForSyncWhenOnline&&n?(v(t.fromCache,"Waiting for sync, but snapshot is not from cache"),!1):!t.docs.isEmpty()||e===oi.Offline},t.prototype.shouldRaiseEvent=function(t){if(t.docChanges.length>0)return!0;var e=this.snap&&this.snap.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!e)&&!0===this.options.includeMetadataChanges},t.prototype.raiseInitialEvent=function(t){v(!this.raisedInitialEvent,"Trying to raise initial events for second time"),t=je.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache),this.raisedInitialEvent=!0,this.queryObserver.next(t)},t}(),_i=function(){function t(t,e,n){this.targetId=t,this.addedKeys=e,this.removedKeys=n}return t.fromSnapshot=function(e,n){for(var r=Re(),i=Re(),o=0,a=n.docChanges;o<a.length;o++){var s=a[o];switch(s.type){case Fe.Added:r=r.add(s.doc.key);break;case Fe.Removed:i=i.add(s.doc.key)}}return new t(e,r,i)},t}(),wi=function(){return function(t){this.key=t}}(),Ei=function(){return function(t){this.key=t}}(),Si=function(){function t(t,e){this.query=t,this._syncedDocuments=e,this.syncState=null,this.current=!1,this.limboDocuments=Re(),this.mutatedKeys=Re(),this.documentSet=new Ve(t.docComparator.bind(t))}return Object.defineProperty(t.prototype,"syncedDocuments",{get:function(){return this._syncedDocuments},enumerable:!0,configurable:!0}),t.prototype.computeDocChanges=function(t,e){var n=this,r=e?e.changeSet:new Ue,i=e?e.documentSet:this.documentSet,o=e?e.mutatedKeys:this.mutatedKeys,a=i,s=!1,u=this.query.hasLimit()&&i.size===this.query.limit?i.last():null;if(t.inorderTraversal(function(t,e){var c=i.get(t),l=e instanceof dt?e:null;l&&(v(t.isEqual(l.key),"Mismatching keys found in document changes: "+t+" != "+l.key),l=n.query.matches(l)?l:null);var h=!!c&&n.mutatedKeys.has(c.key),f=!!l&&(l.hasLocalMutations||n.mutatedKeys.has(l.key)&&l.hasCommittedMutations),p=!1;c&&l?c.data.isEqual(l.data)?h!==f&&(r.track({type:Fe.Metadata,doc:l}),p=!0):n.shouldWaitForSyncedDocument(c,l)||(r.track({type:Fe.Modified,doc:l}),p=!0,u&&n.query.docComparator(l,u)>0&&(s=!0)):!c&&l?(r.track({type:Fe.Added,doc:l}),p=!0):c&&!l&&(r.track({type:Fe.Removed,doc:c}),p=!0,u&&(s=!0));p&&(l?(a=a.add(l),o=f?o.add(t):o.delete(t)):(a=a.delete(t),o=o.delete(t)))}),this.query.hasLimit())for(;a.size>this.query.limit;){var c=a.last();a=a.delete(c.key),o=o.delete(c.key),r.track({type:Fe.Removed,doc:c})}return v(!s||!e,"View was refilled using docs that themselves needed refilling."),{documentSet:a,changeSet:r,needsRefill:s,mutatedKeys:o}},t.prototype.shouldWaitForSyncedDocument=function(t,e){return t.hasLocalMutations&&e.hasCommittedMutations&&!e.hasLocalMutations},t.prototype.applyChanges=function(t,e,n){var r=this;v(!t.needsRefill,"Cannot apply changes that need a refill");var i=this.documentSet;this.documentSet=t.documentSet,this.mutatedKeys=t.mutatedKeys;var o=t.changeSet.getChanges();o.sort(function(t,e){return function(t,e){var n=function(t){switch(t){case Fe.Added:return 1;case Fe.Modified:case Fe.Metadata:return 2;case Fe.Removed:return 0;default:return g("Unknown ChangeType: "+t)}};return n(t)-n(e)}(t.type,e.type)||r.query.docComparator(t.doc,e.doc)}),this.applyTargetChange(n);var a=e?this.updateLimboDocuments():[],s=0===this.limboDocuments.size&&this.current?Le.Synced:Le.Local,u=s!==this.syncState;return this.syncState=s,0!==o.length||u?{snapshot:new je(this.query,t.documentSet,i,o,t.mutatedKeys,s===Le.Local,u,!1),limboChanges:a}:{limboChanges:a}},t.prototype.applyOnlineStateChange=function(t){return this.current&&t===oi.Offline?(this.current=!1,this.applyChanges({documentSet:this.documentSet,changeSet:new Ue,mutatedKeys:this.mutatedKeys,needsRefill:!1},!1)):{limboChanges:[]}},t.prototype.shouldBeInLimbo=function(t){return!this._syncedDocuments.has(t)&&(!!this.documentSet.has(t)&&!this.documentSet.get(t).hasLocalMutations)},t.prototype.applyTargetChange=function(t){var e=this;t&&(t.addedDocuments.forEach(function(t){return e._syncedDocuments=e._syncedDocuments.add(t)}),t.modifiedDocuments.forEach(function(t){return v(e._syncedDocuments.has(t),"Modified document "+t+" not found in view.")}),t.removedDocuments.forEach(function(t){return e._syncedDocuments=e._syncedDocuments.delete(t)}),this.current=t.current)},t.prototype.updateLimboDocuments=function(){var t=this;if(!this.current)return[];var e=this.limboDocuments;this.limboDocuments=Re(),this.documentSet.forEach(function(e){t.shouldBeInLimbo(e.key)&&(t.limboDocuments=t.limboDocuments.add(e.key))});var n=[];return e.forEach(function(e){t.limboDocuments.has(e)||n.push(new Ei(e))}),this.limboDocuments.forEach(function(t){e.has(t)||n.push(new wi(t))}),n},t.prototype.synchronizeWithPersistedState=function(t,e){this._syncedDocuments=e,this.limboDocuments=Re();var n=this.computeDocChanges(t);return this.applyChanges(n,!0)},t.prototype.computeInitialSnapshot=function(){return je.fromInitialDocuments(this.query,this.documentSet,this.mutatedKeys,this.syncState===Le.Local)},t}();var Ti=function(){return function(t,e,n){this.query=t,this.targetId=e,this.view=n}}(),Ci=function(){return function(t){this.key=t}}(),ki=function(){function t(t,e,n,r){this.localStore=t,this.remoteStore=e,this.sharedClientState=n,this.currentUser=r,this.syncEngineListener=null,this.queryViewsByQuery=new Kn(function(t){return t.canonicalId()}),this.queryViewsByTarget={},this.limboTargetsByKey=new gt(ft.comparator),this.limboResolutionsByTarget={},this.limboDocumentRefs=new Hr,this.mutationUserCallbacks={},this.limboTargetIdGenerator=Fn.forSyncEngine(),this.isPrimary=void 0,this.onlineState=oi.Unknown}return Object.defineProperty(t.prototype,"isPrimaryClient",{get:function(){return!0===this.isPrimary},enumerable:!0,configurable:!0}),t.prototype.subscribe=function(t){v(null!==t,"SyncEngine listener cannot be null"),v(null===this.syncEngineListener,"SyncEngine already has a subscriber."),this.syncEngineListener=t},t.prototype.listen=function(t){return s.__awaiter(this,void 0,void 0,function(){var e,n,r,i,o;return s.__generator(this,function(a){switch(a.label){case 0:return this.assertSubscribed("listen()"),(r=this.queryViewsByQuery.get(t))?(e=r.targetId,this.sharedClientState.addLocalQueryTarget(e),n=r.view.computeInitialSnapshot(),[3,4]):[3,1];case 1:return[4,this.localStore.allocateQuery(t)];case 2:return i=a.sent(),o=this.sharedClientState.addLocalQueryTarget(i.targetId),e=i.targetId,[4,this.initializeViewAndComputeSnapshot(i,"current"===o)];case 3:n=a.sent(),this.isPrimary&&this.remoteStore.listen(i),a.label=4;case 4:return this.syncEngineListener.onWatchChange([n]),[2,e]}})})},t.prototype.initializeViewAndComputeSnapshot=function(t,e){var n=this,r=t.query;return this.localStore.executeQuery(r).then(function(i){return n.localStore.remoteDocumentKeys(t.targetId).then(function(o){var a=new Si(r,o),s=a.computeDocChanges(i),u=Ge.createSynthesizedTargetChangeForCurrentChange(t.targetId,e&&n.onlineState!==oi.Offline),c=a.applyChanges(s,!0===n.isPrimary,u);v(0===c.limboChanges.length,"View returned limbo docs before target ack from the server."),v(!!c.snapshot,"applyChanges for new view should always return a snapshot");var l=new Ti(r,t.targetId,a);return n.queryViewsByQuery.set(r,l),n.queryViewsByTarget[t.targetId]=l,c.snapshot})})},t.prototype.synchronizeViewAndComputeSnapshot=function(t){var e=this;return this.localStore.executeQuery(t.query).then(function(n){return e.localStore.remoteDocumentKeys(t.targetId).then(function(r){return s.__awaiter(e,void 0,void 0,function(){var e;return s.__generator(this,function(i){return e=t.view.synchronizeWithPersistedState(n,r),this.isPrimary&&this.updateTrackedLimbos(t.targetId,e.limboChanges),[2,e]})})})})},t.prototype.unlisten=function(t){return s.__awaiter(this,void 0,void 0,function(){var e,n=this;return s.__generator(this,function(r){switch(r.label){case 0:return this.assertSubscribed("unlisten()"),v(!!(e=this.queryViewsByQuery.get(t)),"Trying to unlisten on query not found:"+t),this.isPrimary?(this.sharedClientState.removeLocalQueryTarget(e.targetId),this.sharedClientState.isActiveQueryTarget(e.targetId)?[3,2]:[4,this.localStore.releaseQuery(t,!1).then(function(){n.sharedClientState.clearQueryState(e.targetId),n.remoteStore.unlisten(e.targetId),n.removeAndCleanupQuery(e)}).catch(Ur)]):[3,3];case 1:r.sent(),r.label=2;case 2:return[3,5];case 3:return this.removeAndCleanupQuery(e),[4,this.localStore.releaseQuery(t,!0)];case 4:r.sent(),r.label=5;case 5:return[2]}})})},t.prototype.write=function(t,e){var n=this;return this.assertSubscribed("write()"),this.localStore.localWrite(t).then(function(t){return n.sharedClientState.addPendingMutation(t.batchId),n.addMutationCallback(t.batchId,e),n.emitNewSnapsAndNotifyLocalStore(t.changes)}).then(function(){return n.remoteStore.fillWritePipeline()})},t.prototype.wrapUpdateFunctionError=function(t){return t},t.prototype.runTransaction=function(t,e){var n=this;void 0===e&&(e=5),v(e>=0,"Got negative number of retries for transaction.");var r=this.remoteStore.createTransaction();return function(){try{var e=t(r);return!jt(e)&&e.catch&&e.then?e.catch(function(t){return Promise.reject(n.wrapUpdateFunctionError(t))}):Promise.reject(Error("Transaction callback must return a Promise"))}catch(i){return Promise.reject(n.wrapUpdateFunctionError(i))}}().then(function(i){return r.commit().then(function(){return i}).catch(function(r){return 0===e?Promise.reject(r):n.runTransaction(t,e-1)})})},t.prototype.applyRemoteEvent=function(t){var e=this;return this.assertSubscribed("applyRemoteEvent()"),this.localStore.applyRemoteEvent(t).then(function(n){return x(t.targetChanges,function(t,n){var r=e.limboResolutionsByTarget[t];r&&(v(n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size<=1,"Limbo resolution for single document contains multiple changes."),n.addedDocuments.size>0?r.receivedDocument=!0:n.modifiedDocuments.size>0?v(r.receivedDocument,"Received change for limbo target document without add."):n.removedDocuments.size>0&&(v(r.receivedDocument,"Received remove for limbo target document without add."),r.receivedDocument=!1))}),e.emitNewSnapsAndNotifyLocalStore(n,t)}).catch(Ur)},t.prototype.applyOnlineStateChange=function(t,e){if(this.isPrimary&&e===ai.RemoteStore||!this.isPrimary&&e===ai.SharedClientState){var n=[];this.queryViewsByQuery.forEach(function(e,r){var i=r.view.applyOnlineStateChange(t);v(0===i.limboChanges.length,"OnlineState should not affect limbo documents."),i.snapshot&&n.push(i.snapshot)}),this.syncEngineListener.onOnlineStateChange(t),this.syncEngineListener.onWatchChange(n),this.onlineState=t,this.isPrimary&&this.sharedClientState.setOnlineState(t)}},t.prototype.rejectListen=function(t,e){return s.__awaiter(this,void 0,void 0,function(){var n,r,i,o,a,u,c=this;return s.__generator(this,function(s){switch(s.label){case 0:return this.assertSubscribed("rejectListens()"),this.sharedClientState.updateQueryState(t,"rejected",e),n=this.limboResolutionsByTarget[t],(r=n&&n.key)?(this.limboTargetsByKey=this.limboTargetsByKey.remove(r),delete this.limboResolutionsByTarget[t],i=(i=new gt(ft.comparator)).insert(r,new mt(r,ee.forDeletedDoc())),o=Re().add(r),a=new qe(ee.MIN,{},new ie(Q),i,o),[2,this.applyRemoteEvent(a)]):[3,1];case 1:return v(!!(u=this.queryViewsByTarget[t]),"Unknown targetId: "+t),[4,this.localStore.releaseQuery(u.query,!1).then(function(){return c.removeAndCleanupQuery(u)}).catch(Ur)];case 2:s.sent(),this.syncEngineListener.onWatchError(u.query,e),s.label=3;case 3:return[2]}})})},t.prototype.applyBatchState=function(t,e,n){return s.__awaiter(this,void 0,void 0,function(){var r;return s.__generator(this,function(i){switch(i.label){case 0:return this.assertSubscribed("applyBatchState()"),[4,this.localStore.lookupMutationDocuments(t)];case 1:return null===(r=i.sent())?(d("SyncEngine","Cannot apply mutation batch with id: "+t),[2]):"pending"!==e?[3,3]:[4,this.remoteStore.fillWritePipeline()];case 2:return i.sent(),[3,4];case 3:"acknowledged"===e||"rejected"===e?(this.processUserCallback(t,n||null),this.localStore.removeCachedMutationBatchMetadata(t)):g("Unknown batchState: "+e),i.label=4;case 4:return[4,this.emitNewSnapsAndNotifyLocalStore(r)];case 5:return i.sent(),[2]}})})},t.prototype.applySuccessfulWrite=function(t){var e=this;this.assertSubscribed("applySuccessfulWrite()");var n=t.batch.batchId;return this.processUserCallback(n,null),this.localStore.acknowledgeBatch(t).then(function(t){return e.sharedClientState.updateMutationState(n,"acknowledged"),e.emitNewSnapsAndNotifyLocalStore(t)}).catch(Ur)},t.prototype.rejectFailedWrite=function(t,e){var n=this;return this.assertSubscribed("rejectFailedWrite()"),this.processUserCallback(t,e),this.localStore.rejectBatch(t).then(function(r){return n.sharedClientState.updateMutationState(t,"rejected",e),n.emitNewSnapsAndNotifyLocalStore(r)}).catch(Ur)},t.prototype.addMutationCallback=function(t,e){var n=this.mutationUserCallbacks[this.currentUser.toKey()];n||(n=new gt(Q)),n=n.insert(t,e),this.mutationUserCallbacks[this.currentUser.toKey()]=n},t.prototype.processUserCallback=function(t,e){var n=this.mutationUserCallbacks[this.currentUser.toKey()];if(n){var r=n.get(t);r&&(v(t===n.minKey(),"Mutation callbacks processed out-of-order?"),e?r.reject(e):r.resolve(),n=n.remove(t)),this.mutationUserCallbacks[this.currentUser.toKey()]=n}},t.prototype.removeAndCleanupQuery=function(t){var e=this;if(this.sharedClientState.removeLocalQueryTarget(t.targetId),this.queryViewsByQuery.delete(t.query),delete this.queryViewsByTarget[t.targetId],this.isPrimary){var n=this.limboDocumentRefs.referencesForId(t.targetId);this.limboDocumentRefs.removeReferencesForId(t.targetId),n.forEach(function(t){e.limboDocumentRefs.containsKey(t)||e.removeLimboTarget(t)})}},t.prototype.removeLimboTarget=function(t){var e=this.limboTargetsByKey.get(t);null!==e&&(this.remoteStore.unlisten(e),this.limboTargetsByKey=this.limboTargetsByKey.remove(t),delete this.limboResolutionsByTarget[e])},t.prototype.updateTrackedLimbos=function(t,e){for(var n=0,r=e;n<r.length;n++){var i=r[n];if(i instanceof wi)this.limboDocumentRefs.addReference(i.key,t),this.trackLimboChange(i);else if(i instanceof Ei){d("SyncEngine","Document no longer in limbo: "+i.key),this.limboDocumentRefs.removeReference(i.key,t),this.limboDocumentRefs.containsKey(i.key)||this.removeLimboTarget(i.key)}else g("Unknown limbo change: "+JSON.stringify(i))}},t.prototype.trackLimboChange=function(t){var e=t.key;if(!this.limboTargetsByKey.get(e)){d("SyncEngine","New document in limbo: "+e);var n=this.limboTargetIdGenerator.next(),r=Wt.atPath(e.path);this.limboResolutionsByTarget[n]=new Ci(e),this.remoteStore.listen(new re(r,n,Gt.LimboResolution,fn.INVALID)),this.limboTargetsByKey=this.limboTargetsByKey.insert(e,n)}},t.prototype.currentLimboDocs=function(){return this.limboTargetsByKey},t.prototype.emitNewSnapsAndNotifyLocalStore=function(t,e){return s.__awaiter(this,void 0,void 0,function(){var n,r,i,o=this;return s.__generator(this,function(a){switch(a.label){case 0:return n=[],r=[],i=[],this.queryViewsByQuery.forEach(function(a,s){i.push(Promise.resolve().then(function(){var e=s.view.computeDocChanges(t);return e.needsRefill?o.localStore.executeQuery(s.query).then(function(t){return s.view.computeDocChanges(t,e)}):e}).then(function(t){var i=e&&e.targetChanges[s.targetId],a=s.view.applyChanges(t,!0===o.isPrimary,i);if(o.updateTrackedLimbos(s.targetId,a.limboChanges),a.snapshot){o.isPrimary&&o.sharedClientState.updateQueryState(s.targetId,a.snapshot.fromCache?"not-current":"current"),n.push(a.snapshot);var u=_i.fromSnapshot(s.targetId,a.snapshot);r.push(u)}}))}),[4,Promise.all(i)];case 1:return a.sent(),this.syncEngineListener.onWatchChange(n),[4,this.localStore.notifyLocalViewChanges(r)];case 2:return a.sent(),[2]}})})},t.prototype.assertSubscribed=function(t){v(null!==this.syncEngineListener,"Trying to call "+t+" before calling subscribe().")},t.prototype.handleCredentialChange=function(t){return s.__awaiter(this,void 0,void 0,function(){var e,n;return s.__generator(this,function(r){switch(r.label){case 0:return e=!this.currentUser.isEqual(t),this.currentUser=t,e?[4,this.localStore.handleUserChange(t)]:[3,3];case 1:return n=r.sent(),this.sharedClientState.handleUserChange(t,n.removedBatchIds,n.addedBatchIds),[4,this.emitNewSnapsAndNotifyLocalStore(n.affectedDocuments)];case 2:r.sent(),r.label=3;case 3:return[4,this.remoteStore.handleCredentialChange()];case 4:return r.sent(),[2]}})})},t.prototype.applyPrimaryState=function(t){return s.__awaiter(this,void 0,void 0,function(){var e,n,r,i,o,a,u,c=this;return s.__generator(this,function(s){switch(s.label){case 0:return!0!==t||!0===this.isPrimary?[3,3]:(this.isPrimary=!0,[4,this.remoteStore.applyPrimaryState(!0)]);case 1:return s.sent(),e=this.sharedClientState.getAllActiveQueryTargets(),[4,this.synchronizeQueryViewsAndRaiseSnapshots(e.toArray())];case 2:for(n=s.sent(),r=0,i=n;r<i.length;r++)o=i[r],this.remoteStore.listen(o);return[3,7];case 3:return!1!==t||!1===this.isPrimary?[3,7]:(this.isPrimary=!1,a=[],u=Promise.resolve(),k(this.queryViewsByTarget,function(t,e){c.sharedClientState.isLocalQueryTarget(t)?a.push(t):u=u.then(function(){return c.unlisten(e.query)}),c.remoteStore.unlisten(e.targetId)}),[4,u]);case 4:return s.sent(),[4,this.synchronizeQueryViewsAndRaiseSnapshots(a)];case 5:return s.sent(),this.resetLimboDocuments(),[4,this.remoteStore.applyPrimaryState(!1)];case 6:s.sent(),s.label=7;case 7:return[2]}})})},t.prototype.resetLimboDocuments=function(){var t=this;k(this.limboResolutionsByTarget,function(e){t.remoteStore.unlisten(e)}),this.limboDocumentRefs.removeAllReferences(),this.limboResolutionsByTarget=[],this.limboTargetsByKey=new gt(ft.comparator)},t.prototype.synchronizeQueryViewsAndRaiseSnapshots=function(t){for(var e=this,n=Promise.resolve(),r=[],i=[],o=function(t){n=n.then(function(){return s.__awaiter(e,void 0,void 0,function(){var e,n,o,a;return s.__generator(this,function(s){switch(s.label){case 0:return(n=this.queryViewsByTarget[t])?[4,this.localStore.releaseQuery(n.query,!0)]:[3,4];case 1:return s.sent(),[4,this.localStore.allocateQuery(n.query)];case 2:return e=s.sent(),[4,this.synchronizeViewAndComputeSnapshot(n)];case 3:return(o=s.sent()).snapshot&&i.push(o.snapshot),[3,8];case 4:return v(!0===this.isPrimary,"A secondary tab should never have an active query without an active view."),[4,this.localStore.getQueryForTarget(t)];case 5:return v(!!(a=s.sent()),"Query data for target "+t+" not found"),[4,this.localStore.allocateQuery(a)];case 6:return e=s.sent(),[4,this.initializeViewAndComputeSnapshot(e,!1)];case 7:s.sent(),s.label=8;case 8:return r.push(e),[2]}})})})},a=0,u=t;a<u.length;a++){o(u[a])}return n.then(function(){return e.syncEngineListener.onWatchChange(i),r})},t.prototype.getActiveClients=function(){return this.localStore.getActiveClients()},t.prototype.applyTargetState=function(t,e,n){return s.__awaiter(this,void 0,void 0,function(){var r,i=this;return s.__generator(this,function(o){switch(o.label){case 0:if(this.isPrimary)return d("SyncEngine","Ignoring unexpected query state notification."),[2];if(!this.queryViewsByTarget[t])return[3,5];switch(e){case"current":case"not-current":return[3,1];case"rejected":return[3,2]}return[3,4];case 1:return[2,this.localStore.getNewDocumentChanges().then(function(n){return s.__awaiter(i,void 0,void 0,function(){var r;return s.__generator(this,function(i){switch(i.label){case 0:return r=qe.createSynthesizedRemoteEventForCurrentChange(t,"current"===e),[4,this.emitNewSnapsAndNotifyLocalStore(n,r)];case 1:return i.sent(),[2]}})})},function(t){return s.__awaiter(i,void 0,void 0,function(){var e;return s.__generator(this,function(n){switch(n.label){case 0:return function(t){return t.code===w.DATA_LOSS&&t.message===Yn}(t)?(e=[],k(this.queryViewsByTarget,function(t){return e.push(t)}),[4,this.synchronizeQueryViewsAndRaiseSnapshots(e)]):[3,2];case 1:return n.sent(),[3,3];case 2:throw t;case 3:return[2]}})})})];case 2:return r=this.queryViewsByTarget[t],this.removeAndCleanupQuery(r),[4,this.localStore.releaseQuery(r.query,!0)];case 3:return o.sent(),this.syncEngineListener.onWatchError(r.query,n),[3,5];case 4:g("Unexpected target state: "+e),o.label=5;case 5:return[2]}})})},t.prototype.applyActiveTargetsChange=function(t,e){return s.__awaiter(this,void 0,void 0,function(){var n,r,i,o,a,u,c,l,h,f=this;return s.__generator(this,function(p){switch(p.label){case 0:if(!this.isPrimary)return[2];n=0,r=t,p.label=1;case 1:return n<r.length?(h=r[n],v(!this.queryViewsByTarget[h],"Trying to add an already active target"),[4,this.localStore.getQueryForTarget(h)]):[3,6];case 2:return v(!!(i=p.sent()),"Query data for active target "+h+" not found"),[4,this.localStore.allocateQuery(i)];case 3:return o=p.sent(),[4,this.initializeViewAndComputeSnapshot(o,!1)];case 4:p.sent(),this.remoteStore.listen(o),p.label=5;case 5:return n++,[3,1];case 6:a=function(t){var e;return s.__generator(this,function(n){switch(n.label){case 0:return(e=u.queryViewsByTarget[t])?[4,u.localStore.releaseQuery(e.query,!1).then(function(){f.remoteStore.unlisten(t),f.removeAndCleanupQuery(e)}).catch(Ur)]:[3,2];case 1:n.sent(),n.label=2;case 2:return[2]}})},u=this,c=0,l=e,p.label=7;case 7:return c<l.length?(h=l[c],[5,a(h)]):[3,10];case 8:p.sent(),p.label=9;case 9:return c++,[3,7];case 10:return[2]}})})},t.prototype.enableNetwork=function(){return this.localStore.setNetworkEnabled(!0),this.remoteStore.enableNetwork()},t.prototype.disableNetwork=function(){return this.localStore.setNetworkEnabled(!1),this.remoteStore.disableNetwork()},t.prototype.getRemoteKeysForTarget=function(t){var e=this.limboResolutionsByTarget[t];return e&&e.receivedDocument?Re().add(e.key):this.queryViewsByTarget[t]?this.queryViewsByTarget[t].view.syncedDocuments:Re()},t}(),xi=function(){function t(t){this.uid=t}return t.prototype.isAuthenticated=function(){return null!=this.uid},t.prototype.toKey=function(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"},t.prototype.isEqual=function(t){return t.uid===this.uid},t.UNAUTHENTICATED=new t(null),t.GOOGLE_CREDENTIALS=new t("google-credentials-uid"),t.FIRST_PARTY=new t("first-party-uid"),t}(),Ii="SharedClientState",Ai="firestore_clients",Pi="firestore_mutations",Di="firestore_targets",Ni="firestore_online_state",Ri="firestore_sequence_number",Oi=function(){function t(t,e,n,r){this.user=t,this.batchId=e,this.state=n,this.error=r,v(void 0!==r===("rejected"===n),"MutationMetadata must contain an error iff state is 'rejected'")}return t.fromWebStorageEntry=function(e,n,r){var i=JSON.parse(r),o="object"===typeof i&&-1!==["pending","acknowledged","rejected"].indexOf(i.state)&&(void 0===i.error||"object"===typeof i.error),a=void 0;return o&&i.error&&(o="string"===typeof i.error.message&&"string"===typeof i.error.code)&&(a=new E(i.error.code,i.error.message)),o?new t(e,n,i.state,a):(m(Ii,"Failed to parse mutation state for ID '"+n+"': "+r),null)},t.prototype.toWebStorageJSON=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},t}(),Mi=function(){function t(t,e,n){this.targetId=t,this.state=e,this.error=n,v(void 0!==n===("rejected"===e),"QueryTargetMetadata must contain an error iff state is 'rejected'")}return t.fromWebStorageEntry=function(e,n){var r=JSON.parse(n),i="object"===typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"===typeof r.error),o=void 0;return i&&r.error&&(i="string"===typeof r.error.message&&"string"===typeof r.error.code)&&(o=new E(r.error.code,r.error.message)),i?new t(e,r.state,o):(m(Ii,"Failed to parse target state for ID '"+e+"': "+n),null)},t.prototype.toWebStorageJSON=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},t}(),Fi=function(){function t(t,e){this.clientId=t,this.activeTargetIds=e}return t.fromWebStorageEntry=function(e,n){for(var r=JSON.parse(n),i="object"===typeof r&&r.activeTargetIds instanceof Array,o=Me(),a=0;i&&a<r.activeTargetIds.length;++a)i=qt(r.activeTargetIds[a]),o=o.add(r.activeTargetIds[a]);return i?new t(e,o):(m(Ii,"Failed to parse client data for instance '"+e+"': "+n),null)},t}(),Li=function(){function t(t,e){this.clientId=t,this.onlineState=e}return t.fromWebStorageEntry=function(e){var n=JSON.parse(e);return"object"===typeof n&&void 0!==oi[n.onlineState]&&"string"===typeof n.clientId?new t(n.clientId,oi[n.onlineState]):(m(Ii,"Failed to parse online state: "+e),null)},t}(),Vi=function(){function t(){this.activeTargetIds=Me()}return t.prototype.addQueryTarget=function(t){v(!this.activeTargetIds.has(t),"Target with ID '"+t+"' already active."),this.activeTargetIds=this.activeTargetIds.add(t)},t.prototype.removeQueryTarget=function(t){this.activeTargetIds=this.activeTargetIds.delete(t)},t.prototype.toWebStorageJSON=function(){var t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)},t}(),Bi=function(){function t(e,n,r,i,o){if(this.queue=e,this.platform=n,this.persistenceKey=r,this.localClientId=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.activeClients={},this.storageListener=this.handleWebStorageEvent.bind(this),this.started=!1,this.earlyEvents=[],!t.isAvailable(this.platform))throw new E(w.UNIMPLEMENTED,"LocalStorage is not available on this platform.");var a=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.platform.window.localStorage,this.currentUser=o,this.localClientStorageKey=this.toWebStorageClientStateKey(this.localClientId),this.sequenceNumberKey=Ri+"_"+r,this.activeClients[this.localClientId]=new Vi,this.clientStateKeyRe=new RegExp("^"+Ai+"_"+a+"_([^_]*)$"),this.mutationBatchKeyRe=new RegExp("^"+Pi+"_"+a+"_(\\d+)(?:_(.*))?$"),this.queryTargetKeyRe=new RegExp("^"+Di+"_"+a+"_(\\d+)$"),this.onlineStateKey=Ni+"_"+r,this.platform.window.addEventListener("storage",this.storageListener)}return t.isAvailable=function(t){return!(!t.window||null==t.window.localStorage)},t.prototype.start=function(){return s.__awaiter(this,void 0,void 0,function(){var t,e,n,r,i,o,a,u,c,l,h,f=this;return s.__generator(this,function(s){switch(s.label){case 0:return v(!this.started,"WebStorageSharedClientState already started"),v(null!==this.syncEngine,"syncEngine property must be set before calling start()"),v(null!==this.onlineStateHandler,"onlineStateHandler property must be set before calling start()"),[4,this.syncEngine.getActiveClients()];case 1:for(t=s.sent(),e=0,n=t;e<n.length;e++)(r=n[e])!==this.localClientId&&(i=this.getItem(this.toWebStorageClientStateKey(r)))&&(o=Fi.fromWebStorageEntry(r,i))&&(this.activeClients[o.clientId]=o);for(this.persistClientState(),(a=this.storage.getItem(this.onlineStateKey))&&(u=this.fromWebStorageOnlineState(a))&&this.handleOnlineStateEvent(u),c=0,l=this.earlyEvents;c<l.length;c++)h=l[c],this.handleWebStorageEvent(h);return this.earlyEvents=[],this.platform.window.addEventListener("unload",function(){return f.shutdown()}),this.started=!0,[2]}})})},t.prototype.writeSequenceNumber=function(t){this.setItem(this.sequenceNumberKey,JSON.stringify(t))},t.prototype.getAllActiveQueryTargets=function(){var t=Me();return x(this.activeClients,function(e,n){t=t.unionWith(n.activeTargetIds)}),t},t.prototype.isActiveQueryTarget=function(t){for(var e in this.activeClients)if(this.activeClients.hasOwnProperty(e)&&this.activeClients[e].activeTargetIds.has(t))return!0;return!1},t.prototype.addPendingMutation=function(t){this.persistMutationState(t,"pending")},t.prototype.updateMutationState=function(t,e,n){this.persistMutationState(t,e,n),this.removeMutationState(t)},t.prototype.addLocalQueryTarget=function(t){var e="not-current";if(this.isActiveQueryTarget(t)){var n=this.storage.getItem(this.toWebStorageQueryTargetMetadataKey(t));if(n){var r=Mi.fromWebStorageEntry(t,n);r&&(e=r.state)}}return this.localClientState.addQueryTarget(t),this.persistClientState(),e},t.prototype.removeLocalQueryTarget=function(t){this.localClientState.removeQueryTarget(t),this.persistClientState()},t.prototype.isLocalQueryTarget=function(t){return this.localClientState.activeTargetIds.has(t)},t.prototype.clearQueryState=function(t){this.removeItem(this.toWebStorageQueryTargetMetadataKey(t))},t.prototype.updateQueryState=function(t,e,n){this.persistQueryTargetState(t,e,n)},t.prototype.handleUserChange=function(t,e,n){var r=this;e.forEach(function(t){r.removeMutationState(t)}),this.currentUser=t,n.forEach(function(t){r.addPendingMutation(t)})},t.prototype.setOnlineState=function(t){this.persistOnlineState(t)},t.prototype.shutdown=function(){this.started&&(this.platform.window.removeEventListener("storage",this.storageListener),this.removeItem(this.localClientStorageKey),this.started=!1)},t.prototype.getItem=function(t){var e=this.storage.getItem(t);return d(Ii,"READ",t,e),e},t.prototype.setItem=function(t,e){d(Ii,"SET",t,e),this.storage.setItem(t,e)},t.prototype.removeItem=function(t){d(Ii,"REMOVE",t),this.storage.removeItem(t)},t.prototype.handleWebStorageEvent=function(t){var e=this;if(t.storageArea===this.storage){if(d(Ii,"EVENT",t.key,t.newValue),t.key===this.localClientStorageKey)return void m("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.queue.enqueueAndForget(function(){return s.__awaiter(e,void 0,void 0,function(){var e,n,r,i,o,a;return s.__generator(this,function(s){if(!this.started)return this.earlyEvents.push(t),[2];if(null===t.key)return[2];if(this.clientStateKeyRe.test(t.key)){if(null==t.newValue)return n=this.fromWebStorageClientStateKey(t.key),[2,this.handleClientStateEvent(n,null)];if(e=this.fromWebStorageClientState(t.key,t.newValue))return[2,this.handleClientStateEvent(e.clientId,e)]}else if(this.mutationBatchKeyRe.test(t.key)){if(null!==t.newValue&&(r=this.fromWebStorageMutationMetadata(t.key,t.newValue)))return[2,this.handleMutationBatchEvent(r)]}else if(this.queryTargetKeyRe.test(t.key)){if(null!==t.newValue&&(i=this.fromWebStorageQueryTargetMetadata(t.key,t.newValue)))return[2,this.handleQueryTargetEvent(i)]}else if(t.key===this.onlineStateKey){if(null!==t.newValue&&(o=this.fromWebStorageOnlineState(t.newValue)))return[2,this.handleOnlineStateEvent(o)]}else t.key===this.sequenceNumberKey&&(v(!!this.sequenceNumberHandler,"Missing sequenceNumberHandler"),(a=function(t){var e=fn.INVALID;if(null!=t)try{var n=JSON.parse(t);v("number"===typeof n,"Found non-numeric sequence number"),e=n}catch(r){m(Ii,"Failed to read sequence number from WebStorage",r)}return e}(t.newValue))!==fn.INVALID&&this.sequenceNumberHandler(a));return[2]})})})}},Object.defineProperty(t.prototype,"localClientState",{get:function(){return this.activeClients[this.localClientId]},enumerable:!0,configurable:!0}),t.prototype.persistClientState=function(){this.setItem(this.localClientStorageKey,this.localClientState.toWebStorageJSON())},t.prototype.persistMutationState=function(t,e,n){var r=new Oi(this.currentUser,t,e,n),i=this.toWebStorageMutationBatchKey(t);this.setItem(i,r.toWebStorageJSON())},t.prototype.removeMutationState=function(t){var e=this.toWebStorageMutationBatchKey(t);this.removeItem(e)},t.prototype.persistOnlineState=function(t){var e={clientId:this.localClientId,onlineState:oi[t]};this.storage.setItem(this.onlineStateKey,JSON.stringify(e))},t.prototype.persistQueryTargetState=function(t,e,n){var r=this.toWebStorageQueryTargetMetadataKey(t),i=new Mi(t,e,n);this.setItem(r,i.toWebStorageJSON())},t.prototype.toWebStorageClientStateKey=function(t){return v(-1===t.indexOf("_"),"Client key cannot contain '_', but was '"+t+"'"),Ai+"_"+this.persistenceKey+"_"+t},t.prototype.toWebStorageQueryTargetMetadataKey=function(t){return Di+"_"+this.persistenceKey+"_"+t},t.prototype.toWebStorageMutationBatchKey=function(t){var e=Pi+"_"+this.persistenceKey+"_"+t;return this.currentUser.isAuthenticated()&&(e+="_"+this.currentUser.uid),e},t.prototype.fromWebStorageClientStateKey=function(t){var e=this.clientStateKeyRe.exec(t);return e?e[1]:null},t.prototype.fromWebStorageClientState=function(t,e){var n=this.fromWebStorageClientStateKey(t);return v(null!==n,"Cannot parse client state key '"+t+"'"),Fi.fromWebStorageEntry(n,e)},t.prototype.fromWebStorageMutationMetadata=function(t,e){var n=this.mutationBatchKeyRe.exec(t);v(null!==n,"Cannot parse mutation batch key '"+t+"'");var r=Number(n[1]),i=void 0!==n[2]?n[2]:null;return Oi.fromWebStorageEntry(new xi(i),r,e)},t.prototype.fromWebStorageQueryTargetMetadata=function(t,e){var n=this.queryTargetKeyRe.exec(t);v(null!==n,"Cannot parse query target key '"+t+"'");var r=Number(n[1]);return Mi.fromWebStorageEntry(r,e)},t.prototype.fromWebStorageOnlineState=function(t){return Li.fromWebStorageEntry(t)},t.prototype.handleMutationBatchEvent=function(t){return s.__awaiter(this,void 0,void 0,function(){return s.__generator(this,function(e){return t.user.uid!==this.currentUser.uid?(d(Ii,"Ignoring mutation for non-active user "+t.user.uid),[2]):[2,this.syncEngine.applyBatchState(t.batchId,t.state,t.error)]})})},t.prototype.handleQueryTargetEvent=function(t){return this.syncEngine.applyTargetState(t.targetId,t.state,t.error)},t.prototype.handleClientStateEvent=function(t,e){var n=this,r=this.getAllActiveQueryTargets();e?this.activeClients[t]=e:delete this.activeClients[t];var i=this.getAllActiveQueryTargets(),o=[],a=[];return i.forEach(function(t){return s.__awaiter(n,void 0,void 0,function(){return s.__generator(this,function(e){return r.has(t)||o.push(t),[2]})})}),r.forEach(function(t){return s.__awaiter(n,void 0,void 0,function(){return s.__generator(this,function(e){return i.has(t)||a.push(t),[2]})})}),this.syncEngine.applyActiveTargetsChange(o,a)},t.prototype.handleOnlineStateEvent=function(t){this.activeClients[t.clientId]&&this.onlineStateHandler(t.onlineState)},t}();var Ui=function(){function t(){this.localState=new Vi,this.queryState={},this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null}return t.prototype.addPendingMutation=function(t){},t.prototype.updateMutationState=function(t,e,n){},t.prototype.addLocalQueryTarget=function(t){return this.localState.addQueryTarget(t),this.queryState[t]||"not-current"},t.prototype.updateQueryState=function(t,e,n){this.queryState[t]=e},t.prototype.removeLocalQueryTarget=function(t){this.localState.removeQueryTarget(t)},t.prototype.isLocalQueryTarget=function(t){return this.localState.activeTargetIds.has(t)},t.prototype.clearQueryState=function(t){delete this.queryState[t]},t.prototype.getAllActiveQueryTargets=function(){return this.localState.activeTargetIds},t.prototype.isActiveQueryTarget=function(t){return this.localState.activeTargetIds.has(t)},t.prototype.start=function(){return this.localState=new Vi,Promise.resolve()},t.prototype.handleUserChange=function(t,e,n){},t.prototype.setOnlineState=function(t){},t.prototype.shutdown=function(){},t.prototype.writeSequenceNumber=function(t){},t}(),ji=function(){function t(t,e){this.cacheSizeBytes=t,this.experimentalTabSynchronization=e}return t.prototype.lruParams=function(){return Pr.withCacheSize(this.cacheSizeBytes)},t}(),qi=function(){return function(){}}(),Gi=function(){function t(t,e,n,r){this.platform=t,this.databaseInfo=e,this.credentials=n,this.asyncQueue=r,this.clientId=K.newId(),this.isShutdown=!1}return t.prototype.start=function(t){var e=this;this.verifyNotShutdown();var n=new pn,r=new pn,i=!1;return this.credentials.setChangeListener(function(o){i?e.asyncQueue.enqueueAndForget(function(){return e.handleCredentialChange(o)}):(i=!0,e.initializePersistence(t,r,o).then(function(t){return e.initializeRest(o,t)}).then(n.resolve,n.reject))}),this.asyncQueue.enqueueAndForget(function(){return n.promise}),r.promise},t.prototype.enableNetwork=function(){var t=this;return this.verifyNotShutdown(),this.asyncQueue.enqueue(function(){return t.syncEngine.enableNetwork()})},t.prototype.initializePersistence=function(t,e,n){var r=this;return t instanceof ji?this.startIndexedDbPersistence(n,t).then(function(t){return e.resolve(),t}).catch(function(t){if(e.reject(t),!r.canFallback(t))throw t;return console.warn("Error enabling offline storage. Falling back to storage disabled: "+t),r.startMemoryPersistence()}):(e.resolve(),this.startMemoryPersistence())},t.prototype.canFallback=function(t){return t instanceof E?t.code===w.FAILED_PRECONDITION||t.code===w.UNIMPLEMENTED:!("undefined"!==typeof DOMException&&t instanceof DOMException)||(22===t.code||20===t.code)},t.prototype.verifyNotShutdown=function(){if(this.isShutdown)throw new E(w.FAILED_PRECONDITION,"The client has already been shutdown.")},t.prototype.startIndexedDbPersistence=function(t,e){var n=this,r=Br.buildStoragePrefix(this.databaseInfo),i=new nn(this.databaseInfo.databaseId,{useProto3Json:!0});return Promise.resolve().then(function(){return s.__awaiter(n,void 0,void 0,function(){var n,o;return s.__generator(this,function(a){switch(a.label){case 0:if(e.experimentalTabSynchronization&&!Bi.isAvailable(this.platform))throw new E(w.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");return o=e.lruParams(),e.experimentalTabSynchronization?(this.sharedClientState=new Bi(this.asyncQueue,this.platform,r,this.clientId,t),[4,Br.createMultiClientIndexedDbPersistence(r,this.clientId,this.platform,this.asyncQueue,i,o,{sequenceNumberSyncer:this.sharedClientState})]):[3,2];case 1:return n=a.sent(),[3,4];case 2:return this.sharedClientState=new Ui,[4,Br.createIndexedDbPersistence(r,this.clientId,this.platform,this.asyncQueue,i,o)];case 3:n=a.sent(),a.label=4;case 4:return this.persistence=n,[2,n.referenceDelegate.garbageCollector]}})})})},t.prototype.startMemoryPersistence=function(){return this.persistence=ti.createEagerPersistence(this.clientId),this.sharedClientState=new Ui,Promise.resolve(null)},t.prototype.initializeRest=function(t,e){var n=this;return d("FirestoreClient","Initializing. user=",t.uid),this.platform.loadConnection(this.databaseInfo).then(function(r){return s.__awaiter(n,void 0,void 0,function(){var n,i,o,a,u=this;return s.__generator(this,function(c){switch(c.label){case 0:return this.localStore=new Qr(this.persistence,t),e&&(this.lruScheduler=new Dr(e,this.asyncQueue,this.localStore)),n=this.platform.newSerializer(this.databaseInfo.databaseId),i=new pi(this.asyncQueue,r,this.credentials,n),o=function(t){return u.syncEngine.applyOnlineStateChange(t,ai.RemoteStore)},a=function(t){return u.syncEngine.applyOnlineStateChange(t,ai.SharedClientState)},this.remoteStore=new yi(this.localStore,i,this.asyncQueue,o),this.syncEngine=new ki(this.localStore,this.remoteStore,this.sharedClientState,t),this.sharedClientState.onlineStateHandler=a,this.remoteStore.syncEngine=this.syncEngine,this.sharedClientState.syncEngine=this.syncEngine,this.eventMgr=new vi(this.syncEngine),[4,this.sharedClientState.start()];case 1:return c.sent(),[4,this.remoteStore.start()];case 2:return c.sent(),[4,this.persistence.setPrimaryStateListener(function(t){return s.__awaiter(u,void 0,void 0,function(){return s.__generator(this,function(e){switch(e.label){case 0:return[4,this.syncEngine.applyPrimaryState(t)];case 1:return e.sent(),this.lruScheduler&&(t&&!this.lruScheduler.started?this.lruScheduler.start():t||this.lruScheduler.stop()),[2]}})})})];case 3:return c.sent(),[2]}})})})},t.prototype.handleCredentialChange=function(t){return this.asyncQueue.verifyOperationInProgress(),d("FirestoreClient","Credential Changed. Current user: "+t.uid),this.syncEngine.handleCredentialChange(t)},t.prototype.disableNetwork=function(){var t=this;return this.verifyNotShutdown(),this.asyncQueue.enqueue(function(){return t.syncEngine.disableNetwork()})},t.prototype.shutdown=function(t){var e=this;return!0===this.isShutdown?Promise.resolve():this.asyncQueue.enqueue(function(){return s.__awaiter(e,void 0,void 0,function(){return s.__generator(this,function(e){switch(e.label){case 0:return this.lruScheduler&&this.lruScheduler.stop(),[4,this.remoteStore.shutdown()];case 1:return e.sent(),[4,this.sharedClientState.shutdown()];case 2:return e.sent(),[4,this.persistence.shutdown(t&&t.purgePersistenceWithDataLoss)];case 3:return e.sent(),this.credentials.removeChangeListener(),this.isShutdown=!0,[2]}})})})},t.prototype.listen=function(t,e,n){var r=this;this.verifyNotShutdown();var i=new bi(t,e,n);return this.asyncQueue.enqueueAndForget(function(){return r.eventMgr.listen(i)}),i},t.prototype.unlisten=function(t){var e=this;this.verifyNotShutdown(),this.asyncQueue.enqueueAndForget(function(){return e.eventMgr.unlisten(t)})},t.prototype.getDocumentFromLocalCache=function(t){var e=this;return this.verifyNotShutdown(),this.asyncQueue.enqueue(function(){return e.localStore.readDocument(t)}).then(function(t){if(t instanceof dt)return t;if(t instanceof mt)return null;throw new E(w.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")})},t.prototype.getDocumentsFromLocalCache=function(t){var e=this;return this.verifyNotShutdown(),this.asyncQueue.enqueue(function(){return e.localStore.executeQuery(t)}).then(function(e){var n=Re(),r=new Si(t,n),i=r.computeDocChanges(e);return r.applyChanges(i,!1).snapshot})},t.prototype.write=function(t){var e=this;this.verifyNotShutdown();var n=new pn;return this.asyncQueue.enqueueAndForget(function(){return e.syncEngine.write(t,n)}),n.promise},t.prototype.databaseId=function(){return this.databaseInfo.databaseId},t.prototype.transaction=function(t){var e=this;return this.verifyNotShutdown(),this.asyncQueue.enqueue(function(){return s.__awaiter(e,void 0,void 0,function(){return s.__generator(this,function(t){return[2]})})}).then(function(){return e.syncEngine.runTransaction(t)})},t}(),Wi=function(){function t(t){this.observer=t,this.muted=!1}return t.prototype.next=function(t){this.scheduleEvent(this.observer.next,t)},t.prototype.error=function(t){this.scheduleEvent(this.observer.error,t)},t.prototype.mute=function(){this.muted=!0},t.prototype.scheduleEvent=function(t,e){var n=this;this.muted||setTimeout(function(){n.muted||t(e)},0)},t}(),zi=function(){function t(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];!function(t,e,n,r){if(!(e instanceof Array)||e.length<r)throw new E(w.INVALID_ARGUMENT,"Function "+t+"() requires its "+n+" argument to be an array with at least "+H(r,"element")+".")}("FieldPath",t,"fieldNames",1);for(var n=0;n<t.length;++n)if(R("FieldPath","string",n,t[n]),0===t[n].length)throw new E(w.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new ht(t)}return t.documentId=function(){return t._DOCUMENT_ID},t.prototype.isEqual=function(e){if(!(e instanceof t))throw W("isEqual","FieldPath",1,e);return this._internalPath.isEqual(e._internalPath)},t._DOCUMENT_ID=new t(ht.keyField().canonicalString()),t}(),Hi=new RegExp("[~\\*/\\[\\]]");var Ki=function(){return function(t,e){this.user=e,this.type="OAuth",this.authHeaders={Authorization:"Bearer "+t}}}(),Qi=function(){function t(){this.changeListener=null}return t.prototype.getToken=function(){return Promise.resolve(null)},t.prototype.invalidateToken=function(){},t.prototype.setChangeListener=function(t){v(!this.changeListener,"Can only call setChangeListener() once."),this.changeListener=t,t(xi.UNAUTHENTICATED)},t.prototype.removeChangeListener=function(){v(null!==this.changeListener,"removeChangeListener() when no listener registered"),this.changeListener=null},t}(),Yi=function(){function t(t){var e=this;this.app=t,this.tokenListener=null,this.tokenCounter=0,this.changeListener=null,this.forceRefresh=!1,this.tokenListener=function(){e.tokenCounter++,e.currentUser=e.getUser(),e.changeListener&&e.changeListener(e.currentUser)},this.tokenCounter=0,this.app.INTERNAL.addAuthTokenListener(this.tokenListener)}return t.prototype.getToken=function(){var t=this;v(null!=this.tokenListener,"getToken cannot be called after listener removed.");var e=this.tokenCounter,n=this.forceRefresh;return this.forceRefresh=!1,this.app.INTERNAL.getToken(n).then(function(n){if(t.tokenCounter!==e)throw new E(w.ABORTED,"getToken aborted due to token change.");return n?(v("string"===typeof n.accessToken,"Invalid tokenData returned from getToken():"+n),new Ki(n.accessToken,t.currentUser)):null})},t.prototype.invalidateToken=function(){this.forceRefresh=!0},t.prototype.setChangeListener=function(t){v(!this.changeListener,"Can only call setChangeListener() once."),this.changeListener=t,this.currentUser&&t(this.currentUser)},t.prototype.removeChangeListener=function(){v(null!=this.tokenListener,"removeChangeListener() called twice"),v(null!==this.changeListener,"removeChangeListener() called when no listener registered"),this.app.INTERNAL.removeAuthTokenListener(this.tokenListener),this.tokenListener=null,this.changeListener=null},t.prototype.getUser=function(){var t=this.app.INTERNAL.getUid();return v(null===t||"string"===typeof t,"Received invalid UID: "+t),new xi(t)},t}(),Xi=function(){function t(t,e){this.gapi=t,this.sessionIndex=e,this.type="FirstParty",this.user=xi.FIRST_PARTY}return Object.defineProperty(t.prototype,"authHeaders",{get:function(){var t={"X-Goog-AuthUser":this.sessionIndex},e=this.gapi.auth.getAuthHeaderValueForFirstParty([]);return e&&(t.Authorization=e),t},enumerable:!0,configurable:!0}),t}(),$i=function(){function t(t,e){this.gapi=t,this.sessionIndex=e}return t.prototype.getToken=function(){return Promise.resolve(new Xi(this.gapi,this.sessionIndex))},t.prototype.setChangeListener=function(t){t(xi.FIRST_PARTY)},t.prototype.removeChangeListener=function(){},t.prototype.invalidateToken=function(){},t}();function Ji(t){return function(t,e){if("object"!==typeof t||null===t)return!1;for(var n=t,r=0,i=e;r<i.length;r++){var o=i[r];if(o in n&&"function"===typeof n[o])return!0}return!1}(t,["next","error","complete"])}var Zi,to=function(){function t(t){this._methodName=t}return t.delete=function(){return A("FieldValue.delete",arguments),eo.instance},t.serverTimestamp=function(){return A("FieldValue.serverTimestamp",arguments),no.instance},t.arrayUnion=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return D("FieldValue.arrayUnion",arguments,1),new ro(t)},t.arrayRemove=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return D("FieldValue.arrayRemove",arguments,1),new io(t)},t.increment=function(t){return R("FieldValue.increment","number",1,t),P("FieldValue.increment",arguments,1),new oo(t)},t.prototype.isEqual=function(t){return this===t},t}(),eo=function(t){function e(){return t.call(this,"FieldValue.delete")||this}return s.__extends(e,t),e.instance=new e,e}(to),no=function(t){function e(){return t.call(this,"FieldValue.serverTimestamp")||this}return s.__extends(e,t),e.instance=new e,e}(to),ro=function(t){function e(e){var n=t.call(this,"FieldValue.arrayUnion")||this;return n._elements=e,n}return s.__extends(e,t),e}(to),io=function(t){function e(e){var n=t.call(this,"FieldValue.arrayRemove")||this;return n._elements=e,n}return s.__extends(e,t),e}(to),oo=function(t){function e(e){var n=t.call(this,"FieldValue.increment")||this;return n._operand=e,n}return s.__extends(e,t),e}(to),ao=S(to,"Use FieldValue.<field>() instead."),so=/^__.*__$/,uo=function(){function t(t,e,n){this.data=t,this.fieldMask=e,this.fieldTransforms=n}return t.prototype.toMutations=function(t,e){var n=[];return null!==this.fieldMask?n.push(new fe(t,this.data,this.fieldMask,e)):n.push(new he(t,this.data,e)),this.fieldTransforms.length>0&&n.push(new pe(t,this.fieldTransforms)),n},t}(),co=function(){function t(t,e,n){this.data=t,this.fieldMask=e,this.fieldTransforms=n}return t.prototype.toMutations=function(t,e){var n=[new fe(t,this.data,this.fieldMask,e)];return this.fieldTransforms.length>0&&n.push(new pe(t,this.fieldTransforms)),n},t}();function lo(t){switch(t){case Zi.Set:case Zi.MergeSet:case Zi.Update:return!0;case Zi.Argument:return!1;default:throw g("Unexpected case for UserDataSource: "+t)}}!function(t){t[t.Set=0]="Set",t[t.Update=1]="Update",t[t.MergeSet=2]="MergeSet",t[t.Argument=3]="Argument"}(Zi||(Zi={}));var ho=function(){function t(t,e,n,r,i,o){this.dataSource=t,this.methodName=e,this.path=n,this.arrayElement=r,void 0===i&&this.validatePath(),this.arrayElement=void 0!==r&&r,this.fieldTransforms=i||[],this.fieldMask=o||[]}return t.prototype.childContextForField=function(e){var n=null==this.path?null:this.path.child(e),r=new t(this.dataSource,this.methodName,n,!1,this.fieldTransforms,this.fieldMask);return r.validatePathSegment(e),r},t.prototype.childContextForFieldPath=function(e){var n=null==this.path?null:this.path.child(e),r=new t(this.dataSource,this.methodName,n,!1,this.fieldTransforms,this.fieldMask);return r.validatePath(),r},t.prototype.childContextForArray=function(e){return new t(this.dataSource,this.methodName,null,!0,this.fieldTransforms,this.fieldMask)},t.prototype.createError=function(t){var e=null===this.path||this.path.isEmpty()?"":" (found in field "+this.path.toString()+")";return new E(w.INVALID_ARGUMENT,"Function "+this.methodName+"() called with invalid data. "+t+e)},t.prototype.contains=function(t){return void 0!==this.fieldMask.find(function(e){return t.isPrefixOf(e)})||void 0!==this.fieldTransforms.find(function(e){return t.isPrefixOf(e.field)})},t.prototype.validatePath=function(){if(null!==this.path)for(var t=0;t<this.path.length;t++)this.validatePathSegment(this.path.get(t))},t.prototype.validatePathSegment=function(t){if(lo(this.dataSource)&&so.test(t))throw this.createError("Document fields cannot begin and end with __")},t}(),fo=function(){return function(t,e){this.databaseId=t,this.key=e}}(),po=function(){function t(t){this.preConverter=t}return t.prototype.parseSetData=function(t,e){var n=new ho(Zi.Set,t,ht.EMPTY_PATH);yo("Data must be an object, but it was:",n,e);var r=this.parseData(e,n);return new uo(r,null,n.fieldTransforms)},t.prototype.parseMergeData=function(t,e,n){var r=new ho(Zi.MergeSet,t,ht.EMPTY_PATH);yo("Data must be an object, but it was:",r,e);var i,o,a=this.parseData(e,r);if(n){for(var s=new ie(ht.comparator),u=0,c=n;u<c.length;u++){var l=c[u],h=void 0;if(l instanceof zi)h=l._internalPath;else{if("string"!==typeof l)throw g("Expected stringOrFieldPath to be a string or a FieldPath");h=vo(t,l)}if(!r.contains(h))throw new E(w.INVALID_ARGUMENT,"Field '"+h+"' is specified in your field mask but missing from your input data.");s=s.add(h)}i=ae.fromSet(s),o=r.fieldTransforms.filter(function(t){return i.covers(t.field)})}else i=ae.fromArray(r.fieldMask),o=r.fieldTransforms;return new uo(a,i,o)},t.prototype.parseUpdateData=function(t,e){var n=this,r=new ho(Zi.Update,t,ht.EMPTY_PATH);yo("Data must be an object, but it was:",r,e);var i=new ie(ht.comparator),o=Mt.EMPTY;x(e,function(e,a){var s=vo(t,e),u=r.childContextForFieldPath(s);if((a=n.runPreConverter(a,u))instanceof eo)i=i.add(s);else{var c=n.parseData(a,u);null!=c&&(i=i.add(s),o=o.set(s,c))}});var a=ae.fromSet(i);return new co(o,a,r.fieldTransforms)},t.prototype.parseUpdateVarargs=function(t,e,n,r){var i=new ho(Zi.Update,t,ht.EMPTY_PATH),o=[go(t,e)],a=[n];if(r.length%2!==0)throw new E(w.INVALID_ARGUMENT,"Function "+t+"() needs to be called with an even number of arguments that alternate between field names and values.");for(var s=0;s<r.length;s+=2)o.push(go(t,r[s])),a.push(r[s+1]);var u=new ie(ht.comparator),c=Mt.EMPTY;for(s=0;s<o.length;++s){var l=o[s],h=i.childContextForFieldPath(l),f=this.runPreConverter(a[s],h);if(f instanceof eo)u=u.add(l);else{var p=this.parseData(f,h);null!=p&&(u=u.add(l),c=c.set(l,p))}}var d=ae.fromSet(u);return new co(c,d,i.fieldTransforms)},t.prototype.parseQueryValue=function(t,e){var n=new ho(Zi.Argument,t,ht.EMPTY_PATH),r=this.parseData(e,n);return v(null!=r,"Parsed data should not be null."),v(0===n.fieldTransforms.length,"Field transforms should have been disallowed."),r},t.prototype.runPreConverter=function(t,e){try{return this.preConverter(t)}catch(r){var n=bo(r);throw e.createError(n)}},t.prototype.parseData=function(t,e){if(mo(t=this.runPreConverter(t,e)))return yo("Unsupported field value:",e,t),this.parseObject(t,e);if(t instanceof to)return this.parseSentinelFieldValue(t,e),null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.arrayElement)throw e.createError("Nested arrays are not supported");return this.parseArray(t,e)}return this.parseScalarValue(t,e)},t.prototype.parseObject=function(t,e){var n=this,r=new gt(Q);return I(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):x(t,function(t,i){var o=n.parseData(i,e.childContextForField(t));null!=o&&(r=r.insert(t,o))}),new Mt(r)},t.prototype.parseArray=function(t,e){for(var n=[],r=0,i=0,o=t;i<o.length;i++){var a=o[i],s=this.parseData(a,e.childContextForArray(r));null==s&&(s=St.INSTANCE),n.push(s),r++}return new Ft(n)},t.prototype.parseSentinelFieldValue=function(t,e){if(!lo(e.dataSource))throw e.createError(t._methodName+"() can only be used with update() and set()");if(null===e.path)throw e.createError(t._methodName+"() is not currently supported inside arrays");if(t instanceof eo){if(e.dataSource!==Zi.MergeSet)throw e.dataSource===Zi.Update?(v(e.path.length>0,"FieldValue.delete() at the top level should have already been handled."),e.createError("FieldValue.delete() can only appear at the top level of your update data")):e.createError("FieldValue.delete() cannot be used with set() unless you pass {merge:true}");e.fieldMask.push(e.path)}else if(t instanceof no)e.fieldTransforms.push(new se(e.path,me.instance));else if(t instanceof ro){var n=this.parseArrayTransformElements(t._methodName,t._elements),r=new ye(n);e.fieldTransforms.push(new se(e.path,r))}else if(t instanceof io){n=this.parseArrayTransformElements(t._methodName,t._elements);var i=new ge(n);e.fieldTransforms.push(new se(e.path,i))}else if(t instanceof oo){var o=this.parseQueryValue("FieldValue.increment",t._operand),a=new ve(o);e.fieldTransforms.push(new se(e.path,a))}else g("Unknown FieldValue type: "+t)},t.prototype.parseScalarValue=function(t,e){if(null===t)return St.INSTANCE;if("number"===typeof t)return qt(t)?new xt(t):new It(t);if("boolean"===typeof t)return Tt.of(t);if("string"===typeof t)return new At(t);if(t instanceof Date)return new Pt(it.fromDate(t));if(t instanceof it)return new Pt(new it(t.seconds,1e3*Math.floor(t.nanoseconds/1e3)));if(t instanceof rt)return new Ot(t);if(t instanceof et)return new Nt(t);if(t instanceof fo)return new Rt(t.databaseId,t.key);throw e.createError("Unsupported field value: "+j(t))},t.prototype.parseArrayTransformElements=function(t,e){var n=this;return e.map(function(e,r){var i=new ho(Zi.Argument,t,ht.EMPTY_PATH);return n.parseData(e,i.childContextForArray(r))})},t}();function mo(t){return"object"===typeof t&&null!==t&&!(t instanceof Array)&&!(t instanceof Date)&&!(t instanceof it)&&!(t instanceof rt)&&!(t instanceof et)&&!(t instanceof fo)&&!(t instanceof to)}function yo(t,e,n){if(!mo(n)||!U(n)){var r=j(n);throw"an object"===r?e.createError(t+" a custom object"):e.createError(t+" "+r)}}function go(t,e){if(e instanceof zi)return e._internalPath;if("string"===typeof e)return vo(t,e);throw new E(w.INVALID_ARGUMENT,"Function "+t+"() called with invalid data. Field path arguments must be of type string or FieldPath.")}function vo(t,e){try{return function(t){if(t.search(Hi)>=0)throw new E(w.INVALID_ARGUMENT,"Invalid field path ("+t+"). Paths must not contain '~', '*', '/', '[', or ']'");try{return new(zi.bind.apply(zi,[void 0].concat(t.split("."))))}catch(e){throw new E(w.INVALID_ARGUMENT,"Invalid field path ("+t+"). Paths must not be empty, begin with '.', end with '.', or contain '..'")}}(e)._internalPath}catch(r){var n=bo(r);throw new E(w.INVALID_ARGUMENT,"Function "+t+"() called with invalid data. "+n)}}function bo(t){return t instanceof Error?t.message:t.toString()}var _o="firestore.googleapis.com",wo=!0,Eo=!0,So=!1,To=Pr.COLLECTION_DISABLED,Co=function(){function t(t){if(void 0===t.host){if(void 0!==t.ssl)throw new E(w.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=_o,this.ssl=wo}else M("settings","non-empty string","host",t.host),this.host=t.host,F("settings","boolean","ssl",t.ssl),this.ssl=C(t.ssl,wo);if(G("settings",t,["host","ssl","credentials","timestampsInSnapshots","cacheSizeBytes","experimentalForceLongPolling"]),F("settings","object","credentials",t.credentials),this.credentials=t.credentials,F("settings","boolean","timestampsInSnapshots",t.timestampsInSnapshots),!0===t.timestampsInSnapshots?m("\n  The timestampsInSnapshots setting now defaults to true and you no\n  longer need to explicitly set it. In a future release, the setting\n  will be removed entirely and so it is recommended that you remove it\n  from your firestore.settings() call now."):!1===t.timestampsInSnapshots&&m("\n  The timestampsInSnapshots setting will soon be removed. YOU MUST UPDATE\n  YOUR CODE.\n\n  To hide this warning, stop using the timestampsInSnapshots setting in your\n  firestore.settings({ ... }) call.\n\n  Once you remove the setting, Timestamps stored in Cloud Firestore will be\n  read back as Firebase Timestamp objects instead of as system Date objects.\n  So you will also need to update code expecting a Date to instead expect a\n  Timestamp. For example:\n\n  // Old:\n  const date = snapshot.get('created_at');\n  // New:\n  const timestamp = snapshot.get('created_at'); const date =\n  timestamp.toDate();\n\n  Please audit all existing usages of Date when you enable the new\n  behavior."),this.timestampsInSnapshots=C(t.timestampsInSnapshots,Eo),F("settings","number","cacheSizeBytes",t.cacheSizeBytes),void 0===t.cacheSizeBytes)this.cacheSizeBytes=Pr.DEFAULT_CACHE_SIZE_BYTES;else{if(t.cacheSizeBytes!==To&&t.cacheSizeBytes<Pr.MINIMUM_CACHE_SIZE_BYTES)throw new E(w.INVALID_ARGUMENT,"cacheSizeBytes must be at least "+Pr.MINIMUM_CACHE_SIZE_BYTES);this.cacheSizeBytes=t.cacheSizeBytes}F("settings","boolean","experimentalForceLongPolling",t.experimentalForceLongPolling),this.forceLongPolling=void 0===t.experimentalForceLongPolling?So:t.experimentalForceLongPolling}return t.prototype.isEqual=function(t){return this.host===t.host&&this.ssl===t.ssl&&this.timestampsInSnapshots===t.timestampsInSnapshots&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.forceLongPolling===t.forceLongPolling},t}(),ko=function(){return function(){}}(),xo=function(){function t(e){var n=this;this._queue=new mn,this.INTERNAL={delete:function(t){return s.__awaiter(n,void 0,void 0,function(){return s.__generator(this,function(e){return this.ensureClientConfigured(),[2,this._firestoreClient.shutdown(t)]})})}};var r=new ko;if("object"===typeof e.options){var i=e;r.firebaseApp=i,r.databaseId=t.databaseIdFromApp(i),r.persistenceKey=r.firebaseApp.name,r.credentials=new Yi(i)}else{var o=e;if(!o.projectId)throw new E(w.INVALID_ARGUMENT,"Must provide projectId");r.databaseId=new st(o.projectId,o.database),r.persistenceKey="[DEFAULT]",r.credentials=new Qi}r.settings=new Co({}),this._config=r,this._databaseId=r.databaseId}return t.prototype.settings=function(t){if(P("Firestore.settings",arguments,1),R("Firestore.settings","object",1,t),T(t,"persistence"))throw new E(w.INVALID_ARGUMENT,'"persistence" is now specified with a separate call to firestore.enablePersistence().');var e=new Co(t);if(this._firestoreClient&&!this._config.settings.isEqual(e))throw new E(w.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only call settings() before calling any other methods on a Firestore object.");this._config.settings=e,void 0!==e.credentials&&(this._config.credentials=function(t){if(!t)return new Qi;switch(t.type){case"gapi":var e=t.client;return v(!("object"!==typeof e||null===e||!e.auth||!e.auth.getAuthHeaderValueForFirstParty),"unexpected gapi interface"),new $i(e,t.sessionIndex||"0");case"provider":return t.client;default:throw new E(w.INVALID_ARGUMENT,"makeCredentialsProvider failed due to invalid credential type")}}(e.credentials))},t.prototype.enableNetwork=function(){return this.ensureClientConfigured(),this._firestoreClient.enableNetwork()},t.prototype.disableNetwork=function(){return this.ensureClientConfigured(),this._firestoreClient.disableNetwork()},t.prototype.enablePersistence=function(t){if(this._firestoreClient)throw new E(w.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only call enablePersistence() before calling any other methods on a Firestore object.");return this.configureClient(new ji(this._config.settings.cacheSizeBytes,void 0!==t&&C(t.experimentalTabSynchronization,!1)))},t.prototype.ensureClientConfigured=function(){return this._firestoreClient||this.configureClient(new qi),this._firestoreClient},t.prototype.configureClient=function(t){var e=this;v(!!this._config.settings.host,"FirestoreSettings.host cannot be falsey"),v(!this._firestoreClient,"configureClient() called multiple times");var n=new ot(this._config.databaseId,this._config.persistenceKey,this._config.settings.host,this._config.settings.ssl,this._config.settings.forceLongPolling);return this._dataConverter=new po(function(t){if(t instanceof Po){var n=e._config.databaseId,r=t.firestore._config.databaseId;if(!r.isEqual(n))throw new E(w.INVALID_ARGUMENT,"Document reference is for database "+r.projectId+"/"+r.database+" but should be for database "+n.projectId+"/"+n.database);return new fo(e._config.databaseId,t._key)}return t}),this._firestoreClient=new Gi(b.getPlatform(),n,this._config.credentials,this._queue),this._firestoreClient.start(t)},t.databaseIdFromApp=function(t){var e=t.options;if(!T(e,"projectId"))throw new E(w.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');var n=e.projectId;if(!n||"string"!==typeof n)throw new E(w.INVALID_ARGUMENT,"projectId must be a string in FirebaseApp.options");return new st(n)},Object.defineProperty(t.prototype,"app",{get:function(){if(!this._config.firebaseApp)throw new E(w.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._config.firebaseApp},enumerable:!0,configurable:!0}),t.prototype.collection=function(t){return P("Firestore.collection",arguments,1),R("Firestore.collection","non-empty string",1,t),this.ensureClientConfigured(),new Fo(ct.fromString(t),this)},t.prototype.doc=function(t){return P("Firestore.doc",arguments,1),R("Firestore.doc","non-empty string",1,t),this.ensureClientConfigured(),Po.forPath(ct.fromString(t),this)},t.prototype._collectionGroup=function(t){if(P("Firestore.collectionGroup",arguments,1),R("Firestore.collectionGroup","non-empty string",1,t),t.indexOf("/")>=0)throw new E(w.INVALID_ARGUMENT,"Invalid collection ID '"+t+"' passed to function Firestore.collectionGroup(). Collection IDs must not contain '/'.");return this.ensureClientConfigured(),new Oo(new Wt(ct.EMPTY_PATH,t),this)},t.prototype.runTransaction=function(t){var e=this;return P("Firestore.runTransaction",arguments,1),R("Firestore.runTransaction","function",1,t),this.ensureClientConfigured().transaction(function(n){return t(new Io(e,n))})},t.prototype.batch=function(){return this.ensureClientConfigured(),new Ao(this)},Object.defineProperty(t,"logLevel",{get:function(){switch(f()){case i.DEBUG:return"debug";case i.ERROR:return"error";case i.SILENT:return"silent";default:return g("Unknown log level: "+f())}},enumerable:!0,configurable:!0}),t.setLogLevel=function(t){switch(P("Firestore.setLogLevel",arguments,1),R("Firestore.setLogLevel","non-empty string",1,t),t){case"debug":p(i.DEBUG);break;case"error":p(i.ERROR);break;case"silent":p(i.SILENT);break;default:throw new E(w.INVALID_ARGUMENT,"Invalid log level: "+t)}},t.prototype._areTimestampsInSnapshotsEnabled=function(){return this._config.settings.timestampsInSnapshots},t}(),Io=function(){function t(t,e){this._firestore=t,this._transaction=e}return t.prototype.get=function(t){var e=this;P("Transaction.get",arguments,1);var n=Uo("Transaction.get",t,this._firestore);return this._transaction.lookup([n._key]).then(function(t){if(!t||1!==t.length)return g("Mismatch in docs returned from document lookup.");var r=t[0];if(r instanceof mt)return new No(e._firestore,n._key,null,!1,!1);if(r instanceof dt)return new No(e._firestore,n._key,r,!1,!1);throw g("BatchGetDocumentsRequest returned unexpected document type: "+r.constructor.name)})},t.prototype.set=function(t,e,n){N("Transaction.set",arguments,2,3);var r=Uo("Transaction.set",t,this._firestore),i=(n=Lo("Transaction.set",n)).merge||n.mergeFields?this._firestore._dataConverter.parseMergeData("Transaction.set",e,n.mergeFields):this._firestore._dataConverter.parseSetData("Transaction.set",e);return this._transaction.set(r._key,i),this},t.prototype.update=function(t,e,n){for(var r,i,o=[],a=3;a<arguments.length;a++)o[a-3]=arguments[a];return"string"===typeof e||e instanceof zi?(D("Transaction.update",arguments,3),r=Uo("Transaction.update",t,this._firestore),i=this._firestore._dataConverter.parseUpdateVarargs("Transaction.update",e,n,o)):(P("Transaction.update",arguments,2),r=Uo("Transaction.update",t,this._firestore),i=this._firestore._dataConverter.parseUpdateData("Transaction.update",e)),this._transaction.update(r._key,i),this},t.prototype.delete=function(t){P("Transaction.delete",arguments,1);var e=Uo("Transaction.delete",t,this._firestore);return this._transaction.delete(e._key),this},t}(),Ao=function(){function t(t){this._firestore=t,this._mutations=[],this._committed=!1}return t.prototype.set=function(t,e,n){N("WriteBatch.set",arguments,2,3),this.verifyNotCommitted();var r=Uo("WriteBatch.set",t,this._firestore),i=(n=Lo("WriteBatch.set",n)).merge||n.mergeFields?this._firestore._dataConverter.parseMergeData("WriteBatch.set",e,n.mergeFields):this._firestore._dataConverter.parseSetData("WriteBatch.set",e);return this._mutations=this._mutations.concat(i.toMutations(r._key,ce.NONE)),this},t.prototype.update=function(t,e,n){for(var r,i,o=[],a=3;a<arguments.length;a++)o[a-3]=arguments[a];return this.verifyNotCommitted(),"string"===typeof e||e instanceof zi?(D("WriteBatch.update",arguments,3),r=Uo("WriteBatch.update",t,this._firestore),i=this._firestore._dataConverter.parseUpdateVarargs("WriteBatch.update",e,n,o)):(P("WriteBatch.update",arguments,2),r=Uo("WriteBatch.update",t,this._firestore),i=this._firestore._dataConverter.parseUpdateData("WriteBatch.update",e)),this._mutations=this._mutations.concat(i.toMutations(r._key,ce.exists(!0))),this},t.prototype.delete=function(t){P("WriteBatch.delete",arguments,1),this.verifyNotCommitted();var e=Uo("WriteBatch.delete",t,this._firestore);return this._mutations=this._mutations.concat(new de(e._key,ce.NONE)),this},t.prototype.commit=function(){return s.__awaiter(this,void 0,void 0,function(){return s.__generator(this,function(t){return this.verifyNotCommitted(),this._committed=!0,this._mutations.length>0?[2,this._firestore.ensureClientConfigured().write(this._mutations)]:[2]})})},t.prototype.verifyNotCommitted=function(){if(this._committed)throw new E(w.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")},t}(),Po=function(){function t(t,e){this._key=t,this.firestore=e,this._firestoreClient=this.firestore.ensureClientConfigured()}return t.forPath=function(e,n){if(e.length%2!==0)throw new E(w.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+e.canonicalString()+" has "+e.length);return new t(new ft(e),n)},Object.defineProperty(t.prototype,"id",{get:function(){return this._key.path.lastSegment()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){return new Fo(this._key.path.popLast(),this.firestore)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"path",{get:function(){return this._key.path.canonicalString()},enumerable:!0,configurable:!0}),t.prototype.collection=function(t){if(P("DocumentReference.collection",arguments,1),R("DocumentReference.collection","non-empty string",1,t),!t)throw new E(w.INVALID_ARGUMENT,"Must provide a non-empty collection name to collection()");var e=ct.fromString(t);return new Fo(this._key.path.child(e),this.firestore)},t.prototype.isEqual=function(e){if(!(e instanceof t))throw W("isEqual","DocumentReference",1,e);return this.firestore===e.firestore&&this._key.isEqual(e._key)},t.prototype.set=function(t,e){N("DocumentReference.set",arguments,1,2);var n=(e=Lo("DocumentReference.set",e)).merge||e.mergeFields?this.firestore._dataConverter.parseMergeData("DocumentReference.set",t,e.mergeFields):this.firestore._dataConverter.parseSetData("DocumentReference.set",t);return this._firestoreClient.write(n.toMutations(this._key,ce.NONE))},t.prototype.update=function(t,e){for(var n,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];return"string"===typeof t||t instanceof zi?(D("DocumentReference.update",arguments,2),n=this.firestore._dataConverter.parseUpdateVarargs("DocumentReference.update",t,e,r)):(P("DocumentReference.update",arguments,1),n=this.firestore._dataConverter.parseUpdateData("DocumentReference.update",t)),this._firestoreClient.write(n.toMutations(this._key,ce.exists(!0)))},t.prototype.delete=function(){return P("DocumentReference.delete",arguments,0),this._firestoreClient.write([new de(this._key,ce.NONE)])},t.prototype.onSnapshot=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];N("DocumentReference.onSnapshot",arguments,1,4);var n,r={includeMetadataChanges:!1},i=0;"object"!==typeof t[i]||Ji(t[i])||(G("DocumentReference.onSnapshot",r=t[i],["includeMetadataChanges"]),F("DocumentReference.onSnapshot","boolean","includeMetadataChanges",r.includeMetadataChanges),i++);var o={includeMetadataChanges:r.includeMetadataChanges};return Ji(t[i])?n=t[i]:(R("DocumentReference.onSnapshot","function",i,t[i]),O("DocumentReference.onSnapshot","function",i+1,t[i+1]),O("DocumentReference.onSnapshot","function",i+2,t[i+2]),n={next:t[i],error:t[i+1],complete:t[i+2]}),this.onSnapshotInternal(o,n)},t.prototype.onSnapshotInternal=function(t,e){var n=this,r=function(t){console.error("Uncaught Error in onSnapshot:",t)};e.error&&(r=e.error.bind(e));var i=new Wi({next:function(t){if(e.next){v(t.docs.size<=1,"Too many documents returned on a document query");var r=t.docs.get(n._key);e.next(new No(n.firestore,n._key,r,t.fromCache,t.hasPendingWrites))}},error:r}),o=this._firestoreClient.listen(Wt.atPath(this._key.path),i,t);return function(){i.mute(),n._firestoreClient.unlisten(o)}},t.prototype.get=function(t){var e=this;return N("DocumentReference.get",arguments,0,1),Bo("DocumentReference.get",t),new Promise(function(n,r){t&&"cache"===t.source?e.firestore.ensureClientConfigured().getDocumentFromLocalCache(e._key).then(function(t){n(new No(e.firestore,e._key,t,!0,t instanceof dt&&t.hasLocalMutations))},r):e.getViaSnapshotListener(n,r,t)})},t.prototype.getViaSnapshotListener=function(t,e,n){var r=this.onSnapshotInternal({includeMetadataChanges:!0,waitForSyncWhenOnline:!0},{next:function(i){r(),!i.exists&&i.metadata.fromCache?e(new E(w.UNAVAILABLE,"Failed to get document because the client is offline.")):i.exists&&i.metadata.fromCache&&n&&"server"===n.source?e(new E(w.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):t(i)},error:e})},t}(),Do=function(){function t(t,e){this.hasPendingWrites=t,this.fromCache=e}return t.prototype.isEqual=function(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache},t}(),No=function(){function t(t,e,n,r,i){this._firestore=t,this._key=e,this._document=n,this._fromCache=r,this._hasPendingWrites=i}return t.prototype.data=function(t){return N("DocumentSnapshot.data",arguments,0,1),t=Vo("DocumentSnapshot.data",t),this._document?this.convertObject(this._document.data,wt.fromSnapshotOptions(t,this._firestore._areTimestampsInSnapshotsEnabled())):void 0},t.prototype.get=function(t,e){if(N("DocumentSnapshot.get",arguments,1,2),e=Vo("DocumentSnapshot.get",e),this._document){var n=this._document.data.field(go("DocumentSnapshot.get",t));if(void 0!==n)return this.convertValue(n,wt.fromSnapshotOptions(e,this._firestore._areTimestampsInSnapshotsEnabled()))}},Object.defineProperty(t.prototype,"id",{get:function(){return this._key.path.lastSegment()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"ref",{get:function(){return new Po(this._key,this._firestore)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"exists",{get:function(){return null!==this._document},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"metadata",{get:function(){return new Do(this._hasPendingWrites,this._fromCache)},enumerable:!0,configurable:!0}),t.prototype.isEqual=function(e){if(!(e instanceof t))throw W("isEqual","DocumentSnapshot",1,e);return this._firestore===e._firestore&&this._fromCache===e._fromCache&&this._key.isEqual(e._key)&&(null===this._document?null===e._document:this._document.isEqual(e._document))},t.prototype.convertObject=function(t,e){var n=this,r={};return t.forEach(function(t,i){r[t]=n.convertValue(i,e)}),r},t.prototype.convertValue=function(t,e){if(t instanceof Mt)return this.convertObject(t,e);if(t instanceof Ft)return this.convertArray(t,e);if(t instanceof Rt){var n=t.value(e),r=this._firestore.ensureClientConfigured().databaseId();return t.databaseId.isEqual(r)||m("Document "+this._key.path+" contains a document reference within a different database ("+t.databaseId.projectId+"/"+t.databaseId.database+") which is not supported. It will be treated as a reference in the current database ("+r.projectId+"/"+r.database+") instead."),new Po(n,this._firestore)}return t.value(e)},t.prototype.convertArray=function(t,e){var n=this;return t.internalValue.map(function(t){return n.convertValue(t,e)})},t}(),Ro=function(t){function e(e,n,r,i,o){return t.call(this,e,n,r,i,o)||this}return s.__extends(e,t),e.prototype.data=function(e){var n=t.prototype.data.call(this,e);return v("object"===typeof n,"Document in a QueryDocumentSnapshot should exist"),n},e}(No),Oo=function(){function t(t,e){this._query=t,this.firestore=e}return t.prototype.where=function(e,n,r){P("Query.where",arguments,3),q("Query.where",3,r);var i;!function(t,e,n,r){if(!e.some(function(t){return t===r}))throw new E(w.INVALID_ARGUMENT,"Invalid value "+j(r)+" provided to function "+t+"() for its "+z(n)+" argument. Acceptable values: "+e.join(", "))}("Query.where",["<","<=","==",">=",">","array-contains"],2,n);var o=go("Query.where",e),a=Ht.fromString(n);if(o.isKeyField()){if(a===Ht.ARRAY_CONTAINS)throw new E(w.INVALID_ARGUMENT,"Invalid Query. You can't perform array-contains queries on FieldPath.documentId() since document IDs are not arrays.");if("string"===typeof r){if(""===r)throw new E(w.INVALID_ARGUMENT,"Function Query.where() requires its third parameter to be a valid document ID if the first parameter is FieldPath.documentId(), but it was an empty string.");if(!this._query.isCollectionGroupQuery()&&-1!==r.indexOf("/"))throw new E(w.INVALID_ARGUMENT,"Invalid third parameter to Query.where(). When querying a collection by FieldPath.documentId(), the value provided must be a plain document ID, but '"+r+"' contains a slash.");var s=this._query.path.child(ct.fromString(r));if(!ft.isDocumentKey(s))throw new E(w.INVALID_ARGUMENT,"Invalid third parameter to Query.where(). When querying a collection group by FieldPath.documentId(), the value provided must result in a valid document path, but '"+s+"' is not because it has an odd number of segments ("+s.length+").");i=new Rt(this.firestore._databaseId,new ft(s))}else{if(!(r instanceof Po))throw new E(w.INVALID_ARGUMENT,"Function Query.where() requires its third parameter to be a string or a DocumentReference if the first parameter is FieldPath.documentId(), but it was: "+j(r)+".");var u=r;i=new Rt(this.firestore._databaseId,u._key)}}else i=this.firestore._dataConverter.parseQueryValue("Query.where",r);var c=zt.create(o,a,i);return this.validateNewFilter(c),new t(this._query.addFilter(c),this.firestore)},t.prototype.orderBy=function(e,n){var r;if(N("Query.orderBy",arguments,1,2),O("Query.orderBy","non-empty string",2,n),void 0===n||"asc"===n)r=Xt.ASCENDING;else{if("desc"!==n)throw new E(w.INVALID_ARGUMENT,"Function Query.orderBy() has unknown direction '"+n+"', expected 'asc' or 'desc'.");r=Xt.DESCENDING}if(null!==this._query.startAt)throw new E(w.INVALID_ARGUMENT,"Invalid query. You must not call Query.startAt() or Query.startAfter() before calling Query.orderBy().");if(null!==this._query.endAt)throw new E(w.INVALID_ARGUMENT,"Invalid query. You must not call Query.endAt() or Query.endBefore() before calling Query.orderBy().");var i=go("Query.orderBy",e),o=new Jt(i,r);return this.validateNewOrderBy(o),new t(this._query.addOrderBy(o),this.firestore)},t.prototype.limit=function(e){if(P("Query.limit",arguments,1),R("Query.limit","number",1,e),e<=0)throw new E(w.INVALID_ARGUMENT,"Invalid Query. Query limit ("+e+") is invalid. Limit must be positive.");return new t(this._query.withLimit(e),this.firestore)},t.prototype.startAt=function(e){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];D("Query.startAt",arguments,1);var i=this.boundFromDocOrFields("Query.startAt",e,n,!0);return new t(this._query.withStartAt(i),this.firestore)},t.prototype.startAfter=function(e){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];D("Query.startAfter",arguments,1);var i=this.boundFromDocOrFields("Query.startAfter",e,n,!1);return new t(this._query.withStartAt(i),this.firestore)},t.prototype.endBefore=function(e){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];D("Query.endBefore",arguments,1);var i=this.boundFromDocOrFields("Query.endBefore",e,n,!0);return new t(this._query.withEndAt(i),this.firestore)},t.prototype.endAt=function(e){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];D("Query.endAt",arguments,1);var i=this.boundFromDocOrFields("Query.endAt",e,n,!1);return new t(this._query.withEndAt(i),this.firestore)},t.prototype.isEqual=function(e){if(!(e instanceof t))throw W("isEqual","Query",1,e);return this.firestore===e.firestore&&this._query.isEqual(e._query)},t.prototype.boundFromDocOrFields=function(t,e,n,r){if(q(t,1,e),e instanceof No){if(n.length>0)throw new E(w.INVALID_ARGUMENT,"Too many arguments provided to "+t+"().");var i=e;if(!i.exists)throw new E(w.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for "+t+"().");return this.boundFromDocument(t,i._document,r)}var o=[e].concat(n);return this.boundFromFields(t,o,r)},t.prototype.boundFromDocument=function(t,e,n){for(var r=[],i=0,o=this._query.orderBy;i<o.length;i++){var a=o[i];if(a.field.isKeyField())r.push(new Rt(this.firestore._databaseId,e.key));else{var s=e.field(a.field);if(s instanceof Dt)throw new E(w.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+a.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(void 0===s){var u=a.field.canonicalString();throw new E(w.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '"+u+"' (used as the orderBy) does not exist.")}r.push(s)}}return new $t(r,n)},t.prototype.boundFromFields=function(t,e,n){var r=this._query.explicitOrderBy;if(e.length>r.length)throw new E(w.INVALID_ARGUMENT,"Too many arguments provided to "+t+"(). The number of arguments must be less than or equal to the number of Query.orderBy() clauses");for(var i=[],o=0;o<e.length;o++){var a=e[o];if(r[o].field.isKeyField()){if("string"!==typeof a)throw new E(w.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in "+t+"(), but got a "+typeof a);if(!this._query.isCollectionGroupQuery()&&-1!==a.indexOf("/"))throw new E(w.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by FieldPath.documentId(), the value passed to "+t+"() must be a plain document ID, but '"+a+"' contains a slash.");var s=this._query.path.child(ct.fromString(a));if(!ft.isDocumentKey(s))throw new E(w.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by FieldPath.documentId(), the value passed to "+t+"() must result in a valid document path, but '"+s+"' is not because it contains an odd number of segments.");var u=new ft(s);i.push(new Rt(this.firestore._databaseId,u))}else{var c=this.firestore._dataConverter.parseQueryValue(t,a);i.push(c)}}return new $t(i,n)},t.prototype.onSnapshot=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];N("Query.onSnapshot",arguments,1,4);var n,r={},i=0;return"object"!==typeof t[i]||Ji(t[i])||(G("Query.onSnapshot",r=t[i],["includeMetadataChanges"]),F("Query.onSnapshot","boolean","includeMetadataChanges",r.includeMetadataChanges),i++),Ji(t[i])?n=t[i]:(R("Query.onSnapshot","function",i,t[i]),O("Query.onSnapshot","function",i+1,t[i+1]),O("Query.onSnapshot","function",i+2,t[i+2]),n={next:t[i],error:t[i+1],complete:t[i+2]}),this.onSnapshotInternal(r,n)},t.prototype.onSnapshotInternal=function(t,e){var n=this,r=function(t){console.error("Uncaught Error in onSnapshot:",t)};e.error&&(r=e.error.bind(e));var i=new Wi({next:function(t){e.next&&e.next(new Mo(n.firestore,n._query,t))},error:r}),o=this.firestore.ensureClientConfigured(),a=o.listen(this._query,i,t);return function(){i.mute(),o.unlisten(a)}},t.prototype.get=function(t){var e=this;return N("Query.get",arguments,0,1),Bo("Query.get",t),new Promise(function(n,r){t&&"cache"===t.source?e.firestore.ensureClientConfigured().getDocumentsFromLocalCache(e._query).then(function(t){n(new Mo(e.firestore,e._query,t))},r):e.getViaSnapshotListener(n,r,t)})},t.prototype.getViaSnapshotListener=function(t,e,n){var r=this.onSnapshotInternal({includeMetadataChanges:!0,waitForSyncWhenOnline:!0},{next:function(i){r(),i.metadata.fromCache&&n&&"server"===n.source?e(new E(w.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):t(i)},error:e})},t.prototype.validateNewFilter=function(t){if(t instanceof Kt)if(t.isInequality()){var e=this._query.getInequalityFilterField();if(null!==e&&!e.isEqual(t.field))throw new E(w.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, >, or >=) must be on the same field. But you have inequality filters on '"+e.toString()+"' and '"+t.field.toString()+"'");var n=this._query.getFirstOrderByField();null!==n&&this.validateOrderByAndInequalityMatch(t.field,n)}else if(t.op===Ht.ARRAY_CONTAINS&&this._query.hasArrayContainsFilter())throw new E(w.INVALID_ARGUMENT,"Invalid query. Queries only support a single array-contains filter.")},t.prototype.validateNewOrderBy=function(t){if(null===this._query.getFirstOrderByField()){var e=this._query.getInequalityFilterField();null!==e&&this.validateOrderByAndInequalityMatch(e,t.field)}},t.prototype.validateOrderByAndInequalityMatch=function(t,e){if(!e.isEqual(t))throw new E(w.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, >, or >=) on field '"+t.toString()+"' and so you must also use '"+t.toString()+"' as your first Query.orderBy(), but your first Query.orderBy() is on field '"+e.toString()+"' instead.")},t}(),Mo=function(){function t(t,e,n){this._firestore=t,this._originalQuery=e,this._snapshot=n,this._cachedChanges=null,this._cachedChangesIncludeMetadataChanges=null,this.metadata=new Do(n.hasPendingWrites,n.fromCache)}return Object.defineProperty(t.prototype,"docs",{get:function(){var t=[];return this.forEach(function(e){return t.push(e)}),t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"empty",{get:function(){return this._snapshot.docs.isEmpty()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this._snapshot.docs.size},enumerable:!0,configurable:!0}),t.prototype.forEach=function(t,e){var n=this;N("QuerySnapshot.forEach",arguments,1,2),R("QuerySnapshot.forEach","function",1,t),this._snapshot.docs.forEach(function(r){t.call(e,n.convertToDocumentImpl(r))})},Object.defineProperty(t.prototype,"query",{get:function(){return new Oo(this._originalQuery,this._firestore)},enumerable:!0,configurable:!0}),t.prototype.docChanges=function(t){t&&(G("QuerySnapshot.docChanges",t,["includeMetadataChanges"]),F("QuerySnapshot.docChanges","boolean","includeMetadataChanges",t.includeMetadataChanges));var e=!(!t||!t.includeMetadataChanges);if(e&&this._snapshot.excludesMetadataChanges)throw new E(w.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(t,e,n){if(n.oldDocs.isEmpty()){var r,i=0;return n.docChanges.map(function(e){var o=new Ro(t,e.doc.key,e.doc,n.fromCache,n.mutatedKeys.has(e.doc.key));return v(e.type===Fe.Added,"Invalid event type for first snapshot"),v(!r||n.query.docComparator(r,e.doc)<0,"Got added events in wrong order"),r=e.doc,{type:"added",doc:o,oldIndex:-1,newIndex:i++}})}var o=n.oldDocs;return n.docChanges.filter(function(t){return e||t.type!==Fe.Metadata}).map(function(e){var r=new Ro(t,e.doc.key,e.doc,n.fromCache,n.mutatedKeys.has(e.doc.key)),i=-1,a=-1;return e.type!==Fe.Added&&(v((i=o.indexOf(e.doc.key))>=0,"Index for document not found"),o=o.delete(e.doc.key)),e.type!==Fe.Removed&&(o=o.add(e.doc),a=o.indexOf(e.doc.key)),{type:jo(e.type),doc:r,oldIndex:i,newIndex:a}})}(this._firestore,e,this._snapshot),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges},t.prototype.isEqual=function(e){if(!(e instanceof t))throw W("isEqual","QuerySnapshot",1,e);return this._firestore===e._firestore&&this._originalQuery.isEqual(e._originalQuery)&&this._snapshot.isEqual(e._snapshot)},t.prototype.convertToDocumentImpl=function(t){return new Ro(this._firestore,t.key,t,this.metadata.fromCache,this._snapshot.mutatedKeys.has(t.key))},t}();["length","forEach","map"].concat("undefined"!==typeof Symbol?[Symbol.iterator]:[]).forEach(function(t){try{Object.defineProperty(Mo.prototype.docChanges,t,{get:function(){return function(){throw new E(w.INVALID_ARGUMENT,'QuerySnapshot.docChanges has been changed from a property into a method, so usages like "querySnapshot.docChanges" should become "querySnapshot.docChanges()"')}()}})}catch(e){}});var Fo=function(t){function e(e,n){var r=t.call(this,Wt.atPath(e),n)||this;if(e.length%2!==1)throw new E(w.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but "+e.canonicalString()+" has "+e.length);return r}return s.__extends(e,t),Object.defineProperty(e.prototype,"id",{get:function(){return this._query.path.lastSegment()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){var t=this._query.path.popLast();return t.isEmpty()?null:new Po(new ft(t),this.firestore)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this._query.path.canonicalString()},enumerable:!0,configurable:!0}),e.prototype.doc=function(t){if(N("CollectionReference.doc",arguments,0,1),0===arguments.length&&(t=K.newId()),R("CollectionReference.doc","non-empty string",1,t),""===t)throw new E(w.INVALID_ARGUMENT,"Document path must be a non-empty string");var e=ct.fromString(t);return Po.forPath(this._query.path.child(e),this.firestore)},e.prototype.add=function(t){P("CollectionReference.add",arguments,1),R("CollectionReference.add","object",1,t);var e=this.doc();return e.set(t).then(function(){return e})},e}(Oo);function Lo(t,e){if(void 0===e)return{merge:!1};if(G(t,e,["merge","mergeFields"]),F(t,"boolean","merge",e.merge),L(t,"mergeFields","a string or a FieldPath",e.mergeFields,function(t){return"string"===typeof t||t instanceof zi}),void 0!==e.mergeFields&&void 0!==e.merge)throw new E(w.INVALID_ARGUMENT,"Invalid options passed to function "+t+'(): You cannot specify both "merge" and "mergeFields".');return e}function Vo(t,e){return void 0===e?{}:(G(t,e,["serverTimestamps"]),V(t,0,"serverTimestamps",e.serverTimestamps,["estimate","previous","none"]),e)}function Bo(t,e){O(t,"object",1,e),e&&(G(t,e,["source"]),V(t,0,"source",e.source,["default","server","cache"]))}function Uo(t,e,n){if(e instanceof Po){if(e.firestore!==n)throw new E(w.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}throw W(t,"DocumentReference",1,e)}function jo(t){switch(t){case Fe.Added:return"added";case Fe.Modified:case Fe.Metadata:return"modified";case Fe.Removed:return"removed";default:return g("Unknown change type: "+t)}}var qo=S(xo,"Use firebase.firestore() instead."),Go=S(Io,"Use firebase.firestore().runTransaction() instead."),Wo=S(Ao,"Use firebase.firestore().batch() instead."),zo=S(Po,"Use firebase.firestore().doc() instead."),Ho=S(No),Ko=S(Ro),Qo=S(Oo),Yo=S(Mo),Xo=S(Fo,"Use firebase.firestore().collection() instead."),$o={Firestore:qo,GeoPoint:rt,Timestamp:it,Blob:nt,Transaction:Go,WriteBatch:Wo,DocumentReference:zo,DocumentSnapshot:Ho,Query:Qo,QueryDocumentSnapshot:Ko,QuerySnapshot:Yo,CollectionReference:Xo,FieldPath:zi,FieldValue:ao,setLogLevel:xo.setLogLevel,CACHE_SIZE_UNLIMITED:To};function Jo(t){t.INTERNAL.registerService("firestore",function(t){return new xo(t)},function(t){v(t&&"object"===typeof t,"shallowCopy() expects object parameter.");var e={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}($o))}function Zo(t){Jo(t)}Zo(o),e.registerFirestore=Zo},function(t,e,n){"use strict";n.r(e),function(t){n.d(e,"ErrorCode",function(){return Ke}),n.d(e,"EventType",function(){return Qe}),n.d(e,"WebChannel",function(){return Ye}),n.d(e,"XhrIo",function(){return Xe}),n.d(e,"createWebChannelTransport",function(){return He});var r,i="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof t?t:"undefined"!==typeof self?self:{},o=o||{},a=i;function s(t){return"string"==typeof t}function u(t,e){t=t.split("."),e=e||a;for(var n=0;n<t.length;n++)if(null==(e=e[t[n]]))return null;return e}function c(){}function l(t){var e=typeof t;if("object"==e){if(!t)return"null";if(t instanceof Array)return"array";if(t instanceof Object)return e;var n=Object.prototype.toString.call(t);if("[object Window]"==n)return"object";if("[object Array]"==n||"number"==typeof t.length&&"undefined"!=typeof t.splice&&"undefined"!=typeof t.propertyIsEnumerable&&!t.propertyIsEnumerable("splice"))return"array";if("[object Function]"==n||"undefined"!=typeof t.call&&"undefined"!=typeof t.propertyIsEnumerable&&!t.propertyIsEnumerable("call"))return"function"}else if("function"==e&&"undefined"==typeof t.call)return"object";return e}function h(t){return"array"==l(t)}function f(t){var e=l(t);return"array"==e||"object"==e&&"number"==typeof t.length}function p(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}var d="closure_uid_"+(1e9*Math.random()>>>0),m=0;function y(t,e,n){return t.call.apply(t.bind,arguments)}function g(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),t.apply(e,n)}}return function(){return t.apply(e,arguments)}}function v(t,e,n){return(v=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?y:g).apply(null,arguments)}function b(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var e=n.slice();return e.push.apply(e,arguments),t.apply(this,e)}}var _=Date.now||function(){return+new Date};function w(t,e){function n(){}n.prototype=e.prototype,t.S=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.re=function(t,n,r){for(var i=Array(arguments.length-2),o=2;o<arguments.length;o++)i[o-2]=arguments[o];return e.prototype[n].apply(t,i)}}function E(){this.i=this.i,this.j=this.j}E.prototype.i=!1,E.prototype.La=function(){if(!this.i&&(this.i=!0,this.G(),0))this[d]||(this[d]=++m)},E.prototype.G=function(){if(this.j)for(;this.j.length;)this.j.shift()()};var S=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if(s(t))return s(e)&&1==e.length?t.indexOf(e,0):-1;for(var n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1},T=Array.prototype.forEach?function(t,e,n){Array.prototype.forEach.call(t,e,n)}:function(t,e,n){for(var r=t.length,i=s(t)?t.split(""):t,o=0;o<r;o++)o in i&&e.call(n,i[o],o,t)};function C(t){return Array.prototype.concat.apply([],arguments)}function k(t){var e=t.length;if(0<e){for(var n=Array(e),r=0;r<e;r++)n[r]=t[r];return n}return[]}function x(t){return/^[\s\xa0]*$/.test(t)}var I,A=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]};function P(t,e){return-1!=t.indexOf(e)}function D(t,e){return t<e?-1:t>e?1:0}t:{var N=a.navigator;if(N){var R=N.userAgent;if(R){I=R;break t}}I=""}function O(t,e,n){for(var r in t)e.call(n,t[r],r,t)}function M(t){var e,n={};for(e in t)n[e]=t[e];return n}var F="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function L(t,e){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])t[n]=r[n];for(var o=0;o<F.length;o++)n=F[o],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function V(t){return V[" "](t),t}V[" "]=c;var B,U=P(I,"Opera"),j=P(I,"Trident")||P(I,"MSIE"),q=P(I,"Edge"),G=q||j,W=P(I,"Gecko")&&!(P(I.toLowerCase(),"webkit")&&!P(I,"Edge"))&&!(P(I,"Trident")||P(I,"MSIE"))&&!P(I,"Edge"),z=P(I.toLowerCase(),"webkit")&&!P(I,"Edge");function H(){var t=a.document;return t?t.documentMode:void 0}t:{var K="",Q=function(){var t=I;return W?/rv:([^\);]+)(\)|;)/.exec(t):q?/Edge\/([\d\.]+)/.exec(t):j?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(t):z?/WebKit\/(\S+)/.exec(t):U?/(?:Version)[ \/]?(\S+)/.exec(t):void 0}();if(Q&&(K=Q?Q[1]:""),j){var Y=H();if(null!=Y&&Y>parseFloat(K)){B=String(Y);break t}}B=K}var X,$={};function J(t){return function(t,e){var n=$;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e(t)}(t,function(){for(var e=0,n=A(String(B)).split("."),r=A(String(t)).split("."),i=Math.max(n.length,r.length),o=0;0==e&&o<i;o++){var a=n[o]||"",s=r[o]||"";do{if(a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],0==a[0].length&&0==s[0].length)break;e=D(0==a[1].length?0:parseInt(a[1],10),0==s[1].length?0:parseInt(s[1],10))||D(0==a[2].length,0==s[2].length)||D(a[2],s[2]),a=a[3],s=s[3]}while(0==e)}return 0<=e})}var Z=a.document;X=Z&&j?H()||("CSS1Compat"==Z.compatMode?parseInt(B,10):5):void 0;var tt=!j||9<=Number(X),et=j&&!J("9"),nt=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{a.addEventListener("test",c,e),a.removeEventListener("test",c,e)}catch(n){}return t}();function rt(t,e){this.type=t,this.a=this.target=e,this.b=!1,this.hc=!0}function it(t,e){rt.call(this,t?t.type:""),this.relatedTarget=this.a=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.f=null,t&&this.g(t,e)}rt.prototype.c=function(){this.hc=!1},w(it,rt);var ot={2:"touch",3:"pen",4:"mouse"};it.prototype.g=function(t,e){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.a=e,e=t.relatedTarget){if(W){t:{try{V(e.nodeName);var i=!0;break t}catch(o){}i=!1}i||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType=s(t.pointerType)?t.pointerType:ot[t.pointerType]||"",this.f=t,t.defaultPrevented&&this.c()},it.prototype.c=function(){it.S.c.call(this);var t=this.f;if(t.preventDefault)t.preventDefault();else if(t.returnValue=!1,et)try{(t.ctrlKey||112<=t.keyCode&&123>=t.keyCode)&&(t.keyCode=-1)}catch(e){}};var at="closure_listenable_"+(1e6*Math.random()|0),st=0;function ut(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.ya=i,this.key=++st,this.ja=this.oa=!1}function ct(t){this.src=t,this.a={},this.b=0}function lt(t,e,n,r){for(var i=0;i<t.length;++i){var o=t[i];if(!o.ja&&o.listener==e&&o.capture==!!n&&o.ya==r)return i}return-1}ut.prototype.a=function(){this.ja=!0,this.ya=this.src=this.proxy=this.listener=null},(r=ct.prototype).add=function(t,e,n,r,i){var o=t.toString();(t=this.a[o])||(t=this.a[o]=[],this.b++);var a=lt(t,e,r,i);return-1<a?(e=t[a],n||(e.oa=!1)):((e=new ut(e,this.src,o,!!r,i)).oa=n,t.push(e)),e},r.Sc=function(t,e,n,r){if((t=t.toString())in this.a){var i=this.a[t];-1<(e=lt(i,e,n,r))&&(i[e].a(),Array.prototype.splice.call(i,e,1),0==i.length&&(delete this.a[t],this.b--))}},r.fc=function(t){var e=t.type;if(e in this.a){var n,r=this.a[e],i=S(r,t);(n=0<=i)&&Array.prototype.splice.call(r,i,1),n&&(t.a(),0==this.a[e].length&&(delete this.a[e],this.b--))}},r.Tc=function(){var t;for(t in this.a){for(var e=this.a[t],n=0;n<e.length;n++)e[n].a();delete this.a[t],this.b--}},r.Rc=function(t,e,n,r){var i=-1;return(t=this.a[t.toString()])&&(i=lt(t,e,n,r)),-1<i?t[i]:null};var ht="closure_lm_"+(1e6*Math.random()|0),ft={};function pt(t,e,n,r,i){if(r&&r.once)return function t(e,n,r,i,o){if(h(n)){for(var a=0;a<n.length;a++)t(e,n[a],r,i,o);return null}r=wt(r);return e&&e[at]?e.Mb(n,r,p(i)?!!i.capture:!!i,o):dt(e,n,r,!0,i,o)}(t,e,n,r,i);if(h(e)){for(var o=0;o<e.length;o++)pt(t,e[o],n,r,i);return null}return n=wt(n),t&&t[at]?t.Lb(e,n,p(r)?!!r.capture:!!r,i):dt(t,e,n,!1,r,i)}function dt(t,e,n,r,i,o){if(!e)throw Error("Invalid event type");var a=p(i)?!!i.capture:!!i;if(a&&!tt)return null;var s=bt(t);if(s||(t[ht]=s=new ct(t)),(n=s.add(e,n,r,a,o)).proxy)return n;if(r=function(){var t=vt,e=tt?function(n){return t.call(e.src,e.listener,n)}:function(n){if(!(n=t.call(e.src,e.listener,n)))return n};return e}(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)nt||(i=a),void 0===i&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(yt(e.toString()),r);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(r)}return n}function mt(t){if("number"!=typeof t&&t&&!t.ja){var e=t.src;if(e&&e[at])e.nc(t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(yt(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=bt(e))?(n.fc(t),0==n.b&&(n.src=null,e[ht]=null)):t.a()}}}function yt(t){return t in ft?ft[t]:ft[t]="on"+t}function gt(t,e){var n=t.listener,r=t.ya||t.src;return t.oa&&mt(t),n.call(r,e)}function vt(t,e){return!!t.ja||(tt?gt(t,new it(e,this)):gt(t,e=new it(e||u("window.event"),this)))}function bt(t){return(t=t[ht])instanceof ct?t:null}var _t="__closure_events_fn_"+(1e9*Math.random()>>>0);function wt(t){return"function"==l(t)?t:(t[_t]||(t[_t]=function(e){return t.handleEvent(e)}),t[_t])}function Et(){E.call(this),this.c=new ct(this),this.K=this,this.F=null}w(Et,E),Et.prototype[at]=!0,(r=Et.prototype).addEventListener=function(t,e,n,r){pt(this,t,e,n,r)},r.removeEventListener=function(t,e,n,r){!function t(e,n,r,i,o){if(h(n))for(var a=0;a<n.length;a++)t(e,n[a],r,i,o);else i=p(i)?!!i.capture:!!i,r=wt(r),e&&e[at]?e.Qc(n,r,i,o):e&&(e=bt(e))&&(n=e.Rc(n,r,i,o))&&mt(n)}(this,t,e,n,r)},r.dispatchEvent=function(t){var e,n=this.F;if(n)for(e=[];n;n=n.F)e.push(n);n=this.K;var r=t.type||t;if(s(t))t=new rt(t,n);else if(t instanceof rt)t.target=t.target||n;else{var i=t;L(t=new rt(r,n),i)}if(i=!0,e)for(var o=e.length-1;!t.b&&0<=o;o--){var a=t.a=e[o];i=a.ua(r,!0,t)&&i}if(t.b||(i=(a=t.a=n).ua(r,!0,t)&&i,t.b||(i=a.ua(r,!1,t)&&i)),e)for(o=0;!t.b&&o<e.length;o++)i=(a=t.a=e[o]).ua(r,!1,t)&&i;return i},r.G=function(){Et.S.G.call(this),this.Id(),this.F=null},r.Lb=function(t,e,n,r){return this.c.add(String(t),e,!1,n,r)},r.Mb=function(t,e,n,r){return this.c.add(String(t),e,!0,n,r)},r.Qc=function(t,e,n,r){this.c.Sc(String(t),e,n,r)},r.nc=function(t){this.c.fc(t)},r.Id=function(){this.c&&this.c.Tc()},r.ua=function(t,e,n){if(!(t=this.c.a[String(t)]))return!0;t=t.concat();for(var r=!0,i=0;i<t.length;++i){var o=t[i];if(o&&!o.ja&&o.capture==e){var a=o.listener,s=o.ya||o.src;o.oa&&this.nc(o),r=!1!==a.call(s,n)&&r}}return r&&0!=n.hc};var St=a.JSON.stringify;function Tt(t,e){this.g=100,this.c=t,this.h=e,this.b=0,this.a=null}function Ct(){this.b=this.a=null}Tt.prototype.get=function(){if(0<this.b){this.b--;var t=this.a;this.a=t.next,t.next=null}else t=this.c();return t},Tt.prototype.f=function(t){this.h(t),this.b<this.g&&(this.b++,t.next=this.a,this.a=t)};var kt,xt=new Tt(function(){return new It},function(t){t.reset()});function It(){this.next=this.b=this.a=null}function At(t){a.setTimeout(function(){throw t},0)}Ct.prototype.add=function(t,e){var n=this.c();n.set(t,e),this.b?this.b.next=n:this.a=n,this.b=n},Ct.prototype.f=function(){var t=null;return this.a&&(t=this.a,this.a=this.a.next,this.a||(this.b=null),t.next=null),t},Ct.prototype.g=function(t){xt.f(t)},Ct.prototype.c=function(){return xt.get()},It.prototype.set=function(t,e){this.a=t,this.b=e,this.next=null},It.prototype.reset=function(){this.next=this.b=this.a=null};var Pt=!1,Dt=new Ct;function Nt(){for(var t;t=Dt.f();){try{t.a.call(t.b)}catch(e){At(e)}Dt.g(t)}Pt=!1}function Rt(t,e){Et.call(this),this.b=t||1,this.a=e||a,this.f=v(this.$d,this),this.g=_()}function Ot(t,e,n){if("function"==l(t))n&&(t=v(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=v(t.handleEvent,t)}return 2147483647<Number(e)?-1:a.setTimeout(t,e||0)}function Mt(t,e,n){E.call(this),this.f=null!=n?v(t,n):t,this.c=e,this.b=v(this.Cd,this),this.a=[]}function Ft(t){E.call(this),this.b=t,this.a={}}w(Rt,Et),(r=Rt.prototype).wa=!1,r.P=null,r.$d=function(){if(this.wa){var t=_()-this.g;0<t&&t<.8*this.b?this.P=this.a.setTimeout(this.f,this.b-t):(this.P&&(this.a.clearTimeout(this.P),this.P=null),this.Gc(),this.wa&&(this.Na(),this.start()))}},r.Gc=function(){this.dispatchEvent("tick")},r.start=function(){this.wa=!0,this.P||(this.P=this.a.setTimeout(this.f,this.b),this.g=_())},r.Na=function(){this.wa=!1,this.P&&(this.a.clearTimeout(this.P),this.P=null)},r.G=function(){Rt.S.G.call(this),this.Na(),delete this.a},w(Mt,E),(r=Mt.prototype).Ca=!1,r.ec=0,r.ba=null,r.Hc=function(t){this.a=arguments,this.ba||this.ec?this.Ca=!0:this.yb()},r.Pc=function(){this.ba&&(a.clearTimeout(this.ba),this.ba=null,this.Ca=!1,this.a=[])},r.G=function(){Mt.S.G.call(this),this.Pc()},r.Cd=function(){this.ba=null,this.Ca&&!this.ec&&(this.Ca=!1,this.yb())},r.yb=function(){this.ba=Ot(this.b,this.c),this.f.apply(null,this.a)},w(Ft,E);var Lt=[];function Vt(){}(r=Ft.prototype).Jb=function(t,e,n){this.wd(t,e,n)},r.wd=function(t,e,n){h(e)||(e&&(Lt[0]=e.toString()),e=Lt);for(var r=0;r<e.length;r++){var i=pt(t,e[r],n||this.handleEvent,!1,this.b||this);if(!i)break;this.a[i.key]=i}},r.Kb=function(){O(this.a,function(t,e){this.a.hasOwnProperty(e)&&mt(t)},this),this.a={}},r.G=function(){Ft.S.G.call(this),this.Kb()},r.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Bt=new Et;function Ut(t){rt.call(this,"serverreachability",t)}function jt(t){Bt.dispatchEvent(new Ut(Bt,t))}function qt(t){rt.call(this,"statevent",t)}function Gt(t){Bt.dispatchEvent(new qt(Bt,t))}function Wt(t){rt.call(this,"timingevent",t)}function zt(t,e){if("function"!=l(t))throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){t()},e)}w(Ut,rt),w(qt,rt),w(Wt,rt);var Ht={NO_ERROR:0,ae:1,he:2,ge:3,de:4,fe:5,ie:6,qc:7,TIMEOUT:8,le:9},Kt={ce:"complete",pe:"success",rc:"error",qc:"abort",ne:"ready",oe:"readystatechange",TIMEOUT:"timeout",je:"incrementaldata",me:"progress",ee:"downloadprogress",qe:"uploadprogress"};function Qt(){}function Yt(){}Qt.prototype.a=null,Qt.prototype.c=function(){return this.a||(this.a={})};var Xt,$t={OPEN:"a",be:"b",rc:"c",ke:"d"};function Jt(){rt.call(this,"d")}function Zt(){rt.call(this,"c")}function te(){}function ee(t,e,n){this.g=t,this.da=e,this.ca=n||1,this.I=new Ft(this),this.L=ne,t=G?125:void 0,this.T=new Rt(t),this.J=null,this.b=!1,this.i=this.C=this.f=this.F=this.u=this.U=this.h=null,this.j=[],this.a=null,this.A=0,this.c=this.v=null,this.o=-1,this.l=!1,this.K=0,this.B=null,this.s=this.Y=this.H=!1}w(Jt,rt),w(Zt,rt),w(te,Qt),te.prototype.b=function(){return new XMLHttpRequest},Xt=new te;var ne=45e3,re={},ie={};function oe(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(f(t)||s(t))T(t,e,void 0);else{if(t.O&&"function"==typeof t.O)var n=t.O();else if(t.D&&"function"==typeof t.D)n=void 0;else if(f(t)||s(t)){n=[];for(var r=t.length,i=0;i<r;i++)n.push(i)}else for(i in n=[],r=0,t)n[r++]=i;i=(r=function(t){if(t.D&&"function"==typeof t.D)return t.D();if(s(t))return t.split("");if(f(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}for(r in e=[],n=0,t)e[n++]=t[r];return e}(t)).length;for(var o=0;o<i;o++)e.call(void 0,r[o],n&&n[o],t)}}function ae(t,e){this.b={},this.a=[],this.c=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else t&&this.fd(t)}function se(t,e){return Object.prototype.hasOwnProperty.call(t,e)}(r=ee.prototype).ha=function(t){this.J=t},r.setTimeout=function(t){this.L=t},r.Xc=function(t){this.K=t},r.Qd=function(t){this.j=t},r.cb=function(t,e){this.F=1,this.f=t.N().za(),this.i=e,this.H=!0,this.ic(null)},r.bb=function(t,e,n){this.F=1,this.f=t.N().za(),this.i=null,this.H=e,this.ic(n)},r.ic=function(t){this.u=_(),this.fa(),this.C=this.f.N(),this.C.Aa("t",this.ca),this.A=0,this.a=this.g.sa(this.g.Da()?t:null),0<this.K&&(this.B=new Mt(v(this.oc,this,this.a),this.K)),this.I.Jb(this.a,"readystatechange",this.Hd),t=this.J?M(this.J):{},this.i?(this.v||(this.v="POST"),t["Content-Type"]="application/x-www-form-urlencoded",this.a.xa(this.C,this.v,this.i,t)):(this.v="GET",this.a.xa(this.C,this.v,null,t)),jt(1)},r.Hd=function(t){t=t.target;var e=this.B;e&&3==t.W()?e.Hc():this.oc(t)},r.oc=function(t){try{t==this.a&&this.Ed()}catch(e){}},r.Ed=function(){var t=this.a.W(),e=this.a.Db(),n=this.a.aa();if(!(3>t||3==t&&!G&&!this.a.va()))if(this.l||4!=t||7==e||jt(8==e||0>=n?3:2),this.pa(),this.o=n=this.a.aa(),e=this.a.va(),this.b=200==n){if(this.Td()){if(!(n=this.Kc()))return this.b=!1,this.c=3,Gt(12),this.Z(),void this.ta();this.s=!0,this.Wa(n)}this.H?(this.vb(t,e),G&&this.b&&3==t&&this.Yd()):this.Wa(e),4==t&&this.Z(),this.b&&!this.l&&(4==t?this.g.Va(this):(this.b=!1,this.fa()))}else 400==n&&0<e.indexOf("Unknown SID")?(this.c=3,Gt(12)):(this.c=0,Gt(13)),this.Z(),this.ta()},r.Td=function(){return this.Y&&!this.s},r.Kc=function(){if(this.a){var t=this.a.ga("X-HTTP-Initial-Response");if(t&&!x(t))return t}return null},r.Md=function(){this.Y=!0},r.vb=function(t,e){for(var n=!0;!this.l&&this.A<e.length;){var r=this.Lc(e);if(r==ie){4==t&&(this.c=4,Gt(14),n=!1);break}if(r==re){this.c=4,Gt(15),n=!1;break}this.Wa(r)}4==t&&0==e.length&&(this.c=1,Gt(16),n=!1),this.b=this.b&&n,n||(this.Z(),this.ta())},r.Gd=function(){if(this.a){var t=this.a.W(),e=this.a.va();this.A<e.length&&(this.pa(),this.vb(t,e),this.b&&4!=t&&this.fa())}},r.Yd=function(){this.I.Jb(this.T,"tick",this.Gd),this.T.start()},r.Lc=function(t){var e=this.A,n=t.indexOf("\n",e);return-1==n?ie:(e=Number(t.substring(e,n)),isNaN(e)?re:(n+=1)+e>t.length?ie:(t=t.substr(n,e),this.A=n+e,t))},r.Ld=function(t){this.F=2,this.f=t.N().za(),t=!1,a.navigator&&a.navigator.sendBeacon&&(t=a.navigator.sendBeacon(this.f.toString(),"")),!t&&a.Image&&((new Image).src=this.f,t=!0),t||(this.a=this.g.sa(null),this.a.xa(this.f)),this.u=_(),this.fa()},r.cancel=function(){this.l=!0,this.Z()},r.Kd=function(t){t&&this.setTimeout(t),this.h&&(this.pa(),this.fa())},r.fa=function(){this.U=_()+this.L,this.mc(this.L)},r.mc=function(t){if(null!=this.h)throw Error("WatchDog timer not null");this.h=zt(v(this.Dd,this),t)},r.pa=function(){this.h&&(a.clearTimeout(this.h),this.h=null)},r.Dd=function(){this.h=null;var t=_();0<=t-this.U?this.md():this.mc(this.U-t)},r.md=function(){2!=this.F&&(jt(3),Gt(17)),this.Z(),this.c=2,this.ta()},r.ta=function(){this.g.Tb()||this.l||this.g.Va(this)},r.Z=function(){this.pa();var t=this.B;t&&"function"==typeof t.La&&t.La(),this.B=null,this.T.Na(),this.I.Kb(),this.a&&(t=this.a,this.a=null,t.abort(),t.La())},r.Wa=function(t){try{this.g.bc(this,t),jt(4)}catch(e){}},(r=ae.prototype).D=function(){this.Ka();for(var t=[],e=0;e<this.a.length;e++)t.push(this.b[this.a[e]]);return t},r.O=function(){return this.Ka(),this.a.concat()},r.Ra=function(t){return se(this.b,t)},r.hd=function(){return 0==this.c},r.gd=function(){this.b={},this.c=this.a.length=0},r.Qb=function(t){se(this.b,t)&&(delete this.b[t],this.c--,this.a.length>2*this.c&&this.Ka())},r.Ka=function(){if(this.c!=this.a.length){for(var t=0,e=0;t<this.a.length;){var n=this.a[t];se(this.b,n)&&(this.a[e++]=n),t++}this.a.length=e}if(this.c!=this.a.length){var r={};for(e=t=0;t<this.a.length;)se(r,n=this.a[t])||(this.a[e++]=n,r[n]=1),t++;this.a.length=e}},r.get=function(t,e){return se(this.b,t)?this.b[t]:e},r.set=function(t,e){se(this.b,t)||(this.c++,this.a.push(t)),this.b[t]=e},r.fd=function(t){if(t instanceof ae)for(var e=t.O(),n=0;n<e.length;n++)this.set(e[n],t.get(e[n]));else for(e in t)this.set(e,t[e])},r.forEach=function(t,e){for(var n=this.O(),r=0;r<n.length;r++){var i=n[r],o=this.get(i);t.call(e,o,i,this)}},r.Pb=function(){return new ae(this)};var ue=/^(?:([^:\/?#.]+):)?(?:\/\/(?:([^\/?#]*)@)?([^\/#?]*?)(?::([0-9]+))?(?=[\/#?]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function ce(t,e){var n;this.c=this.i=this.b="",this.h=null,this.j=this.g="",this.f=this.l=!1,t instanceof ce?(this.f=void 0!==e?e:t.f,this.ma(t.b),this.$a(t.i),this.ka(t.c),this.la(t.h),this.Ba(t.g),this.Za(t.a.Gb()),this.Ya(t.j)):t&&(n=String(t).match(ue))?(this.f=!!e,this.ma(n[1]||"",!0),this.$a(n[2]||"",!0),this.ka(n[3]||"",!0),this.la(n[4]),this.Ba(n[5]||"",!0),this.Za(n[6]||"",!0),this.Ya(n[7]||"",!0)):(this.f=!!e,this.a=new ve(null,this.f))}function le(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function he(t,e,n){return s(t)?(t=encodeURI(t).replace(e,fe),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function fe(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}(r=ce.prototype).toString=function(){var t=[],e=this.b;e&&t.push(he(e,pe,!0),":");var n=this.c;return(n||"file"==e)&&(t.push("//"),(e=this.i)&&t.push(he(e,pe,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.h)&&t.push(":",String(n))),(n=this.g)&&(this.Sa()&&"/"!=n.charAt(0)&&t.push("/"),t.push(he(n,"/"==n.charAt(0)?me:de,!0))),(n=this.Ic())&&t.push("?",n),(n=this.j)&&t.push("#",he(n,ge)),t.join("")},r.resolve=function(t){var e=this.N(),n=t.qd();n?e.ma(t.b):n=t.rd(),n?e.$a(t.i):n=t.Sa(),n?e.ka(t.c):n=t.od();var r=t.g;if(n)e.la(t.h);else if(n=t.Sb()){if("/"!=r.charAt(0))if(this.Sa()&&!this.Sb())r="/"+r;else{var i=e.g.lastIndexOf("/");-1!=i&&(r=e.g.substr(0,i+1)+r)}if(".."==(i=r)||"."==i)r="";else if(P(i,"./")||P(i,"/.")){r=0==i.lastIndexOf("/",0),i=i.split("/");for(var o=[],a=0;a<i.length;){var s=i[a++];"."==s?r&&a==i.length&&o.push(""):".."==s?((1<o.length||1==o.length&&""!=o[0])&&o.pop(),r&&a==i.length&&o.push("")):(o.push(s),r=!0)}r=o.join("/")}else r=i}return n?e.Ba(r):n=t.pd(),n?e.Za(t.a.Gb()):n=t.nd(),n&&e.Ya(t.j),e},r.N=function(){return new ce(this)},r.ma=function(t,e){this.M(),(this.b=e?le(t,!0):t)&&(this.b=this.b.replace(/:$/,""))},r.qd=function(){return!!this.b},r.$a=function(t,e){this.M(),this.i=e?le(t):t},r.rd=function(){return!!this.i},r.ka=function(t,e){this.M(),this.c=e?le(t,!0):t},r.Sa=function(){return!!this.c},r.la=function(t){if(this.M(),t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);this.h=t}else this.h=null},r.od=function(){return null!=this.h},r.Ba=function(t,e){this.M(),this.g=e?le(t,!0):t},r.Sb=function(){return!!this.g},r.pd=function(){return""!==this.a.toString()},r.Za=function(t,e){this.M(),t instanceof ve?(this.a=t,this.a.Oc(this.f)):(e||(t=he(t,ye)),this.a=new ve(t,this.f))},r.Ic=function(){return this.a.toString()},r.m=function(t,e){this.M(),this.a.set(t,e)},r.Aa=function(t,e){this.M(),h(e)||(e=[String(e)]),this.a.lc(t,e)},r.Ya=function(t,e){this.M(),this.j=e?le(t):t},r.nd=function(){return!!this.j},r.za=function(){return this.M(),this.m("zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^_()).toString(36)),this},r.M=function(){if(this.l)throw Error("Tried to modify a read-only Uri")};var pe=/[#\/\?@]/g,de=/[#\?:]/g,me=/[#\?]/g,ye=/[#\?@]/g,ge=/#/g;function ve(t,e){this.b=this.a=null,this.c=t||null,this.f=!!e}function be(t){this.a=t,this.b=this.h=null,this.g=!1,this.i=null,this.c=-1,this.l=this.f=null}function _e(){this.a=this.b=null}function we(){this.a=new ae}function Ee(t){var e=typeof t;return"object"==e&&t||"function"==e?"o"+(t[d]||(t[d]=++m)):e.charAt(0)+t}function Se(t,e){this.a=t,this.b=e}function Te(t){this.g=t||Ce,a.PerformanceNavigationTiming?t=0<(t=a.performance.getEntriesByType("navigation")).length&&("hq"==t[0].nextHopProtocol||"h2"==t[0].nextHopProtocol):t=!!(a.Ja&&a.Ja.Vb&&a.Ja.Vb()&&a.Ja.Vb().se),this.f=t?this.g:1,this.a=null,1<this.f&&(this.a=new we),this.b=null,this.c=[]}(r=ve.prototype).V=function(){if(!this.a&&(this.a=new ae,this.b=0,this.c)){var t=this;!function(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var o=t[n].substring(0,r);i=t[n].substring(r+1)}else o=t[n];e(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(this.c,function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)})}},r.add=function(t,e){this.V(),this.ia(),t=this.$(t);var n=this.a.get(t);return n||this.a.set(t,n=[]),n.push(e),this.b+=1,this},r.Ib=function(t){this.V(),t=this.$(t),this.a.Ra(t)&&(this.ia(),this.b-=this.a.get(t).length,this.a.Qb(t))},r.Hb=function(t){return this.V(),t=this.$(t),this.a.Ra(t)},r.forEach=function(t,e){this.V(),this.a.forEach(function(n,r){T(n,function(n){t.call(e,n,r,this)},this)},this)},r.O=function(){this.V();for(var t=this.a.D(),e=this.a.O(),n=[],r=0;r<e.length;r++)for(var i=t[r],o=0;o<i.length;o++)n.push(e[r]);return n},r.D=function(t){this.V();var e=[];if(s(t))this.Hb(t)&&(e=C(e,this.a.get(this.$(t))));else{t=this.a.D();for(var n=0;n<t.length;n++)e=C(e,t[n])}return e},r.set=function(t,e){return this.V(),this.ia(),t=this.$(t),this.Hb(t)&&(this.b-=this.a.get(t).length),this.a.set(t,[e]),this.b+=1,this},r.get=function(t,e){return t&&0<(t=this.D(t)).length?String(t[0]):e},r.lc=function(t,e){this.Ib(t),0<e.length&&(this.ia(),this.a.set(this.$(t),k(e)),this.b+=e.length)},r.toString=function(){if(this.c)return this.c;if(!this.a)return"";for(var t=[],e=this.a.O(),n=0;n<e.length;n++){var r=e[n],i=encodeURIComponent(String(r));r=this.D(r);for(var o=0;o<r.length;o++){var a=i;""!==r[o]&&(a+="="+encodeURIComponent(String(r[o]))),t.push(a)}}return this.c=t.join("&")},r.ia=function(){this.c=null},r.Gb=function(){var t=new ve;return t.c=this.c,this.a&&(t.a=this.a.Pb(),t.b=this.b),t},r.$=function(t){return t=String(t),this.f&&(t=t.toLowerCase()),t},r.Oc=function(t){t&&!this.f&&(this.V(),this.ia(),this.a.forEach(function(t,e){var n=e.toLowerCase();e!=n&&(this.Ib(e),this.lc(n,t))},this)),this.f=t},w(function(){},function(){}),(r=be.prototype).R=null,r.Wc=function(t){this.h=t},r.Vc=function(t){this.i=t,t=this.a.Cb(this.i),Gt(3);var e=this.a.H.b;null!=e?(this.f=this.a.Oa(e[0]),this.R=1,this.rb()):(t.Aa("MODE","init"),!this.a.o&&this.a.j&&t.Aa("X-HTTP-Session-Id",this.a.j),this.b=new ee(this,void 0,void 0),this.b.ha(this.h),this.b.bb(t,!1,null),this.R=0)},r.rb=function(){var t=this.a.H.a;if(null!=t)Gt(4),t?(Gt(10),this.a.na(this,!1)):(Gt(11),this.a.na(this,!0));else{this.b=new ee(this,void 0,void 0),this.b.ha(this.h),t=this.a.Bb(this.f,this.i),Gt(4),t.Aa("TYPE","xmlhttp");var e=this.a.j,n=this.a.Fa;e&&n&&t.m(e,n),this.b.bb(t,!1,this.f)}},r.sa=function(t){return this.a.sa(t)},r.abort=function(){this.b&&(this.b.cancel(),this.b=null),this.c=-1},r.Tb=function(){return!1},r.bc=function(t,e){if(this.c=t.o,0==this.R)if(this.Uc(t),e){try{var n=this.a.U.a(e)}catch(r){return void this.a.ab(this)}this.f=this.a.Oa(n[0])}else this.a.ab(this);else 1==this.R&&(this.g?Gt(6):"11111"==e?(Gt(5),this.g=!0,this.Ac()&&(this.c=200,this.b.cancel(),Gt(11),this.a.na(this,!0))):(Gt(7),this.g=!1))},r.Va=function(){this.c=this.b.o,this.b.b?0==this.R?(this.R=1,this.rb()):1==this.R&&(this.g?(Gt(11),this.a.na(this,!0)):(Gt(10),this.a.na(this,!1))):(0==this.R?Gt(8):1==this.R&&Gt(9),this.a.ab(this))},r.Uc=function(t){if(!this.a.o&&(t=t.a)){var e=t.ga("X-Client-Wire-Protocol");this.l=e||null,this.a.j&&(t=t.ga("X-HTTP-Session-Id"))&&this.a.kc(t)}},r.Da=function(){return this.a.Da()},r.Pa=function(){return this.a.Pa()},r.Ac=function(){return!j||10<=Number(X)},(r=we.prototype).add=function(t){this.a.set(Ee(t),t)},r.ed=function(t){this.a.Qb(Ee(t))},r.jd=function(){this.a.gd()},r.Rb=function(){return this.a.hd()},r.Ob=function(t){return this.a.Ra(Ee(t))},r.D=function(){return this.a.D()};var Ce=10;function ke(){this.b=this.a=void 0}function xe(){this.f=new ke}function Ie(t,e,n,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch(o){}}(r=Te.prototype).kb=function(t){!this.a&&(P(t,"spdy")||P(t,"quic")||P(t,"h2"))&&(this.f=this.g,this.a=new we,this.b&&(this.Ha(this.b),this.b=null))},r.Ub=function(){return!!this.b||!!this.a&&this.a.a.c>=this.f},r.Mc=function(){return this.b?1:this.a?this.a.a.c:0},r.Ta=function(t){return this.b?this.b==t:!!this.a&&this.a.Ob(t)},r.Ha=function(t){this.a?this.a.add(t):this.b=t},r.gc=function(t){this.b&&this.b==t?this.b=null:this.a&&this.a.Ob(t)&&this.a.ed(t)},r.cancel=function(){this.c=this.Xb(),this.b?(this.b.cancel(),this.b=null):this.a&&!this.a.Rb()&&(T(this.a.D(),function(t){t.cancel()}),this.a.jd())},r.Xb=function(){if(null!=this.b)return this.c.concat(this.b.j);if(null!=this.a&&!this.a.Rb()){var t=this.c;return T(this.a.D(),function(e){t=t.concat(e.j)}),t}return k(this.c)},r.wc=function(t){this.c=this.c.concat(t)},r.Bc=function(){this.c.length=0},ke.prototype.stringify=function(t){return a.JSON.stringify(t,this.a)},ke.prototype.parse=function(t){return a.JSON.parse(t,this.b)},xe.prototype.b=function(t,e,n){var r=n||"";try{oe(t,function(t,n){var i=t;p(t)&&(i=St(t)),e.push(r+n+"="+encodeURIComponent(i))})}catch(i){throw e.push(r+"type="+encodeURIComponent("_badmap")),i}},xe.prototype.c=function(t,e,n){for(var r=-1;;){var i=["count="+e];-1==r?0<e?(r=t[0].a,i.push("ofs="+r)):r=0:i.push("ofs="+r);for(var o=!0,a=0;a<e;a++){var s=t[a].a,u=t[a].b;if(0>(s-=r))r=Math.max(0,t[a].a-100),o=!1;else try{this.b(u,i,"req"+s+"_")}catch(c){n&&n(u)}}if(o)return i.join("&")}},xe.prototype.a=function(t){return this.f.parse(t)};var Ae=a.JSON.parse;function Pe(t){Et.call(this),this.headers=new ae,this.l=t||null,this.b=!1,this.v=this.a=null,this.C="",this.h=0,this.f="",this.g=this.B=this.o=this.A=!1,this.u=0,this.s=null,this.J=De,this.H=this.L=this.I=!1}w(Pe,Et);var De="",Ne=/^https?$/i,Re=["POST","PUT"];function Oe(t){return"content-type"==t.toLowerCase()}function Me(t,e){return{type:e,lengthComputable:t.lengthComputable,loaded:t.loaded,total:t.total}}function Fe(t,e,n){t:{for(r in n){var r=!1;break t}r=!0}if(r)return t;if(n=function(t){var e="";return O(t,function(t,n){e+=n,e+=":",e+=t,e+="\r\n"}),e}(n),s(t)){if(e=encodeURIComponent(String(e)),e+=n=null!=n?"="+encodeURIComponent(String(n)):""){if(0>(n=t.indexOf("#"))&&(n=t.length),0>(r=t.indexOf("?"))||r>n){r=n;var i=""}else i=t.substring(r+1,n);n=(t=[t.substr(0,r),i,t.substr(n)])[1],t[1]=e?n?n+"&"+e:e:n,t=t[0]+(t[1]?"?"+t[1]:"")+t[2]}return t}return t.m(e,n),t}function Le(t){this.gb=22,this.g=[],this.H=new _e,this.da=this.fb=this.C=this.Ea=this.a=this.Fa=this.j=this.ca=this.f=this.J=this.h=null,this.sc=!0,this.zc=this.L=0,this.uc=!!u("internalChannelParams.failFast",t),this.Ga=this.v=this.s=this.l=this.i=this.b=null,this.eb=!0,this.B=this.jb=this.K=-1,this.Y=this.u=this.A=0,this.tc=u("internalChannelParams.baseRetryDelayMs",t)||5e3,this.Fc=u("internalChannelParams.retryDelaySeedMs",t)||1e4,this.pc=u("internalChannelParams.forwardChannelMaxRetries",t)||2,this.ib=u("internalChannelParams.forwardChannelRequestTimeoutMs",t)||2e4,this.xc=t&&t.te||void 0,this.F=void 0,this.vc=0,this.T=t&&t.supportsCrossDomainXhr||!1,this.I="",this.c=new Te(t&&t.concurrentRequestLimit),this.U=new xe,this.o=!t||void 0===t.backgroundChannelTest||t.backgroundChannelTest,(this.hb=t&&t.fastHandshake||!1)&&!this.o&&(this.o=!0),t&&t.forceLongPolling&&(this.eb=!1)}function Ve(){}function Be(){if(j&&!(10<=Number(X)))throw Error("Environmental error: no available transport.")}function Ue(t,e){Et.call(this),this.a=new Le(e),this.g=t,this.o=e&&e.testUrl?e.testUrl:function(t){for(var e=arguments[0],n=1;n<arguments.length;n++){var r,i=arguments[n];0==i.lastIndexOf("/",0)?e=i:((r=""==e)||(r=0<=(r=e.length-1)&&e.indexOf("/",r)==r),e+=r?i:"/"+i)}return e}(this.g,"test"),this.b=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.a.cd(t),t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.tb&&(t?t["X-WebChannel-Client-Profile"]=e.tb:t={"X-WebChannel-Client-Profile":e.tb}),this.a.Pd(t),(t=e&&e.httpHeadersOverwriteParam)&&!x(t)&&this.a.Nd(t),this.l=e&&e.supportsCrossDomainXhr||!1,this.h=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!x(e)&&(this.a.Od(e),null!==(t=this.b)&&e in t&&(e in(t=this.b)&&delete t[e])),this.f=new Ge(this)}function je(t){Jt.call(this);var e=t.__sm__;if(e){t:{for(var n in e){t=n;break t}t=void 0}(this.f=t)?(t=this.f,this.data=null!==e&&t in e?e[t]:void 0):this.data=e}else this.data=t}function qe(){Zt.call(this),this.status=1}function Ge(t){this.a=t}(r=Pe.prototype).Sd=function(t){this.I=t},r.xa=function(t,e,n,r){if(this.a)throw Error("[goog.net.XhrIo] Object is active with another request="+this.C+"; newUri="+t);e=e?e.toUpperCase():"GET",this.C=t,this.f="",this.h=0,this.A=!1,this.b=!0,this.a=this.Ec(),this.v=this.l?this.l.c():Xt.c(),this.a.onreadystatechange=v(this.ac,this),this.L&&"onprogress"in this.a&&(this.a.onprogress=v(function(t){this.Zb(t,!0)},this),this.a.upload&&(this.a.upload.onprogress=v(this.Zb,this)));try{this.B=!0,this.a.open(e,String(t),!0),this.B=!1}catch(o){return void this.Ab(o)}t=n||"";var i=this.headers.Pb();r&&oe(r,function(t,e){i.set(e,t)}),r=function(t){t:{for(var e=Oe,n=t.length,r=s(t)?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t)){e=i;break t}e=-1}return 0>e?null:s(t)?t.charAt(e):t[e]}(i.O()),n=a.FormData&&t instanceof a.FormData,!(0<=S(Re,e))||r||n||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach(function(t,e){this.a.setRequestHeader(e,t)},this),this.J&&(this.a.responseType=this.J),"withCredentials"in this.a&&this.a.withCredentials!==this.I&&(this.a.withCredentials=this.I);try{this.sb(),0<this.u&&((this.H=function(t){return j&&J(9)&&"number"==typeof t.timeout&&void 0!==t.ontimeout}(this.a))?(this.a.timeout=this.u,this.a.ontimeout=v(this.Nb,this)):this.s=Ot(this.Nb,this.u,this)),this.o=!0,this.a.send(t),this.o=!1}catch(o){this.Ab(o)}},r.Ec=function(){return this.l?this.l.b():Xt.b()},r.Nb=function(){"undefined"!=typeof o&&this.a&&(this.f="Timed out after "+this.u+"ms, aborting",this.h=8,this.dispatchEvent("timeout"),this.abort(8))},r.Ab=function(t){this.b=!1,this.a&&(this.g=!0,this.a.abort(),this.g=!1),this.f=t,this.h=5,this.xb(),this.qa()},r.xb=function(){this.A||(this.A=!0,this.dispatchEvent("complete"),this.dispatchEvent("error"))},r.abort=function(t){this.a&&this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1,this.h=t||7,this.dispatchEvent("complete"),this.dispatchEvent("abort"),this.qa())},r.G=function(){this.a&&(this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1),this.qa(!0)),Pe.S.G.call(this)},r.ac=function(){this.i||(this.B||this.o||this.g?this.$b():this.Bd())},r.Bd=function(){this.$b()},r.$b=function(){if(this.b&&"undefined"!=typeof o&&(!this.v[1]||4!=this.W()||2!=this.aa()))if(this.o&&4==this.W())Ot(this.ac,0,this);else if(this.dispatchEvent("readystatechange"),this.td()){this.b=!1;try{this.vd()?(this.dispatchEvent("complete"),this.dispatchEvent("success")):(this.h=6,this.f=this.Fb()+" ["+this.aa()+"]",this.xb())}finally{this.qa()}}},r.Zb=function(t,e){this.dispatchEvent(Me(t,"progress")),this.dispatchEvent(Me(t,e?"downloadprogress":"uploadprogress"))},r.qa=function(t){if(this.a){this.sb();var e=this.a,n=this.v[0]?c:null;this.v=this.a=null,t||this.dispatchEvent("ready");try{e.onreadystatechange=n}catch(r){}}},r.sb=function(){this.a&&this.H&&(this.a.ontimeout=null),this.s&&(a.clearTimeout(this.s),this.s=null)},r.td=function(){return 4==this.W()},r.vd=function(){var t=this.aa();t:switch(t){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break t;default:e=!1}return e||0===t&&!this.ud()},r.ud=function(){var t=String(this.C).match(ue)[1]||null;return!t&&a.self&&a.self.location&&(t=(t=a.self.location.protocol).substr(0,t.length-1)),Ne.test(t?t.toLowerCase():"")},r.W=function(){return this.a?this.a.readyState:0},r.aa=function(){try{return 2<this.W()?this.a.status:-1}catch(t){return-1}},r.Fb=function(){try{return 2<this.W()?this.a.statusText:""}catch(t){return""}},r.va=function(){try{return this.a?this.a.responseText:""}catch(t){return""}},r.Nc=function(t){if(this.a){var e=this.a.responseText;return t&&0==e.indexOf(t)&&(e=e.substring(t.length)),Ae(e)}},r.ga=function(t){return this.a?this.a.getResponseHeader(t):null},r.Db=function(){return this.h},r.dd=function(){return s(this.f)?this.f:String(this.f)},(r=Le.prototype).qb=8,r.w=1,r.bd=function(t,e,n){Gt(0),this.Ea=e,this.ca=n||{},this.o&&(this.H.b=[],this.H.a=!1),this.Dc(t)},r.Qa=function(){if(this.lb(),3==this.w){var t=this.L++,e=this.C.N();e.m("SID",this.I),e.m("RID",t),e.m("TYPE","terminate"),this.ea(e),new ee(this,t,void 0).Ld(e)}this.Yb()},r.Dc=function(t){this.v=new be(this),null===this.f&&this.v.Wc(this.h);var e=t;this.f&&this.h&&(e=Fe(t,this.f,this.h)),this.v.Vc(e)},r.Cc=function(){this.C=this.Cb(this.Ea),this.Ma()},r.lb=function(){this.v&&(this.v.abort(),this.v=null),this.a&&(this.a.cancel(),this.a=null),this.l&&(a.clearTimeout(this.l),this.l=null),this.ra(),this.c.cancel(),this.i&&(a.clearTimeout(this.i),this.i=null)},r.cd=function(t){this.h=t},r.Pd=function(t){this.J=t},r.Nd=function(t){this.f=t},r.Od=function(t){this.j=t},r.kc=function(t){this.Fa=t},r.Rd=function(){this.T=!0},r.jc=function(t){this.b=t},r.sd=function(){return!this.Ga},r.Xa=function(t){this.g.push(new Se(this.zc++,t)),3==this.w&&this.Ma()},r.Jc=function(){return this.uc?0:this.pc},r.Tb=function(){return 0==this.w},r.Ma=function(){this.c.Ub()||this.i||(this.i=zt(v(this.dc,this),0),this.A=0)},r.xd=function(t){return!(this.c.Mc()>=this.c.f-(this.i?1:0))&&(this.i?(this.g=t.j.concat(this.g),!0):!(1==this.w||2==this.w||this.A>=this.Jc())&&(this.i=zt(v(this.dc,this,t),this.Eb(this.A)),this.A++,!0))},r.dc=function(t){this.i=null,this.Xd(t)},r.Xd=function(t){1==this.w?t||(this.Fd(),this.w=2):3==this.w&&(t?this.Wb(t):0==this.g.length||this.c.Ub()||this.Wb())},r.Fd=function(){this.L=Math.floor(1e5*Math.random());var t=this.L++,e=new ee(this,t,void 0),n=this.h;this.J&&(n?L(n=M(n),this.J):n=this.J),null===this.f&&e.ha(n);var r=this.wb(e),i=this.C.N();i.m("RID",t),0<this.gb&&i.m("CVER",this.gb),this.o&&this.j&&i.m("X-HTTP-Session-Id",this.j),this.ea(i),this.f&&n&&Fe(i,this.f,n),this.c.Ha(e),this.hb?(i.m("$req",r),i.m("SID","null"),e.Md(),e.cb(i,null)):e.cb(i,r)},r.Wb=function(t){var e;e=t?t.da:this.L++;var n=this.C.N();n.m("SID",this.I),n.m("RID",e),n.m("AID",this.K),this.ea(n),this.f&&this.h&&Fe(n,this.f,this.h),e=new ee(this,e,this.A+1),null===this.f&&e.ha(this.h),t&&this.Jd(t),t=this.wb(e),e.setTimeout(Math.round(.5*this.ib)+Math.round(.5*this.ib*Math.random())),this.c.Ha(e),e.cb(n,t)},r.ea=function(t){this.b&&oe({},function(e,n){t.m(n,e)})},r.wb=function(t){var e=Math.min(this.g.length,1e3),n=this.b?v(this.b.yc,this.b,this):null;return n=this.U.c(this.g,e,n),t.Qd(this.g.splice(0,e)),n},r.Jd=function(t){this.g=t.j.concat(this.g)},r.zb=function(){if(!this.a&&!this.l){this.Y=1;var t=this.cc;kt||function(){var t=a.Promise.resolve(void 0);kt=function(){t.then(Nt)}}(),Pt||(kt(),Pt=!0),Dt.add(t,this),this.u=0}},r.Ua=function(){return!(this.a||this.l||3<=this.u)&&(this.Y++,this.l=zt(v(this.cc,this),this.Eb(this.u)),this.u++,!0)},r.cc=function(){this.l=null,this.Vd()},r.Vd=function(){this.a=new ee(this,"rpc",this.Y),null===this.f&&this.a.ha(this.h),this.a.Xc(this.vc);var t=this.fb.N();t.m("RID","rpc"),t.m("SID",this.I),t.m("CI",this.Ga?"0":"1"),t.m("AID",this.K),this.ea(t),t.m("TYPE","xmlhttp"),this.f&&this.h&&Fe(t,this.f,this.h),this.F&&this.a.setTimeout(this.F),this.a.bb(t,!0,this.da)},r.na=function(t,e){var n=t.l;n&&this.c.kb(n),this.Ga=this.eb&&e,this.B=t.c,this.Cc()},r.ab=function(t){this.B=t.c,this.X(2)},r.bc=function(t,e){if(0!=this.w&&(this.a==t||this.c.Ta(t)))if(this.B=t.o,!t.s&&this.c.Ta(t)&&3==this.w){try{var n=this.U.a(e)}catch(r){n=null}h(n)&&3==n.length?this.ld(n,t):this.X(11)}else(t.s||this.a==t)&&this.ra(),x(e)||(n=this.U.a(e),this.Ad(n,t))},r.ld=function(t,e){0==t[0]?this.kd(e):(this.jb=t[1],0<this.jb-this.K&&this.Ud(t[2])&&!this.s&&(this.s=zt(v(this.yd,this),6e3)))},r.kd=function(t){if(!this.l){if(this.a){if(!(this.a.u+3e3<t.u))return;this.ra(),this.a.cancel(),this.a=null}this.Ua(),Gt(18)}},r.Ud=function(t){return 37500>t&&!this.sd()&&0==this.u},r.Oa=function(t){return this.sc?this.b?this.b.$c(t):t:null},r.yd=function(){null!=this.s&&(this.s=null,this.a.cancel(),this.a=null,this.Ua(),Gt(19))},r.ra=function(){null!=this.s&&(a.clearTimeout(this.s),this.s=null)},r.Va=function(t){var e=null;if(this.a==t){this.ra(),this.a=null;var n=2}else{if(!this.c.Ta(t))return;e=t.j,this.c.gc(t),n=1}if(this.B=t.o,0!=this.w)if(t.b)1==n?(n=_()-t.u,Bt.dispatchEvent(new Wt(Bt,t.i?t.i.length:0,n,this.A)),this.Ma()):this.zb();else{var r=t.c;if(3==r||0==r&&0<this.B||!(1==n&&this.xd(t)||2==n&&this.Ua()))switch(e&&0<e.length&&this.c.wc(e),r){case 1:this.X(5);break;case 4:this.X(10);break;case 3:this.X(6);break;default:this.X(2)}}},r.Eb=function(t){var e=this.tc+Math.floor(Math.random()*this.Fc);return this.Pa()||(e*=2),e*t},r.ad=function(t){if(this.o&&(t=t.a)){var e=t.ga("X-Client-Wire-Protocol");e&&this.c.kb(e),this.j&&(t=t.ga("X-HTTP-Session-Id"))&&(this.kc(t),this.C.m(this.j,t))}},r.Ad=function(t,e){for(var n=this.b&&this.b.Ia?[]:null,r=0;r<t.length;r++){var i=t[r];if(this.K=i[0],i=i[1],2==this.w)if("c"==i[0]){this.I=i[1],this.da=this.Oa(i[2]);var o=i[3];null!=o&&(this.qb=o),null!=(i=i[5])&&"number"==typeof i&&0<i&&(this.F=1.5*i),this.ad(e),this.w=3,this.b&&this.b.pb(),this.Wd(e)}else"stop"!=i[0]&&"close"!=i[0]||this.X(7);else 3==this.w&&("stop"==i[0]||"close"==i[0]?(n&&0!=n.length&&(this.b.Ia(this,n),n.length=0),"stop"==i[0]?this.X(7):this.Qa()):"noop"!=i[0]&&(n?n.push(i):this.b&&this.b.ob(i)),this.u=0)}n&&0!=n.length&&this.b.Ia(this,n)},r.Wd=function(t){this.fb=this.Bb(this.da,this.Ea),t.s?(this.c.gc(t),t.Kd(this.F),this.a=t):this.zb()},r.X=function(t){if(2==t){var e=null;this.b&&(e=null);var n=v(this.Zd,this);e||(e=new ce("//www.google.com/images/cleardot.gif"),a.location&&"http"==a.location.protocol||e.ma("https"),e.za()),function(t,e){var n=new Vt;if(a.Image){var r=new Image;r.onload=b(Ie,n,r,"TestLoadImage: loaded",!0,e),r.onerror=b(Ie,n,r,"TestLoadImage: error",!1,e),r.onabort=b(Ie,n,r,"TestLoadImage: abort",!1,e),r.ontimeout=b(Ie,n,r,"TestLoadImage: timeout",!1,e),a.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=t}else e(!1)}(e.toString(),n)}else Gt(2);this.zd(t)},r.Zd=function(t){Gt(t?2:1)},r.zd=function(t){this.w=0,this.b&&this.b.nb(t),this.Yb(),this.lb()},r.Yb=function(){this.w=0,this.B=-1,this.b&&(0==this.c.Xb().length&&0==this.g.length||(this.c.Bc(),k(this.g),this.g.length=0),this.b.mb())},r.Cb=function(t){return this.ub(null,t)},r.Bb=function(t,e){return this.ub(this.Da()?t:null,e)},r.ub=function(t,e){var n=function(t){return t instanceof ce?t.N():new ce(t,void 0)}(e);if(""!=n.c)t&&n.ka(t+"."+n.c),n.la(n.h);else{var r,i=a.location;r=t?t+"."+i.hostname:i.hostname,n=function(t,e,n,r){var i=new ce(null,void 0);return t&&i.ma(t),e&&i.ka(e),n&&i.la(n),r&&i.Ba(r),i}(i.protocol,r,+i.port,e)}return this.ca&&O(this.ca,function(t,e){n.m(e,t)}),t=this.j,e=this.Fa,t&&e&&n.m(t,e),n.m("VER",this.qb),this.ea(n),n},r.sa=function(t){if(t&&!this.T)throw Error("Can't create secondary domain capable XhrIo object.");return(t=new Pe(this.xc)).Sd(this.T),t},r.Pa=function(){return!!this.b&&!0},r.Da=function(){return this.T},(r=Ve.prototype).Ia=null,r.pb=function(){},r.ob=function(){},r.nb=function(){},r.mb=function(){},r.yc=function(){},r.$c=function(t){return t},Be.prototype.a=function(t,e){return new Ue(t,e)},w(Ue,Et),(r=Ue.prototype).addEventListener=function(t,e,n,r){Ue.S.addEventListener.call(this,t,e,n,r)},r.removeEventListener=function(t,e,n,r){Ue.S.removeEventListener.call(this,t,e,n,r)},r.Yc=function(){this.a.jc(this.f),this.l&&this.a.Rd(),this.a.bd(this.o,this.g,this.b||void 0)},r.close=function(){this.a.Qa()},r.Zc=function(t){if(s(t)){var e={};e.__data__=t,this.a.Xa(e)}else this.h?((e={}).__data__=St(t),this.a.Xa(e)):this.a.Xa(t)},r.G=function(){this.a.jc(null),delete this.f,this.a.Qa(),delete this.a,Ue.S.G.call(this)},w(je,Jt),w(qe,Zt),w(Ge,Ve),Ge.prototype.pb=function(){this.a.dispatchEvent("a")},Ge.prototype.ob=function(t){this.a.dispatchEvent(new je(t))},Ge.prototype.nb=function(t){this.a.dispatchEvent(new qe(t))},Ge.prototype.mb=function(){this.a.dispatchEvent("b")};var We=b(function(t,e){function n(){}n.prototype=t.prototype;var r=new n;return t.apply(r,Array.prototype.slice.call(arguments,1)),r},Be);Be.prototype.createWebChannel=Be.prototype.a,Ue.prototype.send=Ue.prototype.Zc,Ue.prototype.open=Ue.prototype.Yc,Ue.prototype.close=Ue.prototype.close,Ht.NO_ERROR=0,Ht.TIMEOUT=8,Ht.HTTP_ERROR=6,Kt.COMPLETE="complete",Yt.EventType=$t,$t.OPEN="a",$t.CLOSE="b",$t.ERROR="c",$t.MESSAGE="d",Et.prototype.listen=Et.prototype.Lb,Pe.prototype.listenOnce=Pe.prototype.Mb,Pe.prototype.getLastError=Pe.prototype.dd,Pe.prototype.getLastErrorCode=Pe.prototype.Db,Pe.prototype.getStatus=Pe.prototype.aa,Pe.prototype.getStatusText=Pe.prototype.Fb,Pe.prototype.getResponseJson=Pe.prototype.Nc,Pe.prototype.getResponseText=Pe.prototype.va,Pe.prototype.send=Pe.prototype.xa;var ze={createWebChannelTransport:We,ErrorCode:Ht,EventType:Kt,WebChannel:Yt,XhrIo:Pe},He=ze.createWebChannelTransport,Ke=ze.ErrorCode,Qe=ze.EventType,Ye=ze.WebChannel,Xe=ze.XhrIo;e.default=ze}.call(this,n(18))},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r,i=(r=n(2))&&"object"===typeof r&&"default"in r?r.default:r,o=n(0),a={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},s=function(t){function e(n,r,i){var o=t.call(this,r)||this;return Object.setPrototypeOf(o,e.prototype),o.code=n,o.details=i,o}return o.__extends(e,t),e}(Error);var u=function(){function t(t){this.app=t}return t.prototype.getAuthToken=function(){return o.__awaiter(this,void 0,void 0,function(){var t;return o.__generator(this,function(e){switch(e.label){case 0:return e.trys.push([0,2,,3]),[4,this.app.INTERNAL.getToken()];case 1:return(t=e.sent())?[2,t.accessToken]:[2,void 0];case 2:return e.sent(),[2,void 0];case 3:return[2]}})})},t.prototype.getInstanceIdToken=function(){return o.__awaiter(this,void 0,void 0,function(){var t;return o.__generator(this,function(e){switch(e.label){case 0:return e.trys.push([0,2,,3]),this.app.messaging?[4,this.app.messaging().getToken()]:[2,void 0];case 1:return(t=e.sent())?[2,t]:[2,void 0];case 2:return e.sent(),[2,void 0];case 3:return[2]}})})},t.prototype.getContext=function(){return o.__awaiter(this,void 0,void 0,function(){var t,e;return o.__generator(this,function(n){switch(n.label){case 0:return[4,this.getAuthToken()];case 1:return t=n.sent(),[4,this.getInstanceIdToken()];case 2:return e=n.sent(),[2,{authToken:t,instanceIdToken:e}]}})})},t}();function c(t,e){var n={};for(var r in t)t.hasOwnProperty(r)&&(n[r]=e(t[r]));return n}var l=function(){function t(){}return t.prototype.encode=function(t){var e=this;if(null===t||void 0===t)return null;if(t instanceof Number&&(t=t.valueOf()),"number"===typeof t&&isFinite(t))return t;if(!0===t||!1===t)return t;if("[object String]"===Object.prototype.toString.call(t))return t;if(Array.isArray(t))return t.map(function(t){return e.encode(t)});if("function"===typeof t||"object"===typeof t)return c(t,function(t){return e.encode(t)});throw new Error("Data cannot be encoded in JSON: "+t)},t.prototype.decode=function(t){var e=this;if(null===t)return t;if(t["@type"])switch(t["@type"]){case"type.googleapis.com/google.protobuf.Int64Value":case"type.googleapis.com/google.protobuf.UInt64Value":var n=parseFloat(t.value);if(isNaN(n))throw new Error("Data cannot be decoded from JSON: "+t);return n;default:throw new Error("Data cannot be decoded from JSON: "+t)}return Array.isArray(t)?t.map(function(t){return e.decode(t)}):"function"===typeof t||"object"===typeof t?c(t,function(t){return e.decode(t)}):t},t}();var h=function(){function t(t,e){var n=this;void 0===e&&(e="us-central1"),this.app_=t,this.region_=e,this.serializer=new l,this.emulatorOrigin=null,this.INTERNAL={delete:function(){return n.deleteService()}},this.contextProvider=new u(t),this.cancelAllRequests=new Promise(function(t){n.deleteService=function(){return t()}})}return Object.defineProperty(t.prototype,"app",{get:function(){return this.app_},enumerable:!0,configurable:!0}),t.prototype._url=function(t){var e=this.app_.options.projectId,n=this.region_;return null!==this.emulatorOrigin?this.emulatorOrigin+"/"+e+"/"+n+"/"+t:"https://"+n+"-"+e+".cloudfunctions.net/"+t},t.prototype.useFunctionsEmulator=function(t){this.emulatorOrigin=t},t.prototype.httpsCallable=function(t,e){var n=this;return function(r){return n.call(t,r,e||{})}},t.prototype.postJSON=function(t,e,n){return o.__awaiter(this,void 0,void 0,function(){var r,i;return o.__generator(this,function(o){switch(o.label){case 0:n.append("Content-Type","application/json"),o.label=1;case 1:return o.trys.push([1,3,,4]),[4,fetch(t,{method:"POST",body:JSON.stringify(e),headers:n})];case 2:return r=o.sent(),[3,4];case 3:return o.sent(),[2,{status:0,json:null}];case 4:i=null,o.label=5;case 5:return o.trys.push([5,7,,8]),[4,r.json()];case 6:return i=o.sent(),[3,8];case 7:return o.sent(),[3,8];case 8:return[2,{status:r.status,json:i}]}})})},t.prototype.call=function(t,e,n){return o.__awaiter(this,void 0,void 0,function(){var r,i,u,c,l,h,f,p;return o.__generator(this,function(o){switch(o.label){case 0:return r=this._url(t),e=this.serializer.encode(e),i={data:e},u=new Headers,[4,this.contextProvider.getContext()];case 1:return(c=o.sent()).authToken&&u.append("Authorization","Bearer "+c.authToken),c.instanceIdToken&&u.append("Firebase-Instance-ID-Token",c.instanceIdToken),l=n.timeout||7e4,[4,Promise.race([this.postJSON(r,i,u),(d=l,new Promise(function(t,e){setTimeout(function(){e(new s("deadline-exceeded","deadline-exceeded"))},d)})),this.cancelAllRequests])];case 2:if(!(h=o.sent()))throw new s("cancelled","Firebase Functions instance was deleted.");if(f=function(t,e,n){var r=function(t){if(t>=200&&t<300)return"ok";switch(t){case 0:return"internal";case 400:return"invalid-argument";case 401:return"unauthenticated";case 403:return"permission-denied";case 404:return"not-found";case 409:return"aborted";case 429:return"resource-exhausted";case 499:return"cancelled";case 500:return"internal";case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline-exceeded"}return"unknown"}(t),i=r,o=void 0;try{var u=e.error;if(u){var c=u.status;if("string"===typeof c){if(!a[c])return new s("internal","internal");r=a[c]}i=c;var l=u.message;"string"===typeof l&&(i=l),void 0!==(o=u.details)&&(o=n.decode(o))}}catch(h){}return"ok"===r?null:new s(r,i,o)}(h.status,h.json,this.serializer))throw f;if(!h.json)throw new s("internal","Response is not valid JSON object.");if("undefined"===typeof(p=h.json.data)&&(p=h.json.result),"undefined"===typeof p)throw new s("internal","Response is missing data field.");return[2,{data:this.serializer.decode(p)}]}var d})})},t}(),f="functions";function p(t,e,n){return new h(t,n)}function d(t){var e={Functions:h};t.INTERNAL.registerService(f,p,e,void 0,!0)}d(i),e.registerFunctions=d},function(t,e,n){"use strict";n.r(e),n.d(e,"isSupported",function(){return R}),n.d(e,"registerMessaging",function(){return N});var r,i,o,a=n(2),s=n.n(a),u=n(0),c=n(20),l=((r={})["only-available-in-window"]="This method is available in a Window context.",r["only-available-in-sw"]="This method is available in a service worker context.",r["should-be-overriden"]="This method should be overriden by extended classes.",r["bad-sender-id"]="Please ensure that 'messagingSenderId' is set correctly in the options passed into firebase.initializeApp().",r["permission-default"]="The required permissions were not granted and dismissed instead.",r["permission-blocked"]="The required permissions were not granted and blocked instead.",r["unsupported-browser"]="This browser doesn't support the API's required to use the firebase SDK.",r["notifications-blocked"]="Notifications have been blocked.",r["failed-serviceworker-registration"]="We are unable to register the default service worker. {$browserErrorMessage}",r["sw-registration-expected"]="A service worker registration was the expected input.",r["get-subscription-failed"]="There was an error when trying to get any existing Push Subscriptions.",r["invalid-saved-token"]="Unable to access details of the saved token.",r["sw-reg-redundant"]="The service worker being used for push was made redundant.",r["token-subscribe-failed"]="A problem occured while subscribing the user to FCM: {$message}",r["token-subscribe-no-token"]="FCM returned no token when subscribing the user to push.",r["token-subscribe-no-push-set"]="FCM returned an invalid response when getting an FCM token.",r["token-unsubscribe-failed"]="A problem occured while unsubscribing the user from FCM: {$message}",r["token-update-failed"]="A problem occured while updating the user from FCM: {$message}",r["token-update-no-token"]="FCM returned no token when updating the user to push.",r["use-sw-before-get-token"]="The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.",r["invalid-delete-token"]="You must pass a valid token into deleteToken(), i.e. the token from getToken().",r["delete-token-not-found"]="The deletion attempt for token could not be performed as the token was not found.",r["delete-scope-not-found"]="The deletion attempt for service worker scope could not be performed as the scope was not found.",r["bg-handler-function-expected"]="The input to setBackgroundMessageHandler() must be a function.",r["no-window-client-to-msg"]="An attempt was made to message a non-existant window client.",r["unable-to-resubscribe"]="There was an error while re-subscribing the FCM token for push messaging. Will have to resubscribe the user on next visit. {$message}",r["no-fcm-token-for-resubscribe"]="Could not find an FCM token and as a result, unable to resubscribe. Will have to resubscribe the user on next visit.",r["failed-to-delete-token"]="Unable to delete the currently saved token.",r["no-sw-in-reg"]="Even though the service worker registration was successful, there was a problem accessing the service worker itself.",r["incorrect-gcm-sender-id"]="Please change your web app manifest's 'gcm_sender_id' value to '103953800507' to use Firebase messaging.",r["bad-scope"]="The service worker scope must be a string with at least one character.",r["bad-vapid-key"]="The public VAPID key is not a Uint8Array with 65 bytes.",r["bad-subscription"]="The subscription must be a valid PushSubscription.",r["bad-token"]="The FCM Token used for storage / lookup was not a valid token string.",r["bad-push-set"]="The FCM push set used for storage / lookup was not not a valid push set string.",r["failed-delete-vapid-key"]="The VAPID key could not be deleted.",r["invalid-public-vapid-key"]="The public VAPID key must be a string.",r["use-public-key-before-get-token"]="The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used.",r["public-vapid-key-decryption-failed"]="The public VAPID key did not equal 65 bytes when decrypted.",r),h=new c.ErrorFactory("messaging","Messaging",l),f=new Uint8Array([4,51,148,247,223,161,235,177,220,3,162,94,21,113,219,72,211,46,237,237,178,52,219,183,71,58,12,143,196,204,225,111,60,140,132,223,171,182,102,62,242,12,212,139,254,227,249,118,47,20,28,99,8,106,111,45,177,26,149,176,206,55,192,156,110]),p="https://fcm.googleapis.com";function d(t,e){if(null==t||null==e)return!1;if(t===e)return!0;if(t.byteLength!==e.byteLength)return!1;for(var n=new DataView(t),r=new DataView(e),i=0;i<t.byteLength;i++)if(n.getUint8(i)!==r.getUint8(i))return!1;return!0}function m(t){return function(t){var e=new Uint8Array(t);return btoa(String.fromCharCode.apply(String,Object(u.__spread)(e)))}(t).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}!function(t){t.TYPE_OF_MSG="firebase-messaging-msg-type",t.DATA="firebase-messaging-msg-data"}(i||(i={})),function(t){t.PUSH_MSG_RECEIVED="push-msg-received",t.NOTIFICATION_CLICKED="notification-clicked"}(o||(o={}));var y=function(){function t(){}return t.prototype.getToken=function(t,e,n){return Object(u.__awaiter)(this,void 0,void 0,function(){var r,i,o,a,s,c,l,y;return Object(u.__generator)(this,function(u){switch(u.label){case 0:r=m(e.getKey("p256dh")),i=m(e.getKey("auth")),o="authorized_entity="+t+"&endpoint="+e.endpoint+"&encryption_key="+r+"&encryption_auth="+i,d(n.buffer,f.buffer)||(a=m(n),o+="&application_pub_key="+a),(s=new Headers).append("Content-Type","application/x-www-form-urlencoded"),c={method:"POST",headers:s,body:o},u.label=1;case 1:return u.trys.push([1,4,,5]),[4,fetch(p+"/fcm/connect/subscribe",c)];case 2:return[4,u.sent().json()];case 3:return l=u.sent(),[3,5];case 4:throw u.sent(),h.create("token-subscribe-failed");case 5:if(l.error)throw y=l.error.message,h.create("token-subscribe-failed",{message:y});if(!l.token)throw h.create("token-subscribe-no-token");if(!l.pushSet)throw h.create("token-subscribe-no-push-set");return[2,{token:l.token,pushSet:l.pushSet}]}})})},t.prototype.updateToken=function(t,e,n,r,i){return Object(u.__awaiter)(this,void 0,void 0,function(){var o,a,s,c,l,y,g,v;return Object(u.__generator)(this,function(u){switch(u.label){case 0:o=m(r.getKey("p256dh")),a=m(r.getKey("auth")),s="push_set="+n+"&token="+e+"&authorized_entity="+t+"&endpoint="+r.endpoint+"&encryption_key="+o+"&encryption_auth="+a,d(i.buffer,f.buffer)||(c=m(i),s+="&application_pub_key="+c),(l=new Headers).append("Content-Type","application/x-www-form-urlencoded"),y={method:"POST",headers:l,body:s},u.label=1;case 1:return u.trys.push([1,4,,5]),[4,fetch(p+"/fcm/connect/subscribe",y)];case 2:return[4,u.sent().json()];case 3:return g=u.sent(),[3,5];case 4:throw u.sent(),h.create("token-update-failed");case 5:if(g.error)throw v=g.error.message,h.create("token-update-failed",{message:v});if(!g.token)throw h.create("token-update-no-token");return[2,g.token]}})})},t.prototype.deleteToken=function(t,e,n){return Object(u.__awaiter)(this,void 0,void 0,function(){var r,i,o,a,s;return Object(u.__generator)(this,function(u){switch(u.label){case 0:r="authorized_entity="+t+"&token="+e+"&pushSet="+n,(i=new Headers).append("Content-Type","application/x-www-form-urlencoded"),o={method:"POST",headers:i,body:r},u.label=1;case 1:return u.trys.push([1,4,,5]),[4,fetch(p+"/fcm/connect/unsubscribe",o)];case 2:return[4,u.sent().json()];case 3:if((a=u.sent()).error)throw s=a.error.message,h.create("token-unsubscribe-failed",{message:s});return[3,5];case 4:throw u.sent(),h.create("token-unsubscribe-failed");case 5:return[2]}})})},t}();function g(t){for(var e=(t+"=".repeat((4-t.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),n=atob(e),r=new Uint8Array(n.length),i=0;i<n.length;++i)r[i]=n.charCodeAt(i);return r}var v="undefined",b="fcm_token_object_Store";function _(){var t=indexedDB.open(v);t.onerror=function(t){},t.onsuccess=function(e){!function(t){if(t.objectStoreNames.contains(b)){var e=t.transaction(b).objectStore(b),n=new y,r=e.openCursor();r.onerror=function(t){console.warn("Unable to cleanup old IDB.",t)},r.onsuccess=function(){var e=r.result;if(e){var i=e.value;n.deleteToken(i.fcmSenderId,i.fcmToken,i.fcmPushSet),e.continue()}else t.close(),indexedDB.deleteDatabase(v)}}}(t.result)}}var w=function(){function t(){this.dbPromise=null}return t.prototype.get=function(t){return this.createTransaction(function(e){return e.get(t)})},t.prototype.getIndex=function(t,e){return this.createTransaction(function(n){return n.index(t).get(e)})},t.prototype.put=function(t){return this.createTransaction(function(e){return e.put(t)},"readwrite")},t.prototype.delete=function(t){return this.createTransaction(function(e){return e.delete(t)},"readwrite")},t.prototype.closeDatabase=function(){return Object(u.__awaiter)(this,void 0,void 0,function(){return Object(u.__generator)(this,function(t){switch(t.label){case 0:return this.dbPromise?[4,this.dbPromise]:[3,2];case 1:t.sent().close(),this.dbPromise=null,t.label=2;case 2:return[2]}})})},t.prototype.createTransaction=function(t,e){return void 0===e&&(e="readonly"),Object(u.__awaiter)(this,void 0,void 0,function(){var n,r,i,o;return Object(u.__generator)(this,function(a){switch(a.label){case 0:return[4,this.getDb()];case 1:return n=a.sent(),r=n.transaction(this.objectStoreName,e),i=r.objectStore(this.objectStoreName),[4,E(t(i))];case 2:return o=a.sent(),[2,new Promise(function(t,e){r.oncomplete=function(){t(o)},r.onerror=function(){e(r.error)}})]}})})},t.prototype.getDb=function(){var t=this;return this.dbPromise||(this.dbPromise=new Promise(function(e,n){var r=indexedDB.open(t.dbName,t.dbVersion);r.onsuccess=function(){e(r.result)},r.onerror=function(){t.dbPromise=null,n(r.error)},r.onupgradeneeded=function(e){return t.onDbUpgrade(r,e)}})),this.dbPromise},t}();function E(t){return new Promise(function(e,n){t.onsuccess=function(){e(t.result)},t.onerror=function(){n(t.error)}})}var S=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.dbName="fcm_token_details_db",e.dbVersion=3,e.objectStoreName="fcm_token_object_Store",e}return Object(u.__extends)(e,t),e.prototype.onDbUpgrade=function(t,e){var n=t.result;switch(e.oldVersion){case 0:(r=n.createObjectStore(this.objectStoreName,{keyPath:"swScope"})).createIndex("fcmSenderId","fcmSenderId",{unique:!1}),r.createIndex("fcmToken","fcmToken",{unique:!0});case 1:_();case 2:var r,i=(r=t.transaction.objectStore(this.objectStoreName)).openCursor();i.onsuccess=function(){var t=i.result;if(t){var e=t.value,n=Object(u.__assign)({},e);e.createTime||(n.createTime=Date.now()),"string"===typeof e.vapidKey&&(n.vapidKey=g(e.vapidKey)),"string"===typeof e.auth&&(n.auth=g(e.auth).buffer),"string"===typeof e.auth&&(n.p256dh=g(e.p256dh).buffer),t.update(n),t.continue()}}}},e.prototype.getTokenDetailsFromToken=function(t){return Object(u.__awaiter)(this,void 0,void 0,function(){return Object(u.__generator)(this,function(e){if(!t)throw h.create("bad-token");return T({fcmToken:t}),[2,this.getIndex("fcmToken",t)]})})},e.prototype.getTokenDetailsFromSWScope=function(t){return Object(u.__awaiter)(this,void 0,void 0,function(){return Object(u.__generator)(this,function(e){if(!t)throw h.create("bad-scope");return T({swScope:t}),[2,this.get(t)]})})},e.prototype.saveTokenDetails=function(t){return Object(u.__awaiter)(this,void 0,void 0,function(){return Object(u.__generator)(this,function(e){if(!t.swScope)throw h.create("bad-scope");if(!t.vapidKey)throw h.create("bad-vapid-key");if(!t.endpoint||!t.auth||!t.p256dh)throw h.create("bad-subscription");if(!t.fcmSenderId)throw h.create("bad-sender-id");if(!t.fcmToken)throw h.create("bad-token");if(!t.fcmPushSet)throw h.create("bad-push-set");return T(t),[2,this.put(t)]})})},e.prototype.deleteToken=function(t){return Object(u.__awaiter)(this,void 0,void 0,function(){var e;return Object(u.__generator)(this,function(n){switch(n.label){case 0:return"string"!==typeof t||0===t.length?[2,Promise.reject(h.create("invalid-delete-token"))]:[4,this.getTokenDetailsFromToken(t)];case 1:if(!(e=n.sent()))throw h.create("delete-token-not-found");return[4,this.delete(e.swScope)];case 2:return n.sent(),[2,e]}})})},e}(w);function T(t){if(t.fcmToken&&("string"!==typeof t.fcmToken||0===t.fcmToken.length))throw h.create("bad-token");if(t.swScope&&("string"!==typeof t.swScope||0===t.swScope.length))throw h.create("bad-scope");if(t.vapidKey&&(!(t.vapidKey instanceof Uint8Array)||65!==t.vapidKey.length))throw h.create("bad-vapid-key");if(t.endpoint&&("string"!==typeof t.endpoint||0===t.endpoint.length))throw h.create("bad-subscription");if(t.auth&&!(t.auth instanceof ArrayBuffer))throw h.create("bad-subscription");if(t.p256dh&&!(t.p256dh instanceof ArrayBuffer))throw h.create("bad-subscription");if(t.fcmSenderId&&("string"!==typeof t.fcmSenderId||0===t.fcmSenderId.length))throw h.create("bad-sender-id");if(t.fcmPushSet&&("string"!==typeof t.fcmPushSet||0===t.fcmPushSet.length))throw h.create("bad-push-set")}var C=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.dbName="fcm_vapid_details_db",e.dbVersion=1,e.objectStoreName="fcm_vapid_object_Store",e}return Object(u.__extends)(e,t),e.prototype.onDbUpgrade=function(t){t.result.createObjectStore(this.objectStoreName,{keyPath:"swScope"})},e.prototype.getVapidFromSWScope=function(t){return Object(u.__awaiter)(this,void 0,void 0,function(){var e;return Object(u.__generator)(this,function(n){switch(n.label){case 0:if("string"!==typeof t||0===t.length)throw h.create("bad-scope");return[4,this.get(t)];case 1:return[2,(e=n.sent())?e.vapidKey:void 0]}})})},e.prototype.saveVapidDetails=function(t,e){return Object(u.__awaiter)(this,void 0,void 0,function(){var n;return Object(u.__generator)(this,function(r){if("string"!==typeof t||0===t.length)throw h.create("bad-scope");if(null===e||65!==e.length)throw h.create("bad-vapid-key");return n={swScope:t,vapidKey:e},[2,this.put(n)]})})},e.prototype.deleteVapidDetails=function(t){return Object(u.__awaiter)(this,void 0,void 0,function(){var e;return Object(u.__generator)(this,function(n){switch(n.label){case 0:return[4,this.getVapidFromSWScope(t)];case 1:if(!(e=n.sent()))throw h.create("delete-scope-not-found");return[4,this.delete(t)];case 2:return n.sent(),[2,e]}})})},e}(w),k="messagingSenderId",x=function(){function t(t){var e=this;if(!t.options[k]||"string"!==typeof t.options[k])throw h.create("bad-sender-id");this.messagingSenderId=t.options[k],this.tokenDetailsModel=new S,this.vapidDetailsModel=new C,this.iidModel=new y,this.app=t,this.INTERNAL={delete:function(){return e.delete()}}}return t.prototype.getToken=function(){return Object(u.__awaiter)(this,void 0,void 0,function(){var t,e,n,r,i;return Object(u.__generator)(this,function(o){switch(o.label){case 0:if("denied"===(t=this.getNotificationPermission_()))throw h.create("notifications-blocked");return"granted"!==t?[2,null]:[4,this.getSWRegistration_()];case 1:return e=o.sent(),[4,this.getPublicVapidKey_()];case 2:return n=o.sent(),[4,this.getPushSubscription(e,n)];case 3:return r=o.sent(),[4,this.tokenDetailsModel.getTokenDetailsFromSWScope(e.scope)];case 4:return(i=o.sent())?[2,this.manageExistingToken(e,r,n,i)]:[2,this.getNewToken(e,r,n)]}})})},t.prototype.manageExistingToken=function(t,e,n,r){return Object(u.__awaiter)(this,void 0,void 0,function(){return Object(u.__generator)(this,function(i){switch(i.label){case 0:return function(t,e,n){if(!n.vapidKey||!d(e.buffer,n.vapidKey.buffer))return!1;var r=t.endpoint===n.endpoint,i=d(t.getKey("auth"),n.auth),o=d(t.getKey("p256dh"),n.p256dh);return r&&i&&o}(e,n,r)?Date.now()<r.createTime+6048e5?[2,r.fcmToken]:[2,this.updateToken(t,e,n,r)]:[4,this.deleteTokenFromDB(r.fcmToken)];case 1:return i.sent(),[2,this.getNewToken(t,e,n)]}})})},t.prototype.updateToken=function(t,e,n,r){return Object(u.__awaiter)(this,void 0,void 0,function(){var i,o,a;return Object(u.__generator)(this,function(s){switch(s.label){case 0:return s.trys.push([0,4,,6]),[4,this.iidModel.updateToken(this.messagingSenderId,r.fcmToken,r.fcmPushSet,e,n)];case 1:return i=s.sent(),o={swScope:t.scope,vapidKey:n,fcmSenderId:this.messagingSenderId,fcmToken:i,fcmPushSet:r.fcmPushSet,createTime:Date.now(),endpoint:e.endpoint,auth:e.getKey("auth"),p256dh:e.getKey("p256dh")},[4,this.tokenDetailsModel.saveTokenDetails(o)];case 2:return s.sent(),[4,this.vapidDetailsModel.saveVapidDetails(t.scope,n)];case 3:return s.sent(),[2,i];case 4:return a=s.sent(),[4,this.deleteToken(r.fcmToken)];case 5:throw s.sent(),a;case 6:return[2]}})})},t.prototype.getNewToken=function(t,e,n){return Object(u.__awaiter)(this,void 0,void 0,function(){var r,i;return Object(u.__generator)(this,function(o){switch(o.label){case 0:return[4,this.iidModel.getToken(this.messagingSenderId,e,n)];case 1:return r=o.sent(),i={swScope:t.scope,vapidKey:n,fcmSenderId:this.messagingSenderId,fcmToken:r.token,fcmPushSet:r.pushSet,createTime:Date.now(),endpoint:e.endpoint,auth:e.getKey("auth"),p256dh:e.getKey("p256dh")},[4,this.tokenDetailsModel.saveTokenDetails(i)];case 2:return o.sent(),[4,this.vapidDetailsModel.saveVapidDetails(t.scope,n)];case 3:return o.sent(),[2,r.token]}})})},t.prototype.deleteToken=function(t){return Object(u.__awaiter)(this,void 0,void 0,function(){var e,n;return Object(u.__generator)(this,function(r){switch(r.label){case 0:return[4,this.deleteTokenFromDB(t)];case 1:return r.sent(),[4,this.getSWRegistration_()];case 2:return(e=r.sent())?[4,e.pushManager.getSubscription()]:[3,4];case 3:if(n=r.sent())return[2,n.unsubscribe()];r.label=4;case 4:return[2,!0]}})})},t.prototype.deleteTokenFromDB=function(t){return Object(u.__awaiter)(this,void 0,void 0,function(){var e;return Object(u.__generator)(this,function(n){switch(n.label){case 0:return[4,this.tokenDetailsModel.deleteToken(t)];case 1:return e=n.sent(),[4,this.iidModel.deleteToken(e.fcmSenderId,e.fcmToken,e.fcmPushSet)];case 2:return n.sent(),[2]}})})},t.prototype.getPushSubscription=function(t,e){return t.pushManager.getSubscription().then(function(n){return n||t.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:e})})},t.prototype.requestPermission=function(){throw h.create("only-available-in-window")},t.prototype.useServiceWorker=function(t){throw h.create("only-available-in-window")},t.prototype.usePublicVapidKey=function(t){throw h.create("only-available-in-window")},t.prototype.onMessage=function(t,e,n){throw h.create("only-available-in-window")},t.prototype.onTokenRefresh=function(t,e,n){throw h.create("only-available-in-window")},t.prototype.setBackgroundMessageHandler=function(t){throw h.create("only-available-in-sw")},t.prototype.delete=function(){return Object(u.__awaiter)(this,void 0,void 0,function(){return Object(u.__generator)(this,function(t){switch(t.label){case 0:return[4,Promise.all([this.tokenDetailsModel.closeDatabase(),this.vapidDetailsModel.closeDatabase()])];case 1:return t.sent(),[2]}})})},t.prototype.getNotificationPermission_=function(){return Notification.permission},t.prototype.getTokenDetailsModel=function(){return this.tokenDetailsModel},t.prototype.getVapidDetailsModel=function(){return this.vapidDetailsModel},t.prototype.getIidModel=function(){return this.iidModel},t}();var I=function(t){function e(e){var n=t.call(this,e)||this;return n.bgMessageHandler=null,self.addEventListener("push",function(t){n.onPush(t)}),self.addEventListener("pushsubscriptionchange",function(t){n.onSubChange(t)}),self.addEventListener("notificationclick",function(t){n.onNotificationClick(t)}),n}return Object(u.__extends)(e,t),e.prototype.onPush=function(t){t.waitUntil(this.onPush_(t))},e.prototype.onSubChange=function(t){t.waitUntil(this.onSubChange_(t))},e.prototype.onNotificationClick=function(t){t.waitUntil(this.onNotificationClick_(t))},e.prototype.onPush_=function(t){return Object(u.__awaiter)(this,void 0,void 0,function(){var e,n,r,i,o,a;return Object(u.__generator)(this,function(s){switch(s.label){case 0:if(!t.data)return[2];try{e=t.data.json()}catch(u){return[2]}return[4,this.hasVisibleClients_()];case 1:return s.sent()?[2,this.sendMessageToWindowClients_(e)]:(n=this.getNotificationData_(e))?(r=n.title||"",[4,this.getSWRegistration_()]):[3,3];case 2:return i=s.sent(),o=n.actions,a=Notification.maxActions,o&&a&&o.length>a&&console.warn("This browser only supports "+a+" actions.The remaining actions will not be displayed."),[2,i.showNotification(r,n)];case 3:return this.bgMessageHandler?[4,this.bgMessageHandler(e)]:[3,5];case 4:return s.sent(),[2];case 5:return[2]}})})},e.prototype.onSubChange_=function(t){return Object(u.__awaiter)(this,void 0,void 0,function(){var t,e,n,r;return Object(u.__generator)(this,function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),[4,this.getSWRegistration_()];case 1:return t=i.sent(),[3,3];case 2:throw e=i.sent(),h.create("unable-to-resubscribe",{message:e});case 3:return i.trys.push([3,5,,8]),[4,t.pushManager.getSubscription()];case 4:return i.sent(),[3,8];case 5:return n=i.sent(),[4,this.getTokenDetailsModel().getTokenDetailsFromSWScope(t.scope)];case 6:if(!(r=i.sent()))throw n;return[4,this.deleteToken(r.fcmToken)];case 7:throw i.sent(),n;case 8:return[2]}})})},e.prototype.onNotificationClick_=function(t){return Object(u.__awaiter)(this,void 0,void 0,function(){var e,n,r,i;return Object(u.__generator)(this,function(a){switch(a.label){case 0:return t.notification&&t.notification.data&&t.notification.data.FCM_MSG?t.action?[2]:(t.stopImmediatePropagation(),t.notification.close(),(e=t.notification.data.FCM_MSG).notification&&(n=e.fcmOptions&&e.fcmOptions.link||e.notification.click_action)?[4,this.getWindowClient_(n)]:[2]):[2];case 1:return(r=a.sent())?[3,3]:[4,self.clients.openWindow(n)];case 2:return r=a.sent(),[3,5];case 3:return[4,r.focus()];case 4:r=a.sent(),a.label=5;case 5:return r?(delete e.notification,delete e.fcmOptions,i=P(o.NOTIFICATION_CLICKED,e),[2,this.attemptToMessageClient_(r,i)]):[2]}})})},e.prototype.getNotificationData_=function(t){var e;if(t&&"object"===typeof t.notification){var n=Object(u.__assign)({},t.notification);return n.data=Object(u.__assign)({},t.notification.data,((e={}).FCM_MSG=t,e)),n}},e.prototype.setBackgroundMessageHandler=function(t){if(!t||"function"!==typeof t)throw h.create("bg-handler-function-expected");this.bgMessageHandler=t},e.prototype.getWindowClient_=function(t){return Object(u.__awaiter)(this,void 0,void 0,function(){var e,n,r,i;return Object(u.__generator)(this,function(o){switch(o.label){case 0:return e=new URL(t,self.location.href).href,[4,A()];case 1:for(n=o.sent(),r=null,i=0;i<n.length;i++)if(new URL(n[i].url,self.location.href).href===e){r=n[i];break}return[2,r]}})})},e.prototype.attemptToMessageClient_=function(t,e){return Object(u.__awaiter)(this,void 0,void 0,function(){return Object(u.__generator)(this,function(n){if(!t)throw h.create("no-window-client-to-msg");return t.postMessage(e),[2]})})},e.prototype.hasVisibleClients_=function(){return Object(u.__awaiter)(this,void 0,void 0,function(){return Object(u.__generator)(this,function(t){switch(t.label){case 0:return[4,A()];case 1:return[2,t.sent().some(function(t){return"visible"===t.visibilityState&&!t.url.startsWith("chrome-extension://")})]}})})},e.prototype.sendMessageToWindowClients_=function(t){return Object(u.__awaiter)(this,void 0,void 0,function(){var e,n,r=this;return Object(u.__generator)(this,function(i){switch(i.label){case 0:return[4,A()];case 1:return e=i.sent(),n=P(o.PUSH_MSG_RECEIVED,t),[4,Promise.all(e.map(function(t){return r.attemptToMessageClient_(t,n)}))];case 2:return i.sent(),[2]}})})},e.prototype.getSWRegistration_=function(){return Object(u.__awaiter)(this,void 0,void 0,function(){return Object(u.__generator)(this,function(t){return[2,self.registration]})})},e.prototype.getPublicVapidKey_=function(){return Object(u.__awaiter)(this,void 0,void 0,function(){var t,e;return Object(u.__generator)(this,function(n){switch(n.label){case 0:return[4,this.getSWRegistration_()];case 1:if(!(t=n.sent()))throw h.create("sw-registration-expected");return[4,this.getVapidDetailsModel().getVapidFromSWScope(t.scope)];case 2:return null==(e=n.sent())?[2,f]:[2,e]}})})},e}(x);function A(){return self.clients.matchAll({type:"window",includeUncontrolled:!0})}function P(t,e){var n;return(n={})[i.TYPE_OF_MSG]=t,n[i.DATA]=e,n}var D=function(t){function e(e){var n=t.call(this,e)||this;return n.registrationToUse=null,n.publicVapidKeyToUse=null,n.manifestCheckPromise=null,n.messageObserver=null,n.tokenRefreshObserver=null,n.onMessageInternal=Object(c.createSubscribe)(function(t){n.messageObserver=t}),n.onTokenRefreshInternal=Object(c.createSubscribe)(function(t){n.tokenRefreshObserver=t}),n.setupSWMessageListener_(),n}return Object(u.__extends)(e,t),e.prototype.getToken=function(){return Object(u.__awaiter)(this,void 0,void 0,function(){return Object(u.__generator)(this,function(e){switch(e.label){case 0:return this.manifestCheckPromise||(this.manifestCheckPromise=function(){return Object(u.__awaiter)(this,void 0,void 0,function(){var t,e;return Object(u.__generator)(this,function(n){switch(n.label){case 0:if(!(t=document.querySelector('link[rel="manifest"]')))return[2];n.label=1;case 1:return n.trys.push([1,4,,5]),[4,fetch(t.href)];case 2:return[4,n.sent().json()];case 3:return e=n.sent(),[3,5];case 4:return n.sent(),[2];case 5:if(!e||!e.gcm_sender_id)return[2];if("103953800507"!==e.gcm_sender_id)throw h.create("incorrect-gcm-sender-id");return[2]}})})}()),[4,this.manifestCheckPromise];case 1:return e.sent(),[2,t.prototype.getToken.call(this)]}})})},e.prototype.requestPermission=function(){return Object(u.__awaiter)(this,void 0,void 0,function(){var t;return Object(u.__generator)(this,function(e){switch(e.label){case 0:return"granted"===this.getNotificationPermission_()?[2]:[4,Notification.requestPermission()];case 1:if("granted"===(t=e.sent()))return[2];throw"denied"===t?h.create("permission-blocked"):h.create("permission-default")}})})},e.prototype.useServiceWorker=function(t){if(!(t instanceof ServiceWorkerRegistration))throw h.create("sw-registration-expected");if(null!=this.registrationToUse)throw h.create("use-sw-before-get-token");this.registrationToUse=t},e.prototype.usePublicVapidKey=function(t){if("string"!==typeof t)throw h.create("invalid-public-vapid-key");if(null!=this.publicVapidKeyToUse)throw h.create("use-public-key-before-get-token");var e=g(t);if(65!==e.length)throw h.create("public-vapid-key-decryption-failed");this.publicVapidKeyToUse=e},e.prototype.onMessage=function(t,e,n){return"function"===typeof t?this.onMessageInternal(t,e,n):this.onMessageInternal(t)},e.prototype.onTokenRefresh=function(t,e,n){return"function"===typeof t?this.onTokenRefreshInternal(t,e,n):this.onTokenRefreshInternal(t)},e.prototype.waitForRegistrationToActivate_=function(t){var e=t.installing||t.waiting||t.active;return new Promise(function(n,r){if(e)if("activated"!==e.state)if("redundant"!==e.state){e.addEventListener("statechange",function i(){if("activated"===e.state)n(t);else{if("redundant"!==e.state)return;r(h.create("sw-reg-redundant"))}e.removeEventListener("statechange",i)})}else r(h.create("sw-reg-redundant"));else n(t);else r(h.create("no-sw-in-reg"))})},e.prototype.getSWRegistration_=function(){var t=this;return this.registrationToUse?this.waitForRegistrationToActivate_(this.registrationToUse):(this.registrationToUse=null,navigator.serviceWorker.register("/firebase-messaging-sw.js",{scope:"/firebase-cloud-messaging-push-scope"}).catch(function(t){throw h.create("failed-serviceworker-registration",{browserErrorMessage:t.message})}).then(function(e){return t.waitForRegistrationToActivate_(e).then(function(){return t.registrationToUse=e,e.update(),e})}))},e.prototype.getPublicVapidKey_=function(){return Object(u.__awaiter)(this,void 0,void 0,function(){return Object(u.__generator)(this,function(t){return this.publicVapidKeyToUse?[2,this.publicVapidKeyToUse]:[2,f]})})},e.prototype.setupSWMessageListener_=function(){var t=this;navigator.serviceWorker.addEventListener("message",function(e){if(e.data&&e.data[i.TYPE_OF_MSG]){var n=e.data;switch(n[i.TYPE_OF_MSG]){case o.PUSH_MSG_RECEIVED:case o.NOTIFICATION_CLICKED:var r=n[i.DATA];t.messageObserver&&t.messageObserver.next(r)}}},!1)},e}(x);function N(t){var e={isSupported:R};t.INTERNAL.registerService("messaging",function(t){if(!R())throw h.create("unsupported-browser");return self&&"ServiceWorkerGlobalScope"in self?new I(t):new D(t)},e)}function R(){return self&&"ServiceWorkerGlobalScope"in self?"PushManager"in self&&"Notification"in self&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey"):navigator.cookieEnabled&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")}N(s.a)},function(t,e,n){"use strict";n.r(e),n.d(e,"registerStorage",function(){return qt});var r=n(2),i=n.n(r),o="firebasestorage.googleapis.com",a=12e4,s=6e4,u=-9007199254740991,c=function(){function t(t,e){this.code_=h(t),this.message_="Firebase Storage: "+e,this.serverResponse_=null,this.name_="FirebaseError"}return t.prototype.codeProp=function(){return this.code},t.prototype.codeEquals=function(t){return h(t)===this.codeProp()},t.prototype.serverResponseProp=function(){return this.serverResponse_},t.prototype.setServerResponseProp=function(t){this.serverResponse_=t},Object.defineProperty(t.prototype,"name",{get:function(){return this.name_},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"code",{get:function(){return this.code_},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"message",{get:function(){return this.message_},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"serverResponse",{get:function(){return this.serverResponse_},enumerable:!0,configurable:!0}),t}(),l={UNKNOWN:"unknown",OBJECT_NOT_FOUND:"object-not-found",BUCKET_NOT_FOUND:"bucket-not-found",PROJECT_NOT_FOUND:"project-not-found",QUOTA_EXCEEDED:"quota-exceeded",UNAUTHENTICATED:"unauthenticated",UNAUTHORIZED:"unauthorized",RETRY_LIMIT_EXCEEDED:"retry-limit-exceeded",INVALID_CHECKSUM:"invalid-checksum",CANCELED:"canceled",INVALID_EVENT_NAME:"invalid-event-name",INVALID_URL:"invalid-url",INVALID_DEFAULT_BUCKET:"invalid-default-bucket",NO_DEFAULT_BUCKET:"no-default-bucket",CANNOT_SLICE_BLOB:"cannot-slice-blob",SERVER_FILE_WRONG_SIZE:"server-file-wrong-size",NO_DOWNLOAD_URL:"no-download-url",INVALID_ARGUMENT:"invalid-argument",INVALID_ARGUMENT_COUNT:"invalid-argument-count",APP_DELETED:"app-deleted",INVALID_ROOT_OPERATION:"invalid-root-operation",INVALID_FORMAT:"invalid-format",INTERNAL_ERROR:"internal-error"};function h(t){return"storage/"+t}function f(){return new c(l.UNKNOWN,"An unknown error occurred, please check the error payload for server response.")}function p(){return new c(l.CANCELED,"User canceled the upload/download.")}function d(){return new c(l.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function m(t,e,n){return new c(l.INVALID_ARGUMENT,"Invalid argument in `"+e+"` at index "+t+": "+n)}function y(){return new c(l.APP_DELETED,"The Firebase app was deleted.")}function g(t,e){return new c(l.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function v(t){throw new c(l.INTERNAL_ERROR,"Internal error: "+t)}var b={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};function _(t){switch(t){case b.RAW:case b.BASE64:case b.BASE64URL:case b.DATA_URL:return;default:throw"Expected one of the event types: ["+b.RAW+", "+b.BASE64+", "+b.BASE64URL+", "+b.DATA_URL+"]."}}var w=function(){return function(t,e){this.data=t,this.contentType=e||null}}();function E(t,e){switch(t){case b.RAW:return new w(S(e));case b.BASE64:case b.BASE64URL:return new w(T(t,e));case b.DATA_URL:return new w(function(t){var e=new C(t);return e.base64?T(b.BASE64,e.rest):function(t){var e;try{e=decodeURIComponent(t)}catch(n){throw g(b.DATA_URL,"Malformed data URL.")}return S(e)}(e.rest)}(e),function(t){return new C(t).contentType}(e))}throw f()}function S(t){for(var e=[],n=0;n<t.length;n++){var r=t.charCodeAt(n);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|63&r);else if(55296==(64512&r))if(n<t.length-1&&56320==(64512&t.charCodeAt(n+1)))r=65536|(1023&r)<<10|1023&t.charCodeAt(++n),e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r);else e.push(239,191,189);else 56320==(64512&r)?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(e)}function T(t,e){switch(t){case b.BASE64:var n=-1!==e.indexOf("-"),r=-1!==e.indexOf("_");if(n||r)throw g(t,"Invalid character '"+(n?"-":"_")+"' found: is it base64url encoded?");break;case b.BASE64URL:var i=-1!==e.indexOf("+"),o=-1!==e.indexOf("/");if(i||o)throw g(t,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/")}var a;try{a=atob(e)}catch(c){throw g(t,"Invalid character found")}for(var s=new Uint8Array(a.length),u=0;u<a.length;u++)s[u]=a.charCodeAt(u);return s}var C=function(){return function(t){this.base64=!1,this.contentType=null;var e=t.match(/^data:([^,]+)?,/);if(null===e)throw g(b.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");var n=e[1]||null;null!=n&&(this.base64=(r=n,i=";base64",r.length>=i.length&&r.substring(r.length-i.length)===i),this.contentType=this.base64?n.substring(0,n.length-";base64".length):n),this.rest=t.substring(t.indexOf(",")+1);var r,i}}();var k,x={STATE_CHANGED:"state_changed"},I={RUNNING:"running",PAUSING:"pausing",PAUSED:"paused",SUCCESS:"success",CANCELING:"canceling",CANCELED:"canceled",ERROR:"error"},A={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function P(t){switch(t){case I.RUNNING:case I.PAUSING:case I.CANCELING:return A.RUNNING;case I.PAUSED:return A.PAUSED;case I.SUCCESS:return A.SUCCESS;case I.CANCELED:return A.CANCELED;case I.ERROR:default:return A.ERROR}}function D(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function N(t,e){for(var n in t)D(t,n)&&e(n,t[n])}function R(t){if(null==t)return{};var e={};return N(t,function(t,n){e[t]=n}),e}function O(t){return new Promise(t)}function M(t){return Promise.resolve(t)}function F(t){return null!=t}function L(t){return void 0!==t}function V(t){return"function"===typeof t}function B(t){return"object"===typeof t}function U(t){return B(t)&&null!==t}function j(t){return"string"===typeof t||t instanceof String}function q(t){return G()&&t instanceof Blob}function G(){return"undefined"!==typeof Blob}!function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"}(k||(k={}));var W=function(){function t(){var t=this;this.sent_=!1,this.xhr_=new XMLHttpRequest,this.errorCode_=k.NO_ERROR,this.sendPromise_=O(function(e,n){t.xhr_.addEventListener("abort",function(n){t.errorCode_=k.ABORT,e(t)}),t.xhr_.addEventListener("error",function(n){t.errorCode_=k.NETWORK_ERROR,e(t)}),t.xhr_.addEventListener("load",function(n){e(t)})})}return t.prototype.send=function(t,e,n,r){var i=this;if(this.sent_)throw v("cannot .send() more than once");(this.sent_=!0,this.xhr_.open(e,t,!0),F(r))&&N(r,function(t,e){i.xhr_.setRequestHeader(t,e.toString())});return F(n)?this.xhr_.send(n):this.xhr_.send(),this.sendPromise_},t.prototype.getErrorCode=function(){if(!this.sent_)throw v("cannot .getErrorCode() before sending");return this.errorCode_},t.prototype.getStatus=function(){if(!this.sent_)throw v("cannot .getStatus() before sending");try{return this.xhr_.status}catch(t){return-1}},t.prototype.getResponseText=function(){if(!this.sent_)throw v("cannot .getResponseText() before sending");return this.xhr_.responseText},t.prototype.abort=function(){this.xhr_.abort()},t.prototype.getResponseHeader=function(t){return this.xhr_.getResponseHeader(t)},t.prototype.addUploadProgressListener=function(t){F(this.xhr_.upload)&&this.xhr_.upload.addEventListener("progress",t)},t.prototype.removeUploadProgressListener=function(t){F(this.xhr_.upload)&&this.xhr_.upload.removeEventListener("progress",t)},t}(),z=function(){function t(){}return t.prototype.createXhrIo=function(){return new W},t}();function H(t){var e,n;try{e=JSON.parse(t)}catch(r){return null}return B(n=e)&&!Array.isArray(n)?e:null}var K=function(){function t(t,e){this.bucket=t,this.path_=e}return Object.defineProperty(t.prototype,"path",{get:function(){return this.path_},enumerable:!0,configurable:!0}),t.prototype.fullServerUrl=function(){var t=encodeURIComponent;return"/b/"+t(this.bucket)+"/o/"+t(this.path)},t.prototype.bucketOnlyServerUrl=function(){return"/b/"+encodeURIComponent(this.bucket)+"/o"},t.makeFromBucketSpec=function(e){var n,r;try{n=t.makeFromUrl(e)}catch(i){return new t(e,"")}if(""===n.path)return n;throw r=e,new c(l.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+r+"'.")},t.makeFromUrl=function(e){var n=null;var r=new RegExp("^gs://([A-Za-z0-9.\\-_]+)(/(.*))?$","i");for(var i=o.replace(/[.]/g,"\\."),a=[{regex:r,indices:{bucket:1,path:3},postModify:function(t){"/"===t.path.charAt(t.path.length-1)&&(t.path_=t.path_.slice(0,-1))}},{regex:new RegExp("^https?://"+i+"/v[A-Za-z0-9_]+/b/([A-Za-z0-9.\\-_]+)/o(/([^?#]*).*)?$","i"),indices:{bucket:1,path:3},postModify:function(t){t.path_=decodeURIComponent(t.path)}}],s=0;s<a.length;s++){var u=a[s],h=u.regex.exec(e);if(h){var f=h[u.indices.bucket],p=h[u.indices.path];p||(p=""),n=new t(f,p),u.postModify(n);break}}if(null==n)throw function(t){return new c(l.INVALID_URL,"Invalid URL '"+t+"'.")}(e);return n},t}();function Q(t){var e=t.lastIndexOf("/",t.length-2);return-1===e?t:t.slice(e+1)}function Y(t){return"https://"+o+"/v0"+t}function X(t){var e=encodeURIComponent,n="?";return N(t,function(t,r){var i=e(t)+"="+e(r);n=n+i+"&"}),n=n.slice(0,-1)}function $(t,e){return e}var J=function(){return function(t,e,n,r){this.server=t,this.local=e||t,this.writable=!!n,this.xform=r||$}}(),Z=null;function tt(){if(Z)return Z;var t=[];t.push(new J("bucket")),t.push(new J("generation")),t.push(new J("metageneration")),t.push(new J("name","fullPath",!0));var e=new J("name");e.xform=function(t,e){return function(t){return!j(t)||t.length<2?t:Q(t=t)}(e)},t.push(e);var n=new J("size");return n.xform=function(t,e){return F(e)?+e:e},t.push(n),t.push(new J("timeCreated")),t.push(new J("updated")),t.push(new J("md5Hash",null,!0)),t.push(new J("cacheControl",null,!0)),t.push(new J("contentDisposition",null,!0)),t.push(new J("contentEncoding",null,!0)),t.push(new J("contentLanguage",null,!0)),t.push(new J("contentType",null,!0)),t.push(new J("metadata","customMetadata",!0)),Z=t}function et(t,e,n){for(var r={type:"file"},i=n.length,o=0;o<i;o++){var a=n[o];r[a.local]=a.xform(r,e[a.server])}return function(t,e){Object.defineProperty(t,"ref",{get:function(){var n=t.bucket,r=t.fullPath,i=new K(n,r);return e.makeStorageReference(i)}})}(r,t),r}function nt(t,e,n){var r=H(e);return null===r?null:et(t,r,n)}function rt(t,e){for(var n={},r=e.length,i=0;i<r;i++){var o=e[i];o.writable&&(n[o.server]=t[o.local])}return JSON.stringify(n)}function it(t){if(!(t&&B(t)))throw"Expected Metadata object.";for(var e in t){var n=t[e];if("customMetadata"===e){if(!B(n))throw"Expected object for 'customMetadata' mapping."}else if(U(n))throw"Mapping for '"+e+"' cannot be an object."}}function ot(t,e,n){for(var r=e.length,i=e.length,o=0;o<e.length;o++)if(e[o].optional){r=o;break}if(!(r<=n.length&&n.length<=i))throw function(t,e,n,r){var i,o;return t===e?(i=t,o=1===t?"argument":"arguments"):(i="between "+t+" and "+e,o="arguments"),new c(l.INVALID_ARGUMENT_COUNT,"Invalid argument count in `"+n+"`: Expected "+i+" "+o+", received "+r+".")}(r,i,t,n.length);for(o=0;o<n.length;o++)try{e[o].validator(n[o])}catch(a){throw a instanceof Error?m(o,t,a.message):m(o,t,a)}}var at=function(){return function(t,e){var n=this;this.validator=function(e){n.optional&&!L(e)||t(e)},this.optional=!!e}}();function st(t,e){function n(t){if(!j(t))throw"Expected string."}var r,i,o;return t?(i=n,o=t,r=function(t){i(t),o(t)}):r=n,new at(r,e)}function ut(){return new at(function(t){if(!(t instanceof Uint8Array||t instanceof ArrayBuffer||G()&&t instanceof Blob))throw"Expected Blob or File."})}function ct(t){return new at(it,t)}function lt(){return new at(function(t){if(!(function(t){return"number"===typeof t||t instanceof Number}(t)&&t>=0))throw"Expected a number 0 or greater."})}function ht(t,e){return new at(function(e){if(!(null===e||F(e)&&e instanceof Object))throw"Expected an Object.";void 0!==t&&null!==t&&t(e)},e)}function ft(t){return new at(function(t){if(null!==t&&!V(t))throw"Expected a Function."},t)}function pt(){return"undefined"!==typeof BlobBuilder?BlobBuilder:"undefined"!==typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0}var dt=function(){function t(t,e){var n=0,r="";q(t)?(this.data_=t,n=t.size,r=t.type):t instanceof ArrayBuffer?(e?this.data_=new Uint8Array(t):(this.data_=new Uint8Array(t.byteLength),this.data_.set(new Uint8Array(t))),n=this.data_.length):t instanceof Uint8Array&&(e?this.data_=t:(this.data_=new Uint8Array(t.length),this.data_.set(t)),n=t.length),this.size_=n,this.type_=r}return t.prototype.size=function(){return this.size_},t.prototype.type=function(){return this.type_},t.prototype.slice=function(e,n){if(q(this.data_)){var r=this.data_,i=(a=e,s=n,(o=r).webkitSlice?o.webkitSlice(a,s):o.mozSlice?o.mozSlice(a,s):o.slice?o.slice(a,s):null);return null===i?null:new t(i)}var o,a,s;return new t(new Uint8Array(this.data_.buffer,e,n-e),!0)},t.getBlob=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];if(G()){var r=e.map(function(e){return e instanceof t?e.data_:e});return new t(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=pt();if(void 0!==n){for(var r=new n,i=0;i<t.length;i++)r.append(t[i]);return r.getBlob()}if(G())return new Blob(t);throw Error("This browser doesn't seem to support creating Blobs")}.apply(null,r))}var i=e.map(function(t){return j(t)?E(b.RAW,t).data:t.data_}),o=0;i.forEach(function(t){o+=t.byteLength});var a=new Uint8Array(o),s=0;return i.forEach(function(t){for(var e=0;e<t.length;e++)a[s++]=t[e]}),new t(a,!0)},t.prototype.uploadData=function(){return this.data_},t}();function mt(t,e){return-1!==t.indexOf(e)}var yt=function(){return function(t,e,n,r){this.url=t,this.method=e,this.handler=n,this.timeout=r,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}();function gt(t){if(!t)throw f()}function vt(t,e){return function(n,r){var i=nt(t,r,e);return gt(null!==i),i}}function bt(t,e){return function(n,r){var i=nt(t,r,e);return gt(null!==i),function(t,e){var n=H(e);if(null===n)return null;if(!j(n.downloadTokens))return null;var r=n.downloadTokens;if(0===r.length)return null;var i=encodeURIComponent;return r.split(",").map(function(e){var n=t.bucket,r=t.fullPath;return Y("/b/"+i(n)+"/o/"+i(r))+X({alt:"media",token:e})})[0]}(i,r)}}function _t(t){return function(e,n){var r,i,o;return 401===e.getStatus()?r=new c(l.UNAUTHENTICATED,"User is not authenticated, please authenticate using Firebase Authentication and try again."):402===e.getStatus()?(o=t.bucket,r=new c(l.QUOTA_EXCEEDED,"Quota for bucket '"+o+"' exceeded, please view quota on https://firebase.google.com/pricing/.")):403===e.getStatus()?(i=t.path,r=new c(l.UNAUTHORIZED,"User does not have permission to access '"+i+"'.")):r=n,r.setServerResponseProp(n.serverResponseProp()),r}}function wt(t){var e=_t(t);return function(n,r){var i,o=e(n,r);return 404===n.getStatus()&&(i=t.path,o=new c(l.OBJECT_NOT_FOUND,"Object '"+i+"' does not exist.")),o.setServerResponseProp(r.serverResponseProp()),o}}function Et(t,e,n){var r=Y(e.fullServerUrl()),i=t.maxOperationRetryTime(),o=new yt(r,"GET",vt(t,n),i);return o.errorHandler=wt(e),o}function St(t,e,n){var r=R(n);return r.fullPath=t.path,r.size=e.size(),r.contentType||(r.contentType=function(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}(null,e)),r}var Tt=function(){return function(t,e,n,r){this.current=t,this.total=e,this.finalized=!!n,this.metadata=r||null}}();function Ct(t,e){var n;try{n=t.getResponseHeader("X-Goog-Upload-Status")}catch(r){gt(!1)}return gt(mt(e||["active"],n)),n}function kt(t,e,n,r,i,o,a,s){var u=new Tt(0,0);if(a?(u.current=a.current,u.total=a.total):(u.current=0,u.total=r.size()),r.size()!==u.total)throw new c(l.SERVER_FILE_WRONG_SIZE,"Server recorded incorrect upload file size, please retry the upload.");var h=u.total-u.current,f=h;i>0&&(f=Math.min(f,i));var p=u.current,m=p+f,y={"X-Goog-Upload-Command":f===h?"upload, finalize":"upload","X-Goog-Upload-Offset":u.current},g=r.slice(p,m);if(null===g)throw d();var v=e.maxUploadRetryTime(),b=new yt(n,"POST",function(t,n){var i,a=Ct(t,["active","final"]),s=u.current+f,c=r.size();return i="final"===a?vt(e,o)(t,n):null,new Tt(s,c,"final"===a,i)},v);return b.headers=y,b.body=g.uploadData(),b.progressCallback=s||null,b.errorHandler=_t(t),b}var xt=function(){return function(t,e,n){if(V(t)||F(e)||F(n))this.next=t,this.error=e||null,this.complete=n||null;else{var r=t;this.next=r.next||null,this.error=r.error||null,this.complete=r.complete||null}}}(),It=function(){return function(t,e,n,r,i,o){this.bytesTransferred=t,this.totalBytes=e,this.state=n,this.metadata=r,this.task=i,this.ref=o}}();function At(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];M(!0).then(function(){t.apply(null,e)})}}var Pt=function(){function t(t,e,n,r,i,o){var a=this;void 0===o&&(o=null),this.transferred_=0,this.needToFetchStatus_=!1,this.needToFetchMetadata_=!1,this.observers_=[],this.error_=null,this.uploadUrl_=null,this.request_=null,this.chunkMultiplier_=1,this.resolve_=null,this.reject_=null,this.ref_=t,this.authWrapper_=e,this.location_=n,this.blob_=i,this.metadata_=o,this.mappings_=r,this.resumable_=this.shouldDoResumable_(this.blob_),this.state_=I.RUNNING,this.errorHandler_=function(t){a.request_=null,a.chunkMultiplier_=1,t.codeEquals(l.CANCELED)?(a.needToFetchStatus_=!0,a.completeTransitions_()):(a.error_=t,a.transition_(I.ERROR))},this.metadataErrorHandler_=function(t){a.request_=null,t.codeEquals(l.CANCELED)?a.completeTransitions_():(a.error_=t,a.transition_(I.ERROR))},this.promise_=O(function(t,e){a.resolve_=t,a.reject_=e,a.start_()}),this.promise_.then(null,function(){})}return t.prototype.makeProgressCallback_=function(){var t=this,e=this.transferred_;return function(n,r){t.updateProgress_(e+n)}},t.prototype.shouldDoResumable_=function(t){return t.size()>262144},t.prototype.start_=function(){this.state_===I.RUNNING&&null===this.request_&&(this.resumable_?null===this.uploadUrl_?this.createResumable_():this.needToFetchStatus_?this.fetchStatus_():this.needToFetchMetadata_?this.fetchMetadata_():this.continueUpload_():this.oneShotUpload_())},t.prototype.resolveToken_=function(t){var e=this;this.authWrapper_.getAuthToken().then(function(n){switch(e.state_){case I.RUNNING:t(n);break;case I.CANCELING:e.transition_(I.CANCELED);break;case I.PAUSING:e.transition_(I.PAUSED)}})},t.prototype.createResumable_=function(){var t=this;this.resolveToken_(function(e){var n=function(t,e,n,r,i){var o=e.bucketOnlyServerUrl(),a=St(e,r,i),s={name:a.fullPath},u=Y(o),c={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":r.size(),"X-Goog-Upload-Header-Content-Type":a.contentType,"Content-Type":"application/json; charset=utf-8"},l=rt(a,n),h=t.maxUploadRetryTime(),f=new yt(u,"POST",function(t,e){var n;Ct(t);try{n=t.getResponseHeader("X-Goog-Upload-URL")}catch(r){gt(!1)}return gt(j(n)),n},h);return f.urlParams=s,f.headers=c,f.body=l,f.errorHandler=_t(e),f}(t.authWrapper_,t.location_,t.mappings_,t.blob_,t.metadata_),r=t.authWrapper_.makeRequest(n,e);t.request_=r,r.getPromise().then(function(e){t.request_=null,t.uploadUrl_=e,t.needToFetchStatus_=!1,t.completeTransitions_()},t.errorHandler_)})},t.prototype.fetchStatus_=function(){var t=this,e=this.uploadUrl_;this.resolveToken_(function(n){var r=function(t,e,n,r){var i=t.maxUploadRetryTime(),o=new yt(n,"POST",function(t,e){var n,i=Ct(t,["active","final"]);try{n=t.getResponseHeader("X-Goog-Upload-Size-Received")}catch(a){gt(!1)}var o=parseInt(n,10);return gt(!isNaN(o)),new Tt(o,r.size(),"final"===i)},i);return o.headers={"X-Goog-Upload-Command":"query"},o.errorHandler=_t(e),o}(t.authWrapper_,t.location_,e,t.blob_),i=t.authWrapper_.makeRequest(r,n);t.request_=i,i.getPromise().then(function(e){e=e,t.request_=null,t.updateProgress_(e.current),t.needToFetchStatus_=!1,e.finalized&&(t.needToFetchMetadata_=!0),t.completeTransitions_()},t.errorHandler_)})},t.prototype.continueUpload_=function(){var t=this,e=262144*this.chunkMultiplier_,n=new Tt(this.transferred_,this.blob_.size()),r=this.uploadUrl_;this.resolveToken_(function(i){var o;try{o=kt(t.location_,t.authWrapper_,r,t.blob_,e,t.mappings_,n,t.makeProgressCallback_())}catch(s){return t.error_=s,void t.transition_(I.ERROR)}var a=t.authWrapper_.makeRequest(o,i);t.request_=a,a.getPromise().then(function(e){t.increaseMultiplier_(),t.request_=null,t.updateProgress_(e.current),e.finalized?(t.metadata_=e.metadata,t.transition_(I.SUCCESS)):t.completeTransitions_()},t.errorHandler_)})},t.prototype.increaseMultiplier_=function(){262144*this.chunkMultiplier_<33554432&&(this.chunkMultiplier_*=2)},t.prototype.fetchMetadata_=function(){var t=this;this.resolveToken_(function(e){var n=Et(t.authWrapper_,t.location_,t.mappings_),r=t.authWrapper_.makeRequest(n,e);t.request_=r,r.getPromise().then(function(e){t.request_=null,t.metadata_=e,t.transition_(I.SUCCESS)},t.metadataErrorHandler_)})},t.prototype.oneShotUpload_=function(){var t=this;this.resolveToken_(function(e){var n=function(t,e,n,r,i){var o=e.bucketOnlyServerUrl(),a={"X-Goog-Upload-Protocol":"multipart"},s=function(){for(var t="",e=0;e<2;e++)t+=Math.random().toString().slice(2);return t}();a["Content-Type"]="multipart/related; boundary="+s;var u=St(e,r,i),c="--"+s+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+rt(u,n)+"\r\n--"+s+"\r\nContent-Type: "+u.contentType+"\r\n\r\n",l="\r\n--"+s+"--",h=dt.getBlob(c,r,l);if(null===h)throw d();var f={name:u.fullPath},p=Y(o),m=t.maxUploadRetryTime(),y=new yt(p,"POST",vt(t,n),m);return y.urlParams=f,y.headers=a,y.body=h.uploadData(),y.errorHandler=_t(e),y}(t.authWrapper_,t.location_,t.mappings_,t.blob_,t.metadata_),r=t.authWrapper_.makeRequest(n,e);t.request_=r,r.getPromise().then(function(e){t.request_=null,t.metadata_=e,t.updateProgress_(t.blob_.size()),t.transition_(I.SUCCESS)},t.errorHandler_)})},t.prototype.updateProgress_=function(t){var e=this.transferred_;this.transferred_=t,this.transferred_!==e&&this.notifyObservers_()},t.prototype.transition_=function(t){if(this.state_!==t)switch(t){case I.CANCELING:case I.PAUSING:this.state_=t,null!==this.request_&&this.request_.cancel();break;case I.RUNNING:var e=this.state_===I.PAUSED;this.state_=t,e&&(this.notifyObservers_(),this.start_());break;case I.PAUSED:this.state_=t,this.notifyObservers_();break;case I.CANCELED:this.error_=p(),this.state_=t,this.notifyObservers_();break;case I.ERROR:case I.SUCCESS:this.state_=t,this.notifyObservers_()}},t.prototype.completeTransitions_=function(){switch(this.state_){case I.PAUSING:this.transition_(I.PAUSED);break;case I.CANCELING:this.transition_(I.CANCELED);break;case I.RUNNING:this.start_()}},Object.defineProperty(t.prototype,"snapshot",{get:function(){var t=P(this.state_);return new It(this.transferred_,this.blob_.size(),t,this.metadata_,this,this.ref_)},enumerable:!0,configurable:!0}),t.prototype.on=function(t,e,n,r){void 0===e&&(e=void 0),void 0===n&&(n=void 0),void 0===r&&(r=void 0);var i="Expected a function or an Object with one of `next`, `error`, `complete` properties.",o=ft(!0).validator,a=ht(null,!0).validator;function s(t){try{return void o(t)}catch(e){}try{if(a(t),!(L(t.next)||L(t.error)||L(t.complete)))throw"";return}catch(e){throw i}}ot("on",[st(function(e){if(t!==x.STATE_CHANGED)throw"Expected one of the event types: ["+x.STATE_CHANGED+"]."}),ht(s,!0),ft(!0),ft(!0)],arguments);var u=this;function c(t){return function(e,n,i){null!==t&&ot("on",t,arguments);var o=new xt(e,n,r);return u.addObserver_(o),function(){u.removeObserver_(o)}}}var l=[ht(function(t){if(null===t)throw i;s(t)}),ft(!0),ft(!0)];return!(L(e)||L(n)||L(r))?c(l):c(null)(e,n,r)},t.prototype.then=function(t,e){return this.promise_.then(t,e)},t.prototype.catch=function(t){return this.then(null,t)},t.prototype.addObserver_=function(t){this.observers_.push(t),this.notifyObserver_(t)},t.prototype.removeObserver_=function(t){!function(t,e){var n=t.indexOf(e);-1!==n&&t.splice(n,1)}(this.observers_,t)},t.prototype.notifyObservers_=function(){var t,e=this;this.finishPromise_(),(t=this.observers_,Array.prototype.slice.call(t)).forEach(function(t){e.notifyObserver_(t)})},t.prototype.finishPromise_=function(){if(null!==this.resolve_){var t=!0;switch(P(this.state_)){case A.SUCCESS:At(this.resolve_.bind(null,this.snapshot))();break;case A.CANCELED:case A.ERROR:At(this.reject_.bind(null,this.error_))();break;default:t=!1}t&&(this.resolve_=null,this.reject_=null)}},t.prototype.notifyObserver_=function(t){switch(P(this.state_)){case A.RUNNING:case A.PAUSED:null!==t.next&&At(t.next.bind(t,this.snapshot))();break;case A.SUCCESS:null!==t.complete&&At(t.complete.bind(t))();break;case A.CANCELED:case A.ERROR:null!==t.error&&At(t.error.bind(t,this.error_))();break;default:null!==t.error&&At(t.error.bind(t,this.error_))()}},t.prototype.resume=function(){ot("resume",[],arguments);var t=this.state_===I.PAUSED||this.state_===I.PAUSING;return t&&this.transition_(I.RUNNING),t},t.prototype.pause=function(){ot("pause",[],arguments);var t=this.state_===I.RUNNING;return t&&this.transition_(I.PAUSING),t},t.prototype.cancel=function(){ot("cancel",[],arguments);var t=this.state_===I.RUNNING||this.state_===I.PAUSING;return t&&this.transition_(I.CANCELING),t},t}(),Dt=function(){function t(t,e){this.authWrapper=t,this.location=e instanceof K?e:K.makeFromUrl(e)}return t.prototype.toString=function(){return ot("toString",[],arguments),"gs://"+this.location.bucket+"/"+this.location.path},t.prototype.newRef=function(e,n){return new t(e,n)},t.prototype.mappings=function(){return tt()},t.prototype.child=function(t){ot("child",[st()],arguments);var e=function(t,e){var n=e.split("/").filter(function(t){return t.length>0}).join("/");return 0===t.length?n:t+"/"+n}(this.location.path,t),n=new K(this.location.bucket,e);return this.newRef(this.authWrapper,n)},Object.defineProperty(t.prototype,"parent",{get:function(){var t=function(t){if(0==t.length)return null;var e=t.lastIndexOf("/");return-1===e?"":t.slice(0,e)}(this.location.path);if(null===t)return null;var e=new K(this.location.bucket,t);return this.newRef(this.authWrapper,e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"root",{get:function(){var t=new K(this.location.bucket,"");return this.newRef(this.authWrapper,t)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"bucket",{get:function(){return this.location.bucket},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"fullPath",{get:function(){return this.location.path},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return Q(this.location.path)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"storage",{get:function(){return this.authWrapper.service()},enumerable:!0,configurable:!0}),t.prototype.put=function(t,e){return void 0===e&&(e=null),ot("put",[ut(),ct(!0)],arguments),this.throwIfRoot_("put"),new Pt(this,this.authWrapper,this.location,this.mappings(),new dt(t),e)},t.prototype.putString=function(t,e,n){void 0===e&&(e=b.RAW),ot("putString",[st(),st(_,!0),ct(!0)],arguments),this.throwIfRoot_("putString");var r=E(e,t),i=R(n);return!F(i.contentType)&&F(r.contentType)&&(i.contentType=r.contentType),new Pt(this,this.authWrapper,this.location,this.mappings(),new dt(r.data,!0),i)},t.prototype.delete=function(){ot("delete",[],arguments),this.throwIfRoot_("delete");var t=this;return this.authWrapper.getAuthToken().then(function(e){var n=function(t,e){var n=Y(e.fullServerUrl()),r=t.maxOperationRetryTime(),i=new yt(n,"DELETE",function(t,e){},r);return i.successCodes=[200,204],i.errorHandler=wt(e),i}(t.authWrapper,t.location);return t.authWrapper.makeRequest(n,e).getPromise()})},t.prototype.getMetadata=function(){ot("getMetadata",[],arguments),this.throwIfRoot_("getMetadata");var t=this;return this.authWrapper.getAuthToken().then(function(e){var n=Et(t.authWrapper,t.location,t.mappings());return t.authWrapper.makeRequest(n,e).getPromise()})},t.prototype.updateMetadata=function(t){ot("updateMetadata",[ct()],arguments),this.throwIfRoot_("updateMetadata");var e=this;return this.authWrapper.getAuthToken().then(function(n){var r=function(t,e,n,r){var i=Y(e.fullServerUrl()),o=rt(n,r),a=t.maxOperationRetryTime(),s=new yt(i,"PATCH",vt(t,r),a);return s.headers={"Content-Type":"application/json; charset=utf-8"},s.body=o,s.errorHandler=wt(e),s}(e.authWrapper,e.location,t,e.mappings());return e.authWrapper.makeRequest(r,n).getPromise()})},t.prototype.getDownloadURL=function(){ot("getDownloadURL",[],arguments),this.throwIfRoot_("getDownloadURL");var t=this;return this.authWrapper.getAuthToken().then(function(e){var n=function(t,e,n){var r=Y(e.fullServerUrl()),i=t.maxOperationRetryTime(),o=new yt(r,"GET",bt(t,n),i);return o.errorHandler=wt(e),o}(t.authWrapper,t.location,t.mappings());return t.authWrapper.makeRequest(n,e).getPromise().then(function(t){if(null===t)throw new c(l.NO_DOWNLOAD_URL,"The given file does not have any download URLs.");return t})})},t.prototype.throwIfRoot_=function(t){if(""===this.location.path)throw function(t){return new c(l.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}(t)},t}(),Nt=function(){function t(t){this.promise_=function(t){return Promise.reject(t)}(t)}return t.prototype.getPromise=function(){return this.promise_},t.prototype.cancel=function(t){void 0===t&&(t=!1)},t}(),Rt=function(){function t(){this.map_={},this.id_=u}return t.prototype.addRequest=function(t){var e=this.id_;this.id_++,this.map_[e]=t;var n=this;function r(){delete n.map_[e]}t.getPromise().then(r,r)},t.prototype.clear=function(){N(this.map_,function(t,e){e&&e.cancel(!0)}),this.map_={}},t}(),Ot=function(){function t(e,n,r,i,o){if(this.bucket_=null,this.deleted_=!1,this.app_=e,null!==this.app_){var u=this.app_.options;F(u)&&(this.bucket_=t.extractBucket_(u))}this.storageRefMaker_=n,this.requestMaker_=r,this.pool_=o,this.service_=i,this.maxOperationRetryTime_=a,this.maxUploadRetryTime_=s,this.requestMap_=new Rt}return t.extractBucket_=function(t){var e=t.storageBucket||null;return null==e?null:K.makeFromBucketSpec(e).bucket},t.prototype.getAuthToken=function(){return null!==this.app_&&F(this.app_.INTERNAL)&&F(this.app_.INTERNAL.getToken)?this.app_.INTERNAL.getToken().then(function(t){return null!==t?t.accessToken:null},function(t){return null}):M(null)},t.prototype.bucket=function(){if(this.deleted_)throw y();return this.bucket_},t.prototype.service=function(){return this.service_},t.prototype.makeStorageReference=function(t){return this.storageRefMaker_(this,t)},t.prototype.makeRequest=function(t,e){if(this.deleted_)return new Nt(y());var n=this.requestMaker_(t,e,this.pool_);return this.requestMap_.addRequest(n),n},t.prototype.deleteApp=function(){this.deleted_=!0,this.app_=null,this.requestMap_.clear()},t.prototype.maxUploadRetryTime=function(){return this.maxUploadRetryTime_},t.prototype.setMaxUploadRetryTime=function(t){this.maxUploadRetryTime_=t},t.prototype.maxOperationRetryTime=function(){return this.maxOperationRetryTime_},t.prototype.setMaxOperationRetryTime=function(t){this.maxOperationRetryTime_=t},t}();var Mt=function(){function t(t,e,n,r,i,o,a,s,u,c,l){this.pendingXhr_=null,this.backoffId_=null,this.resolve_=null,this.reject_=null,this.canceled_=!1,this.appDelete_=!1,this.url_=t,this.method_=e,this.headers_=n,this.body_=r,this.successCodes_=i.slice(),this.additionalRetryCodes_=o.slice(),this.callback_=a,this.errorCallback_=s,this.progressCallback_=c,this.timeout_=u,this.pool_=l;var h=this;this.promise_=O(function(t,e){h.resolve_=t,h.reject_=e,h.start_()})}return t.prototype.start_=function(){var t=this;function e(e,n){var r,i=t.resolve_,o=t.reject_,a=n.xhr;if(n.wasSuccessCode)try{var s=t.callback_(a,a.getResponseText());L(s)?i(s):i()}catch(u){o(u)}else null!==a?((r=f()).setServerResponseProp(a.getResponseText()),t.errorCallback_?o(t.errorCallback_(a,r)):o(r)):n.canceled?o(r=t.appDelete_?y():p()):o(r=new c(l.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again."))}this.canceled_?e(0,new Ft(!1,null,!0)):this.backoffId_=function(t,e,n){var r=1,i=null,o=!1,a=0;function s(){return 2===a}var u=!1;function c(){u||(u=!0,e.apply(null,arguments))}function l(e){i=setTimeout(function(){i=null,t(h,s())},e)}function h(t){for(var e,n=[],i=1;i<arguments.length;i++)n[i-1]=arguments[i];u||(t?c.apply(null,arguments):s()||o?c.apply(null,arguments):(r<64&&(r*=2),1===a?(a=2,e=0):e=1e3*(r+Math.random()),l(e)))}var f=!1;function p(t){f||(f=!0,u||(null!==i?(t||(a=2),clearTimeout(i),l(0)):t||(a=1)))}return l(0),setTimeout(function(){o=!0,p(!0)},n),p}(function(e,n){if(n)e(!1,new Ft(!1,null,!0));else{var r=t.pool_.createXhrIo();t.pendingXhr_=r,null!==t.progressCallback_&&r.addUploadProgressListener(i),r.send(t.url_,t.method_,t.body_,t.headers_).then(function(n){null!==t.progressCallback_&&n.removeUploadProgressListener(i),t.pendingXhr_=null;var r=(n=n).getErrorCode()===k.NO_ERROR,o=n.getStatus();if(r&&!t.isRetryStatusCode_(o)){var a=mt(t.successCodes_,o);e(!0,new Ft(a,n))}else{var s=n.getErrorCode()===k.ABORT;e(!1,new Ft(!1,null,s))}})}function i(e){var n=e.loaded,r=e.lengthComputable?e.total:-1;null!==t.progressCallback_&&t.progressCallback_(n,r)}},e,this.timeout_)},t.prototype.getPromise=function(){return this.promise_},t.prototype.cancel=function(t){this.canceled_=!0,this.appDelete_=t||!1,null!==this.backoffId_&&(0,this.backoffId_)(!1),null!==this.pendingXhr_&&this.pendingXhr_.abort()},t.prototype.isRetryStatusCode_=function(t){var e=t>=500&&t<600,n=mt([408,429],t),r=mt(this.additionalRetryCodes_,t);return e||n||r},t}(),Ft=function(){return function(t,e,n){this.wasSuccessCode=t,this.xhr=e,this.canceled=!!n}}();function Lt(t,e,n){var r=X(t.urlParams),o=t.url+r,a=R(t.headers);return function(t,e){null!==e&&e.length>0&&(t.Authorization="Firebase "+e)}(a,e),function(t){var e="undefined"!==typeof i.a?i.a.SDK_VERSION:"AppManager";t["X-Firebase-Storage-Version"]="webjs/"+e}(a),new Mt(o,t.method,a,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,n)}var Vt=function(){function t(t,e,n){if(this.bucket_=null,this.authWrapper_=new Ot(t,function(t,e){return new Dt(t,e)},Lt,this,e),this.app_=t,null!=n)this.bucket_=K.makeFromBucketSpec(n);else{var r=this.authWrapper_.bucket();null!=r&&(this.bucket_=new K(r,""))}this.internals_=new Bt(this)}return t.prototype.ref=function(t){if(ot("ref",[st(function(t){if(/^[A-Za-z]+:\/\//.test(t))throw"Expected child path but got a URL, use refFromURL instead."},!0)],arguments),null==this.bucket_)throw new Error("No Storage Bucket defined in Firebase Options.");var e=new Dt(this.authWrapper_,this.bucket_);return null!=t?e.child(t):e},t.prototype.refFromURL=function(t){return ot("refFromURL",[st(function(t){if(!/^[A-Za-z]+:\/\//.test(t))throw"Expected full URL but got a child path, use ref instead.";try{K.makeFromUrl(t)}catch(e){throw"Expected valid full URL but got an invalid one."}},!1)],arguments),new Dt(this.authWrapper_,t)},Object.defineProperty(t.prototype,"maxUploadRetryTime",{get:function(){return this.authWrapper_.maxUploadRetryTime()},enumerable:!0,configurable:!0}),t.prototype.setMaxUploadRetryTime=function(t){ot("setMaxUploadRetryTime",[lt()],arguments),this.authWrapper_.setMaxUploadRetryTime(t)},t.prototype.setMaxOperationRetryTime=function(t){ot("setMaxOperationRetryTime",[lt()],arguments),this.authWrapper_.setMaxOperationRetryTime(t)},Object.defineProperty(t.prototype,"app",{get:function(){return this.app_},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"INTERNAL",{get:function(){return this.internals_},enumerable:!0,configurable:!0}),t}(),Bt=function(){function t(t){this.service_=t}return t.prototype.delete=function(){return this.service_.authWrapper_.deleteApp(),M(void 0)},t}(),Ut="storage";function jt(t,e,n){return new Vt(t,new z,n)}function qt(t){var e={TaskState:A,TaskEvent:x,StringFormat:b,Storage:Vt,Reference:Dt};t.INTERNAL.registerService(Ut,jt,e,void 0,!0)}qt(i.a)},function(t,e,n){"use strict";var r=n(170);function i(){}function o(){}o.resetWarningCache=i,t.exports=function(){function t(t,e,n,i,o,a){if(a!==r){var s=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw s.name="Invariant Violation",s}}function e(){return t}t.isRequired=t;var n={array:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:e,element:t,elementType:t,instanceOf:e,node:t,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:o,resetWarningCache:i};return n.PropTypes=n,n}},function(t,e,n){"use strict";t.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},function(t,e,n){},function(t,e,n){"use strict";n.r(e);var r=n(0),i=n(1),o=n.n(i),a=function(){return(a=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)},s=function(t,e){return function(n){return Math.max(Math.min(n,e),t)}},u=function(t){return function(e){return"string"===typeof e&&0===e.indexOf(t)}},c=function(t){return t%1?Number(t.toFixed(5)):t},l={test:function(t){return"number"===typeof t},parse:parseFloat,transform:function(t){return t}},h=a({},l,{transform:s(0,1)}),f=a({},l,{default:1}),p=function(t){return{test:function(e){return"string"===typeof e&&e.endsWith(t)&&1===e.split(" ").length},parse:parseFloat,transform:function(e){return""+e+t}}},d=p("deg"),m=p("%"),y=p("px"),g=p("vh"),v=p("vw"),b=(a({},m,{parse:function(t){return m.parse(t)/100},transform:function(t){return m.transform(100*t)}}),s(0,255)),_=/^(#[0-9a-f]{3}|#(?:[0-9a-f]{2}){2,4}|(rgb|hsl)a?\((-?\d+%?[,\s]+){2,3}\s*[\d\.]+%?\))$/i,w=function(t){return void 0!==t.red},E=function(t){return void 0!==t.hue},S=function(t){var e=t.length;return function(n){if("string"!==typeof n)return n;for(var r,i={},o=function(t){return"string"===typeof t?t.split(/,\s*/):[t]}((r=n).substring(r.indexOf("(")+1,r.lastIndexOf(")"))),a=0;a<e;a++)i[t[a]]=void 0!==o[a]?parseFloat(o[a]):1;return i}},T=a({},l,{transform:function(t){return Math.round(b(t))}}),C=u("rgb"),k={test:function(t){return"string"===typeof t?C(t):w(t)},parse:S(["red","green","blue","alpha"]),transform:function(t){var e=t.red,n=t.green,r=t.blue,i=t.alpha;return function(t){var e=t.red,n=t.green,r=t.blue,i=t.alpha;return"rgba("+e+", "+n+", "+r+", "+(void 0===i?1:i)+")"}({red:T.transform(e),green:T.transform(n),blue:T.transform(r),alpha:c(i)})}},x=u("hsl"),I={test:function(t){return"string"===typeof t?x(t):E(t)},parse:S(["hue","saturation","lightness","alpha"]),transform:function(t){var e=t.hue,n=t.saturation,r=t.lightness,i=t.alpha;return function(t){var e=t.hue,n=t.saturation,r=t.lightness,i=t.alpha;return"hsla("+e+", "+n+", "+r+", "+(void 0===i?1:i)+")"}({hue:Math.round(e),saturation:m.transform(c(n)),lightness:m.transform(c(r)),alpha:c(i)})}},A=a({},k,{test:u("#"),parse:function(t){var e="",n="",r="";return t.length>4?(e=t.substr(1,2),n=t.substr(3,2),r=t.substr(5,2)):(e=t.substr(1,1),n=t.substr(2,1),r=t.substr(3,1),e+=e,n+=n,r+=r),{red:parseInt(e,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:1}}}),P={test:function(t){return"string"===typeof t&&_.test(t)||k.test(t)||I.test(t)||A.test(t)},parse:function(t){return k.test(t)?k.parse(t):I.test(t)?I.parse(t):A.test(t)?A.parse(t):t},transform:function(t){return w(t)?k.transform(t):E(t)?I.transform(t):t}},D=/(-)?(\d[\d\.]*)/g,N=/(#[0-9a-f]{6}|#[0-9a-f]{3}|#(?:[0-9a-f]{2}){2,4}|(rgb|hsl)a?\((-?\d+%?[,\s]+){2,3}\s*[\d\.]+%?\))/gi,R=function(t){if("string"!==typeof t||!isNaN(t))return!1;var e=0,n=t.match(D),r=t.match(N);return n&&(e+=n.length),r&&(e+=r.length),e>0},O=function(t){var e=t,n=[],r=e.match(N);r&&(e=e.replace(N,"${c}"),n.push.apply(n,r.map(P.parse)));var i=e.match(D);return i&&n.push.apply(n,i.map(l.parse)),n},M=function(t){var e=t,n=0,r=t.match(N),i=r?r.length:0;if(r)for(var o=0;o<i;o++)e=e.replace(r[o],"${c}"),n++;var a=e.match(D),s=a?a.length:0;if(a)for(o=0;o<s;o++)e=e.replace(a[o],"${n}"),n++;return function(t){for(var r=e,o=0;o<n;o++)r=r.replace(o<i?"${c}":"${n}",o<i?P.transform(t[o]):c(t[o]));return r}},F=function(){},L=function(){};var V,B=0,U="undefined"!==typeof window&&void 0!==window.requestAnimationFrame?function(t){return window.requestAnimationFrame(t)}:function(t){var e=Date.now(),n=Math.max(0,16.7-(e-B));B=e+n,setTimeout(function(){return t(B)},n)};!function(t){t.Read="read",t.Update="update",t.Render="render",t.PostRender="postRender",t.FixedUpdate="fixedUpdate"}(V||(V={}));var j=1/60*1e3,q=!0,G=!1,W=!1,z={delta:0,timestamp:0},H=[V.Read,V.Update,V.Render,V.PostRender],K=function(t){return G=t},Q=H.reduce(function(t,e){var n=function(t){var e=[],n=[],r=0,i=!1,o=0,a=new WeakSet,s=new WeakSet,u={cancel:function(t){var e=n.indexOf(t);a.add(t),-1!==e&&n.splice(e,1)},process:function(c){var l,h;if(i=!0,e=(l=[n,e])[0],(n=l[1]).length=0,r=e.length)for(o=0;o<r;o++)(h=e[o])(c),!0!==s.has(h)||a.has(h)||(u.schedule(h),t(!0));i=!1},schedule:function(t,o,u){void 0===o&&(o=!1),void 0===u&&(u=!1),L("function"===typeof t,"Argument must be a function");var c=u&&i,l=c?e:n;a.delete(t),o&&s.add(t),-1===l.indexOf(t)&&(l.push(t),c&&(r=e.length))}};return u}(K);return t.sync[e]=function(t,e,r){return void 0===e&&(e=!1),void 0===r&&(r=!1),G||tt(),n.schedule(t,e,r),t},t.cancelSync[e]=function(t){return n.cancel(t)},t.steps[e]=n,t},{steps:{},sync:{},cancelSync:{}}),Y=Q.steps,X=Q.sync,$=Q.cancelSync,J=function(t){return Y[t].process(z)},Z=function t(e){G=!1,z.delta=q?j:Math.max(Math.min(e-z.timestamp,40),1),q||(j=z.delta),z.timestamp=e,W=!0,H.forEach(J),W=!1,G&&(q=!1,U(t))},tt=function(){G=!0,q=!0,W||U(Z)},et=function(){return z},nt=X,rt=function(t){return function(e){return 1-t(1-e)}},it=function(t){return function(e){return e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2}},ot=function(t){return function(e){return e*e*((t+1)*e-t)}},at=function(t){var e=ot(t);return function(t){return(t*=2)<1?.5*e(t):.5*(2-Math.pow(2,-10*(t-1)))}},st=function(t){return t},ut=function(t){return function(e){return Math.pow(e,t)}}(2),ct=rt(ut),lt=it(ut),ht=function(t){return 1-Math.sin(Math.acos(t))},ft=rt(ht),pt=it(ft),dt=ot(1.525),mt=rt(dt),yt=it(dt),gt=at(1.525),vt=8,bt=.001,_t=1e-7,wt=10,Et=11,St=1/(Et-1),Tt="undefined"!==typeof Float32Array,Ct=function(t,e){return 1-3*e+3*t},kt=function(t,e){return 3*e-6*t},xt=function(t){return 3*t},It=function(t,e,n){return 3*Ct(e,n)*t*t+2*kt(e,n)*t+xt(e)},At=function(t,e,n){return((Ct(e,n)*t+kt(e,n))*t+xt(e))*t};function Pt(t,e,n,r){var i=Tt?new Float32Array(Et):new Array(Et),o=function(e){for(var r,o,a,s=0,u=1,c=Et-1;u!==c&&i[u]<=e;++u)s+=St;return r=(e-i[--u])/(i[u+1]-i[u]),(a=It(o=s+r*St,t,n))>=bt?function(e,r){for(var i=0,o=0;i<vt;++i){if(0===(o=It(r,t,n)))return r;r-=(At(r,t,n)-e)/o}return r}(e,o):0===a?o:function(e,r,i){var o,a,s=0;do{(o=At(a=r+(i-r)/2,t,n)-e)>0?i=a:r=a}while(Math.abs(o)>_t&&++s<wt);return a}(e,s,s+St)};!function(){for(var e=0;e<Et;++e)i[e]=At(e*St,t,n)}();return function(i){return t===e&&n===r?i:0===i?0:1===i?1:At(o(i),e,r)}}var Dt={x:0,y:0,z:0},Nt=function(t){return"number"===typeof t},Rt=function(t){return 180*t/Math.PI},Ot=function(t,e){return void 0===e&&(e=Dt),Rt(Math.atan2(e.y-t.y,e.x-t.x))},Mt=function(t,e){var n=!0;return void 0===e&&(e=t,n=!1),function(r){return n?r-t+e:(t=r,n=!0,e)}},Ft=function(t){return function(e,n,r){return void 0!==r?t(e,n,r):function(r){return t(e,n,r)}}},Lt=Ft(function(t,e,n){return Math.min(Math.max(n,t),e)}),Vt=function(t){return t.hasOwnProperty("x")&&t.hasOwnProperty("y")},Bt=function(t){return Vt(t)&&t.hasOwnProperty("z")},Ut=function(t,e){return Math.abs(t-e)},jt=function(t,e){if(void 0===e&&(e=Dt),Nt(t)&&Nt(e))return Ut(t,e);if(Vt(t)&&Vt(e)){var n=Ut(t.x,e.x),r=Ut(t.y,e.y),i=Bt(t)&&Bt(e)?Ut(t.z,e.z):0;return Math.sqrt(Math.pow(n,2)+Math.pow(r,2)+Math.pow(i,2))}return 0},qt=function(t,e,n){var r=e-t;return 0===r?1:(n-t)/r},Gt=function(t,e,n){return-n*t+n*e+t},Wt=function(){return(Wt=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)},zt=function(t,e,n){var r=t*t,i=e*e;return Math.sqrt(Math.max(0,n*(i-r)+r))},Ht=[A,k,I],Kt=function(t){return Ht.find(function(e){return e.test(t)})},Qt=function(t){return"'"+t+"' is not an animatable color. Use the equivalent color code instead."},Yt=function(t,e){var n=Kt(t),r=Kt(e);L(!!n,Qt(t)),L(!!r,Qt(e)),L(n.transform===r.transform,"Both colors must be hex/RGBA, OR both must be HSLA.");var i=n.parse(t),o=r.parse(e),a=Wt({},i),s=n===I?Gt:zt;return function(t){for(var e in a)"alpha"!==e&&(a[e]=s(i[e],o[e],t));return a.alpha=Gt(i.alpha,o.alpha,t),n.transform(a)}},Xt=function(t,e){return function(n){return e(t(n))}},$t=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return t.reduce(Xt)},Jt=function(t,e){var n=t.slice(),r=n.length,i=t.map(function(t,n){var r=e[n];return Nt(t)?function(e){return Gt(t,r,e)}:P.test(t)?Yt(t,r):Zt(t,r)});return function(t){for(var e=0;e<r;e++)n[e]=i[e](t);return n}},Zt=function(t,e){var n=M(t);return L(n(t)===M(e)(t),"Values '"+t+"' and '"+e+"' are of different format, or a value might have changed value type."),$t(Jt(O(t),O(e)),n)},te=function(t,e){return function(n){return Gt(t,e,n)}};function ee(t,e,n){for(var r,i=[],o=n||("number"===typeof(r=t[0])?te:P.test(r)?Yt:Zt),a=t.length-1,s=0;s<a;s++){var u=o(t[s],t[s+1]);if(e){var c=Array.isArray(e)?e[s]:e;u=$t(c,u)}i.push(u)}return i}var ne=function(t,e,n,r){return void 0===r&&(r=0),i=t+n*(e-t)/Math.max(r,n),void 0===o&&(o=2),o=Math.pow(10,o),Math.round(i*o)/o;var i,o},re=function(t){return t},ie=function(t){return void 0===t&&(t=re),Ft(function(e,n,r){var i=n-r,o=-(0-e+1)*(0-t(Math.abs(i)));return i<=0?n+o:n-o})},oe=ie(),ae=ie(Math.sqrt),se=function(t,e){return Nt(t)?t/(1e3/e):0},ue=function(t,e){return e?t*(1e3/e):0},ce=Ft(function(t,e,n){var r=e-t;return((n-t)%r+r)%r+t}),le=(Lt(0,1),function(){return(le=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)});var he,fe=function(t){var e=t.onRead,n=t.onRender,r=t.uncachedValues,i=void 0===r?new Set:r,o=t.useCache,a=void 0===o||o;return function(t){var r={},o=[],s=!1,u=function(t,e){var n=r[t];r[t]=e,r[t]!==n&&(-1===o.indexOf(t)&&o.push(t),s||(s=!0,nt.render(c)))};function c(e){return void 0===e&&(e=!1),(!0===e||s)&&(n(r,t,o),s=!1,o.length=0),this}return{get:function(n){return n?a&&!i.has(n)&&void 0!==r[n]?r[n]:e(n,t):r},set:function(t,e){if("string"===typeof t){if(void 0===e)return function(e){return u(t,e)};u(t,e)}else for(var n in t)t.hasOwnProperty(n)&&u(n,t[n]);return this},render:c}}},pe=/([a-z])([A-Z])/g,de=function(t){return t.replace(pe,"$1-$2").toLowerCase()},me=new Map,ye=new Map,ge=["Webkit","Moz","O","ms",""],ve=ge.length,be="undefined"!==typeof document,_e=function(t,e){return ye.set(t,de(e))},we=function(t,e){void 0===e&&(e=!1);var n=e?ye:me;return n.has(t)||(be?function(t){he=he||document.createElement("div");for(var e=0;e<ve;e++){var n=ge[e],r=""===n,i=r?t:n+t.charAt(0).toUpperCase()+t.slice(1);(i in he.style||r)&&(me.set(t,i),_e(t,(r?"":"-")+de(i)))}}(t):function(t){_e(t,t)}(t)),n.get(t)||t},Ee=["","X","Y","Z"],Se=["scale","rotate","skew","transformPerspective"].reduce(function(t,e){return Ee.reduce(function(t,n){return t.push(e+n),t},t)},["x","y","z"]),Te=Se.reduce(function(t,e){return t[e]=!0,t},{}),Ce=function(t){return!0===Te[t]},ke=function(t,e){return Se.indexOf(t)-Se.indexOf(e)},xe=function(t){return"originX"===t||"originY"===t},Ie={color:P,backgroundColor:P,outlineColor:P,fill:P,stroke:P,borderColor:P,borderTopColor:P,borderRightColor:P,borderBottomColor:P,borderLeftColor:P,borderWidth:y,borderTopWidth:y,borderRightWidth:y,borderBottomWidth:y,borderLeftWidth:y,borderRadius:y,borderTopLeftRadius:y,borderTopRightRadius:y,borderBottomRightRadius:y,borderBottomLeftRadius:y,width:y,maxWidth:y,height:y,maxHeight:y,top:y,right:y,bottom:y,left:y,padding:y,paddingTop:y,paddingRight:y,paddingBottom:y,paddingLeft:y,margin:y,marginTop:y,marginRight:y,marginBottom:y,marginLeft:y,rotate:d,rotateX:d,rotateY:d,rotateZ:d,scale:f,scaleX:f,scaleY:f,scaleZ:f,skew:d,skewX:d,skewY:d,distance:y,x:y,y:y,z:y,perspective:y,opacity:h,originX:m,originY:m,originZ:y},Ae=function(t){return Ie[t]},Pe=new Set(["scrollLeft","scrollTop"]),De=new Set(["scrollLeft","scrollTop","transform"]),Ne={x:"translateX",y:"translateY",z:"translateZ"},Re=function(t){return"function"===typeof t},Oe=function(t,e,n,r,i,o,a){void 0===e&&(e=!0),void 0===n&&(n={}),void 0===r&&(r={}),void 0===i&&(i={}),void 0===o&&(o=[]),void 0===a&&(a=!1);var s=!0,u=!1,c=!1;for(var l in t){var h=t[l],f=Ae(l),p="number"===typeof h&&f?f.transform(h):h;Ce(l)?(u=!0,r[l]=p,o.push(l),s&&(f.default&&h!==f.default||!f.default&&0!==h)&&(s=!1)):xe(l)?(i[l]=p,c=!0):De.has(l)&&Re(p)||(n[we(l,a)]=p)}return(u||"function"===typeof t.transform)&&(n.transform=function(t,e,n,r,i){var o="",a=!1;n.sort(ke);for(var s=n.length,u=0;u<s;u++){var c=n[u];o+=(Ne[c]||c)+"("+e[c]+") ",a="z"===c||a}return!a&&i?o+="translateZ(0)":o=o.trim(),Re(t.transform)?o=t.transform(e,o):r&&(o="none"),o}(t,r,o,s,e)),c&&(n.transformOrigin=(i.originX||0)+" "+(i.originY||0)+" "+(i.originZ||0)),n},Me=function(t){void 0===t&&(t=!0);var e={},n={},r={},i=[];return function(o){return i.length=0,Oe(o,t,e,n,r,i,!0),e}},Fe=fe({onRead:function(t,e){var n=e.element,r=e.preparseOutput,i=Ae(t);if(Ce(t))return i&&i.default||0;if(Pe.has(t))return n[t];var o=window.getComputedStyle(n,null).getPropertyValue(we(t,!0))||0;return r&&i&&i.parse?i.parse(o):o},onRender:function(t,e,n){var r=e.element,i=e.buildStyles;Object.assign(r.style,i(t)),-1!==n.indexOf("scrollLeft")&&(r.scrollLeft=t.scrollLeft),-1!==n.indexOf("scrollTop")&&(r.scrollTop=t.scrollTop)},uncachedValues:Pe}),Le=function(t,e){void 0===e&&(e={});var n=e.enableHardwareAcceleration,r=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&(n[r[i]]=t[r[i]])}return n}(e,["enableHardwareAcceleration"]);return Fe(le({element:t,buildStyles:Me(n),preparseOutput:!0},r))},Ve=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues"]),Be=function(t,e){return t/100*e+"px"},Ue=le({},l,{transform:Math.round}),je={fill:P,stroke:P,scale:f,scaleX:f,scaleY:f,opacity:h,fillOpacity:h,strokeOpacity:h,numOctaves:Ue},qe=fe({onRead:function(t,e){var n=e.element;if(Ce(t)){var r=function(t){return je[t]}(t);return r?r.default:0}return n.getAttribute(t)},onRender:function(t,e){var n=e.dimensions;!function(t,e){for(var n in e)e.hasOwnProperty(n)&&t.setAttribute(n,e[n])}(e.element,function(t,e,n,r){var i=!1,o=!1,a={},s=n?{pathLength:"0",pathSpacing:""+r}:void 0,u=void 0!==t.scale?t.scale||1e-7:t.scaleX||1,c=void 0!==t.scaleY?t.scaleY||1e-7:u||1,l=e.width*((t.originX||50)/100)+e.x,h=e.height*((t.originY||50)/100)+e.y,f=1*u*-l,p=1*c*-h,d=l/u,m=h/c,y={translate:"translate("+t.x+", "+t.y+") ",scale:"translate("+f+", "+p+") scale("+u+", "+c+") translate("+d+", "+m+") ",rotate:"rotate("+t.rotate+", "+l+", "+h+") ",skewX:"skewX("+t.skewX+") ",skewY:"skewY("+t.skewY+") "};for(var g in t)if(t.hasOwnProperty(g)){var v=t[g];Ce(g)?i=!0:!n||"pathLength"!==g&&"pathSpacing"!==g||"number"!==typeof v?n&&"pathOffset"===g?a["stroke-dashoffset"]=Be(-v,r):a[Ve.has(g)?g:de(g)]=v:(o=!0,s[g]=Be(v,r))}if(o&&(a["stroke-dasharray"]=s.pathLength+" "+s.pathSpacing),i)for(var g in a.transform="",y)if(y.hasOwnProperty(g)){var b="scale"===g?"1":"0";a.transform+=y[g].replace(/undefined/g,b)}return a}(t,n,e.isPath,e.pathLength))}}),Ge=fe({useCache:!1,onRead:function(t){return"scrollTop"===t?window.pageYOffset:window.pageXOffset},onRender:function(t){var e=t.scrollTop,n=void 0===e?0:e,r=t.scrollLeft,i=void 0===r?0:r;return window.scrollTo(i,n)}}),We=new WeakMap,ze=function(t,e){var n;return t instanceof HTMLElement?n=Le(t,e):t instanceof SVGElement?n=function(t){var e=function(t){try{return function(t){return"function"===typeof t.getBBox?t.getBBox():t.getBoundingClientRect()}(t)}catch(e){return{x:0,y:0,width:0,height:0}}}(t),n={element:t,dimensions:e,isPath:!1};return"path"===t.tagName&&(n.isPath=!0,n.pathLength=t.getTotalLength()),qe(n)}(t):t===window&&(n=Ge(t)),L(void 0!==n,"No valid node provided. Node must be HTMLElement, SVGElement or window."),We.set(t,n),n},He=function(t,e){return We.has(t)?We.get(t):ze(t,e)};var Ke=function(t,e){var n="string"===typeof t?document.querySelector(t):t;return He(n,e)},Qe=function(){function t(t){void 0===t&&(t={}),this.props=t}return t.prototype.applyMiddleware=function(t){return this.create(Object(r.__assign)({},this.props,{middleware:this.props.middleware?[t].concat(this.props.middleware):[t]}))},t.prototype.pipe=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=1===t.length?t[0]:$t.apply(void 0,t);return this.applyMiddleware(function(t){return function(e){return t(n(e))}})},t.prototype.while=function(t){return this.applyMiddleware(function(e,n){return function(r){return t(r)?e(r):n()}})},t.prototype.filter=function(t){return this.applyMiddleware(function(e){return function(n){return t(n)&&e(n)}})},t}(),Ye=function(){return function(t,e){var n=t.middleware,r=t.onComplete,i=this;this.isActive=!0,this.update=function(t){i.observer.update&&i.updateObserver(t)},this.complete=function(){i.observer.complete&&i.isActive&&i.observer.complete(),i.onComplete&&i.onComplete(),i.isActive=!1},this.error=function(t){i.observer.error&&i.isActive&&i.observer.error(t),i.isActive=!1},this.observer=e,this.updateObserver=function(t){return e.update(t)},this.onComplete=r,e.update&&n&&n.length&&n.forEach(function(t){return i.updateObserver=t(i.updateObserver,i.complete)})}}(),Xe=function(t,e,n){var r=e.middleware;return new Ye({middleware:r,onComplete:n},"function"===typeof t?{update:t}:t)},$e=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(r.__extends)(e,t),e.prototype.create=function(t){return new e(t)},e.prototype.start=function(t){void 0===t&&(t={});var e=!1,n={stop:function(){}},i=this.props,o=i.init,a=Object(r.__rest)(i,["init"]),s=o(Xe(t,a,function(){e=!0,n.stop()}));return n=s?Object(r.__assign)({},n,s):n,t.registerParent&&t.registerParent(n),e&&n.stop(),n},e}(Qe),Je=function(t){return new $e({init:t})},Ze=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.subscribers=[],e}return Object(r.__extends)(e,t),e.prototype.complete=function(){this.subscribers.forEach(function(t){return t.complete()})},e.prototype.error=function(t){this.subscribers.forEach(function(e){return e.error(t)})},e.prototype.update=function(t){for(var e=0;e<this.subscribers.length;e++)this.subscribers[e].update(t)},e.prototype.subscribe=function(t){var e=this,n=Xe(t,this.props);return this.subscribers.push(n),{unsubscribe:function(){var t=e.subscribers.indexOf(n);-1!==t&&e.subscribers.splice(t,1)}}},e.prototype.stop=function(){this.parent&&this.parent.stop()},e.prototype.registerParent=function(t){this.stop(),this.parent=t},e}(Qe),tn=function(t,e){var n=1/(t-1),r=1/(2*(t-1)),i=Math.min(e,1)/r;return Math.floor((i+1)/2)*n},en=function(t){return Array.isArray(t)},nn=function(t){var e=typeof t;return"string"===e||"number"===e},rn=function(t){function e(e){var n=t.call(this,e)||this;return n.scheduleVelocityCheck=function(){return nt.postRender(n.velocityCheck)},n.velocityCheck=function(t){t.timestamp!==n.lastUpdated&&(n.prev=n.current)},n.prev=n.current=e.value||0,nn(n.current)?(n.updateCurrent=function(t){return n.current=t},n.getVelocityOfCurrent=function(){return n.getSingleVelocity(n.current,n.prev)}):en(n.current)?(n.updateCurrent=function(t){return n.current=t.slice()},n.getVelocityOfCurrent=function(){return n.getListVelocity()}):(n.updateCurrent=function(t){for(var e in n.current={},t)t.hasOwnProperty(e)&&(n.current[e]=t[e])},n.getVelocityOfCurrent=function(){return n.getMapVelocity()}),e.initialSubscription&&n.subscribe(e.initialSubscription),n}return Object(r.__extends)(e,t),e.prototype.create=function(t){return new e(t)},e.prototype.get=function(){return this.current},e.prototype.getVelocity=function(){return this.getVelocityOfCurrent()},e.prototype.update=function(e){t.prototype.update.call(this,e),this.prev=this.current,this.updateCurrent(e);var n=et(),r=n.delta,i=n.timestamp;this.timeDelta=r,this.lastUpdated=i,nt.postRender(this.scheduleVelocityCheck)},e.prototype.subscribe=function(e){var n=t.prototype.subscribe.call(this,e);return this.subscribers[this.subscribers.length-1].update(this.current),n},e.prototype.getSingleVelocity=function(t,e){return"number"===typeof t&&"number"===typeof e?ue(t-e,this.timeDelta):ue(parseFloat(t)-parseFloat(e),this.timeDelta)||0},e.prototype.getListVelocity=function(){var t=this;return this.current.map(function(e,n){return t.getSingleVelocity(e,t.prev[n])})},e.prototype.getMapVelocity=function(){var t={};for(var e in this.current)this.current.hasOwnProperty(e)&&(t[e]=this.getSingleVelocity(this.current[e],this.prev[e]));return t},e}(Ze),on=function(t,e){return new rn({value:t,initialSubscription:e})},an=function(t){var e=t.getCount,n=t.getFirst,r=t.getOutput,i=t.mapApi,o=t.setProp,a=t.startActions;return function(t){return Je(function(s){var u=s.update,c=s.complete,l=s.error,h=e(t),f=r(),p=function(){return u(f)},d=0,m=a(t,function(t,e){var n=!1;return t.start({complete:function(){n||(n=!0,++d===h&&nt.update(c))},error:l,update:function(t){o(f,e,t),nt.update(p,!1,!0)}})});return Object.keys(n(m)).reduce(function(t,e){return t[e]=i(m,e),t},{})})}},sn=an({getOutput:function(){return{}},getCount:function(t){return Object.keys(t).length},getFirst:function(t){return t[Object.keys(t)[0]]},mapApi:function(t,e){return function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return Object.keys(t).reduce(function(r,i){var o;return t[i][e]&&(n[0]&&void 0!==n[0][i]?r[i]=t[i][e](n[0][i]):r[i]=(o=t[i])[e].apply(o,n)),r},{})}},setProp:function(t,e,n){return t[e]=n},startActions:function(t,e){return Object.keys(t).reduce(function(n,r){return n[r]=e(t[r],r),n},{})}}),un=an({getOutput:function(){return[]},getCount:function(t){return t.length},getFirst:function(t){return t[0]},mapApi:function(t,e){return function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return t.map(function(t,r){if(t[e])return Array.isArray(n[0])?t[e](n[0][r]):t[e].apply(t,n)})}},setProp:function(t,e,n){return t[e]=n},startActions:function(t,e){return t.map(function(t,n){return e(t,n)})}}),cn=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return un(t)},ln=[y,m,d,g,v],hn=function(t){return ln.find(function(e){return e.test(t)})},fn=function(t,e){return t(e)},pn=function(t,e,n){var i=n[0],o=e[i].map(function(i,o){var a=n.reduce(function(t){return function(e,n){return e[n]=e[n][t],e}}(o),Object(r.__assign)({},e));return bn(i)(t,a)});return cn.apply(void 0,o)},dn=function(t,e,n){var i=n[0],o=Object.keys(e[i]).reduce(function(o,a){var s=n.reduce(function(t){return function(e,n){return e[n]=e[n][t],e}}(a),Object(r.__assign)({},e));return o[a]=bn(e[i][a])(t,s),o},{});return sn(o)},mn=function(t,e){var n=e.from,i=e.to,o=Object(r.__rest)(e,["from","to"]),a=hn(n)||hn(i),s=a.transform,u=a.parse;return t(Object(r.__assign)({},o,{from:"string"===typeof n?u(n):n,to:"string"===typeof i?u(i):i})).pipe(s)},yn=function(t,e){var n=e.from,i=e.to,o=Object(r.__rest)(e,["from","to"]);return t(Object(r.__assign)({},o,{from:0,to:1})).pipe(Yt(n,i),P.transform)},gn=function(t,e){var n=e.from,i=e.to,o=Object(r.__rest)(e,["from","to"]),a=M(n);return L(a(n)===M(i)(n),"Values '"+n+"' and '"+i+"' are of different format, or a value might have changed value type."),t(Object(r.__assign)({},o,{from:0,to:1})).pipe(Jt(O(n),O(i)),a)},vn=function(t,e){var n=function(t){var e=Object.keys(t),n=function(e,n){return void 0!==e&&!t[n](e)};return{getVectorKeys:function(t){return e.reduce(function(e,r){return n(t[r],r)&&e.push(r),e},[])},testVectorProps:function(t){return t&&e.some(function(e){return n(t[e],e)})}}}(e),r=n.testVectorProps,i=n.getVectorKeys;return function(e){if(!r(e))return t(e);var n=i(e),o=e[n[0]];return bn(o)(t,e,n)}},bn=function(t){var e=fn;return"number"===typeof t?e=fn:Array.isArray(t)?e=pn:!function(t){return Boolean(hn(t))}(t)?P.test(t)?e=yn:R(t)?e=gn:"object"===typeof t&&(e=dn):e=mn,e},_n=vn(function(t){return void 0===t&&(t={}),Je(function(e){var n=e.complete,r=e.update,i=t.velocity,o=void 0===i?0:i,a=t.from,s=void 0===a?0:a,u=t.power,c=void 0===u?.8:u,l=t.timeConstant,h=void 0===l?350:l,f=t.restDelta,p=void 0===f?.5:f,d=t.modifyTarget,m=0,y=c*o,g=Math.round(s+y),v="undefined"===typeof d?g:d(g),b=nt.update(function(t){var e=t.delta;m+=e;var i=-y*Math.exp(-m/h),o=i>p||i<-p;r(o?v+i:v),o||($.update(b),n())},!0);return{stop:function(){return $.update(b)}}})},{from:l.test,modifyTarget:function(t){return"function"===typeof t},velocity:l.test}),wn=vn(function(t){return void 0===t&&(t={}),Je(function(e){var n=e.update,r=e.complete,i=t.velocity,o=void 0===i?0:i,a=t.from,s=void 0===a?0:a,u=t.to,c=void 0===u?0:u,l=t.stiffness,h=void 0===l?100:l,f=t.damping,p=void 0===f?10:f,d=t.mass,m=void 0===d?1:d,y=t.restSpeed,g=void 0===y?.01:y,v=t.restDelta,b=void 0===v?.01:v,_=o?-o/1e3:0,w=0,E=c-s,S=s,T=S,C=nt.update(function(t){var e=t.delta;w+=e;var i=p/(2*Math.sqrt(h*m)),a=Math.sqrt(h/m)/1e3;if(T=S,i<1){var s=Math.exp(-i*a*w),u=a*Math.sqrt(1-i*i);S=c-s*((_+i*a*E)/u*Math.sin(u*w)+E*Math.cos(u*w))}else{s=Math.exp(-a*w);S=c-s*(E+(_+a*E)*w)}o=ue(S-T,e);var l=Math.abs(o)<=g,f=Math.abs(c-S)<=b;l&&f?(n(S=c),$.update(C),r()):n(S)},!0);return{stop:function(){return $.update(C)}}})},{from:l.test,to:l.test,stiffness:l.test,damping:l.test,mass:l.test,velocity:l.test}),En=vn(function(t){var e=t.from,n=void 0===e?0:e,r=t.to,i=void 0===r?1:r,o=t.ease,a=void 0===o?st:o;return Je(function(t){var e=t.update;return{seek:function(t){return e(t)}}}).pipe(a,function(t){return Gt(n,i,t)})},{ease:function(t){return"function"===typeof t},from:l.test,to:l.test}),Sn=Lt(0,1),Tn=function(t){return void 0===t&&(t={}),Je(function(e){var n,r=e.update,i=e.complete,o=t.duration,a=void 0===o?300:o,s=t.ease,u=void 0===s?ct:s,c=t.flip,l=void 0===c?0:c,h=t.loop,f=void 0===h?0:h,p=t.yoyo,d=void 0===p?0:p,m=t.from,y=void 0===m?0:m,g=t.to,v=void 0===g?1:g,b=t.elapsed,_=void 0===b?0:b,w=t.playDirection,E=void 0===w?1:w,S=t.flipCount,T=void 0===S?0:S,C=t.yoyoCount,k=void 0===C?0:C,x=t.loopCount,I=void 0===x?0:x,A=En({from:y,to:v,ease:u}).start(r),P=0,D=!1,N=function(){if(_>a)_-=2*(_-a);else if(_<0){_+=2*(-1*_)}E*=-1},R=function(){P=Sn(qt(0,a,_)),A.seek(P)},O=function(){D=!0,n=nt.update(function(t){var e=t.delta;_+=e*E,R(),function(){var t,e=1===E?D&&_>=a:D&&_<=0;if(!e)return!1;if(e&&!f&&!l&&!d)return!0;var n=!1;return f&&I<f?(_=a-_,I++,n=!0):l&&T<l?(_=a-_,A=En({from:y=(t=[v,y])[0],to:v=t[1],ease:u}).start(r),T++,n=!0):d&&k<d&&(N(),k++,n=!0),!n}()&&i&&($.update(n),nt.update(i,!1,!0))},!0)},M=function(){D=!1,n&&$.update(n)};return O(),{isActive:function(){return D},getElapsed:function(){return Lt(0,a,_)},getProgress:function(){return P},stop:function(){M()},pause:function(){return M(),this},resume:function(){return D||O(),this},seek:function(t){return _=Gt(0,a,t),nt.update(R,!1,!0),this},reverse:function(){return N(),this}}})},Cn=Lt(0,1),kn=function(t){var e=t.easings,n=t.ease,i=void 0===n?st:n,o=t.times,a=t.values,s=Object(r.__rest)(t,["easings","ease","times","values"]);e=Array.isArray(e)?e:function(t,e){return t.map(function(){return e||ct}).splice(0,t.length-1)}(a,e),o=o||function(t){var e=t.length;return t.map(function(t,n){return 0!==n?n/(e-1):0})}(a);var u=e.map(function(t,e){return En({from:a[e],to:a[e+1],ease:t})});return Tn(Object(r.__assign)({},s,{ease:i})).applyMiddleware(function(t){return function(t,e,n){var r=t.length,i=r-1,o=i-1,a=e.map(function(t){return t.start(n)});return function(e){e<=t[0]&&a[0].seek(0),e>=t[i]&&a[o].seek(1);for(var n=1;n<r&&!(t[n]>e||n===i);n++);var s=qt(t[n-1],t[n],e);a[n-1].seek(Cn(s))}}(o,u,t)})},xn=vn(function(t){return void 0===t&&(t={}),Je(function(e){var n=e.complete,r=e.update,i=t.acceleration,o=void 0===i?0:i,a=t.friction,s=void 0===a?0:a,u=t.velocity,c=void 0===u?0:u,l=t.springStrength,h=t.to,f=t.restSpeed,p=void 0===f?.001:f,d=t.from,m=void 0===d?0:d,y=nt.update(function(t){var e=t.delta,i=Math.max(e,16);(o&&(c+=se(o,i)),s&&(c*=Math.pow(1-s,i/100)),void 0!==l&&void 0!==h)&&(c+=(h-m)*se(l,i));m+=se(c,i),r(m),!1!==p&&(!c||Math.abs(c)<=p)&&($.update(y),n())},!0);return{set:function(t){return m=t,this},setAcceleration:function(t){return o=t,this},setFriction:function(t){return s=t,this},setSpringStrength:function(t){return l=t,this},setSpringTarget:function(t){return h=t,this},setVelocity:function(t){return c=t,this},stop:function(){return $.update(y)}}})},{acceleration:l.test,friction:l.test,velocity:l.test,from:l.test,to:l.test,springStrength:l.test}),In=function(t,e,n){return Je(function(r){var i=r.update,o=e.split(" ").map(function(e){return t.addEventListener(e,i,n),e});return{stop:function(){return o.forEach(function(e){return t.removeEventListener(e,i,n)})}}})},An=function(){return{clientX:0,clientY:0,pageX:0,pageY:0,x:0,y:0}},Pn=function(t,e){return void 0===e&&(e={clientX:0,clientY:0,pageX:0,pageY:0,x:0,y:0}),e.clientX=e.x=t.clientX,e.clientY=e.y=t.clientY,e.pageX=t.pageX,e.pageY=t.pageY,e},Dn=[An()],Nn=!1;if("undefined"!==typeof document){In(document,"touchstart touchmove",{passive:!0,capture:!0}).start(function(t){var e=t.touches;Nn=!0;var n=e.length;Dn.length=0;for(var r=0;r<n;r++){var i=e[r];Dn.push(Pn(i))}})}var Rn=An(),On=!1;if("undefined"!==typeof document){In(document,"mousedown mousemove",!0).start(function(t){On=!0,Pn(t,Rn)})}var Mn,Fn=function(t){return t[0]},Ln=function(t){return void 0===t&&(t={}),Nn?function(t){var e=void 0===t?{}:t,n=e.preventDefault,r=void 0===n||n,i=e.scale,o=void 0===i?1:i,a=e.rotate,s=void 0===a?0:a;return Je(function(t){var e=t.update,n={touches:Dn,scale:o,rotate:s},i=0,a=0,u=Dn.length>1;if(u){var c=Dn[0],l=Dn[1];i=jt(c,l),a=Ot(c,l)}var h=function(){if(u){var t=Dn[0],r=Dn[1],c=jt(t,r),l=Ot(t,r);n.scale=o*(c/i),n.rotate=s+(l-a)}e(n)},f=In(document,"touchmove",{passive:!r}).start(function(t){(r||t.touches.length>1)&&t.preventDefault(),nt.update(h)});return Nn&&nt.update(h),{stop:function(){$.update(h),f.stop()}}})}(t).pipe(function(t){return t.touches},Fn):function(t){var e=(void 0===t?{}:t).preventDefault,n=void 0===e||e;return Je(function(t){var e=t.update,r=function(){return e(Rn)},i=In(document,"mousemove").start(function(t){n&&t.preventDefault(),nt.update(r)});return On&&nt.update(r),{stop:function(){$.update(r),i.stop()}}})}(t)},Vn=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return Je(function(e){var n,r=e.update,i=e.complete,o=0;return function e(){n=t[o].start({complete:function(){++o>=t.length?i():e()},update:r})}(),{stop:function(){return n&&n.stop()}}})},Bn=function(t){return Je(function(e){var n=e.complete,r=setTimeout(n,t);return{stop:function(){return clearTimeout(r)}}})},Un=Object.freeze({applyOffset:Mt,clamp:Lt,conditional:function(t,e){return function(n){return t(n)?e(n):n}},interpolate:function(t,e,n){var r=void 0===n?{}:n,i=r.clamp,o=void 0===i||i,a=r.ease,s=r.mixer,u=t.length;L(u===e.length,"Both input and output ranges must be the same length"),L(!a||!Array.isArray(a)||a.length===u-1,"Array of easing functions must be of length `input.length - 1`, as it applies to the transitions **between** the defined values."),t[0]>t[u-1]&&(t=[].concat(t),e=[].concat(e),t.reverse(),e.reverse());var c=ee(e,a,s),l=2===u?function(t,e){var n=t[0],r=t[1],i=e[0];return function(t){return i(qt(n,r,t))}}(t,c):function(t,e){var n=t.length,r=n-1;return function(i){var o=0,a=!1;if(i<=t[0]?a=!0:i>=t[r]&&(o=r-1,a=!0),!a){for(var s=1;s<n&&!(t[s]>i||s===r);s++);o=s-1}var u=qt(t[o],t[o+1],i);return e[o](u)}}(t,c);return o?$t(Lt(t[0],t[u-1]),l):l},blendArray:Jt,blendColor:Yt,pipe:$t,smooth:function(t){void 0===t&&(t=50);var e=0,n=0;return function(r){var i=et().timestamp,o=i!==n?i-n:0,a=o?ne(e,r,o,t):e;return n=i,e=a,a}},snap:function(t){if("number"===typeof t)return function(e){return Math.round(e/t)*t};var e=0,n=t.length;return function(r){var i=Math.abs(t[0]-r);for(e=1;e<n;e++){var o=t[e],a=Math.abs(o-r);if(0===a)return o;if(a>i)return t[e-1];if(e===n-1)return o;i=a}}},generateStaticSpring:ie,nonlinearSpring:ae,linearSpring:oe,wrap:ce,appendUnit:function(t){return function(e){return""+e+t}},steps:function(t,e,n){return void 0===e&&(e=0),void 0===n&&(n=1),function(r){var i=qt(e,n,r);return Gt(e,n,tn(t,i))}},transformMap:function(t){return function(e){var n=Object(r.__assign)({},e);for(var i in t)if(t.hasOwnProperty(i)){var o=t[i];n[i]=o(e[i])}return n}}}),jn=function(t){t.transition,t.flip,t.delay,t.delayChildren,t.staggerChildren,t.staggerDirection,t.afterChildren,t.beforeChildren,t.preTransition,t.applyAtStart,t.applyAtEnd;return Object(r.__rest)(t,["transition","flip","delay","delayChildren","staggerChildren","staggerDirection","afterChildren","beforeChildren","preTransition","applyAtStart","applyAtEnd"])},qn=function(t,e){return"function"===typeof t?t(e):t},Gn=function(t,e,n,r){return t&&void 0!==t[e]?qn(t[e],r):n},Wn=function(t,e,n,r,i){return L("object"===typeof t,"applyAtStart and applyAtEnd must be of type object"),Object.keys(t).forEach(function(o){var a=qn(t[o],n);e.has(o)?r(e.get(o),a):i(o,a,n)})},zn=function(t){var e=t.state,n=t.poses,i=t.startAction,o=t.stopAction,a=t.getInstantTransition,s=t.addActionDelay,u=t.getTransitionProps,c=t.resolveTarget,l=t.transformPose,h=t.posePriority,f=t.convertTransitionDefinition,p=t.setValue,d=t.setValueNative,m=t.forceRender;return function(t,y,g){void 0===y&&(y={}),void 0===g&&(g=!0);var v=e.children,b=e.values,_=e.props,w=e.activeActions,E=e.activePoses,S=y.delay,T=void 0===S?0:S,C=v.size,k=Object(r.__assign)({},_,y),x=n[t],I=function(){return C&&g?function(t,e,n,r){var i=[],o=Gn(n,"delayChildren",0,r),a=Gn(n,"staggerChildren",0,r),s=Gn(n,"staggerDirection",1,r),u=(t.size-1)*a,c=1===s?function(t){return t*a}:function(t){return u-t*a};return Array.from(t).forEach(function(t,n){i.push(t.set(e,{delay:o+c(n)}))}),i}(v,t,x,k):[]},A=function(){if(!x)return[];var n=x.applyAtStart;n&&(Wn(n,b,k,p,d),m&&m(k)),l&&(x=l(x,t,e));var y=x.preTransition,g=x.transition,v=x.applyAtEnd;y&&y(k);var _=Object.keys(jn(x)).map(function(e){var n=E.has(e)?E.get(e):(E.set(e,[]),E.get(e)),l=n.indexOf(t);-1!==l&&n.splice(l,1);var p=h?h.indexOf(t):0,d=p<=0?0:function(t,e,n){for(var r=0,i=n-1;i>=0;i--){var o=t.indexOf(e[i]);if(-1!==o){r=o+1;break}}return r}(n,h,p);return n.splice(d,0,t),0===d?new Promise(function(t){var n=b.get(e),l=Object(r.__assign)({},k,{key:e,value:n}),h=c(n,qn(x[e],l));w.has(e)&&o(w.get(e));var p=Object(r.__assign)({to:h},l,u(n,h,l)),d=function t(e,n,r,i,o,a){var s;if("function"===typeof e)s=t(e(i),n,r,i,o,a);else if(e[n]||e.default){var u=e[n]||e.default;s="function"===typeof u?u(i):u}else s=e;return!1===s?a(r,i):o(r,s,i)}(g,e,n,p,f,a),m=T||qn(x.delay,l);m&&(d=s(m,d)),w.set(e,i(n,d,t))}):Promise.resolve()});return v?[Promise.all(_).then(function(){Wn(v,b,k,p,d)})]:_};if(x&&C){if(qn(x.beforeChildren,k))return Promise.all(A()).then(function(){return Promise.all(I())});if(qn(x.afterChildren,k))return Promise.all(I()).then(function(){return Promise.all(A())})}return Promise.all(A().concat(I()))}},Hn=function(t){return function(t){return t.includes("scale")}(t)?1:0},Kn=function(t){var e=Array.isArray(t)?t:[t];return e.push("init"),e},Qn=function(t,e,n,r,i,o){void 0===i&&(i=Hn);var a=Kn(n).filter(Boolean).find(function(n){var r=t[n];return r&&(void 0!==r[e]||r.applyAtStart&&void 0!==r.applyAtStart[e]||r.applyAtEnd&&void 0!==r.applyAtEnd[e])});return o.set(e,[a||"init"]),a?function(t,e,n){var r=t.applyAtEnd&&void 0!==t.applyAtEnd[e]?t.applyAtEnd[e]:void 0!==t[e]?t[e]:t.applyAtStart&&void 0!==t.applyAtStart[e]?t.applyAtStart[e]:0;return qn(r,n)}(t[a],e,r):i(e,r)},Yn=function(t,e){return function(n){var r=e.poses[n];Object.keys(jn(r)).forEach(function(t,e){var n=e.userSetValues,r=e.createValue,i=e.convertValue,o=e.readValueFromSource,a=e.initialPose,s=e.poses,u=e.activePoses,c=e.props;return function(e){if(!t.has(e)){var l;if(n&&void 0!==n[e])l=i(n[e],e,c);else{var h=Qn(s,e,a,c,o,u);l=r(h,e,c)}t.set(e,l)}}}(t,e))}},Xn=function(t){var e=t.poses,n=t.passive,r=new Map;return Object.keys(e).forEach(Yn(r,t)),function(t){var e=t.setValueNative,n=t.initialPose,r=t.props,i=t.poses,o=new Set,a=function(t,n){if(t[n])for(var i in t[n])o.has(i)||(o.add(i),e(i,qn(t[n][i],r),r))};Kn(n).forEach(function(t){var e=i[t];e&&(a(e,"applyAtEnd"),a(e,"applyAtStart"))})}(t),n&&Object.keys(n).forEach(function(t,e){var n=e.passive,r=e.ancestorValues,i=e.createValue,o=e.readValue,a=e.props;return function(e){var s=n[e],u=s[0],c=s[1],l=s[2],h=l&&r.length?function(t,e,n){if(!0===e)return n[0]&&n[0].values.get(t);var r=n.find(function(t){return t.label===e});return r&&r.values.get(t)}(u,l,r):!!t.has(u)&&t.get(u);if(h){var f=i(o(h),e,a,{passiveParentKey:u,passiveParent:h,passiveProps:c});t.set(e,f)}}}(r,t)),r},$n=function(t,e){return Object.keys(t).forEach(function(n){var i=t[n];L("object"===typeof i,"Pose '"+n+"' is of invalid type. All poses should be objects."),t[n]=void 0!==i.transition?i:function(t,e,n){return Object(r.__assign)({},t,{transition:n.has(e)?n.get(e):n.get("default")})}(i,n,e)}),t},Jn=function(t){var e=t.getDefaultProps,n=t.defaultTransitions,i=t.bindOnChange,o=t.startAction,a=t.stopAction,s=t.readValue,u=t.readValueFromSource,c=t.resolveTarget,l=t.setValue,h=t.setValueNative,f=t.createValue,p=t.convertValue,d=t.getInstantTransition,m=t.getTransitionProps,y=t.addActionDelay,g=t.selectValueToRead,v=t.convertTransitionDefinition,b=t.transformPose,_=t.posePriority,w=t.forceRender,E=t.extendAPI;return function(t){var S=t.parentValues,T=t.ancestorValues,C=void 0===T?[]:T;S&&C.unshift({values:S});var k=new Map,x=new Map,I=new Set,A=$n(function(t){return t.label,t.props,t.values,t.parentValues,t.ancestorValues,t.onChange,t.passive,t.initialPose,Object(r.__rest)(t,["label","props","values","parentValues","ancestorValues","onChange","passive","initialPose"])}(t),n),P=t.props,D=void 0===P?{}:P;e&&(D=Object(r.__assign)({},e(t),D));var N=t.passive,R=t.values,O=t.initialPose,M=void 0===O?"init":O,F=Xn({poses:A,passive:N,ancestorValues:C,readValue:s,setValueNative:h,createValue:f,convertValue:p,readValueFromSource:u,userSetValues:R,initialPose:M,activePoses:x,props:D}),L={activeActions:k,activePoses:x,children:I,props:D,values:F},V=t.onChange;V&&Object.keys(V).forEach(i(F,V));var B=zn({state:L,poses:A,getInstantTransition:d,getTransitionProps:m,convertTransitionDefinition:v,setValue:l,setValueNative:h,startAction:o,stopAction:a,resolveTarget:c,addActionDelay:y,transformPose:b,posePriority:_,forceRender:w});return E({set:B,unset:function(t,e){var n=[];x.forEach(function(e){var r=e.indexOf(t);if(-1!==r){var i=e[0];e.splice(r,1);var o=e[0];o!==i&&-1===n.indexOf(o)&&n.push(o)}});var r,i=n.sort((r=_,function(t,e){var n=r.indexOf(t),i=r.indexOf(e);return-1===n&&-1!==i?-1:-1!==n&&-1===i?1:n-i})).map(function(t){return B(t,e,!1)});return I.forEach(function(e){return i.push(e.unset(t))}),Promise.all(i)},get:function(t){return t?g(F.get(t)):function(t,e){var n={};return t.forEach(function(t,r){return n[r]=e(t)}),n}(F,g)},has:function(t){return!!A[t]},setProps:function(t){return L.props=Object(r.__assign)({},L.props,t)},_addChild:function(e,n){var i=n(Object(r.__assign)({initialPose:M},e,{ancestorValues:[{label:t.label,values:F}].concat(C)}));return I.add(i),i},removeChild:function(t){return I.delete(t)},clearChildren:function(){I.forEach(function(t){return t.destroy()}),I.clear()},destroy:function(){k.forEach(a),I.forEach(function(t){return t.destroy()})}},L,t)}},Zn=function(){return(Zn=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function tr(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&(n[r[i]]=t[r[i]])}return n}!function(t){t.width="width",t.height="height",t.left="left",t.right="right",t.top="top",t.bottom="bottom"}(Mn||(Mn={}));var er=function(t,e){return"function"===typeof t?t(e):t},nr=Un.interpolate,rr=function(t){return function(e){var n;return function(t){void 0===t&&(t={});var e=t.x,n=t.y,i=Object(r.__rest)(t,["x","y"]);if(void 0!==e||void 0!==n){var o=Mt(e||0),a=Mt(n||0),s={x:0,y:0};return Ln(i).pipe(function(t){return s.x=o(t.x),s.y=a(t.y),s})}return Ln(i)}((n={},n[t]="string"===typeof e?parseFloat(e):e,n)).pipe(function(e){return e[t]})}},ir=rr("x"),or=rr("y"),ar=function(t,e,n,r){return function(i){var o=i.from,a=i.type,s=i.dimensions,u=i.dragBounds,c=t(s.measurementAsPixels(r,o,a)),l=[];if(u){var h=er(u,i);void 0!==h[e]&&l.push(function(t){return Math.max(t,s.measurementAsPixels(r,h[e],a))}),void 0!==h[n]&&l.push(function(t){return Math.min(t,s.measurementAsPixels(r,h[n],a))})}return a===m&&l.push(nr([0,s.get(r)],[0,100],{clamp:!1}),function(t){return t+"%"}),l.length?c.pipe.apply(c,l):c}},sr=function(t){return Je(function(e){var n=e.update,r=e.complete;n(t),r()})},ur=function(t){var e=t.from,n=t.velocity,r=t.to;return wn({from:e,to:r,velocity:n,stiffness:500,damping:25,restDelta:.5,restSpeed:10})},cr=function(t){var e=t.from,n=t.velocity,r=t.to;return wn({from:e,to:r,velocity:n,stiffness:700,damping:0===r?100:35})},lr={x:ur,y:ur,z:ur,rotate:ur,rotateX:ur,rotateY:ur,rotateZ:ur,scaleX:cr,scaleY:cr,scale:cr,opacity:function(t){var e=t.from,n=t.to;return Tn({from:e,to:n,ease:st})},default:Tn},hr=Zn({},lr,{x:ar(ir,"left","right",Mn.width),y:ar(or,"top","bottom",Mn.height)}),fr=function(t){var e=t.from;return sr(e)},pr=new Map([["default",lr],["drag",hr],["dragEnd",Zn({},lr,{x:fr,y:fr})]]),dr={tween:Tn,spring:wn,decay:_n,keyframes:kn,physics:xn},mr={linear:st,easeIn:ut,easeOut:ct,easeInOut:lt,circIn:ht,circOut:ft,circInOut:pt,backIn:dt,backOut:mt,backInOut:yt,anticipate:gt},yr=[l,d,m,y,v,g,{test:function(t){return"auto"===t},parse:function(t){return t}}],gr=function(t){return yr.find(function(t){return function(e){return e.test(t)}}(t))},vr=function(t,e){return void 0===t&&(t=0),Vn(Bn(t),e)},br=function(t){var e=t.transformPose,n=t.addListenerToValue,r=t.extendAPI,i=t.readValueFromSource,o=t.posePriority,a=t.setValueNative;return Jn({bindOnChange:function(t,e){return function(n){t.has(n)&&t.get(n).raw.subscribe(e[n])}},readValue:function(t){return t.raw.get()},setValue:function(t,e){return t.raw.update(e)},createValue:function(t,e,r,i){var o=r.elementStyler,a=void 0===i?{}:i,s=a.passiveParent,u=a.passiveProps,c=s?function(t,e,n){var r=on(n(t));return e.raw.subscribe(function(t){return r.update(n(t))}),{raw:r}}(t,s,u):function(t){var e=gr(t);return{raw:on(t),type:e}}(t);return c.raw.subscribe(n(e,o)),c},convertValue:function(t,e,r){var i=r.elementStyler;return t.subscribe(n(e,i)),{raw:t,type:gr(t.get())}},getTransitionProps:function(t,e){var n=t.raw,r=t.type;return{from:n.get(),velocity:n.getVelocity(),to:e,type:r}},resolveTarget:function(t,e){return e},selectValueToRead:function(t){return t.raw},startAction:function(t,e,n){var r=t.raw,i={update:function(t){return r.update(t)},complete:n};return e.start(i)},stopAction:function(t){return t.stop()},getInstantTransition:function(t,e){var n=e.to;return sr(n)},convertTransitionDefinition:function(t,e,n){if(function(t){return"undefined"!==typeof t.start}(e))return e;var r=e.delay,i=e.min,o=e.max,a=e.round,s=function(t,e,n){var r,i=n.from,o=n.to,a=n.velocity,s=e.type,u=void 0===s?"tween":s,c=e.ease,l=tr(e,["type","ease"]);L(void 0!==dr[u],"Invalid transition type '"+u+"'. Valid transition types are: tween, spring, decay, physics and keyframes."),"tween"===u&&"function"!==typeof c&&("string"===typeof c?(L(void 0!==mr[c],"Invalid easing type '"+c+"'. popmotion.io/pose/api/config"),r=mr[c]):Array.isArray(c)&&"number"===typeof c[0]&&(L(4===c.length,"Cubic bezier arrays must contain four numerical values."),r=Pt(c[0],c[1],c[2],c[3])));r=r||c;var h="keyframes"!==u?{from:i,to:o,velocity:a,ease:r}:{ease:r};return dr[u](Zn({},h,l))}(0,tr(e,["delay","min","max","round"]),n),u=[];return r&&(s=vr(r,s)),void 0!==i&&u.push(function(t){return Math.max(t,i)}),void 0!==o&&u.push(function(t){return Math.min(t,o)}),a&&u.push(Math.round),u.length?s.pipe.apply(s,u):s},setValueNative:a,addActionDelay:vr,defaultTransitions:pr,transformPose:e,readValueFromSource:i,posePriority:o,extendAPI:r})},_r=function(t){var e=!1,n={width:0,height:0,top:0,left:0,bottom:0,right:0};return{get:function(t){return t?n[t]:n},measure:function(){return n=t.getBoundingClientRect(),e=!0,n},measurementAsPixels:function(t,e,r){return r===m?("string"===typeof e?parseFloat(e):e)/100*n[t]:e},has:function(){return e}}},wr=function(t){var e=t.startEvents,n=t.endEvents,r=t.startPose,i=t.endPose,o=t.startCallback,a=t.endCallback,s=t.useDocumentToEnd,u=t.preventScroll;return function(t,c,l,h){var f=r+"Start",p=r+"End",d=r+"Move";if(u){var m=In(t,"touchmove",{passive:!1}).start(function(t){t.preventDefault()});c.set(d,m)}var y=In(t,e).start(function(e){l.unset(i),l.set(r),o&&h[o]&&h[o](e);var u=In(s?document.documentElement:t,n+(s?" mouseenter":"")).start(function(t){s&&"mouseenter"===t.type&&1===t.buttons||(c.get(p).stop(),l.unset(r),l.set(i),a&&h[a]&&h[a](t))});c.set(p,u)});c.set(f,y)}},Er={draggable:wr({startEvents:"mousedown touchstart",endEvents:"mouseup touchend",startPose:"drag",endPose:"dragEnd",startCallback:"onDragStart",endCallback:"onDragEnd",useDocumentToEnd:!0,preventScroll:!0}),hoverable:wr({startEvents:"mouseenter",endEvents:"mouseleave",startPose:"hover",endPose:"hoverEnd"}),focusable:wr({startEvents:"focus",endEvents:"blur",startPose:"focus",endPose:"blur"}),pressable:wr({startEvents:"mousedown touchstart",endEvents:"mouseup touchend",startPose:"press",endPose:"pressEnd",startCallback:"onPressStart",endCallback:"onPressEnd",useDocumentToEnd:!0})},Sr=Object.keys(Er),Tr=function(t){var e=t.top,n=t.right,r=t.bottom;return{x:(t.left+n)/2,y:(e+r)/2}},Cr=["width","height","top","left","bottom","right"],kr=new Set(Cr),xr=function(t){return kr.has(t)},Ir=function(t,e,n){var r=t.values,i=t.props;if(r.has(e)){var o=r.get(e).raw;o.update(n),o.update(n)}else r.set(e,{raw:on(n,function(t){return i.elementStyler.set(e,t)})})},Ar=function(t,e){var n=t.props,r=n.dimensions,i=n.element,o=n.elementStyler;if(!r.has())return{};var a=r.get(),s=function(t){var e=t.style.transform;t.style.transform="";var n=t.getBoundingClientRect();return t.style.transform=e,n}(i),u=a.left===s.left?0:a.right===s.right?"100%":"50%",c=a.top===s.top?0:a.bottom===s.bottom?"100%":"50%";o.set({originX:u,originY:c}),a.width!==s.width&&(Ir(t,"scaleX",a.width/s.width),e.scaleX=1),a.height!==s.height&&(Ir(t,"scaleY",a.height/s.height),e.scaleY=1);var l=Tr(a),h=Tr(s);return"50%"===u&&(Ir(t,"x",l.x-h.x),e.x=0),"50%"===c&&(Ir(t,"y",l.y-h.y),e.y=0),o.render(),e},Pr=function(t,e){return n=e,Object.keys(n).some(xr)?function(t,e){var n=t.props,r=n.dimensions,i=n.elementStyler;r.measure();e.width,e.height,e.top,e.left,e.bottom,e.right,e.position;var o=tr(e,["width","height","top","left","bottom","right","position"]),a=Cr.concat("position").reduce(function(n,r){return void 0!==e[r]&&(n[r]=er(e[r],t.props)),n},{});return i.set(a).render(),Ar(t,o)}(t,e):Ar(t,e);var n},Dr=function(t,e){return parseFloat(t.split(", ")[e])},Nr=function(t,e){return function(n,r,i){var o=i.transform;if("none"===o)return 0;var a=o.match(/^matrix3d\((.+)\)$/);return a?Dr(a[1],e):Dr(o.match(/^matrix\((.+)\)$/)[1],t)}},Rr={width:function(t,e){var n=e.width;return n},height:function(t,e){var n=e.height;return n},top:function(t,e,n){var r=n.top;return parseFloat(r)},left:function(t,e,n){var r=n.left;return parseFloat(r)},bottom:function(t,e,n){var r=e.height,i=n.top;return parseFloat(i)+r},right:function(t,e,n){var r=e.width,i=n.left;return parseFloat(i)+r},x:Nr(4,13),y:Nr(5,14)},Or=function(t){return void 0!==Rr[t]},Mr=function(t){return function(e){return e.elementStyler.get(t)}},Fr=function(t,e){var n=e.onDragStart,r=e.onDragEnd,i=e.onPressStart,o=e.onPressEnd,a=e.draggable,s=e.hoverable,u=e.focusable,c=e.pressable,l=e.dragBounds,h=tr(e,["onDragStart","onDragEnd","onPressStart","onPressEnd","draggable","hoverable","focusable","pressable","dragBounds"]),f=Zn({flip:{}},h,{props:Zn({},h.props,{onDragStart:n,onDragEnd:r,onPressStart:i,onPressEnd:o,dragBounds:l,draggable:a,hoverable:s,focusable:u,pressable:c,element:t,elementStyler:Ke(t,{preparseOutput:!1}),dimensions:_r(t)})});if(a){var p=function(t){var e={preTransition:function(t){return t.dimensions.measure()}},n={};return!0!==t&&"x"!==t||(e.x=n.x=Mr("x")),!0!==t&&"y"!==t||(e.y=n.y=Mr("y")),{drag:e,dragEnd:n}}(a),d=p.drag,m=p.dragEnd;f.drag=Zn({},d,f.drag),f.dragEnd=Zn({},m,f.dragEnd)}return f},Lr=br({posePriority:["drag","press","focus","hover"],transformPose:function(t,e,n){var r,i=t.flip,o=tr(t,["flip"]);return function(t,e,n){return n.props.element instanceof HTMLElement&&(!0===t||"flip"===e)}(i,e,n)?Pr(n,o):(r=o,Object.keys(r).some(Or)?function(t,e){var n=t.values,r=t.props,i=r.element,o=r.elementStyler,a=Object.keys(e).filter(Or),s=[],u=getComputedStyle(i),c=!1;if(a.forEach(function(i){var o=n.get(i),a=gr(o.raw.get()),u=er(e[i],r);a!==gr(u)&&(s.push(i),c||(c=!0,e.applyAtEnd=e.applyAtEnd?Zn({},e.applyAtEnd):{}),e.applyAtEnd[i]=e.applyAtEnd[i]||e[i],Ir(t,i,u))}),!s.length)return e;var l=i.getBoundingClientRect(),h={top:u.top,left:u.left,bottom:u.bottom,right:u.right,transform:u.transform};o.render();var f=i.getBoundingClientRect();return s.forEach(function(n){Ir(t,n,Rr[n](i,l,h)),e[n]=Rr[n](i,f,u)}),o.render(),e}(n,o):o)},forceRender:function(t){t.elementStyler.render()},addListenerToValue:function(t,e){return function(n){return e.set(t,n)}},readValueFromSource:function(t,e){var n=e.elementStyler,r=e.dragBounds,i=n.get(t);if(r&&("x"===t||"y"===t)){var o="x"===t?r.left||r.right:r.top||r.bottom;if(o)i=gr(o).transform(i)}return isNaN(i)?i:parseFloat(i)},setValueNative:function(t,e,n){return n.elementStyler.set(t,e)},extendAPI:function(t,e,n){var r=e.props,i=e.activeActions,o=r.dimensions.measure,a=Zn({},t,{addChild:function(e,n){return t._addChild(Fr(e,n),Lr)},measure:o,flip:function(e){return e&&(o(),e()),t.set("flip")}});return r.elementStyler.render(),function(t,e,n,r){var i=r.props;Sr.forEach(function(r){i[r]&&Er[r](t,e,n,i)})}(r.element,i,a,n),a}}),Vr=function(t,e){return Lr(Fr(t,e))};var Br=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|default|defer|dir|disabled|download|draggable|encType|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|itemProp|itemScope|itemType|itemID|itemRef|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,Ur=function(t){var e={};return function(n){return void 0===e[n]&&(e[n]=t(n)),e[n]}}(function(t){return Br.test(t)||111===t.charCodeAt(0)&&110===t.charCodeAt(1)&&t.charCodeAt(2)<91});n.d(e,"Transition",function(){return ei}),n.d(e,"PoseGroup",function(){return ni});var jr=Object(i.createContext)({}),qr=jr.Consumer,Gr=jr.Provider,Wr=function(t,e){return Array.isArray(t)?-1!==t.indexOf(e):t===e},zr=function(){return!0},Hr=function(t){t.elementType,t.poseConfig,t.onValueChange,t.innerRef,t._pose,t.pose,t.initialPose,t.poseKey,t.onPoseComplete,t.getParentPoseConfig,t.registerChild,t.onUnmount,t.getInitialPoseFromParent,t.popFromFlow,t.values,t.parentValues,t.onDragStart,t.onDragEnd,t.onPressStart,t.onPressEnd;return Object(r.__rest)(t,["elementType","poseConfig","onValueChange","innerRef","_pose","pose","initialPose","poseKey","onPoseComplete","getParentPoseConfig","registerChild","onUnmount","getInitialPoseFromParent","popFromFlow","values","parentValues","onDragStart","onDragEnd","onPressStart","onPressEnd"])},Kr=function(t){function e(e){var n=t.call(this,e)||this;n.children=new Set,n.childrenHandlers={registerChild:function(t){n.children.add(t),n.poser&&n.flushChildren()},onUnmount:function(t){return n.poser.removeChild(t)},getParentPoseConfig:function(){return n.poseConfig},getInitialPoseFromParent:function(){return n.getInitialPose()}},n.setRef=function(t){F(null===t||t instanceof Element&&void 0===n.ref,"ref must be provided to the same DOM component for the entire lifecycle of a posed component."),n.ref=t;var e=n.props.innerRef;e&&("function"===typeof e?e(t):e.current=t)},n.shouldForwardProp="string"===typeof n.props.elementType?Ur:zr;var r=n.props.poseConfig;return n.poseConfig="function"===typeof r?r(Hr(e)):r,n}return Object(r.__extends)(e,t),e.prototype.getInitialPose=function(){var t=this.props,e=t.getInitialPoseFromParent,n=t.pose,r=t._pose,i=t.initialPose;if(i)return i;var o=e&&e(),a=(Array.isArray(o)?o:[o]).concat(n,r).filter(Boolean);return a.length>0?a:void 0},e.prototype.getFirstPose=function(){var t=this.props,e=t.initialPose,n=t.pose,r=t._pose;if(e){var i=(Array.isArray(n)?n:[n]).concat(r).filter(Boolean);return 1===i.length?i[0]:i}},e.prototype.getSetProps=function(){var t,e=Hr(this.props);return this.props.popFromFlow&&this.ref&&this.ref instanceof HTMLElement?this.popStyle?e.style=this.popStyle:(e.style=Object(r.__assign)({},e.style,{position:"absolute",top:(t=this.ref).offsetTop,left:t.offsetLeft,width:t.offsetWidth,height:t.offsetHeight}),this.popStyle=e.style):this.popStyle=null,e},e.prototype.componentDidMount=function(){var t=this;L(this.ref instanceof Element,"No valid DOM ref found. If you're converting an existing component via posed(Component), you must ensure you're passing the ref to the host DOM node via the React.forwardRef function.");var e,n=this.props,i=n.onValueChange,o=n.registerChild,a=n.values,s=n.parentValues,u=n.onDragStart,c=n.onDragEnd,l=n.onPressStart,h=n.onPressEnd,f=Object(r.__assign)({},this.poseConfig,{initialPose:this.getInitialPose(),values:a||this.poseConfig.values,parentValues:s?(e=s,Object.keys(e).reduce(function(t,n){return t.set(n,{raw:e[n]}),t},new Map)):void 0,props:this.getSetProps(),onDragStart:u,onDragEnd:c,onPressStart:l,onPressEnd:h,onChange:i});o?o({element:this.ref,poseConfig:f,onRegistered:function(e){return t.initPoser(e)}}):this.initPoser(Vr(this.ref,f))},e.prototype.getSnapshotBeforeUpdate=function(){var t=this.props,e=t.pose,n=t._pose;return(Wr(e,"flip")||Wr(n,"flip"))&&this.poser.measure(),null},e.prototype.componentDidUpdate=function(t){var e=this.props,n=e.pose,r=e._pose,i=e.poseKey;this.poser.setProps(this.getSetProps()),(i!==t.poseKey||function(t,e){if(t===e)return!1;var n=Array.isArray(t),r=Array.isArray(e);if(n!==r||!n&&!r)return!0;if(n&&r){var i=t.length;if(i!==e.length)return!0;for(var o=0;o<i;o++)if(t[o]!==e[o])return!0}return!1}(t.pose,n)||"flip"===n)&&this.setPose(n),r===t._pose&&"flip"!==r||this.setPose(r)},e.prototype.componentWillUnmount=function(){if(this.poser){var t=this.props.onUnmount;t&&t(this.poser),this.poser.destroy()}},e.prototype.initPoser=function(t){this.poser=t,this.flushChildren();var e=this.getFirstPose();e&&this.setPose(e)},e.prototype.setPose=function(t){var e=this,n=this.props.onPoseComplete,r=Array.isArray(t)?t:[t];Promise.all(r.map(function(t){return t&&e.poser.set(t)})).then(function(){return n&&n(t)})},e.prototype.flushChildren=function(){var t=this;this.children.forEach(function(e){var n=e.element,r=e.poseConfig;return(0,e.onRegistered)(t.poser.addChild(n,r))}),this.children.clear()},e.prototype.render=function(){var t,e=this.props.elementType;return o.a.createElement(Gr,{value:this.childrenHandlers},Object(i.createElement)(e,(t=this.shouldForwardProp,[this.getSetProps(),{ref:this.setRef}].reduce(function(e,n){for(var r in n)t(r)&&(e[r]=n[r]);return e},{}))))},e}(i.PureComponent),Qr=new Map,Yr=function(t){var e=function(e){return void 0===e&&(e={}),Object(i.forwardRef)(function(n,i){var a=n.withParent,s=void 0===a||a,u=Object(r.__rest)(n,["withParent"]);return F(void 0===u.innerRef,"innerRef is deprecated. Please use ref instead."),!s||u.parentValues?o.a.createElement(Kr,Object(r.__assign)({poseConfig:e,innerRef:i,elementType:t},u)):o.a.createElement(qr,null,function(n){return o.a.createElement(Kr,Object(r.__assign)({poseConfig:e,elementType:t,innerRef:i},u,n))})})};return Qr.set(t,e),e},Xr=function(t){return e=t,Qr.has(e)?Qr.get(e):Yr(e);var e};["a","article","aside","audio","b","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dialog","div","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","i","iframe","img","input","label","legend","li","nav","object","ol","option","p","param","picture","pre","progress","q","section","select","span","strong","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","ul","video","circle","clipPath","defs","ellipse","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"].reduce(function(t,e){return t[e]=Yr(e),t},Xr);var $r=function(t){return L(t&&null!==t.key,"Every child of Transition must be given a unique key"),("number"===typeof t.key?t.key.toString():t.key).replace(".$","")},Jr=function(t,e){return Object(i.createElement)(t.type,Object(r.__assign)({key:t.key,ref:t.ref},e,t.props))},Zr=function(t,e){var n=function(t,e){var n=e.displayedChildren,o=e.finishedLeaving,a=e.hasInitialized,s=e.indexedChildren,u=e.scheduleChildRemoval,c=t.children,l=t.preEnterPose,h=t.enterPose,f=t.exitPose,p=t.animateOnMount,d=(t.enterAfterExit,t.flipMove),m=(t.onRest,Object(r.__rest)(t,["children","preEnterPose","enterPose","exitPose","animateOnMount","enterAfterExit","flipMove","onRest"])),y=ti(c),g={displayedChildren:[]};var v=n.map($r),b=y.map($r),_=0!==Object.keys(m).length,w=new Set(b.filter(function(t){return o.hasOwnProperty(t)||-1===v.indexOf(t)}));w.forEach(function(t){return delete o[t]});var E=[],S={};v.forEach(function(t){if(!w.has(t)){var e=o.hasOwnProperty(t);(e||-1===b.indexOf(t))&&(E.push(t),e||(o[t]=!1,S[t]=!0))}});var T=new Set(v.filter(function(t,e){return!w.has(t)||-1===E.indexOf(t)}));return y.forEach(function(t){var e={};w.has(t.key)?((a||p)&&(e.initialPose=l),e._pose=h):T.has(t.key)&&d?e._pose=[h,"flip"]:e._pose=h;var n=Object(i.cloneElement)(t,e);s[t.key]=n,g.displayedChildren.push(_?Jr(n,m):n)}),E.forEach(function(t){var e=s[t],n=S[t]?Object(i.cloneElement)(e,{_pose:f,onPoseComplete:function(n){n===f&&u(t);var r=e.props.onPoseComplete;r&&r(n)},popFromFlow:d}):e,r=v.indexOf(t);s[e.key]=n,g.displayedChildren.splice(r,0,_?Jr(n,m):n)}),g}(t,e);return n.hasInitialized=!0,n},ti=function(t){var e=[];return i.Children.forEach(t,function(t){return t&&e.push(t)}),e},ei=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.state={displayedChildren:[],finishedLeaving:{},hasInitialized:!1,indexedChildren:{},scheduleChildRemoval:function(t){return e.removeChild(t)}},e}return Object(r.__extends)(e,t),e.prototype.removeChild=function(t){var e=this.state,n=e.displayedChildren,i=e.finishedLeaving,o=this.props,a=o.enterAfterExit,s=o.onRest;if(i.hasOwnProperty(t)&&(i[t]=!0,Object.keys(i).every(function(t){return i[t]}))){var u=n.filter(function(t){return!i.hasOwnProperty(t.key)}),c=a?Object(r.__assign)({finishedLeaving:{}},Zr(Object(r.__assign)({},this.props,{enterAfterExit:!1}),Object(r.__assign)({},this.state,{displayedChildren:u}))):{finishedLeaving:{},displayedChildren:u};this.setState(c,s)}},e.prototype.shouldComponentUpdate=function(t,e){return this.state!==e},e.prototype.render=function(){return this.state.displayedChildren},e.defaultProps={flipMove:!1,enterAfterExit:!1,preEnterPose:"exit",enterPose:"enter",exitPose:"exit"},e.getDerivedStateFromProps=Zr,e}(i.Component),ni=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(r.__extends)(e,t),e.prototype.render=function(){return Object(i.createElement)(ei,Object(r.__assign)({},this.props))},e.defaultProps={flipMove:!0},e}(i.Component);e.default=Xr}]]);
//# sourceMappingURL=2.cbc0ddfa.chunk.js.map